[ { "title": "iOS Swfit UIKit UICollectionView", "url": "/posts/iOS-UiKit-UICollectionView/", "categories": "Swift, UIKit", "tags": "iOS, UIKit, UITabBarController, UITabBar", "date": "2023-02-27 21:30:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” iOS UIKit UICollectionViewì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ¦‹ UICollectionView ë°ì´í„° í•­ëª©ì˜ ì •ë ¬ëœ Collectionì„ ê´€ë¦¬í•˜ê³ , Cutomí•œ Layoutì„ ì‚¬ìš©í•´ í‘œì‹œí•˜ëŠ” ê°ì²´ List, Slide ë“± ë‹¤ì–‘í•œ í˜•íƒœë¡œ í‘œí˜„ ê°€ëŠ¥ğŸŒ¸ UICollectionView êµ¬ì„± ìš”ì†Œ Supplementary View, Cell, Decoration Viewë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒ Supplementary View ğŸ‘‰ Sectionì— ëŒ€í•œ ì •ë³´ë¥¼ í‘œì‹œ (Header, Footerë¼ê³  ìƒê°í•˜ë©´ ë¨, í•„ìˆ˜ êµ¬í˜„ x) Cell ğŸ‘‰ CollectionViewì˜ Content í‘œì‹œ Decoration View ğŸ‘‰ CollectionViewì— ëŒ€í•œ ë°°ê²½ì„ ê¾¸ë°€ ë•Œ ì‚¬ìš©ğŸŒ¸ UICollectionViewFlowLayout 1ï¸âƒ£ Flow Layout ê°ì²´ë¥¼ ì‘ì„±í•˜ê³  Collection Viewì— ì´ë¥¼ í• ë‹¹í•œë‹¤. 2ï¸âƒ£ Cellì˜ width, heightë¥¼ ì •í•œë‹¤. 3ï¸âƒ£ í•„ìš”í•œ ê²½ìš° Cellë“¤ ê°„ì˜ ì¢Œìš° ìµœì†Œ ê°„ê²©, ìœ„ì•„ë˜ ìµœì†Œ ê°„ê²©ì„ ì„¤ì •í•œë‹¤. 4ï¸âƒ£ Sectionì— Headerì™€ Footerê°€ ìˆë‹¤ë©´ ì´ê²ƒë“¤ì˜ í¬ê¸°ë¥¼ ì§€ì •í•œë‹¤. 5ï¸âƒ£ Layoutì˜ Scroll ë°©í–¥ì„ ì„¤ì •í•œë‹¤.ğŸŒ¸ UICollectionViewDataSource Collection Viewë¡œ ë³´ì—¬ì§€ëŠ” Contentë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ Collection Viewì˜ Content(ë°ì´í„°)ë¥¼ ê´€ë¦¬í•˜ê³  í•´ë‹¹ Contentë¥¼ í‘œí˜„í•˜ëŠ” ë° í•„ìš”í•œ View ì°¸ê³  ğŸ‘‡ func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int ğŸ‘‰ ì§€ì •ëœ ì„¹ì…˜ì— í‘œì‹œí•  í•­ëª©ì˜ ê°œìˆ˜ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell ğŸ‘‰ ì»¬ë ‰ì…˜ë·°ì˜ ì§€ì •ëœ ìœ„ì¹˜ì— í‘œì‹œí•  ì…€ì„ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ. optional func numberOfSections(in collectionView: UICollectionView) -&gt; Int ğŸ‘‰ ì»¬ë ‰ì…˜ë·°ì˜ ì„¹ì…˜ì˜ ê°œìˆ˜ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ. ì´ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì§€ ì•Šìœ¼ë©´ ì„¹ì…˜ ê°œìˆ˜ ê¸°ë³¸ ê°’ì€ 1. optional func collectionView(_ collectionView: UICollectionView, canMoveItemAt indexPath: IndexPath) -&gt; Bool ğŸ‘‰ ì§€ì •ëœ ìœ„ì¹˜ì˜ í•­ëª©ì„ ì»¬ë ‰ì…˜ë·°ì˜ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ. optional func collectionView(_ collectionView: UICollectionView, moveItemAt sourceIndexPath: IndexPath, to destinationIndexPath: IndexPath) ğŸ‘‰ ì§€ì •ëœ ìœ„ì¹˜ì˜ í•­ëª©ì„ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™í•˜ë„ë¡ ì§€ì‹œí•˜ëŠ” ë©”ì„œë“œ ğŸŒ¸ UICollectionViewDelegate Contentì˜ í‘œí˜„, ì‚¬ìš©ìì™€ì˜ ìƒí˜¸ì‘ìš©ê³¼ ê´€ë ¨ëœ ê²ƒë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ ì…€ì˜ ì„ íƒ ë° ê°•ì¡°í‘œì‹œë¥¼ ê´€ë¦¬í•˜ê³  í•´ë‹¹ ì…€ì— ëŒ€í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì •ì˜ í•„ìˆ˜ë¡œ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ìƒê´€ì—†ìŒ ì°¸ê³  ğŸ‘‡ optional func collectionView(_ collectionView: UICollectionView, shouldSelectItemAt indexPath: IndexPath) -&gt; Bool ğŸ‘‰ ì§€ì •ëœ ì…€ì´ ì‚¬ìš©ìì— ì˜í•´ ì„ íƒë  ìˆ˜ ìˆëŠ”ì§€ ë¬»ëŠ” ë©”ì„œë“œ. optional func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) ğŸ‘‰ ì§€ì •ëœ ì…€ì´ ì„ íƒë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ë©”ì„œë“œ. optional func collectionView(_ collectionView: UICollectionView, shouldDeselectItemAt indexPath: IndexPath) -&gt; Bool ğŸ‘‰ ì§€ì •ëœ ì…€ì˜ ì„ íƒì´ í•´ì œë  ìˆ˜ ìˆëŠ”ì§€ ë¬»ëŠ” ë©”ì„œë“œ. ì„ íƒ í•´ì œê°€ ê°€ëŠ¥í•œ ê²½ìš° trueë¡œ ì‘ë‹µí•˜ë©°, ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ falseë¡œ ì‘ë‹µ. optional func collectionView(_ collectionView: UICollectionView, didDeselectItemAt indexPath: IndexPath) ğŸ‘‰ ì§€ì •ëœ ì…€ì˜ ì„ íƒì´ í•´ì œë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ë©”ì„œë“œ. optional func collectionView(_ collectionView: UICollectionView, shouldHighlightItemAt indexPath: IndexPath) -&gt; Bool ğŸ‘‰ ì§€ì •ëœ ì…€ì´ ê°•ì¡°ë  ìˆ˜ ìˆëŠ”ì§€ ë¬»ëŠ” ë©”ì„œë“œ. ê°•ì¡°í•´ì•¼ í•˜ëŠ” ê²½ìš° trueë¡œ ì‘ë‹µí•˜ë©°, ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ falseë¡œ ì‘ë‹µ. optional func collectionView(_ collectionView: UICollectionView, didHighlightItemAt indexPath: IndexPath) ğŸ‘‰ ì§€ì •ëœ ì…€ì´ ê°•ì¡°ë˜ì—ˆì„ ë•Œ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œ. optional func collectionView(_ collectionView: UICollectionView, didUnhighlightItemAt indexPath: IndexPath) ğŸ‘‰ ì§€ì •ëœ ì…€ì´ ê°•ì¡°ê°€ í•´ì œë  ë•Œ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œ. " }, { "title": "iOS Swfit UIKit UITabBarController", "url": "/posts/iOS-UiKit-UITabBarController/", "categories": "Swift, UIKit", "tags": "iOS, UIKit, UITabBarController, UITabBar", "date": "2023-02-27 21:20:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” iOS UIKit UITabBarController, UITabBarì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ¦‹ UITabBarController ë‹¤ì¤‘ ì„ íƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ContainerViewControllerë¡œ ì„ íƒì— ë”°ë¼ ì–´ë–¤ ìì‹ ViewControllerë¥¼ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ê°€ ê²°ì •ë¨ UIViewControllerë¥¼ ìƒì†ë°›ìŒğŸŒ¸ UITabBar ì•±ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ í•˜ìœ„ì‘ì—…, View, ëª¨ë“œ ì‚¬ì´ì˜ ì„ íƒì„ í•  ìˆ˜ ìˆë„ë¡, TabBarì— í•˜ë‚˜ í˜¹ì€ í•˜ë‚˜ ì´ìƒì˜ ë²„íŠ¼ì„ ë³´ì—¬ì£¼ëŠ” Controll í•­ìƒ ìŠ¤í¬ë¦° í•˜ë‹¨ì— ë‚˜íƒ€ë‚¨ í•˜ë‚˜ í˜¹ì€ í•˜ë‚˜ ì´ìƒì˜ UITabBarItemìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒ Android ë¡œ ì¹˜ë©´ BottomNavigationView" }, { "title": "iOS Swfit UIKit UITableView", "url": "/posts/iOS-UiKit-TableView/", "categories": "Swift, UIKit", "tags": "iOS, UIKit, UITableView", "date": "2023-02-27 18:20:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” iOS UIKit UITableViewì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ¦‹ UITableView ì—¬ëŸ¬ ê°œì˜ Cellì„ ê°€ì§€ê³  ìˆê³ , í•˜ë‚˜ì˜ ì—´ê³¼ ì—¬ëŸ¬ ì¤„ì˜ í–‰ì„ ì§€ë‹ˆê³  ìˆìœ¼ë©°, ìˆ˜ì§ ìœ¼ë¡œë§Œ Scrollì´ ê°€ëŠ¥ Sectionì„ ì´ìš©í•´ í–‰ì„ ê·¸ë£¹í™”í•˜ì—¬ Contentë¥¼ ì¢€ ë” ì‰½ê²Œ íƒìƒ‰í•  ìˆ˜ ìˆìŒ Sectionì˜ Headerì™€ Footerì— Viewë¥¼ êµ¬ì„±í•˜ì—¬ ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŒğŸŒ¸ UITableViewDelegate TableViewì˜ ì‹œê°ì ì¸ ë¶€ë¶„ì„ ì„¤ì •í•˜ê³ , í–‰ì˜ Action ê´€ë¦¬, ì—‘ì„¸ì„œë¦¬ View ì§€ì› ê·¸ë¦¬ê³  TableViewì˜ ê°œë³„ í–‰ í¸ì§‘ì„ ë„ì™€ ì¤Œ TableViewì˜ ë™ì‘ê³¼ ì™¸ê´€ì„ ë‹´ë‹¹ View ê°€ ë³€ê²½ë˜ëŠ” ìƒí™©ì„ Delegateê°€ ë‹´ë‹¹ í–‰ì˜ ë†’ì´, í–‰ì„ ì„ íƒí•˜ë©´ ì–´ë–¤ Actionì„ í• ê±´ì§€ ì •ì˜ ì°¸ê³  ğŸ‘‡ optional func tableView(UITableView, heightForRowAt: IndexPath) ğŸ‘‰ íŠ¹ì • ìœ„ì¹˜ í–‰ì˜ ë†’ì´ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, indentationLevelForRowAt: IndexPath) ğŸ‘‰ íŠ¹ì • ìœ„ì¹˜ í–‰ì˜ ë“¤ì—¬ì“°ê¸° ìˆ˜ì¤€ì„ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, didSelectRowAt: IndexPath) ğŸ‘‰ ì§€ì •ëœ í–‰ì´ ì„ íƒë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, didDeselectRowAt: IndexPath) ğŸ‘‰ ì§€ì •ëœ í–‰ì˜ ì„ íƒì´ í•´ì œë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, viewForHeaderInSection: Int) ğŸ‘‰ íŠ¹ì • Sectionì˜ HeaderView ë¥¼ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, viewForFooterInSection: Int) ğŸ‘‰ íŠ¹ì • Sectionì˜ FooterView ë¥¼ ìš”ì²­í•˜ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, heightForHeaderInSection: Int) ğŸ‘‰ íŠ¹ì • Sectionì˜ HeaderViewì˜ ë†’ì´ë¥¼ ë¬¼ì–´ë³´ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, heightForFooterInSection: Int) ğŸ‘‰ íŠ¹ì • Sectionì˜ FooterViewì˜ ë†’ì´ë¥¼ ë¬¼ì–´ë³´ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, willBeginEditingRowAt: IndexPath) ğŸ‘‰ TableViewê°€ í¸ì§‘ëª¨ë“œì— ë“¤ì–´ê°”ìŒì„ ì•Œë¦¬ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, didEndEditingRowAt: IndexPath?) ğŸ‘‰ TableViewê°€ í¸ì§‘ëª¨ë“œì—ì„œ ë¹ ì ¸ë‚˜ì™”ìŒì„ ì•Œë¦¬ëŠ” ë©”ì„œë“œ ğŸŒ¸ UITableViewDataSource TableViewë¥¼ ìƒì„±í•˜ê³  ìˆ˜ì •í•˜ëŠ”ë° í•„ìš”í•œ ì •ë³´ë¥¼ TableView ê°ì²´ì— ì œê³µ dataë¥¼ ë°›ì•„ Viewë¥¼ ê·¸ë ¤ì£¼ëŠ” ì—­í• ì„ ë‹´ë‹¹ ì´ Sectionì˜ ê°œìˆ˜, Sectionì˜ í–‰ì˜ ê°œìˆ˜, Sectionì— ì–´ë–¤ ì •ë³´ë¥¼ í‘œì‹œí•  ê²ƒ ì¸ì§€ ì •ì˜ ì°¸ê³  ğŸ‘‡ func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int ğŸ‘‰ ê° Settionì•  í‘œì‹œí•  í–‰ì˜ ê°œìˆ˜ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell ğŸ‘‰ íŠ¹ì • Index Rowì˜ Cellì— ëŒ€í•œ ì •ë³´ë¥¼ ë„£ì–´ Cellì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œ optional func numberOfSections(in tableView: UITableView) -&gt; Int ğŸ‘‰ ì´ Section ê°œìˆ˜ë¥¼ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, titleForHeaderInSection: Int) -&gt; String? ğŸ‘‰ íŠ¹ì • Sectionì˜ Header Titleì„ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, titleForFooterInSection: Int) -&gt; String? ğŸ‘‰ íŠ¹ì • Sectionì˜ Footer Titleì„ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, canEditRowAt: IndexPath) -&gt; Bool ğŸ‘‰ íŠ¹ì • ìœ„ì¹˜ì˜ í–‰ì´ í¸ì§‘ ê°€ëŠ¥í•œì§€ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, canMoveRowAt: IndexPath) -&gt; Bool ğŸ‘‰ íŠ¹ì • ìœ„ì¹˜ì˜ í–‰ì„ ì¬ì •ë ¬ í•  ìˆ˜ ìˆëŠ”ì§€ ë¬»ëŠ” ë©”ì„œë“œ optional func sectionIndexTitles(for tableView: UITableView) -&gt; [String]? ğŸ‘‰ TableView Section Index Titleì„ ë¬»ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, sectionForSectionIndexTitle: String, at: Int) -&gt; Int ğŸ‘‰ Indexì— í•´ë‹¹í•˜ëŠ” Sectionì„ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œ optional func tableView(UITableView, commit: UITableViewCell.EditingStyle, forRowAt: IndexPath) ğŸ‘‰ ìŠ¤ì™€ì´í”„ ëª¨ë“œ, í¸ì§‘ ëª¨ë“œì—ì„œ ë²„íŠ¼ì„ ì„ íƒí•˜ë©´ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ, í•´ë‹¹ ë©”ì„œë“œì—ì„œëŠ” í–‰ì— ë³€ê²½ì‚¬í•­ì„ Commit í•´ì•¼í•¨ optional func tableView(UITableView, moveRowAt sourceIndexPath: IndexPath, to destinationIndexPath: IndexPath) ğŸ‘‰ í–‰ì´ ë‹¤ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™ë˜ë©´ ì–´ë””ì—ì„œ ì–´ë””ë¡œ ì´ë™í–ˆëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œ " }, { "title": "React-Native Dimensions Window / Screen ì°¨ì´ì ", "url": "/posts/React-Native-Dimensions-Window-Screen/", "categories": "React-Native, View", "tags": "react-native, dimensions, window, screen", "date": "2022-12-19 17:30:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” React-Nativeì—ì„œ ëª¨ë°”ì¼ ê¸°ê¸°ì˜ í•´ìƒë„ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” APIì¸ Dimensionsì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Window / Screen ì°¨ì´ì  DimensionsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í˜„ì¬ ê¸°ê¸°ì˜ í™”ë©´ í¬ê¸°ë¥¼ ì•Œê¸°ìœ„í•´ ì‚¬ìš© iOSì—ì„œëŠ” windowì™€ screenë‘˜ ì¤‘ ì–´ë–¤ ê²ƒì„ ì“°ë”ë¼ë„ ë™ì¼ í•˜ê²Œ ì‘ë™ Androidì—ì„œëŠ” ìµœìƒë‹¨ statusBarì—ì„œ ì°¨ì´ê°€ ë‚¨ ğŸ‘‡â˜˜ï¸ Window ìœ„ì— ë³´ì´ëŠ” ê·¸ë¦¼ 1ì˜ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ(statusBar) ë¶€ë¶„ì„ í¬í•¨í•˜ì§€ ì•Šê³  ì˜ì—­ì„ ì¶”ì¶œconst width = Dimensions.get(\"window\").width;â˜˜ï¸ Screen ìœ„ì— ë³´ì´ëŠ” ê·¸ë¦¼ 1ì˜ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ(statusBar) ë¶€ë¶„ì„ í¬í•¨í•˜ê³  ì˜ì—­ì„ ì¶”ì¶œconst height = Dimensions.get(\"screen\").height;" }, { "title": "JavaScript ë¹„ë™ê¸° ì‘ì—… Promise, async, await ì•Œì•„ë³´ê¸°", "url": "/posts/Javascript-Promise-Async-Await/", "categories": "React-Native, JavaScript", "tags": "javasciprt, async, await, promise", "date": "2022-12-09 17:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” JavaScriptì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ì— ì‚¬ìš©ë˜ëŠ” promise, async, awaitì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Promise ë¹„ë™ê¸° ì‘ì—…ì˜ ë‹¨ìœ„ new Promiseë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„± ì²« ë²ˆì§¸ ì¸ìˆ˜ resolve ğŸ‘‡ ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µí–ˆì„ ê²½ìš° í˜¸ì¶œë¨ ë‘ ë²ˆì§¸ ì¸ìˆ˜ reject ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ê²½ìš° í˜¸ì¶œë¨ âœ… new Promise(...)ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ìˆœê°„ ì—¬ê¸°ì— í• ë‹¹ëœ ë¹„ë™ê¸° ì‘ì—…ì€ ë°”ë¡œ ì‹¤í–‰ë¨ ì¦‰, new Promiseë¥¼ í•˜ëŠ” ìˆœê°„ ë¹„ë™ê¸° ì‘ì—…ì´ ì‹œì‘ then ğŸ‘‰ í•´ë‹¹ Promiseê°€ ì„±ê³µí–ˆì„ ë•Œì˜ ë™ì‘ì„ ì§€ì •, í•¨ìˆ˜ë¥¼ ë°›ìŒ chatch ğŸ‘‰ í•´ë‹¹ Promiseê°€ ì‹¤íŒ¨í–ˆì„ ë•Œì˜ ë™ì‘ì„ ì§€ì •, í•¨ìˆ˜ë¥¼ ë°›ìŒ ì˜ˆì œğŸ‘‡ const promise1 = new Promise((resolve, reject) =&gt; { resolve();});promise .then(() =&gt; { console.log(\"then!\"); }) .catch(() =&gt; { console.log(\"catch!\"); }); âœ… ì¬ì‚¬ìš© ğŸ‘‰ ë¹„ë™ê¸° ì‘ì—…ì´ ìˆì„ë•Œ ë§ˆë‹¤ new Promiseë¥¼ í•  í•„ìš” ì—†ì´ returnì— new Promiseë¥¼ í•˜ê²Œë˜ë©´ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•¨ ì˜ˆì œ ) ì¬ì‚¬ìš© ğŸ‘‡ function startAsync(age) { return new Promise((resolve, reject) =&gt; { if (age &gt; 20) resolve(); else reject(); });}const promise1 = startAsync(25);promise1 .then(() =&gt; { console.log(\"1 then!\"); }) .catch(() =&gt; { console.log(\"1 catch!\"); });const promise2 = startAsync(15);promise2 .then(() =&gt; { console.log(\"2 then!\"); }) .catch(() =&gt; { console.log(\"2 then!\"); }); âœ… ì‘ì—… ê²°ê³¼ ì „ë‹¬ ğŸ‘‰ resolve, rejectí•¨ìˆ˜ì— ì¸ìë¥¼ ì „ë‹¬í•¨ìœ¼ë¡œì¨ then ë° catchí•¨ìˆ˜ì—ì„œ ë¹„ë™ê¸° ì‘ì—…ìœ¼ë¡œë¶€í„° ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒ ì˜ˆì œ ) ì‘ì—… ê²°ê³¼ ì „ë‹¬ ğŸ‘‡ function startAsync(age) { return new Promise((resolve, reject) =&gt; { if (age &gt; 20) resolve(`${age} success`); else reject(new Error(`${age} is not over 20`)); });}const promise1 = startAsync(25);promise1 .then((value) =&gt; { console.log(value); }) .catch((error) =&gt; { console.error(error); });const promise2 = startAsync(15);promise2 .then((value) =&gt; { console.log(value); }) .catch((error) =&gt; { console.error(error); }); ğŸ€ Async ë¹„ë™ê¸° ì‘ì—…ì„ ë§Œë“œëŠ” ì†ì‰¬ìš´ ë°©ë²• í•¨ìˆ˜ì•ì— async í‚¤ì›Œë“œë¥¼ ë¶™í˜ âœ… asyncí•¨ìˆ˜ì˜ returnê°’ì€ ë¬´ì¡°ê±´ Promise ì˜ˆì œ new Promiseë¥¼ asyncë¡œ ë³€ê²½ ğŸ‘‡ async function startAsync(age) { if (age &gt; 20) return `${age} success`; else throw new Error(`${age} is not over 20`);}const promise1 = startAsync(25);promise1 .then((value) =&gt; { console.log(value); }) .catch((error) =&gt; { console.error(error); });const promise2 = startAsync(15);promise2 .then((value) =&gt; { console.log(value); }) .catch((error) =&gt; { console.error(error); }); ğŸ€ Await âœ… Promiseê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼ Promiseê°€ resolveë˜ë“ ì§€ rejectë˜ë“ ì§€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” í•¨ìˆ˜ awaitëŠ” async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ ì˜ˆì œ ğŸ‘‡ function setTimeoutPromise(delay) { return new Promise((resolve) =&gt; setTimeout(resolve, delay));}async function startAsync(age) { if (age &gt; 20) return `${age} success`; else throw new Error(`${age} is not over 20`);}async function startAsyncJobs() { await setTimeoutPromise(1000); const promise1 = startAsync(25); try { const value = await promise1; console.log(value); } catch (e) { console.error(e); } const promise2 = startAsync(15); try { const value = await promise2; console.log(value); } catch (e) { console.error(e); }}startAsyncJobs(); " }, { "title": "iOS SwiftUi Alamofire ê¸°ì´ˆ", "url": "/posts/iOS-Swift-Alamofire/", "categories": "Swift, Alamofire", "tags": "iOS, Alamofire", "date": "2022-12-02 10:59:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swiftì—ì„œ http í†µì‹ ì„ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” Alamofireì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Alamofire URLSession ì—ì„œ ë¶ˆí¸í•œ ì ì„ í•œë²ˆë” ë³´ì™„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ URLSessionì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ì–´ë ¤ìš´ ë„¤íŠ¸ì›Œí‚¹ ì‘ì—…ì„ ê°ì¶°ì£¼ê¸° ë•Œë¬¸ì— ì£¼ìš” ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ GET, POST, Download, DELETE, PATCH ë“± ë‹¤ì–‘í•œ Http í†µì‹ ì„ ì§€ì› âœ… ì¦‰, AlamofireëŠ” HTTPë„¤íŠ¸ì›Œí‚¹ì„ í•˜ëŠ”ë° ìì£¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ì½”ë“œë‚˜ í•¨ìˆ˜ë¥¼ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ëª¨ì•„ë†“ì€ ê²ƒ â„¹ï¸ Github URL ğŸ‘ ëŒ€í‘œì ì¸ ê¸°ëŠ¥ AF.upload ğŸ‘‰ íŒŒì¼ì„ ì—…ë¡œë“œí•¨ AF.download ğŸ‘‰ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•˜ê±°ë‚˜ ì´ë¯¸ ì§„í–‰ì¤‘ì¸ ë‹¤ìš´ë¡œë“œë¥¼ ì¬ê°œí•¨ AF.request ğŸ‘‰ íŒŒì¼ ì „ì†¡ê³¼ ë¬´ê´€í•œ ë‹¤ë¥¸ HTTP ìš”ì²­ â˜˜ï¸ AF.request ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° ğŸ‘‰ url method ğŸ‘‰ í†µì‹ ë°©ì‹ ì„ íƒ (get, post, delete, patch, put ë“±) parameters ğŸ‘‰ paramters ê°€ ì—†ëŠ” ê²½ìš° nil ê°’ í• ë‹¹, [String:String] í˜•íƒœë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŒ paramters: [\"foo\": \"bar\"] ì´ëŸ°ì‹ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŒ. encoding ğŸ‘‰ URLì´ê¸°ì— URLEncoding ë„£ê¸° headers ğŸ‘‰ í—¤ë” ê°’ í• ë‹¹, json í˜•ì‹ìœ¼ë¡œ ë°›ê²Œë” ì‘ì„±, [String:String]í˜•íƒœë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŒ validate ğŸ‘‰ ìœ íš¨ì„± ê²€ì‚¬ responseJSON ğŸ‘‰ ì •ë³´ë¥¼ ë°›ëŠ” ë¶€ë¶„ğŸŒ± GET ì˜ˆì œ ğŸ‘‡import Alamofirefunc getTest() { let url = \"https://jsonplaceholder.typicode.com/todos/1\" AF.request( url, method: .get, parameters: nil, encoding: URLEncoding.default, headers: [\"Content-Type\":\"application/json\", \"Accept\":\"application/json\"] ) .validate(statusCode: 200..&lt;300) // 200 ~ 300 ì‚¬ì´ì˜ ìƒíƒœì½”ë“œë§Œ í—ˆìš© .responseJSON { (json) in // ê°€ìŸˆì˜¨ ë°ì´í„°ë¥¼ ì‚¬ìš© }}ğŸŒ± POST ì˜ˆì œ ğŸ‘‡import Alamofirefunc postTest() { let url = \"https://ptsv2.com/t/im8p3-1592789118/post\" var request = URLRequest(url: URL(string: url)!) request.httpMethod = \"POST\" request.setValue(\"application/json\", forHTTPHeaderField: \"Content-Type\") request.timeoutInterval = 10 // POSTë¡œ ë³´ë‚¼ ì •ë³´ let params = [\"id\":\"ì•„ì´ë””\", \"pw\":\"íŒ¨ìŠ¤ì›Œë“œ\"] as Dictionary // httpBody ì— parameters ì¶”ê°€ do { try request.httpBody = JSONSerialization.data(withJSONObject: parmas, options: []) } catch { print(\"http Body Error\") } AF.request(request).responseString { (response) in switch response.result { case .success: print(\"POST ì„±ê³µ\") case .failure(let error): print(\"ğŸš« Alamofire Request Error\\nCode:\\(error._code), Message: \\(error.errorDescription!)\") } }}â˜˜ï¸ AF.Download ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° ğŸ‘‰ Url method ğŸ‘‰ í†µì‹ ë°©ì‹ ì„ íƒ (get, post, delete, patch, put ë“±) parameters ğŸ‘‰ paramters ê°€ ì—†ëŠ” ê²½ìš° nil ê°’ í• ë‹¹ encoding ğŸ‘‰ JSONì´ê¸°ì— JSONEncoding ë„£ê¸° to ğŸ‘‰ íŒŒì¼ ê²½ë¡œ ì§€ì • ë° ë‹¤ìš´ë¡œë“œ ì˜µì…˜ ì„¤ì • ì˜µì…˜ ğŸ‘‰ ì´ì „ íŒŒì¼ ì‚­ì œ, ë””ë ‰í† ë¦¬ ìƒì„± ë“±ë“±.. ì˜ˆì œ ğŸ‘‡ func downTest() { let url = \"http://212.183.159.230/50MB.zip\" // íŒŒì¼ ë©”ë‹ˆì € let fileManager = FileManager.default // ì•± ê²½ë¡œ let appURL = fileManager.urls(for: .documentDirectory, in: .userDomainMask)[0] // íŒŒì¼ ì´ë¦„ url ì˜ ë§¨ ë’¤ ì»´í¬ë„ŒíŠ¸ë¡œ ì§€ì • (50MB.zip) let fileName: String = URL(string: url)!.lastPathComponent // íŒŒì¼ ê²½ë¡œ ìƒì„± let fileURL = appURL.appendingPathComponent(fileName) // íŒŒì¼ ê²½ë¡œ ì§€ì • ë° ë‹¤ìš´ë¡œë“œ ì˜µì…˜ ì„¤ì • (ì´ì „ íŒŒì¼ ì‚­ì œ, ë””ë ‰í† ë¦¬ ìƒì„±) let destination: DownloadRequest.Destination = { _, _, in return (fileUrl, [.removePreviousFile, .createIntermediateDirectories]) } // ë‹¤ìš´ë¡œë“œ ì‹œì‘ AF.download( url, method: .get, parameters: nil, encoding: JSONEncoding.default, do: destination ).downloadProgress { (progress) in // ì´ ë¶€ë¶„ì—ì„œ í”„ë¡œê·¸ë ˆìŠ¤ ìˆ˜ì • self.progressView.progress = Float(progress.fractionCompleted) self.progressLabel.text = \"\\(Int(progress.fractionCompleted * 1000))\" }.response { response in if response.error != nil { print(\"íŒŒì¼ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨\") } else { print(\"íŒŒì¼ë‹¤ìš´ë¡œë“œ ì™„ë£Œ\") } }} " }, { "title": "iOS Swfit UIKit ViewController Lifecycle", "url": "/posts/iOS-UiKit-Lifecycle/", "categories": "Swift, UIKit", "tags": "iOS, UIKit, ViewController, Lifecycle", "date": "2022-12-02 10:20:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” iOS UIKit ViewControllerì˜ Lifecycle ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ ViewController Lifecycleâ˜˜ï¸ Init ViewControllerì˜ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•˜ë©´ ë‚´ë¶€ì˜ ê°ì²´ë“¤ì„ ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—…ì´ ìˆ˜í–‰ë¨ âš ï¸ ì•„ì§ ë‚´ë¶€ì˜ Viewë“¤ì´ ìƒì„±ëœ ê²ƒì€ ì•„ë‹ˆê¸°ì— ë‚´ë¶€ View ìš”ì†Œì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ init(coder:) ğŸ‘‰ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ViewControllerë¥¼ ë§Œë“¤ ê²½ìš° ì‚¬ìš© init(nibName: bundle:): nib íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ViewControllerë¥¼ ë§Œë“¤ ê²½ìš° ì‚¬ìš© âœ… ì°¸ê³  nib ğŸ‘‰ NeXT Interface Builder (binary ê¸°ë°˜), ì¸í„°í˜ì´ìŠ¤ ë¹Œë”ì—ì„œ ìƒì„±í•œ ê°ì²´ë“¤ì„ ì €ì¥í•˜ëŠ” íŒŒì¼, UIë¥¼ êµ¬ì„±í•˜ëŠ” ê°ì²´ë“¤ê³¼ ì´ë“¤ì˜ ì„¸ë¶€ì„¤ì •, ê° ê°ì²´ë“¤ê°„ì˜ ê´€ê³„ë“±ì„ í¬í•¨í•©ë‹ˆë‹¤. â˜˜ï¸ loadView ViewControllerê°€ ì‚¬ìš©ìê°€ ì„¤ì •í•œ Viewë¥¼ ìì‹ ì˜ ìµœìƒìœ„ Viewë¡œ ì„¤ì •í•˜ëŠ” ê³¼ì • ViewControllerê°€ ë¬´ì—‡ì„ ê¸°ë°˜ìœ¼ë¡œ í˜¸ì¶œë˜ì—ˆëŠ”ê°€(Code, ìŠ¤í† ë¦¬ë³´ë“œ, nib)ì™€ ê´€ê³„ì—†ì´ í˜¸ì¶œë¨ ë‚´ë¶€ì ìœ¼ë¡œ instantiateWithOwner()ë¼ëŠ” ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ë©´ì„œ í•„ìš”í•œ subViewë“¤ì„ nibìœ¼ë¡œë¶€í„° unarchivingí•˜ê³  subView ê°ì²´ë“¤ì´ ViewControllerì™€ ì—°ê²° ë˜ê²Œ ë©ë‹ˆë‹¤. ì´ ë•Œ subView ê°ì²´ë“¤ì€ ë¡œë“œê°€ ëë‚˜ìë§ˆì awakeFromNib()ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. subViewë“¤ì€ ViewControllerê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë°”ë¡œ ë‚´ë¶€ ê°ì²´ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŒ. subViewë“¤ê³¼ ì—°ê²°ì´ ì™„ë£Œë˜ë©´ ViewControllerëŠ” viewDidLoad()ë¥¼ í˜¸ì¶œ í•˜ì—¬ view ë“¤ì— ëŒ€í•œ loadê°€ ì™„ì „íˆ ì¢…ë£Œë˜ì—ˆìŒì„ ì•Œë¦¼â˜˜ï¸ viewDidLoad í•„ìš”í•œ Viewì˜ ì •ë³´ë“¤ì´ ëª¨ë‘ ë©”ëª¨ë¦¬ì— ìœ„ì¹˜ë˜ë©´ í˜¸ì¶›ë¨ í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„± ViewControllerì˜ ìƒì• ì¤‘ ë‹¨ í•œë²ˆë§Œ í˜¸ì¶œë¨â˜˜ï¸ viewWillAppear ViewControllerì˜ Viewê°€ í™”ë©´ì— ë‚˜íƒ€ë‚˜ê¸° ì§ì „ì— í˜¸ì¶œë¨ í™”ë©´ì´ ë‚˜íƒ€ë‚ ë•Œë§ˆë‹¤ í˜¸ì¶œ ë˜ë¯€ë¡œ ë‹¤ë¥¸ Viewì—ì„œ ëŒì•„ì˜¬ ë•Œ ìˆ˜í–‰í•˜ê³  ì‹¶ì€ í–‰ìœ„ ë“¤ì— ëŒ€í•´ ì²˜ë¦¬í•˜ê¸° ì¢‹ìŒâ˜˜ï¸ viewDidAppear ViewControllerì˜ Viewê°€ ëª¨ë‘ í™”ë©´ì— ë‚˜íƒ€ë‚˜ë©´ í˜¸ì¶œë¨ ì£¼ë¡œ UIì˜ Animationì„ ì‹¤í–‰ ì‹œí‚¤ê±°ë‚˜ ë¹„ë””ì˜¤ ë° ì†Œë¦¬ë¥¼ ì¬ìƒ ì‹œí‚¤ê±°ë‚˜ dataì˜ updateë¥¼ ìˆ˜í–‰ API dataë¥¼ ë°›ì•„ì™€ í™”ë©´ì„ updateí•˜ëŠ” ë¡œì§ì„ ìœ„ì¹˜ì‹œí‚¤ê¸°ì— ì ë‹¹â˜˜ï¸ viewWillLayoutSubviews viewì˜ boundsë¥¼ ì •í•˜ëŠ” ë‹¨ê³„ UIViewì˜ layoutSubviews() ë©”ì„œë“œê°€ íŠ¸ë¦¬ê±°ë˜ê¸° ì§ì „ì— í˜¸ì¶œ ê°€ë¡œëª¨ë“œ í˜¹ì€ ì„¸ë¡œëª¨ë“œê°€ ë˜ë©´ì„œ screenì˜ ë°©í–¥ì´ ë³€í™”ë  ë•Œë„ í˜¸ì¶œ Viewì˜ boundsì— ëŒ€í•œ ì¬ê³„ì‚°ì´ í•„ìš”í• ë•Œë§ˆë‹¤ í˜¸ì¶œâ˜˜ï¸ viewDidLayoutSubviews layoutSubviews() ë©”ì„œë“œ í˜¸ì¶œ í›„ì— í˜¸ì¶œ sub Viewë“¤ì˜ sizeì™€ position, constraintë“¤ì´ ì ìš©ì´ ì™„ë£Œëœ ìƒíƒœ ê°€ë¡œëª¨ë“œ í˜¹ì€ ì„¸ë¡œëª¨ë“œê°€ ë˜ë©´ì„œ screenì˜ ë°©í–¥ì´ ë³€í™”ë  ë•Œë„ í˜¸ì¶œ Viewì˜ boundsì— ëŒ€í•œ ì¬ê³„ì‚°ì´ í•„ìš”í• ë•Œë§ˆë‹¤ í˜¸ì¶œâ˜˜ï¸ viewWillDisappear ë‹¤ë¥¸ ViewControllerë¡œ í™”ë©´ì´ ì „í™˜ë˜ë©´ì„œ ì›ë˜ ViewControllerê°€ ì‚¬ë¼ì§ˆ ë•Œ í˜¸ì¶œ ì¼ë°˜ì ìœ¼ë¡œ ì´ í•¨ìˆ˜ë¥¼ override í•´ì„œ ì²˜ë¦¬í•´ì•¼ í•  ì‘ì—…ì€ ê±°ì˜ ì—†ìŒâ˜˜ï¸ viewDidDisappear ViewControllerê°€ í™”ë©´ì— ì‚¬ë¼ì§€ê³ ë‚˜ë©´ í˜¸ì¶œ Container View Controllerë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ì—¬ëŸ¬ ViewControllerê°€ ë©”ëª¨ë¦¬ì— ìœ ì§€ âš ï¸ ì¦‰, í™”ë©´ì—ì„œ ì‚¬ë¼ì§„ ViewControllerë„ ì—¬ì „íˆ notification ë“±ì˜ ì´ë²¤íŠ¸ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ notification, observing ì·¨ì†Œ ë° ë””ë°”ì´ìŠ¤ ì ê²€ ë“±ì„ ìˆ˜í–‰â˜˜ï¸ deinit ViewController ê°ì²´ê°€ ë©”ëª¨ë¦¬ì— ì‚¬ë¼ì§€ê¸° ì „ í˜¸ì¶œ ì£¼ë¡œ í• ë‹¹ë°›ì€ ìì›ì¤‘ ARCì— ì˜í•´ í•´ì œê°€ ë˜ì§€ ì•ŠëŠ” ìì›ì„ í•´ì œí•˜ê¸° ìœ„í•´ override í™”ë©´ì—ì„œ ì‚¬ë¼ì§„ë‹¤ê³  í•´ë‹¹ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì€ ì•„ë‹˜â˜˜ï¸ didReceiveMemoryWarning ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì§€ë©´ í˜¸ì¶œ ì´ë¥¼ ê´€ë¦¬í•´ í•„ìš”ì—†ëŠ” ë©”ëª¨ë¦¬ë¥¼ í•´ì œ í•˜ëŠ” ì‘ì—…ì„ í•  ìˆ˜ ìˆìŒ iOSê°€ ê°•ì œë¡œ Applicationì„ ì¢…ë£Œí•˜ëŠ” ê²ƒì„ ë°©ì§€ í•˜ê¸° ìœ„í•´ í•„ìš”" }, { "title": "iOS SwiftUi Combine Publisher ì¢…ë¥˜", "url": "/posts/iOS-Swift-Combine-Publisher/", "categories": "Swift, Combine", "tags": "iOS, Combine, SwiftUi, Publisher", "date": "2022-12-02 10:20:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì§€ë‚œì‹œê°„ì—ëŠ” iOSì—ì„œ ë¹„ë™ê¸°ë¥¼ ì²˜ë¦¬í• ë•Œ ì‚¬ìš©ë˜ëŠ” Combineì— ëŒ€í•˜ì—¬ ê°„ë‹¨íˆ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” ì§€ë‚œ ì‹œê°„ì— ì´ì–´ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•´ Publisherì˜ ì¢…ë¥˜ ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ğŸ€ Publisherì˜ ì¢…ë¥˜â˜˜ï¸ Just ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœì˜ Publisher ë‹¨ì¼ Event ë°œìƒ í›„ ì¢…ë£Œë˜ëŠ” Publisher Error íƒ€ì…ì€ í•­ìƒ Never ì˜ˆì œ ğŸ‘‡ Just((0...5)).sink { value in print(value) // 0...5} â˜˜ï¸ Future ì¼ë°˜ì ìœ¼ë¡œ Publisherì˜ ì²˜ë¦¬ë¥¼ sinkë¼ëŠ” êµ¬ë…ì„ í˜•íƒœë¡œ ë§ì´ ì²˜ë¦¬í•˜ê²Œ ë˜ëŠ”ë° ì´ ë•Œ Closureë¥¼ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì—ì„œ Callback ê¸°ë°˜ì˜ completion í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë° Futureë¥¼ í†µí•˜ì—¬ ë”ìš± ê¹”ë”í•œ ì½”ë“œ ì‘ì„± ì´ ê°€ëŠ¥ ë‹¨ì¼ Eventì™€ ì¢…ë£Œ í˜¹ì€ ì‹¤íŒ¨ë¥¼ ì œê³µí•˜ëŠ” Publisher 1ï¸âƒ£ ì˜ˆì œ ) ê°„ë‹¨í•œ ì‚¬ìš© ğŸ‘‡ let myFuture = Future&lt;Int, Never&gt; { promise in promise(.success(10))}myFuture.sink { value in print(value) // 10} 2ï¸âƒ£ ì˜ˆì œ ) URLSessionì´ë‚˜ Alamofireë“± RestFul ê´€ë ¨ APIë¹„ë™ê¸° ìš”ì²­ì‹œì— í•´ë‹¹ ìš”ì²­ì´ ì„±ê³µí–ˆëŠ”ì§€, ì‹¤íŒ¨ í–ˆëŠ”ì§€ì— ëŒ€í•œ ì—¬ë¶€ë¥¼ return í•´ì£¼ëŠ” ì˜ˆì œ ğŸ‘‡ func isSuccessAPIRequest() -&gt; AnyPublisher&lt;Bool, Never&gt; { Future&lt;Bool, Never&gt; { promise in urlRequestPublisher.sink( receiveCompletion: { completion in switch completion { case .finished: print(\"finished\") promise(.success(true)) case .failure(let error): print(error.localizedDescription) promise(.success(false)) } }, receiveValue: { value in print(value) } ) } .eraseToAnyPublisher()}// ì‚¬ìš©isSuccessAPIRequest().sink { if $0 { // ì„±ê³µ ì¦‰, trueì¼ ê²½ìš° Handling } else { // ì‹¤íŒ¨ ì¦‰, falseì¼ ê²½ìš° Handling }} â˜˜ï¸ Empty ê°’ì„ ê²Œì‹œí•˜ì§€ ì•Šê³  ì„ íƒì ìœ¼ë¡œ ì¦‰ì‹œ ì™„ë£Œë˜ëŠ” Publisher âœ… ì¦‰, Event ì—†ì´ ì¢…ë£Œë˜ëŠ” Publisher ì–´ë–¤ ë°ì´í„°ë„ ë°œí–‰í•˜ì§€ ì•ŠëŠ” Publisherë¡œ ì£¼ë¡œ Errorì²˜ë¦¬ë‚˜, Optionalê°’ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš© ì˜ˆì œ ğŸ‘‡ Empty&lt;String, Never&gt;().sink( receiveCompletion: { print($0) // finish }, receiveValue: { print(\"receiveValue: \\($0)\") // ì¶œë ¥ ì•ˆí•¨ }) â˜˜ï¸ Fail ì˜¤ë¥˜ì™€ í•¨ê»˜ ì¢…ë£Œë˜ëŠ” Publisher ì˜ˆì œ ğŸ‘‡ let failed = Fail&lt;String, Error&gt;(error: NSError(domain: \"error\", code: -1, userInfo: null))_ = failed.sink { print($0)} receiveValue: { print($0)}// ê²°ê³¼ ğŸ‘‰ failure(Error Domain=error Code=-1 \"(null)\") â˜˜ï¸ Deffered êµ¬ë…ì´ ì¼ì–´ë‚˜ê¸° ì „ê¹Œì§€ ëŒ€ê¸°ìƒíƒœë¡œ ìˆë‹¤ê°€ êµ¬ë…ì´ ì¼ì–´ ë‚¬ì„ ë•Œ Publisherê°€ ê²°ì •ì´ ë¨ âœ… ì¦‰, êµ¬ë…(Subscribers)ì´ ì´ë£¨ì–´ì§ˆë•Œ publisherê°€ ë§Œë“¤ì–´ ì§ Closure ì•ˆì—ëŠ” ì§€ì—° ì‹¤í–‰ í•  Publisherë¥¼ ë°˜í™˜í•¨ ì˜ˆì œ ğŸ‘‡ Deferred { Just(Void()) }.sink(receiveValue: { print(\"Diferred\") }) â˜˜ï¸ Sequence ìš”ì†Œì˜ ì£¼ì–´ì§„ Sequenceë¥¼ ë°˜í™˜í•˜ëŠ” Publisher Publisherê°€ Sequenceì— ìˆëŠ” ìš”ì†Œë“¤ì„ í•˜ë‚˜ í•˜ë‚˜ ì œê³µ í•´ì£¼ë©°, ëª¨ë“  ìš”ì†Œë“¤ì´ ë‹¤ ì œê³µë˜ì—ˆì„ ë•Œ ì¢…ë£Œ ì˜ˆì œ ğŸ‘‡ Publishers.Sequence&lt;[Int], Never&gt;(sequence: [1, 2, 3]) .sink(receiveValue: { print(\"Sequence : \\($0)\") }) â˜˜ï¸ Record ì…ë ¥ê³¼ ì™„ë£Œë¥¼ ê¸°ë¡í•´ í›„ì— ë‹¤ë¥¸ Subsciberì—ì„œ ë°˜ë³µë  ìˆ˜ ìˆëŠ” Publisher ì˜ˆì œ ğŸ‘‡ let record = Record&lt;String, Error&gt; { recoding in print(\"make recording\") recording.receive(\"jack\") recording.receive(\"tom\") recording.receive(completion: .finished)}_ = record.sink { print($0)} receiveValue: { print($0)}_ = record.sink { print($0)} receiveValue: { print($0)} ê²°ê³¼ make recording jack tom finished jack tom finished " }, { "title": "iOS SwiftUi Combine ê¸°ì´ˆ", "url": "/posts/iOS-Swift-Combine-Basic/", "categories": "Swift, Combine", "tags": "iOS, Combine, SwiftUi", "date": "2022-12-01 17:20:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” iOSì—ì„œ ë¹„ë™ê¸°ë¥¼ ì²˜ë¦¬í• ë•Œ ì‚¬ìš©ë˜ëŠ” Combineì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ğŸ€ Combine Event ì²˜ë¦¬ë¥¼ ìœ„í•œ ì„ ì–¸ì  ì ‘ê·¼ì„ í•©ë‹ˆë‹¤. Delegateë‚˜ Completion Handler êµ¬í˜„ ëŒ€ì‹  Event ì†ŒìŠ¤ì— ëŒ€í•œ Single processing chainì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Apple ë²„ì „ì˜ RxSwift ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ ê°’ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ Declarative Swift APIë¥¼ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬ âœ… Combineìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ì‘ì—… 1ï¸âƒ£ í•„ë“œì— ì…ë ¥í•œ ê°’ì´ ìœ ìš”í•œ ê²½ìš°ì—ë§Œ Submitë²„íŠ¼ì´ í™œì„±í™”ë˜ë„ë¡ ì„¤ì • 2ï¸âƒ£ ë¹„ë™ê¸°ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ë°˜í™˜ëœ ê°’ì„ ì‚¬ìš©í•˜ì—¬ Viewë¥¼ Updateí•  ë°©ë²•ê³¼ ëŒ€ìƒì„ ì„ íƒí•  ìˆ˜ ìˆìŒ 3ï¸âƒ£ ì‚¬ìš©ìê°€ í…ìŠ¤íŠ¸í•„ë“œì— ë™ì ìœ¼ë¡œ ì…ë ¥í•˜ê³  ì…ë ¥í•œ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ Viewë¥¼ Updateí•¨ âœ… ì¥ì  1ï¸âƒ£ System Levelì— í†µí•©ë˜ì–´ ìˆìŒ. 2ï¸âƒ£ delegate, closureë¥¼ ë§Œë“¤ í•„ìš” ì—†ìŒ. 3ï¸âƒ£ ë™ì¼í•œ interfaceë¥¼ ì“°ê¸° ë•Œë¬¸ì— ì¬ì‚¬ìš©ì„±ì´ ì¢‹ìŒ. 4ï¸âƒ£ operatorë¥¼ ì¡°í•©í•˜ê¸° ì¢‹ìŒ. 5ï¸âƒ£ ë¹„ë™ê¸° ì½”ë“œì—ì„œë„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŒ. âœ… Combineì˜ 3ê°€ì§€ ì£¼ìš” ë¶€ë¶„ Publisher Operator Subscriber âœ… Key points Combineì€ ë¹„ë™ê¸° Eventë¥¼ ìœ„í•œ ì„ ì–¸ì , ë°˜ì‘í˜• í”„ë ˆì„ì›Œí¬ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ ê¸°ì¡´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ ëª©í‘œ ì£¼ìš” 3 íƒ€ì… íë¦„ : publisher(Event ë°œí–‰) ğŸ‘‰ operator(Eventì²˜ë¦¬, ì¡°ì‘) ğŸ‘‰ subscriber(ê²°ê³¼ë¬¼ ì†Œë¹„) â˜˜ï¸ Publisher valueë“¤ì„ ë‚´ë³´ë‚´ëŠ”(emit) ì—­í•  Publisherê°€ emití•  ìˆ˜ ìˆëŠ” Event ì¢…ë¥˜ 1ï¸âƒ£ Output 2ï¸âƒ£ Completion : successful completion 3ï¸âƒ£ Failure : completion with an error âœ… ì°¸ê³  PublisherëŠ” Outputì„ ì•ˆë³´ë‚´ê³  ìˆê±°ë‚˜ ì—¬ëŸ¬ë²ˆ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, Completionì´ë‚˜ Failureë¥¼ í•œë²ˆ ë³´ë‚´ê³  ë‚˜ë©´ ë” ì´ìƒì˜ Eventë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ìŒ êµ¬ë…ì´ ì—†ëŠ” ê²½ìš° PublisherëŠ” ë°ì´í„°ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŒ âœ… íŠ¹ì§• 1ï¸âƒ£ 3ê°€ì§€ Eventë¡œ ëª¨ë“  ì¢…ë¥˜ì˜ ë™ì  ë°ì´í„°ë¥¼ í‘œí˜„ ê°€ëŠ¥ 2ï¸âƒ£ delegateë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ completion callback ì£¼ì…ì´ í•„ìš” ì—†ìŒ 3ï¸âƒ£ PublisherëŠ” error handlingì´ ë‚´ì¥ 4ï¸âƒ£ PublisherëŠ” 2ê°œì˜ Genericì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„± Generic ì²« ë²ˆì§¸ Publisher.Ouput ğŸ‘‰ output value Generic ë‘ ë²ˆì§¸ Publisher.Failure ğŸ‘‰ Errorì „ë‹¬, Errorê°€ ë°œìƒí•  ì¼ì´ ì—†ìœ¼ë©´, Neverë¼ëŠ” typeìœ¼ë¡œ ì •ì˜í•˜ë©´ ë¨ â˜˜ï¸ Operator Eventë¥¼ ì²˜ë¦¬í•˜ê³ , ì¡°ì‘í•˜ëŠ” ì—­í•  Publisher Protocolì— ì„ ì–¸ë˜ì–´ ìˆìŒ ê°™ê±°ë‚˜ ìƒˆë¡œìš´ Publisherë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œ Operatorë¥¼ ì²´ì´ë‹í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ìš©í•¨ âœ… ì¥ì  1ï¸âƒ£ Operatorë“¤ì€ ë…ë¦½ì ì´ê³  ì¡°í•©ê°€ëŠ¥ í•˜ê¸° ë•Œë¬¸ì—, ë³µì¡í•œ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ”ë° ì¡°í•©(Combine) ê°€ëŠ¥. 2ï¸âƒ£ í•­ìƒ Input &amp; Output(Upstream &amp; DownStream)ì„ ê°€ì§€ê¸° ë•Œë¬¸ì— shared stateë¥¼ í”¼í•  ìˆ˜ ìˆìŒ. ì¦‰, ë™ì‹œì„± ì´ìŠˆë¡œ ì¸í•´ ë¹„ë™ê¸° ì½”ë“œê°€ ë¼ì–´ë“¤ì–´ ë°ì´í„°ë¥¼ ì¤‘ê°„ì— ë³€ê²½í•  ì¼ì´ ì—†ìŒ â˜˜ï¸ Subscribers ê²°ê³¼ë¬¼ì„ ì†Œë¹„í•˜ëŠ” ì—­í•  ì „ë‹¬ë°›ì€ valueë‚˜ completion eventë¡œ ì‘ì—…ì„ ìˆ˜í–‰ ëª¨ë“  êµ¬ë…ì€ subscriberë¡œ ëë‚¨ âœ… 2ê°œì˜ ë‚´ì¥ëœ subscriber 1ï¸âƒ£ sink ğŸ‘‰ output valueì™€ completionì„ ë°›ì„ ìˆ˜ ìˆëŠ” í´ë¡œì €ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŒ. receiveCompletion ğŸ‘‰ streamì´ ì„±ê³µ, ì‹¤íŒ¨ë¡œ ì¢…ë£Œë˜ì—ˆìŒì„ ì•Œë ¤ì¤Œ receiveValue ğŸ‘‰ ê°’ì„ ë°›ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” Closure 2ï¸âƒ£ assign ğŸ‘‰ outputì„ key pathë¥¼ í†µí•´ data modelì˜ propertyë‚˜ UI controlì— ë°”ë¡œ bindingí•  ìˆ˜ ìˆìŒ. â˜˜ï¸ Subscriptions publisher, operator, subcriberì˜ ì „ì²´ chain âœ… ì¤‘ìš” subscriptionì˜ ëì— subscriberë¥¼ ì¶”ê°€ ğŸ‘‰ chainningì˜ ë§¨ ì•ì— ìˆëŠ” publisherë¥¼ í™œì„±í™” outputì„ ìˆ˜ì‹ í•´ì¤„ subscriberê°€ ì—†ìœ¼ë©´ publisherëŠ” ì–´ë–¤ valueë„ ì „ë‹¬í•˜ì§€ ì•ŠìŒ âœ… ì¥ì  1ï¸âƒ£ Subscriptionì€ ë¹„ë™ê¸° Eventë“¤ì˜ Chainì„ Custom ì½”ë“œì™€ Error handlingê³¼ í•¨ê»˜ í•œë²ˆì— ì„ ì–¸ ê°€ëŠ¥ 2ï¸âƒ£ Full-Combineì´ë©´, ì•± ì „ì²´ì˜ ë¡œì§ì„ subscriptionë“¤ë¡œ í‘œí˜„ ê°€ëŠ¥ 3ï¸âƒ£ Subscriptionì´ í•œë²ˆ ì„ ì–¸ë˜ê³  ë‚˜ë©´ Callbackì„ í˜¸ì¶œí•  í•„ìš” ì—†ì´ Systemì´ ë‹¤ ì•Œì•„ì„œ í•´ì¤Œ â˜˜ï¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ Cancellable Protocolì„ ì‚¬ìš©í•´ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬ Subscriberë“¤ì€ Cancellableì„ ì¤€ìˆ˜í•˜ê³  ìˆìŒ Objectë¥¼ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œ ğŸ‘‰ ëª¨ë“  subscriptionì€ ì·¨ì†Œ ğŸ‘‰ ë¦¬ì†ŒìŠ¤ë¥¼ ë©”ëª¨ë¦¬ë¡œë¶€í„° í•´ì œ âœ… subscirberê°€ ë” ì´ìƒ ê°’ì„ ë°›ì„ í•„ìš” ì—†ì„ ë•Œ cancel() ì‚¬ìš© â—ï¸ cancel()ì„ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´, deinitë  ë•Œê¹Œì§€ êµ¬ë…ë¨ âœ… ì¥ì  1ï¸âƒ£ Subscriptionì˜ ìˆ˜ëª…ì„ View Controllerê°™ì€ Objectì— binding ê¸°ëŠ¥ 2ï¸âƒ£ ìœ ì €ê°€ View Controllerë¥¼ View Stackì—ì„œ dismiss ğŸ‘‰ subscription ì·¨ì†Œ í•´ì¤Œ " }, { "title": "React-Native Redux Middleware", "url": "/posts/Reat-Native-Redux-Middleware/", "categories": "React-Native, Redux", "tags": "redux, react-native, redux-middleware", "date": "2022-11-30 16:42:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Redux Middlewareì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Redux MiddlewareëŠ” REST API ìš”ì²­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.Redux Middlewareë¥¼ ì‚¬ìš©í•˜ë©´ Actionì´ Dispatchëœ ë‹¤ìŒ, Reducerì—ì„œ í•´ë‹¹ Actionì„ ë°›ì•„ì™€ì„œ Updateí•˜ê¸° ì „ì— ì¶”ê°€ì ì¸ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ìì„¸í•œ ê±´ ë°‘ì—ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Redux Middleware Actionì„ Dispatchí–ˆì„ ë•Œ Reducerì—ì„œ ì´ë¥¼ ì²˜ë¦¬í•˜ê¸°ì— ì•ì„œ ì‚¬ì „ì— ì§€ì •ëœ ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ ì¦‰, Actionê³¼ Reducerì‚¬ì´ì˜ ì¤‘ê°„ì íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ Actionì´ ë¬´ì‹œë˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ Actionì„ consoleì— ì¶œë ¥í•˜ê±°ë‚˜, ì„œë²„ìª½ì— loggingì„ í•  ìˆ˜ ìˆìŒ Actionì´ Dispatch ë˜ì—ˆì„ ë•Œ ì´ë¥¼ ìˆ˜ì •í•´ì„œ Reducerì—ê²Œ ì „ë‹¬ë˜ë„ë¡ í•  ìˆ˜ ìˆìŒ íŠ¹ì • Actionì´ ë°œìƒí–ˆì„ ë•Œ ì´ì— ê¸°ë°˜í•˜ì—¬ ë‹¤ë¥¸ Actionì´ ë°œìƒë˜ë„ë¡ í•  ìˆ˜ ìˆìŒ íŠ¹ì • Actionì´ ë°œìƒí–ˆì„ ë•Œ íŠ¹ì • Javascript í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŒ âœ… Redux MiddlewareëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œ ì£¼ë¡œ ì‚¬ìš© ë¹„ë™ê¸° ì‘ì—…ì— ê´€ë ¨ëœ Middleware ë¼ì´ë¸ŒëŸ¬ë¦¬ redux-thunk í•¨ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™ redux-toolkitì— ë‚´ì¥ë˜ì–´ ìˆì–´ ì ìš©í•˜ê¸°ê°€ ê°„ë‹¨ reduxì—ì„œ typeì„ ì§€ë‹Œ ê°ì²´ê°€ ì•„ë‹Œ, í•¨ìˆ˜ íƒ€ì…ì„ Dispatch í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ redux-saga Generatorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš© íŠ¹ì • ê²½ìš°ì— íŠ¹ì • Actionì„ ëª¨ë‹ˆí„°ë§ í•  ìˆ˜ë„ ìˆìŒ íŠ¹ì • Actionì´ Dispatch ë˜ì—ˆì„ë•Œ ì›í•˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜, ë˜ëŠ” ë¼ìš°í„°ë¥¼ í†µí•´ ë‹¤ë¥¸ ì£¼ì†Œë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥ redux-observable RxJsë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™ íŠ¹ì • ê²½ìš°ì— íŠ¹ì • Actionì„ ëª¨ë‹ˆí„°ë§ í•  ìˆ˜ë„ ìˆìŒ íŠ¹ì • Actionì´ Dispatch ë˜ì—ˆì„ë•Œ ì›í•˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜, ë˜ëŠ” ë¼ìš°í„°ë¥¼ í†µí•´ ë‹¤ë¥¸ ì£¼ì†Œë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥ redux-promise-middleware â˜˜ï¸ Redux-Thunk reduxì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬ í•  ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” middleware í•¨ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™ actionê°ì²´ê°€ ì•„ë‹Œ í•¨ìˆ˜ë¥¼ Dispatchí•  ìˆ˜ ìˆê²Œ í•´ì¤Œ. Redux DevToolsì™€ í•¨ê»˜ ì‚¬ìš© ì ìš© ğŸ‘‰ yarn add redux-thunk 1ï¸âƒ£ ì˜ˆì œ ) redux-thunk middleware ì ìš© &gt; App.tsx ğŸ‘‡ import rootReducer from \"./src/modules\";import { applyMiddleware, createStore } from \"redux\";import thunk from \"redux-thunk\";const store = createStore(rootReducer, applyMiddleware(thunk)); 2ï¸âƒ£ ì˜ˆì œ ) thunk í•¨ìˆ˜ ìƒì„± &gt; Redux Module ì— ì‘ì„± ğŸ‘‡ // âœ… thunk í•¨ìˆ˜ ìƒì„±export const increaseAsync = () =&gt; (dispatch: Dispatch&lt;CounterAction&gt;) =&gt; { setTimeout(() =&gt; dispatch(increase()), 1000);};export const decreaseAsync = () =&gt; (dispatch: Dispatch&lt;CounterAction&gt;) =&gt; { setTimeout(() =&gt; dispatch(decrease()), 1000);}; ì„¤ëª… ğŸ‘‰ CounterAction ì„ AnyActionìœ¼ë¡œ êµì²´í•´ë„ ìƒê´€ ì—†ìŒ 3ï¸âƒ£ ì‚¬ìš© ) thunk í•¨ìˆ˜ ì‚¬ìš© ğŸ‘‡ /** * âœ… í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒ * ìƒíƒœë¥¼ ì¡°íšŒí•  ë•ŒëŠ” stateì˜ íƒ€ì…ì„ RootStateë¡œ ì§€ì •í•´ì•¼í•¨ */const counter = useSelector((state: RootState) =&gt; state.counter);// Dispatch í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜´ (actionì„ ë°œìƒì‹œì¼œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸)const dispatch = useDispatch();function onIncrease() { dispatch(increaseAsync());}function onDecrease() { dispatch(decreaseAsync());} â˜˜ï¸ Redux-Thunk + Promise âš ï¸ Promiseë¥¼ ë‹¤ë£¨ëŠ” Redux Moduleì„ ë‹¤ë£° ë•Œ ì£¼ì˜ ì‚¬í•­ 1ï¸âƒ£ Promiseê°€ ì‹œì‘(start), ì„±ê³µ(success), ì‹¤íŒ¨(failure)í–ˆì„ ë•Œ ë‹¤ë¥¸ Actionì„ Dispatch í•´ì•¼í•¨ 2ï¸âƒ£ ê° Promiseë§ˆë‹¤ thunk í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•¨ 3ï¸âƒ£ Reducerì—ì„œ Actionì— ë”°ë¼ ë¡œë”©ì¤‘(loading), ê²°ê³¼(result), ì—ëŸ¬(error) ìƒíƒœë¥¼ ë³€ê²½í•´ì£¼ì–´ì•¼ í•¨ 1ï¸âƒ£ ì˜ˆì œ ) modules/posts.tsx &gt; Redux Module ì‘ì„± ğŸ‘‡ import { AnyAction, Dispatch } from \"redux\";import * as postsAPI from \"../api/posts\"; // api/posts ì•ˆì˜ í•¨ìˆ˜ ëª¨ë‘ ë¶ˆëŸ¬ì˜¤ê¸°// âœ… ë°‘ì˜ ëŒ€ë¬¸ì ìƒìˆ˜ëŠ” ëª¨ë‘ Action Typeì„// í¬ìŠ¤íŠ¸ ì—¬ëŸ¬ê°œ ì¡°íšŒí•˜ê¸°const GET_POSTS = \"GET_POSTS\"; // ìš”ì²­ì´ ì‹œì‘ë¨const GET_POSTS_SUCCESS = \"GET_POSTS_SUCCESS\"; // ì„±ê³µconst GET_POSTS_ERROR = \"GET_POSTS_ERROR\"; // ì‹¤íŒ¨// í¬ìŠ¤íŠ¸ í•˜ë‚˜ ì¡°íšŒí•˜ê¸°const GET_POST = \"GET_POST\"; // ìš”ì²­ì´ ì‹œì‘ë¨const GET_POST_SUCCESS = \"GET_POST_SUCCESS\"; // ì„±ê³µconst GET_POST_ERROR = \"GET_POST_ERROR\"; // ì‹¤íŒ¨/** * thunk ë¥¼ ì‚¬ìš©í•  ë•Œ, ê¼­ ëª¨ë“  Actionë“¤ì— ëŒ€í•˜ì—¬ Action ìƒì„±í•¨ìˆ˜ë¥¼ ë§Œë“¤ í•„ìš”ëŠ” ì—†ìŒ * ê·¸ëƒ¥, thunk í•¨ìˆ˜ì—ì„œ ë°”ë¡œ action ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì£¼ì–´ë„ ê´œì°®ìŒ */export const getPosts = () =&gt; async (dispatch: Dispatch&lt;AnyAction&gt;) =&gt; { dispatch({ type: GET_POSTS }); try { const posts = await postsAPI.getPosts(); dispatch({ type: GET_POSTS_SUCCESS, posts }); } catch (error) { dispatch({ type: GET_POSTS_ERROR, error: error }); }};// âœ… thunk í•¨ìˆ˜ì—ì„œë„ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì™€ì„œ ì‚¬ìš© ê°€ëŠ¥export const getPost = (id: number) =&gt; async (dispatch: Dispatch&lt;AnyAction&gt;) =&gt; { dispatch({ type: GET_POST }); try { const post = await postsAPI.getPostById(id); dispatch({ type: GET_POST_SUCCESS, post }); } catch (error) { dispatch({ type: GET_POST_ERROR, error: error }); } };// âœ… ì´ˆê¹ƒê°’const initialState = { posts: { loading: false, data: null, error: null, }, post: { loading: false, data: null, error: null, },};// âœ… Reducer í•¨ìˆ˜export default function posts(state = initialState, action) { switch (action.type) { case GET_POSTS: return { ...state, posts: { loading: true, data: null, error: null, }, }; case GET_POSTS_SUCCESS: return { ...state, posts: { loading: false, data: action.posts, error: null, }, }; case GET_POSTS_ERROR: return { ...state, posts: { loading: false, data: null, error: action.error, }, }; case GET_POST: return { ...state, post: { loading: true, data: null, error: null, }, }; case GET_POST_SUCCESS: return { ...state, post: { loading: true, data: action.post, error: null, }, }; case GET_POST_ERROR: return { ...state, post: { loading: true, data: null, error: action.error, }, }; default: return state; }} 2ï¸âƒ£ ì˜ˆì œ ) thunk ì‚¬ìš© ğŸ‘‡ const { data, loading, error } = useSelector((state) =&gt; state.posts.posts);const dispatch = useDispatch();// ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ í›„ í¬ìŠ¤íŠ¸ ëª©ë¡ ìš”ì²­useEffect(() =&gt; { dispatch(getPosts());}, [dispatch]); " }, { "title": "React-Native Redux + TypeScript", "url": "/posts/React-Native-Redux-With-TypeScript/", "categories": "React-Native, Redux", "tags": "redux, react-native, redux-typescript", "date": "2022-11-30 11:54:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Reduxë¥¼ TypeScriptì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë²•ì— ëŒ€í•˜ì—¬ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Redux + TypeScript Redux + TypeScript ì ìš© ğŸ‘‰ yarn add redux react-redux @types/react-redux 1ï¸âƒ£ ì˜ˆì œ ) Redux Module ì‘ì„± ğŸ‘‡ /** * âœ… Action Type * as const ğŸ‘‰ ë‚˜ì¤‘ì— Action ê°ì²´ë¥¼ ë§Œë“¤ê²Œ action.type ì˜ ê°’ì„ ì¶”ë¡ í•˜ëŠ” ê³¼ì •ì—ì„œ * action.type ì´ string ìœ¼ë¡œ ì¶”ë¡ ë˜ì§€ ì•Šê³  'INCREASE'ì™€ ê°™ì´ ì‹¤ì œ ë¬¸ìì—´ ê°’ìœ¼ë¡œ ì¶”ë¡  ë˜ë„ë¡ í•´ì¤Œ */const INCREASE = \"INCREASE\" as const;const DECREASE = \"DECREASE\" as const;// âœ… Action ìƒì„± í•¨ìˆ˜export const increase = () =&gt; ({ type: INCREASE });export const decrease = () =&gt; ({ type: DECREASE });/** * âœ… ëª¨ë“  Action ê°ì²´ë“¤ì— ëŒ€í•œ íƒ€ì…ì„ ì¤€ë¹„ * ReturnType&lt;typeof _____&gt; ğŸ‘‰ íŠ¹ì • í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì„ ì¶”ë¡ í•´ì¤Œ * Action Type ì„ ì„ ì–¸ í•  ë–„ as const ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ ì´ ë¶€ë¶„ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŒ */type CounterAction = | ReturnType&lt;typeof increase&gt; | ReturnType&lt;typeof decrease&gt;;// âœ… ì´ ë¦¬ë•ìŠ¤ ëª¨ë“ˆì—ì„œ ê´€ë¦¬ í•  Stateì˜ Typeì„ ì„ ì–¸type CounterState = { count: number;};// âœ… ì´ˆê¹ƒê°’ (ìƒíƒœê°€ ê°ì²´ê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ ìˆ«ìì—¬ë„ ìƒê´€ ì—†ìŒ)const initialState: CounterState = { count: 0,};/** * âœ… Reducerë¥¼ ì‘ì„± * Reducer ì—ì„œëŠ” state ì™€ í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì´ ì¼ì¹˜í•˜ë„ë¡ ì‘ì„±í•´ì•¼í•¨ * Action ì—ì„œëŠ” CounterAction ì„ íƒ€ì…ìœ¼ë¡œ ì„¤ì • */export default function counter( state: CounterState = initialState, action: CounterAction): CounterState { switch (action.type) { case \"INCREASE\": return { count: state.count + 1 }; case \"DECREASE\": return { count: state.count - 1 }; default: return state; }} 2ï¸âƒ£ ì˜ˆì œ) Root Reducer ì‘ì„± ğŸ‘‡ import { combineReducers } from \"redux\";import counter from \"./counter\";// âœ… Root Reducer ìƒì„±const rootReducer = combineReducers({ counter });export default rootReducer;/** * Root Reducer ì˜ ë°˜í™˜ê°’ì„ ìœ ì¶”í•´ì¤Œ * ì¶”í›„ ì´ íƒ€ì…ì„ ì»¨í…Œì´ë„ˆ Componentì—ì„œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•´ì•¼ í•˜ë¯€ë¡œ ë‚´ë³´ëƒ„ */export type RootState = ReturnType&lt;typeof rootReducer&gt;; 3ï¸âƒ£ ì˜ˆì œ ) useSelector, useDispatch ì‚¬ìš© ğŸ‘‡ import React from \"react\";import Counter from \"./Counter\";import { RootState } from \"../modules\";import { useSelector, useDispatch } from \"react-redux\";import { increase, decrease } from \"../modules/counter\";const CounterContainer = () =&gt; { /** * âœ… í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒ * ìƒíƒœë¥¼ ì¡°íšŒí•  ë•ŒëŠ” stateì˜ íƒ€ì…ì„ RootStateë¡œ ì§€ì •í•´ì•¼í•¨ */ const counter = useSelector((state: RootState) =&gt; state.counter); // Dispatch í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜´ (actionì„ ë°œìƒì‹œì¼œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸) const dispatch = useDispatch(); function onIncrease() { dispatch(increase()); } function onDecrease() { dispatch(decrease()); } const props = { count: counter.count, onIncrease, onDecrease, }; return &lt;Counter {...props} /&gt;;};export default CounterContainer; 4ï¸âƒ£ ì˜ˆì œ ) Counter.tsx ğŸ‘‡ import React from \"react\";import { Pressable, Text, View } from \"react-native\";type CounterProps = { count: number; onIncrease: () =&gt; void; onDecrease: () =&gt; void;};const Counter = ({ count, onIncrease, onDecrease }: CounterProps) =&gt; { return ( &lt;View style= &gt; &lt;Text style=&gt;{count}&lt;/Text&gt; &lt;Pressable onPress={onIncrease} style=&gt; &lt;Text&gt;{+1}&lt;/Text&gt; &lt;/Pressable&gt; &lt;Pressable onPress={onDecrease} style=&gt; &lt;Text&gt;{-1}&lt;/Text&gt; &lt;/Pressable&gt; &lt;/View&gt; );};export default Counter; 5ï¸âƒ£ ì˜ˆì œ ) Provierë¥¼ ì‚¬ìš©í•˜ì—¬ App.tsxì— ì ìš© ğŸ‘‡ import { Provider } from \"react-redux\";import { createStore } from \"redux\";import CounterContainer from \"./src/components/CounterContainer\";import rootReducer from \"./src/modules\";const store = createStore(rootReducer);const App = () =&gt; { const isDarkMode = useColorScheme() === \"dark\"; const backgroundStyle = { backgroundColor: isDarkMode ? Colors.darker : Colors.lighter, }; return ( &lt;Provider store={store}&gt; &lt;SafeAreaView style={backgroundStyle}&gt; &lt;CounterContainer /&gt; &lt;/SafeAreaView&gt; &lt;/Provider&gt; );};export default App; " }, { "title": "iOS Swift ì§ë ¬í™”, ì—­ì§ë ¬í™” Codable / Decodable", "url": "/posts/iOS-Swift-Codable-Decodable/", "categories": "Swift, Grammar", "tags": "codable, decodable, encodable", "date": "2022-11-25 15:26:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ì—ì„œ ì§ë ¬í™”, ì—­ì§ë ¬í™”ë¥¼ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.Android ì—ì„œëŠ” ë‹¤ìŒ ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.âœ… ì§ë ¬í™” : data class ğŸ‘‰ jsonâœ… ì—­ì§ˆë ¬í™” : json ğŸ‘‰ data classSwift ì—ì„œëŠ” ë‹¤ìŒ ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.âœ… ì§ë ¬í™”(Encodable) : struct ğŸ‘‰ jsonâœ… ì—­ì§ë ¬í™”(Decodable) : json ğŸ‘‰ structìì„¸í•œ ì‚¬í•­ì€ ë°‘ì—ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Data Codable, Decodable, Encodableì„ ì•Œì•„ë³´ê¸°ì „ í•„ìˆ˜ ê°œë… Memory ì•ˆì˜ Byteê°€ ì €ì¥ë  ìˆ˜ ìˆëŠ” Byte Buffer Byte Buffer ğŸ‘‰ ìš´ì˜ì²´ì œì˜ ì»¤ë„ì´ ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œ ë©”ëª¨ë¦¬ë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°ì´í„°ì˜ ì €ì¥, ë¡œë“œê°€ ê°€ëŠ¥ SwiftëŠ” URLSessionìœ¼ë¡œ dataTaskë¥¼ ë§Œë“¤ì–´, Network í˜¸ì¶œ(request)ì„ í•˜ë©´ ì‘ë‹µ(response)ìœ¼ë¡œ Dataí˜•ì„ ë°›ëŠ”ë°, ì´ëŠ” ì €ì¥, ë¡œë“œ, ë³€í™˜ì´ ì‰½ê¸° ë–„ë¬¸ì— Dataë¡œ ë°›ìŒ âœ… ì¦‰, ìì£¼ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ json ë°ì´í„°ë¥¼ structí˜•ìœ¼ë¡œ ë³€ê²½í•˜ê±°ë‚˜, ë°˜ëŒ€ë¡œ structí˜•ì—ì„œ jsonìœ¼ë¡œ ë³€ê²½í•  ë•Œ ë¨¼ì € Dataí˜•ìœ¼ë¡œ ë³€ê²½í•œ ë‹¤ìŒ ì›í•˜ëŠ” ë°ì´í„°í˜•ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì‚¬ìš©ğŸ€ Encodable Dataí˜•ìœ¼ë¡œ ë³€í˜•í•  ìˆ˜ ìˆëŠ” íƒ€ì…(JSON í˜•) âœ… ì¦‰, Modelì„ json í˜•ìœ¼ë¡œ ë³€ê²½( ì§ë ¬í™” ) 1ï¸âƒ£ ì˜ˆì œ ) Encodableì„ ì¤€ìˆ˜í•˜ê³  ìˆëŠ” Sample struct ìƒì„± ğŸ‘‡ struct Sample: Encodable { let a: Int let b: Int} âœ… ì„¤ëª… Sampleì€ Encodableì„ ì¤€ìˆ˜í•˜ê³  ìˆìœ¼ë¯€ë¡œ, Sampleê°ì²´ëŠ” Dataí˜•ì˜ ê°ì²´ë¡œ ë³€í˜• ê°€ëŠ¥ 2ï¸âƒ£ ì˜ˆì œ ) struct ğŸ‘‰ json ìœ¼ë¡œ ë³€í™˜ (ì§ë ¬í™”) ğŸ‘‡ let sample = Sample(a: 0, b: 0)// JSON íƒ€ì…ìœ¼ë¡œ ì¸ì½”ë”©í•  ìˆ˜ ìˆëŠ” ê°ì²´let jsonEncoder = JSONEncoder()jsonEncoder.outputFormatting = .prettyPrinted // ì¤„ë°”ê¿ˆê³¼ ë“¤ì—¬ì“°ê¸° ì‚½ì…jsonEncoder.outputFormatting = .sortedKeys // í‚¤ ì •ë ¬ (ì‚¬ì „ìˆœ)// ìœ„ì˜ 2ê°€ì§€ ì„¤ì •ì„ í•¨ê»˜ ì“°ëŠ” ê²½ìš°jsonEncoder.outputFormatting = [.sortedKeys, .prettyPrinted]let data = try jsonEncoder.encode(sample)print(data) // 13 bytesprint(String(data: data, encoding: .utf8)) // \"{\\n \\\"a\\\" : 0,\\n \\\"b\\\" : 0\\n}\" âœ… ì„¤ëª… JSONEncoder ğŸ‘‰ JSON íƒ€ì…ìœ¼ë¡œ ì¸ì½”ë”©í•  ìˆ˜ ìˆëŠ” ê°ì²´ ğŸ€ Decodable Dataí˜•ì„ sturctì™€ ê°™ì€ ê²ƒìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆëŠ” íƒ€ì… ì£¼ë¡œ ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ responseë¥¼ structì— ë§¤ì¹­ ì‹œí‚¬ ë•Œ ë§ì´ ì‚¬ìš© âœ… ì¦‰, Jsonì„ Model í˜•ìœ¼ë¡œ ë³€ê²½( ì—­ì§ë ¬í™” ) 1ï¸âƒ£ ì˜ˆì œ ) Decodableì„ ì¤€ìˆ˜í•˜ê³  ìˆëŠ” Sample2 struct ìƒì„± ğŸ‘‡ struct Sample2: Decodable { let aVal: Int let bVal: Int enum CodingKeys: String, CodingKey { case aVal = \"a\" case bVal = \"b\" }} âœ… ì„¤ëª… Sample2ëŠ” Decodableì„ ì¤€ìˆ˜í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, Dataí˜•ì„ Sample2ì—ì„œ ì •ì˜í•œ í”„ë¡œí¼í‹°ì— ë§¤í•‘ì´ ê°€ëŠ¥ CodingKey ğŸ‘‰ json keyê°€ ì•„ë‹Œ ë‚´ê°€ ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í”„ë¡œí† ì½œ ì¦‰, Android Gson @SeriallizeNameê³¼ ì—­í• ì´ ê°™ìŒ ì„œë²„ì—ì„œ ë‚´ë ¤ì˜¤ëŠ” response ì˜ ê° ì´ë¦„ì´ ë§ˆìŒì— ì•ˆë“¤ë•Œ ë‚´ê°€ ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ ë§¤í•‘ì‹œì¼œ ì£¼ê¸° ìœ„í•´ ì‚¬ìš© ì—¬ê¸°ì„œëŠ” aVal ì´ aì˜ ì´ë¦„ì„ ê°€ì§„ response ì™€ ë§¤ì¹­ë˜ê³ , bValì€ bì˜ ì´ë¦„ì„ ê°€ì§„ responseì™€ ë§¤ì¹­ë¨. 2ï¸âƒ£ ì˜ˆì œ ) json ğŸ‘‰ structë¡œ ë³€í™˜ (ì—­ì§ë ¬í™”) ğŸ‘‡ let data = try jsonEncoder.encode(smaple)let jsonDecoder = JSONDecoder()let sample2 = try jsonDecoder.decode(Sample2.self, from: data)print(sample2) // Sample2(aVal: 0, bVal: 0) ğŸ€ Codable Decodableê³¼ Encodableì„ ë™ì‹œì— ê°€ì§€ê³  ìˆëŠ” íƒ€ì… âœ… ì¦‰, Decodableê³¼ Encodableì´ í•©ì³ì§„ ê²ƒ struct, enum, class ì „ë¶€ ì±„íƒ ê°€ëŠ¥ 1ï¸âƒ£ ì˜ˆì œ ) Codableì„ ì±„íƒí•˜ê³  ìˆëŠ” Track structìƒì„± ğŸ‘‡ struct Track: Codable { let title: String let artistName: String let isStreamable: Bool} 2ï¸âƒ£ ì˜ˆì œ ) ì§ë ¬í™” - struct ì¸ìŠ¤í„´ìŠ¤ë¥¼ JSONEncoderë¥¼ ì‚¬ìš©í•˜ì—¬ Dataë¡œ ì¸ì½”ë”© ğŸ‘‡ let sampleInput = Track(title: \"New Rules\", artistName: \"Choi young jun\", isStreamable: true)do { let encoder = JSONEncoder() // ì§ë ¬í™” struct -&gt; data let data = try encoder.encode(sampleInput) print(data) // 65 Bytes // data -&gt; string í˜•íƒœë¡œ ë³€í™˜ if let jsonString = String(data: data, encoding: .utf8) { print(jsonString) // {\"title\":\"New Rules\",\"isStreamable\":true,\"artistName\":\"Dua Lipa\"} }} catch { print(error)} 3ï¸âƒ£ ì˜ˆì œ ) ì—­ì§ë ¬í™” - Dataë¥¼ structë¡œ ë³€ê²½ ğŸ‘‡ let jsonData = \"\"\"{ \"artistName\" : \"Dua Lipa\", \"isStreamable\" : true, \"title\" : \"New Rules\"}\"\"\".data(using: .utf8)!do { let decoder = JSONDecoder() let data = try decoder.decode(Track.self, from: jsonData) print(data) // Track(title: \"New Rules\", artistName: \"Dua Lipa\", isStreamable: true) print(data.title) // New Rules} catch { print(error)} 3ï¸âƒ£ ì˜ˆì œ ) Handling Dates - decoder.dateDecodingStrategy ì†ì„± ì‚¬ìš© ğŸ‘‡ struct Track: Codable { let title: String let artistName: String let isStreamable: Bool let releaseDate: Date}let jsonData = \"\"\"{ \"artistName\" : \"Dua Lipa\", \"isStreamable\" : true, \"title\" : \"New Rules\", \"releaseDate\": \"2017-06-02T12:00:00Z\"}\"\"\".data(using: .utf8)!do { let decoder = JSONDecoder() // Serialize ë‚ ì§œê°€ date í˜•íƒœë¡œ ë³€í™˜ë˜ê²Œ í•˜ëŠ” ì„¤ì • decoder.dateDecodingStrategy = .iso8601 let data = try decoder.decode(Track.self, from: jsonData) print(data) print(data.releaseDate)} catch { print(error)} 4ï¸âƒ£ ì˜ˆì œ ) api responseê°€ Wrapper Keyë¥¼ í¬í•¨í•˜ëŠ” ê²½ìš° ğŸ‘‡ struct Response: Codable { let resultCount: Int let results: [Track]}struct Track: Codable { let title: String let artistName: String let isStreamable: Bool}let jsonData = \"\"\"{ \"resultCount\": 50, \"results\": [{ \"artistName\" : \"Dua Lipa\", \"isStreamable\" : true, \"title\" : \"New Rules\" }]}\"\"\".data(using: .utf8)!do { let decoder = JSONDecoder() let data = try decoder.decode(Response.self, from: jsonData) print(data.results[0]) // Track(title: \"New Rules\", artistName: \"Dua Lipa\", isStreamable: true)} catch { print(error)} 5ï¸âƒ£ ì˜ˆì œ ) api responseê°€ Root Level Arraysë¥¼ ê°€ì§ˆ ê²½ìš° ğŸ‘‡ struct Track: Codable { let title: String let artistName: String let isStreamable: Bool}let jsonData = \"\"\"[{ \"artistName\" : \"Dua Lipa\", \"isStreamable\" : true, \"title\" : \"New Rules\"}]\"\"\".data(using: .utf8)!do { let decoder = JSONDecoder() // ë„£ì„ë•Œ []ë¡œ ê°ì‹¸ì„œ ì‚¬ìš© let data = try decoder.decode([Track].self, from: jsonData) print(data[0]) // Track(title: \"New Rules\", artistName: \"Dua Lipa\", isStreamable: true)} catch { print(error)} 5ï¸âƒ£ ì˜ˆì œ ) structì—ì„œ enum ì„ typeìœ¼ë¡œ ê°€ì§ˆ ê²½ìš° ğŸ‘‡ struct Track: Codable { let title: String let artistName: String let isStreamable: Bool let primaryGenreName: Genre}enum Genre: String, Codable { case Pop case KPop = \"K-Pop\" case Rock case Classical case HipHop = \"Hip-Hop\"}let jsonData = \"\"\"{ \"artistName\" : \"Dua Lipa\", \"isStreamable\" : true, \"title\" : \"New Rules\", \"primaryGenreName\": \"Pop\"}\"\"\".data(using: .utf8)!do { let decoder = JSONDecoder() let data = try decoder.decode(Track.self, from: jsonData) print(data) print(data.primaryGenreName) // Pop} catch { print(error)} " }, { "title": "iOS Swift ë¬¸ë²• - Struct / Class ì„ íƒ ê¸°ì¤€", "url": "/posts/iOS-Swift-Struct-Class-Standard/", "categories": "Swift, Grammar", "tags": "struct, class", "date": "2022-11-22 17:43:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” ì§€ë‚œ Struct / Class ê°•ì˜ì— ì´ì–´ Structê³¼ Classì˜ ì„ íƒ ê¸°ì¤€ì„ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Struct / Class ì„ íƒê¸°ì¤€ âœ… ê¸°ì¤€ 1ï¸âƒ£ ê¸°ë³¸ì ìœ¼ë¡œ Structë¥¼ ì‚¬ìš©í•¨ ì•ˆì „ì„± ì¸¡ë©´ì—ì„œ ê°€ëŠ¥í•œ í•œ structë¥¼ ì‚¬ìš© 2ï¸âƒ£ Object-Cì½”ë“œì™€ ì—°ê³„ê°€ í•„ìš”í•˜ë©´ classë¥¼ ì‚¬ìš© 3ï¸âƒ£ Dataì˜ identityë¥¼ ë‹¤ë¤„ì•¼ í•œë‹¤ë©´ classë¥¼ ì‚¬ìš© (ì°¸ì¡°ë°©ì‹) 4ï¸âƒ£ ìƒì†ì´ í•„ìš”í•  ê²½ìš° ğŸ‘‰ struct + protocol ì¡°í•©ì„ ì‚¬ìš© protocolì€ classì™€ ë‹¬ë¦¬, sturct, class, enum ëª¨ë‘ì™€ ìƒì† ê´€ê³„ë¥¼ ì§€ì„ ìˆ˜ ìˆì–´ ì„ í˜¸ë¨ 5ï¸âƒ£ ìƒì†ì´ í•„ìš”í•˜ì§€ ì•Šê³  ëª¨ë¸ì´ í¬ì§€ ì•Šìœ¼ë©´ struct ì‚¬ìš© 6ï¸âƒ£ DBì—°ê²° ì²˜ëŸ¼ App ì „ì²´ ì½”ë“œì—ì„œ ìƒí™©ì„ ê³µìœ í•´ì•¼ í•  ë•Œ class ì‚¬ìš© 7ï¸âƒ£ jsoníŒŒì‹±í•  ê²½ìš° structì‚¬ìš© 8ï¸âƒ£ serializeí•´ì„œ ì „ì†¡í•˜ê±°ë‚˜ íŒŒì¼ë¡œ ì €ì¥í•  ì¼ì´ ìˆë‹¤ë©´ class ì‚¬ìš© â˜˜ï¸ ê¸°ë³¸ì ìœ¼ë¡œ struct ì‚¬ìš© ì¼ë°˜ì ì¸ ì¢…ë¥˜ì˜ Dataë¥¼ ë³´ì—¬ì¤„ ë•Œ structë¥¼ ì‚¬ìš©í•˜ë©´ ë¨ Swiftì—ì„œ structëŠ” ë‹¤ë¥¸ ì–¸ì–´ì—ì„œ classì—ê²Œë§Œ í—ˆìš©í•˜ëŠ” ì—¬ëŸ¬ featureë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ structë¥¼ ì‚¬ìš©í•˜ë©´ appì˜ ì „ì²´ ìƒíƒœë¥¼ ê³ ë ¤í•  í•„ìš”ì—†ì´ ì½”ë“œì˜ ì¼ë¶€ì— ëŒ€í•´ ë” ì‰½ê²Œ ì¶”ë¡ í•  ìˆ˜ ìˆìŒ structëŠ” ê°’ íƒ€ì… ì´ê¸° ë•Œë¬¸ì— structì˜ ì§€ì—­ì ì¸ ë³€í™”ëŠ” ì˜ë„ì ìœ¼ë¡œ ì•Œë¦¬ì§€ ì•ŠëŠ” í•œ appì˜ ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œëŠ” ë³´ì´ì§€ ì•ŠìŒ. âœ… ê²°ê³¼ ì ìœ¼ë¡œ code sectionì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ì— ë³€í™”ë¥¼ ì¤„ ìˆ˜ ì—†ê¸°ì— codeì˜ í•œ ë¶€ë¶„ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆìŒ ì°¸ì¡° íƒ€ì…ì¸ classë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ë§Œì•½ systemì´ í¬ê³  ë³µì¡í•˜ë‹¤ë©´, ì„œë¡œë¥¼ ë’¤ì£½ë°•ì£½ ì°¸ì¡°í•´ëŒˆ ìˆ˜ë„ ìˆê³  ì•„ë¬´ê³³ì—ì„œë‚˜ Instanceë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê¸°ì— ì½”ë“œ ì „ì²´ì— ì‹ ê²½ì„ ì¨ì•¼í•¨â˜˜ï¸ Object-C ì½”ë“œì™€ ì—°ê³„ê°€ í•„ìš”í•  ê²½ìš° class ì‚¬ìš© ë§Œì•½ dataë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Objective-C APIë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ê±°ë‚˜, Objective-C Frameworkì— â€œclassë¡œ ì •ì˜ëœâ€ íƒ€ì…ìœ¼ë¡œ data modelingì„ í•´ì•¼ í•œë‹¤ë©´, classì™€ class ìƒì†ì„ ì‚¬ìš©â˜˜ï¸ Dataì˜ identityë¥¼ ë‹¤ë¤„ì•¼ í•œë‹¤ë©´ classë¥¼ ì‚¬ìš© (ì°¸ì¡°ë°©ì‹) appê°„ class instanceë¥¼ ê³µìœ í•  ë•Œ, ì´ instanceë¥¼ ë³€ê²½í•˜ë©´ ì´ë¥¼ ì°¸ì¡°í•˜ëŠ” ì½”ë“œì˜ ë‹¤ë¥¸ ëª¨ë“  ë¶€ë¶„ì—ì„œë„ ì´ ë³€í™”ê°€ ë³´ì´ê¸¸ ì›í•œë‹¤ë©´ classì‚¬ìš© file handles, network connections, shared hardware intermediaries ë“±ë“±.. ë§Œì•½ local DBì—°ê²°ì„ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…ì„ ê°€ì§€ê³  ìˆë‹¤ë©´, DBì ‘ê·¼ì„ ê´€ë¦¬í•˜ëŠ” ì½”ë“œëŠ” DBì˜ ìƒíƒœë¥¼ ì™„ì „íˆ ì œì–´í•´ì•¼í•¨ ì´ ê²½ìš° classë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì ì ˆí•¨ identityë¥¼ ê°€ì§€ë”ë¼ë„ ì œì–´í•  í•„ìš”ê°€ ì—†ìœ¼ë©´ structë¥¼ ì‚¬ìš© modeling ì¤‘ì¸ dataê°€ entityì— ëŒ€í•œ ì •ë³´ì´ë©°, ì´ entityì— identityê°€ ë“¤ì–´ìˆì§€ë§Œ controlì´ í•„ìš”ì—†ë‹¤ë©´ structë¥¼ ì‚¬ìš© â˜˜ï¸ ìƒì†ì´ í•„ìš”í•  ê²½ìš° struct + protocol ì¡°í•©ì„ ì‚¬ìš© protocol ìƒì† + struct ì¡°í•©ìœ¼ë¡œ ìƒì†ê³„ì¸µì„ ë§Œë“¤ ìˆ˜ ìˆìŒ protocolì€ class, struct, enum ëª¨ë‘ê°€ ìƒì†ì— ì°¸ì—¬í•  ìˆ˜ ìˆë„ë¡ í—ˆìš© class ìƒì†ì€ class ë¼ë¦¬ë§Œ ê°€ëŠ¥ âœ… dataë¥¼ ì–´ë–»ê²Œ modelingí• ì§€ ê³ ë¥´ê³  ìˆë‹¤ë©´, ìš°ì„  protocol ìƒì†ì„ ì“°ê³  structê°€ ì±„íƒí•˜ë„ë¡ ì„¤ì •" }, { "title": "iOS Swift ë¬¸ë²• - Extension", "url": "/posts/iOS-Swift-Extension/", "categories": "Swift, Grammar", "tags": "Extension", "date": "2022-11-22 13:18:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ Extensionì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Extension Kotlinì˜ í™•ì¥ í•¨ìˆ˜ì™€ ìœ ì‚¬ ê¸°ì¡´ Class, Struct, Enum, Protocolì— ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€ í•˜ìœ„ Classë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì°¸ì¡°í•˜ì§€ ì•Šê³  ê·¸ì € ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì‚¬ìš© âœ… íŠ¹ì§• ê³„ì‚°ëœ instance property ë° ê³„ì‚° ìœ í˜• ì†ì„± ì¶”ê°€ instance method ë° type method ì •ì˜ ìƒˆ initializer ì œê³µ Subscript ì •ì˜ ìƒˆ ì¤‘ì²© íƒ€ì… ì •ì˜ ë° ì‚¬ìš© ê¸°ì¡´ íƒ€ì…ì„ Protocolì— ë§ê²Œ ì„¤ì • âœ… Extention ì„ ì–¸ ğŸ‘‡ extension ê¸°ì¡´ íƒ€ì…ì´ë¦„ { //ìƒˆë¡œìš´ ê¸°ëŠ¥}// ìµìŠ¤í…ì…˜ì€ ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” íƒ€ì…ì´ ì¶”ê°€ì ìœ¼ë¡œ ë‹¤ë¥¸ í”„ë¡œí† ì½œì„ ì±„íƒí•  ìˆ˜ ìˆë„ë¡ í™•ì¥í•  ìˆ˜ë„ ìˆìŒextension í™•ì¥ íƒ€ì…ì´ë¦„: í”„ë¡œí† ì½œ1, í”„ë¡œí† ì½œ2, í”„ë¡œí† ì½œ3 { //ìƒˆë¡œìš´ ê¸°ëŠ¥} Double Typeì— Extension ì ìš© ì˜ˆì œ ğŸ‘‡extension Double { var squared: Double { return self * self }}let myValue:Double = 3.5print(myValue.squared)print(3.5.squared) ì„¤ëª… ğŸ‘‡ Double íƒ€ì…ì˜ ë³€ìˆ˜ë‚˜ ìƒìˆ˜ë¥¼ ìƒì„±í•˜ë©´ squaredë¼ëŠ” propertyì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨ âš ï¸ ê¸°ì¡´ íƒ€ì…ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ í™•ì¥ì„ ì •ì˜í•œë‹¤ë©´, ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ ê¸°ì¡´ íƒ€ì…ì˜ instnaceì—ì„œë§Œ ê°€ëŠ¥ â˜˜ï¸ Protocolì„ ì±„íƒí•  ë•Œ ì‚¬ìš©í•˜ëŠ” Extenstion Extenstionì€ Protocol ì±„íƒí•  ë•Œ ë§ì´ ì‚¬ìš©ë¨ í•˜ë‚˜ì˜ ViewController í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ì´ í´ë˜ìŠ¤ëŠ” UIViewController, UIPickerViewDelegate, UIPickerViewDataSource Protocolì„ ì±„íƒ ë°›ëŠ” ì˜ˆì œ ğŸ‘‡class ViewController: UIViewController, UIPickerViewDelegate, UIPickerViewDataSource {} ì„¤ëª… ğŸ‘‡ ìœ„ì˜ ì½”ë“œì™€ ê°™ì´ ì†ŒìŠ¤ë¥¼ ì‘ì„±í•˜ê²Œ ëœë‹¤ë©´ Classê°€ ë„ˆë¬´ ë¹„ëŒ€í•´ì§„ë‹¤ëŠ” ë‹¨ì  ì´ ìƒê¹€. ì´ë•Œ Extentionì„ ì´ìš©í•˜ì—¬ Classë¥¼ ë‚˜ëˆ„ê²Œ ë˜ë©´ ì†ŒìŠ¤ê°€ ê¹”ë”í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ì›Œì§ âœ… ìœ„ ì½”ë“œ ê°œì„  ì˜ˆì œ ğŸ‘‡class ViewController: UIViewController{}extension ViewController: UIPickerViewDelegate{}extension ViewController: UIPickerViewDataSource{}" }, { "title": "iOS Swift ì—ì„œ Singleton ì‚¬ìš©í•˜ê¸°", "url": "/posts/iOS-Swift-Singleton/", "categories": "Swift, SwiftUi", "tags": "singleton, static", "date": "2022-11-22 13:14:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swiftì—ì„œ Singleton íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Singleton Kotlinì˜ compainion objectì™€ ìœ ì‚¬í•¨ ğŸ‘ ì¥ì  ë‹¨ í•œë²ˆì˜ instanceë§Œ ìƒˆì„±í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŒ Singleton instanceëŠ” ì „ì—­ instanceë¡œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë“¤ê³¼ ìì› ê³µìœ  ê°€ ì‰¬ì›€ DBCP(Database Connection Pool)ì²˜ëŸ¼ ê³µí†µëœ ê°ì²´ë¥¼ ì—¬ëŸ¬ê°œ ìƒì„±í•´ì„œ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìƒí™©ì—ì„œ ë§ì´ ì‚¬ìš© Thread Pool, Cache, ëŒ€í™”ìƒì, ì‚¬ìš©ì ì„¤ì •, Registry ì„¤ì •, Log ê¸°ë¡ ê°ì²´ ë“±.. ğŸ‘ ë‹¨ì  Singleton Instanceê°€ ë„ˆë¬´ ë§ì€ ì¼ì„ í•˜ê±°ë‚˜, ë§ì€ ë°ì´í„°ë¥¼ ê³µìœ ì‹œí‚¬ ê²½ìš° ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ Instanceë“¤ ê°„ ê²°í•©ë„ê°€ ë†’ì•„ì ¸ ê°œë°©=íì‡„ ì›ì¹™ì„ ìœ„ë°°í•¨(ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™ì— ì–´ê¸‹ë‚¨) ë”°ë¼ì„œ ìœ ì§€ ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ì–´ë ¤ì›Œì§ ìˆ˜ì •ê³¼ Testê°€ ì–´ë ¤ì›Œì§ â˜˜ï¸ Swift ì—ì„œ Singleton ì‚¬ìš© Staticì„ ì‚¬ìš©í•´ Type Propertyë¡œ Instanceë¥¼ ìƒì„±í•˜ë©´, ì‚¬ìš© ì‹œì ì— ì´ˆê¸°í™”(Lazy) ê°€ ë˜ê¸° ë•Œë¬¸ì— Singleton Instanceê°€ ìµœì†Œ ìƒì„±ë˜ê¸° ì „ê¹Œì§„ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ì§€ ì•Šê³ , Dispatch_onceë„ ìë™ ì ìš©ë¨ âœ… ë³„ë„ì˜ ì½”ë“œ ì—†ì´ Instanceê°€ ì—¬ëŸ¬ ê°œ ìƒì„±ë˜ì§€ ì•ŠëŠ”, Thread-Safeí•œ ë°©ë²•ì´ ë¨ í˜¹ì‹œë¼ë„ init()ì„ í˜¸ì¶œí•˜ì—¬ Instanceë¥¼ ë˜ ìƒì„±í•˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ init() í•¨ìˆ˜ ì ‘ê·¼ ì œì–´ìë¥¼ privateë¡œ ì§€ì • ì˜ˆì œ ğŸ‘‡class UserInfo { static let shared = UserInfo() var id: String? var password: String? var name: String? private init() {}}let userInfo = UserInfo.shareduserInfo.id = \"YoungJun\"" }, { "title": "iOS Swift ë¬¸ë²• - Type Method", "url": "/posts/iOS-Swift-TypeMethod/", "categories": "Swift, Grammar", "tags": "Type Method", "date": "2022-11-22 11:13:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ Type Methodì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Type Method Type ìì²´ì—ì„œ í˜¸ì¶œë˜ëŠ” Method instanceë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ ë„ íƒ€ì… ìì²´ì—ì„œ Methodë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŒ kotlin ì˜ singleton ì¸ object/companion objectì™€ ë¹„ìŠ· method ì•ì— static ì´ë‚˜ classì˜ í‚¤ì›Œë“œê°€ ë¶™ìŒ static func class func ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ override í•  ìˆ˜ ì—†ìŒ ì„œë¸Œ í´ë˜ì—ì„œ override ê°€ëŠ¥ â˜˜ï¸ class func classëŠ” ìƒì†ì´ ê°€ëŠ¥í•˜ë‚˜ Struct/Enumì—ì„œëŠ” ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ì—¬ class funcì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ â—ï¸ Struct/Enumì—ì„œëŠ” ì˜¤ë¡œì§€ Static funcë§Œ ì‚¬ìš© ê°€ëŠ¥ override ê°€ëŠ¥ ì˜ˆì œclass Print { class func printMessage() { print(\"Hello!!\") }}// Type Methodë¡œ instanceë¥¼ ìƒì„±í•´ì¤„ í•„ìš” ì—†ì´ íƒ€ì… ìì²´ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆìŒPrint.printMessage()â˜˜ï¸ static func override ë¶ˆê°€ ì˜ˆì œclass Print { static func printMessage() { print(\"Hello!!\") }}Print.printMessage()" }, { "title": "iOS Swift ë¬¸ë²• - Closure", "url": "/posts/iOS-Swift-Closure/", "categories": "Swift, Grammar", "tags": "closure", "date": "2022-11-22 11:13:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ Closureì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Closure ì´ë¦„ ì—†ëŠ” í•¨ìˆ˜ (Kotlin ì˜ ëŒë‹¤ì™€ ë¹„ìŠ·, ì¦‰ ìµëª… í•¨ìˆ˜) ì¼ë°˜ í•¨ìˆ˜ ğŸ‘‰ ì´ë¦„ì´ ìˆëŠ” Closure í•¨ìˆ˜ ì¸ìë“¤ì„ ë„£ì„ ìˆ˜ ìˆê³ , ë°˜í™˜íƒ€ì…ê¹Œì§€ ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆìŒ í•¨ìˆ˜ì˜ ë‚´ìš© ğŸ‘‰ in ë‹¤ìŒì— ìˆ˜í–‰ ë‚´ìš© ì ê¸° ì¼ë°˜í•¨ìˆ˜ ì˜ˆì œ ğŸ‘‡func add(x:Int, y:Int) -&gt; Int { return (x+y)}print(add(x:10, y:20)) Closure í•¨ìˆ˜ ì˜ˆì œ ğŸ‘‡let add1 = {(x: Int, y:Int) -&gt; Int in return(x+y)}print(add(10, 20))â˜˜ï¸ í›„í–‰ í´ë¡œì €(trailing closure) closureê°€ í•¨ìˆ˜ì˜ ë§ˆì§€ë§‰ argumentë¼ë©´ ë§ˆì§€ë§‰ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì„ ìƒëµí•œ í›„ í•¨ìˆ˜ ì†Œê´„í˜¸ ì™¸ë¶€ì— closureë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ âœ… Kotlin ì˜ ëŒë‹¤ì™€ ê°™ìŒ ì˜ˆì œ ğŸ‘‡//í›„í–‰ í´ë¡œì € ë¯¸ì‚¬ìš©let onAction = UIAlertAction(title: \"On\", style: UIAlertAction.Style.default, handler: { //ì‹¤í–‰ ì½”ë“œ})//í›„í–‰ í´ë¡œì € ì‚¬ìš©let onAction = UIAlertAction(title: \"On\", style: UIAlertAction.Style.default) { //ì‹¤í–‰ ì½”ë“œ})â˜˜ï¸ Closure ì˜ ì¶•ì•½ í‘œí˜„ 1ï¸âƒ£ íƒ€ì… ìƒëµ ğŸ‘‰ closureëŠ” methodì—ì„œ ìš”êµ¬í•˜ëŠ” í˜•íƒœë¡œ ì „ë‹¬í•´ì•¼ í•¨ ğŸ‘‰ swiftëŠ” ì´ëŸ¬í•œ ë¬¸ë§¥ì„ ì´ìš©í•´ íƒ€ì…ì„ ìœ ì¶”í•  ìˆ˜ ìˆìŒ(íƒ€ì… ì¶”ë¡ ) ğŸ‘‰ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ë‚˜ ë°˜í™˜ íƒ€ì…ì„ ìƒëµí•´ì„œ closureë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨ 2ï¸âƒ£ return ìƒëµ ğŸ‘‰ return ë„ ìƒëµ ê°€ëŠ¥ 3ï¸âƒ£ ë§¤ê°œë³€ìˆ˜ ìƒëµ ğŸ‘‰ ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ë„ ìƒëµ ê°€ëŠ¥ ğŸ‘‰ ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ $ì™€ ìˆ«ìì˜ ì¡°í•©ìœ¼ë¡œ ë‹¨ì¶• ì¸ì ì´ë¦„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ ğŸ‘‰ $0 ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ ğŸ‘‰ $1 ë‘ ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ ğŸ‘‰ in í‚¤ì›Œë“œë„ ìƒëµ ê°€ëŠ¥ 4ï¸âƒ£ ì—°ì‚°ìë§Œ í‘œê¸° ğŸ‘‰ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ê³¼ ë°˜í™˜ íƒ€ì…ì´ ì—°ì‚°ìë¥¼ êµ¬í˜„í•œ í•¨ìˆ˜ì˜ ëª¨ì–‘ê³¼ ë™ì¼í•˜ë‹¤ë©´, ì—°ì‚°ìë§Œ í‘œê¸°í•˜ë”ë¼ë„ ì•Œì•„ì„œ ì—°ì‚°í•˜ê³  ë°˜í™˜í•´ì¤Œ ì˜ˆì œ ğŸ‘‡let names = [\"Chris\", \"Alex\", \"Ewa\", \"Barry\", \"Daniella\"]// ì¼ë°˜ closurelet reversed = names.sorted(by: { (s1: String, s2: String) -&gt; Bool in return s1 &gt; s2})// 1ï¸âƒ£ ë§¤ê°œ ë³€ìˆ˜ íƒ€ì…, ë°˜í™˜ íƒ€ì… ìƒëµlet reversed2 = names.sorted(by: { (s1, s2) in return s1 &gt; s2})// 2ï¸âƒ£ Return ìƒëµlet reversed3 = names.sorted(by: { (s1, s2) in \ts1 &gt; s2})// 3ï¸âƒ£ ë§¤ê°œë³€ìˆ˜, in í‚¤ì›Œë“œ ìƒëµlet reversed4 = names.sorted(by: { return $0 &gt; $1})// 4ï¸âƒ£ ì—°ì‚°ìë§Œ í‘œê¸°let reversed5 = names.sorted(by: &gt;)" }, { "title": "iOS Swift ë¬¸ë²• - Optional Binding", "url": "/posts/iOS-Swift-Optional-Binding/", "categories": "Swift, Grammar", "tags": "Optional Binding, Optional, if let, guard let", "date": "2022-11-22 10:21:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ Optional Bindingì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Optional Binding ê°•ì œë¡œ Optionalì„ ì—¬ëŠ” ë°©ì‹(!)ê°€ ì•„ë‹Œ ì•ˆì „í•˜ê²Œ í™•ì¸ì„ í•´ë³´ê³  unwrappingì„ í•˜ëŠ” ë°©ë²• ifë¬¸ì„ ì´ìš©í•˜ì—¬ Optionalì— í• ë‹¹ëœ ê°’ì„ ì„ì‹œ ë³€ìˆ˜ ë˜ëŠ” ìƒìˆ˜ì— í• ë‹¹ì„ í•´ì£¼ëŠ” ë°©ì‹ Force unwrapping Optional Binding !ë¥¼ ì¨ì„œ ìƒì œë¡œ Optionalì¶”ì¶œ if let, guard letì„ ì¨ì„œ Optionalì¶”ì¶œ ë§Œì•½ Optionalì— ê°’ì´ ìˆë‹¤ë©´ ifë¬¸ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë˜ê³ , nilì´ë¼ë©´ ê·¸ëƒ¥ í†µê³¼í•˜ê²Œ ë˜ëŠ” ë°©ì‹â˜˜ï¸ if let (ì§€ì—­ ë³€ìˆ˜ë¡œë§Œ ì‚¬ìš©ê°€ëŠ¥) ì§€ì—­ ë³€ìˆ˜ë¡œë§Œ ì‚¬ìš© ê°€ëŠ¥ ì¦‰, if ë¬¸ ë¸”ëŸ­ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥ í• ë‹¹ ìƒìˆ˜ë¥¼ ifë¬¸ ì•ˆì—ì„œë§Œ ì‚¬ìš© ì˜ˆì œ ğŸ‘‡let x: Int? = 10let y: Int? = nilif let xx = x { print(\"x = \\(xx)\")} else { print(\"x is Optional\")}if let yy = y { print(\"y = \\(yy)\")} ì„¤ëª… ğŸ‘‡ ê°’ì´ ìˆëŠ” xëŠ” xxì— ëŒ€ì…ë˜ì–´ ifë¬¸ì„ ìˆ˜í–‰í•˜ê²Œ ë˜ê³ , ê°’ì´ nilì¸ yëŠ”yyì— ëŒ€ì…í•˜ì§€ ëª»í•˜ê³  ê·¸ëƒ¥ í†µê³¼í•¨ â˜˜ï¸ ì—¬ëŸ¬ Optional Binding Optional Binding í• ë•ŒëŠ” ì—¬ëŸ¬ ë³€ìˆ˜ë‚˜ ìƒìˆ˜ ë˜í•œ ê°™ì´ í•  ìˆ˜ ìˆìŒ ,ë¡œ êµ¬ë¶„ì§€ì–´ì„œ ì‚¬ìš© ì˜ˆì œ ğŸ‘‡let name1: String?let name2: String?name1 = \"choi\"name2 = \"kim\"if let nameFirst = name1, let nameSecond = name2 { // name1, name2 ê°€ Optinalì´ ì•„ë‹Œ ê²½ìš° í•´ë‹¹ ë¡œì§ ì‹¤í–‰ print(nameFirst, nameSecond)}â˜˜ï¸ guard let (ì „ì—­ ë³€ìˆ˜ë¡œ ì‚¬ìš©ê°€ëŠ¥) guard let ì—ì„œëŠ” elseì¸ ë¶€ë¶„ë§Œ ì‘ì„± ì´ ê°€ëŠ¥ ì¦‰, ê°’ì´ nilì´ì—¬ì„œ Optional ì¶”ì¶œì´ ë˜ì§€ ì•Šì„ë•Œë§Œ ì–´ë– í•œ í–‰ë™ì„ ì·¨í•  ìˆ˜ ìˆìŒ ë§Œì•½ nilê°’ì´ ì•„ë‹ ê±¸ í™•ì¸í•˜ê³  Optionalì„ ì„±ê³µì ìœ¼ë¡œ ì¶”ì¶œí–ˆë‹¤ë©´ guard letë¬¸ì„ í†µê³¼ âœ… ì „ì—­ë³€ìˆ˜ë¡œ ì‚¬ìš© ê°€ëŠ¥ ì¦‰, guard letë¬¸ ë°–ì—ì„œë„ í• ë‹¹ ìƒìˆ˜ë¥¼ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥ guard letì˜ elseë¬¸ â—ï¸í•­ìƒ return ì´ë‚˜ throwë¬¸ì´ ì™€ì•¼í•¨ ì˜ˆì œ ğŸ‘‡let x: Int? = 10let y: Int? = nilfunc opbinding() { guard let xx = x else { return print(\"x is Optional\") } print(xx) guard let yy = y else { return print(\"y is Optional\") } print(yy)}opbinding()" }, { "title": "iOS Swift ë¬¸ë²• - Mutating", "url": "/posts/iOS-Swift-Mutating/", "categories": "Swift, Grammar", "tags": "Mutating", "date": "2022-11-22 10:21:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ Mutatingì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Mutating ê°’ íƒ€ì…ì¸ Structì—ì„œëŠ” instance method ë‚´ì—ì„œ propertyë“¤ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ê²Œ ë˜ì–´ ìˆìŒ â—ï¸ Error â—ï¸ Cannot assign property ğŸ‘‰ ê°’ íƒ€ì…ì¸ Structì—ì„œëŠ” methodì•ˆì˜ ê°’ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë°œìƒ ì´ëŸ¬í•œ propertyë“¤ì„ Structì•ˆì˜ methodì—ì„œ ìˆ˜ì •ì„ í•´ì£¼ê¸° ìœ„í•´ mutatingì´ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ì‚¬ìš© âœ… mutating ğŸ‘‰ íŠ¹ì • methodë‚´ì—ì„œ Struct ë˜ëŠ” Enum propertyë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ê²½ìš° í•´ë‹¹ methodì˜ ë™ì‘ì„ ë³€ê²½í•˜ë„ë¡ í•˜ëŠ” ê²ƒ Structë‚˜ Enumì„ ì“¸ë•ŒëŠ” ì •ë§ ì¤‘ìš”í•œ í‚¤ì›Œë“œ ì˜ˆì œ ğŸ‘‡struct Person { let name: String var age: Int init (name: String, age: Int) { self.name = name.uppercased() self.age = age } // mutating í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Cannot assign property Error ë°œìƒ mutating func changeAge() { age = 10 }}var choi = Person(name: \"choi\", age: 29)choi.changeAge()print(choi.age)" }, { "title": "iOS Swift ë¬¸ë²• - Protocol", "url": "/posts/iOS-Swift-Protocol/", "categories": "Swift, Grammar", "tags": "protocol", "date": "2022-11-22 10:02:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ Protocolì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Protocol Kotlin ì˜ interface ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤. íŠ¹ì • ì‘ì—… ë˜ëŠ” ê¸°ëŠ¥ì— ì í•©í•œ ë©”ì„œë“œ, ì†ì„± ë° ê¸°íƒ€ ìš”êµ¬ ì‚¬í•­ì˜ Blueprintë¥¼ ì •ì˜í•œë‹¤ Protocol ğŸ‘‰ ìš”êµ¬ì‚¬í•­ Protocolì—ëŠ” êµ¬í˜„ ë‚´ìš©ì€ ë“¤ì–´ê°€ ìˆì§€ ì•Šê³ , ì±„ìš©í•œ íƒ€ì…ì´ ì§ì ‘ êµ¬í˜„ Protocolì„ ì±„ìš©í•œ í˜•ì‹ì€ ìš”êµ¬ì‚¬í•­ì„ ë°˜ë“œì‹œ ëª¨ë‘ êµ¬í˜„ Protocolì€ Protocolê°„ ìƒì†ì„ ì§€ì›, classì™€ ë‹¬ë¦¬ ë‹¤ì¤‘ ìƒì† ë„ ì§€ì› â„¹ï¸ ì‚¬ìš© ì´ìœ  swiftëŠ” protocol ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ protocol ì´ˆê¸° êµ¬í˜„ì´ protocol ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ í•µì‹¬ swiftì—ì„œëŠ” classë§Œ ìƒì†ì´ ê°€ëŠ¥í•˜ê³  classëŠ” ì°¸ì¡° íƒ€ì…ì´ë¯€ë¡œ ì°¸ì¡° ì¶”ì ì— ë¹„ìš©ì´ ë§ì´ ë°œìƒ ë”°ë¼ì„œ ë¹„êµì  ë¹„ìš©ì´ ì ì€ ê°’ íƒ€ì…ì„ í™œìš©í•˜ê³  ì‹¶ì–´ë„, ìƒì†ì„ í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë•Œë§ˆë‹¤ ê¸°ëŠ¥ì„ ë‹¤ì‹œ êµ¬í˜„í•´ ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ë¶ˆí¸í•¨ì´ ìˆìŒ protocolì„ ì‚¬ìš©í•˜ë©´ ìƒì†ì´ë¼ëŠ” í•œê³„ì ì„ íƒˆí”¼í•  ìˆ˜ ìˆìŒ ì´ˆê¸°ì— êµ¬í˜„í•´ ë†“ì€ ë§ì€ propertyë‚˜ methodë¥¼ ìš°ë¦¬ê°€ ì‰½ê²Œ ì±„íƒí•˜ì—¬ì„œ ì‚¬ìš©ì„ í•  ìˆ˜ ìˆë‹¤ëŠ” í° ì¥ì ì´ ìˆìŒ â˜˜ï¸ Protocol property Protocolì—ì„œ property(ì†ì„±)ë¥¼ ì •ì˜í•  ë•Œì—ëŠ” get ê³¼ set í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ property(ì†ì„±)ê°€ ì½ê¸° ì „ìš© property(ì†ì„±)ì¸ì§€ ì“°ê¸° property(ì†ì„±)ì¸ì§€ë¥¼ ë°˜ë“œì‹œ ëª…ì‹œ ë¥¼ í•´ì¤˜ì•¼ í•¨ {get, set} ğŸ‘‰ ì½ê¸° / ì“°ê¸° property { get } ğŸ‘‰ ì½ê¸° ì „ìš© property ì˜ˆì œ ğŸ‘‡protocol SomeProtocol { var mustBeSettable: Int { get set } var doesNotNeedToBeSettable: Int { get }}â˜˜ï¸ Protocol method method ì˜ ë³¸ë¬¸ì€ í¬í•¨í•˜ì§€ ì•ŠìŒ ì˜ˆì œ ğŸ‘‡protocol RandomNumberGenerator { func random() -&gt; Double}class LinearCongruentialGenerator: RandomNumberGenerator { var lastRandom = 42.0 let m = 139968.0 let a = 3877.0 let c = 29573.0 func random() -&gt; Double { lastRandom = ((lastRandom * a + c) .truncatingRemainder(dividingBy:m)) return lastRandom / m }}" }, { "title": "iOS Swift ë¬¸ë²• - Class / Struct", "url": "/posts/iOS-Swift-Class-Struct/", "categories": "Swift, Grammar", "tags": "class, struct", "date": "2022-11-22 09:02:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Swift ë¬¸ë²•ì— ì¤‘ì—ì„œë„ classì™€ structì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Class Swiftì—ì„œëŠ” classë¥¼ ì •ì˜í•˜ì—¬ ê°ì²´(Object)ë¥¼ ë§Œë“¤ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŒ class í•˜ë‚˜ë¥¼ ë§Œë“ ë‹¤ë©´ classì—ì„œ ìƒì„±ëœ ê°ì²´ì¸ instance ë¥¼ ë§Œë“¤ì–´ ì‹¤ì œ ì‘ì—…ì— ì“°ì¼ ìˆ˜ ìˆê²Œ í•´ì•¼í•¨ instance ğŸ‘‰ í´ë˜ìŠ¤ ì´ˆê¸°í™”, (íƒ€ì… ìºìŠ¤íŒ… í—ˆìš©) ìƒì† ê°€ëŠ¥ âœ… ì°¸ì¡° íƒ€ì… ë³€ìˆ˜ë‚˜ ìƒìˆ˜ì— í• ë‹¹í•˜ê±°ë‚˜ í•¨ìˆ˜ì— ë„˜ê¸¸ ë•Œ ë³µì‚¬í•˜ì§€ ì•ŠìŒ ë³µì‚¬ ëŒ€ì‹ ì— ê¸°ì¡´ì— ê°™ì€ instanceì— ì°¸ì¡°ê°€ ì‚¬ìš©ë¨ ì¦‰, ê°’ì´ ë³µì‚¬ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë©”ëª¨ë¦¬ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒ âœ… ì¦‰, classëŠ” ë ˆí¼ëŸ°ìŠ¤ íƒ€ì…ì´ê¸° ë•Œë¬¸ì— ì•„ë¬´ë¦¬ ì—¬ëŸ¬ ë²ˆ ì „ë‹¬í•˜ë”ë¼ë„ ë‹¨ í•˜ë‚˜ì˜ instanceë§Œ ì¡´ì¬ í•˜ê³ , ë”°ë¼ì„œ ê·¸ í•˜ë‚˜ì˜ instnaceë¥¼ ì°¸ì¡°í•˜ëŠ” ì–´ëŠ í•œ êµ°ë°ì—ì„œ instanceì— ë³€í™”ë¥¼ ì£¼ê²Œ ë˜ë©´ ë‹¤ë¥¸ ëª¨ë“  ê³³ì—ì„œë„ ë°”ë€Œê²Œ ë˜ëŠ” íŠ¹ì„±ì´ ìˆìŒ ì†ì„±(property) ğŸ‘‰ í´ë˜ìŠ¤ ì•ˆì˜ ë³€ìˆ˜ ë©”ì„œë“œ(method) ğŸ‘‰ í´ë˜ìŠ¤ ì•ˆì˜ í•¨ìˆ˜ âœ… init ğŸ‘‰ instanceë¥¼ ë§Œë“¤ë•Œ ìƒì„±ìì— ì¸ìˆ˜ë¥¼ ë„£ì„ ë•Œ ì‚¬ìš© self ğŸ‘‰ Kotlin ì˜ this ì™€ ìœ ì‚¬ ì˜ˆì œ ğŸ‘‡class Name { var name = \"Choi\" var age: Int init(name: String, age: Int) { // ì´ˆê¸°í™” self.name = name self.age = age } func myName() { print(\"my name is \\(name) and \\(age) year's old\") }}// instance í™”let name1: Name = Name(name: \"choi\", age: 29)let name2: Name = Name(name: \"kim\", age: 31)// í”„ë¡œí¼í‹° í˜¸ì¶œprint(name1.name)// ë©”ì„œë“œ í˜¸ì¶œname1.myName()print(name2.name)name2.myName()ğŸ€ Struct instanceì˜ ê°’(í”„ë¡œí¼í‹°)ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê¸°ëŠ¥(ë©”ì„œë“œ)ë¥¼ ì œê³µí•˜ê³  ì´ë¥¼ ìº¡ìŠí™”í•  ìˆ˜ ìˆëŠ” Swiftê°€ ì œê³µí•˜ëŠ” Typeì„ class ì²˜ëŸ¼ instanceí™”ë¥¼ í•˜ì—¬ ì‹¤ì œ ì‘ì—…ì—ë„ ì“¸ ìˆ˜ ìˆìŒ (íƒ€ì… ìºìŠ¤íŒ… í—ˆìš© ì•ˆí•¨) ë¶ˆë³€ì„±(Immutable) êµ¬í˜„ì— ìœ ë¦¬ Multi Thread ì— ì•ˆì „í•¨ ì†ì„±(property) ğŸ‘‰ êµ¬ì¡°ì²´(Struct) ì•ˆì˜ ë³€ìˆ˜ ë©”ì†Œë“œ(method) ğŸ‘‰ êµ¬ì¡°ì²´(Stuct) ì•ˆì˜ í•¨ìˆ˜ âœ… ê°’ íƒ€ì… ìƒìˆ˜ë‚˜ ë³€ìˆ˜ì— í• ë‹¹í•˜ê±°ë‚˜ í•¨ìˆ˜ì— ë„˜ê²¨ì§ˆ ë•Œ ë³µì‚¬ê°€ ë¨ âœ… Stuctì—ëŠ” ìƒì†í•  ìˆ˜ ì—†ìŒ âœ… class ì²˜ëŸ¼ init()ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  í•„ìš” ì—†ì´ ìë™ìœ¼ë¡œ ì´ˆê¸°í™” ì½”ë“œë¥¼ ë§Œë“¤ì–´ì¤Œ í”„ë¡œí¼í‹° ì†ì„±ê°’ì„ ì„ ì–¸í•˜ì§€ ì•Šê³  instance ì„ ì–¸ì‹œ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì–´ì¤Œ êµ¬ì¡°ì²´ ë©¤ë²„ë¥¼ íŒ¨ëŸ¬ë¯¸í„° ë„¤ì„ìœ¼ë¡œí•˜ì—¬ Swiftê°€ ìë™ìœ¼ë¡œ ì´ˆê¸°í™” ì½”ë“œë¥¼ ë§Œë“¤ì–´ ì¤Œ âœ… ì‚¬ìš© ê¸°ì¤€ í•˜ë‚˜ë¼ë„ í•´ë‹¹ë˜ë©´ Stuct ì‚¬ìš© 1ï¸âƒ£ ëª‡ëª‡ ë‹¨ìˆœ ë°ì´í„° ê°’ì„ ìº¡ìŠí™”í•˜ëŠ” ê²½ìš° 2ï¸âƒ£ ìº¡ìŠí™”í•œ ê°’ì„ ì°¸ì¡°í•˜ëŠ” ê²ƒë³´ë‹¤ ë³µì‚¬í•˜ëŠ” ê²ƒì´ í•©ë‹¹í•  ë•Œ 3ï¸âƒ£ Stuctì— ì €ì¥ëœ í”„ë¡œí¼í‹°ê°€ ê°’ íƒ€ì…ì´ë©°, ì°¸ì¡°í•˜ëŠ” ê²ƒë³´ë‹¤ ë³µì‚¬í•˜ëŠ” ê²ƒì´ í•©ë‹¹í•  ë•Œ 4ï¸âƒ£ ë‹¤ë¥¸ ê¸°ì¡´ íƒ€ì…ìœ¼ë¡œë¶€í„° ìƒì†ë°›ê±°ë‚˜ ìì‹ ì„ ìƒì†í•  í•„ìš”ê°€ ì—†ì„ ë•Œ ì˜ˆì œ ğŸ‘‡struct Name { // í”„ë¡œí¼í‹° ì†ì„±ê°’ì„ ì„ ì–¸í•˜ì§€ ì•Šê³  instance ì„ ì–¸ì‹œ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì–´ì¤Œ var name: String func myName() { print(\"my name is \\(name)\") }}// instance ìƒì„±var choi: Name = Name(name: \"choi\")print(choi.name) // í”„ë¡œí¼í‹° í˜¸ì¶œchoi.myName() // ë©”ì„œë“œ í˜¸ì¶œğŸ€ Class / Struct ê³µí†µì  ë° ì°¨ì´ì â˜˜ï¸ ê³µí†µì  ì—¬ëŸ¬ ë³€ìˆ˜(property)ì™€ í•¨ìˆ˜(method)ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” í•˜ë‚˜ì˜ ì§‘í•© ë°ì´í„°ë¥¼ ìš©ë„ì— ë§ê²Œ ë¬¶ì–´ì„œ ì‚¬ìš©í• ë•Œ í¸ë¦¬í•˜ê³  ê°€ë…ì„±ì„ ë†’ì—¬ì¤Œ ì´ˆê¸°í™”(init())ë¥¼ ì •ì˜í•˜ì—¬ ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•´ ë‹¤ì–‘í•œ instanceë¥¼ ìƒì„± ê°€ëŠ¥ ê¸°ë³¸ì ì¸ êµ¬í˜„ì„ ë„˜ì–´ì„  ê¸°ëŠ¥ì„ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ í™•ì¥ ê°€ëŠ¥ .ì„ ì‚¬ìš©í•˜ì—¬ instanceìƒì„±ì´ ê°€ëŠ¥í•˜ê³  ìƒì„± ë°©ë²•ì´ ê°™ìŒ íŠ¹ì • ì¢…ë¥˜ì˜ í‘œì¤€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” protocalì„ ì‚¬ìš© ê°€ëŠ¥ ìƒˆë¡œìš´ ë°ì´í„° íƒ€ì…ì„ ë§Œë“¤ì–´ ì£¼ëŠ” ê²ƒâ˜˜ï¸ ì°¨ì´ì  Structì—ëŠ” init() method ì—†ì´ ìë™ìœ¼ë¡œ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì¤Œ Class ğŸ‘‰ ìƒì† ê°€ëŠ¥, Struct ğŸ‘‰ ìƒì† ë¶ˆê°€ Class ğŸ‘‰ ê°’ íƒ€ì… , Struct ğŸ‘‰ ì°¸ì¡° íƒ€ì… TypeCasting(íƒ€ì…ìºìŠ¤íŒ…)ì€ Classì˜ instance ì—ë§Œ í—ˆìš© DeinitializerëŠ” classì˜ instanceì—ë§Œ í™œìš© ê°€ëŠ¥ ì°¸ì¡° íšŸìˆ˜ ê³„ì‚°(Reference Counting)ì€ Classì˜ instanceì—ë§Œ ì ìš©â˜˜ï¸ ê°’ íƒ€ì… / ì°¸ì¡° íƒ€ì… ê°’ íƒ€ì… Stuct, enum ì— í•´ë‹¹ ìƒìˆ˜ë‚˜ ë³€ìˆ˜ì— í• ë‹¹í•˜ê±°ë‚˜ í•¨ìˆ˜ì— ë„˜ê²¨ì§ˆ ë•Œ ë³µì‚¬ê°€ ë¨ ì°¸ì¡° íƒ€ì… Class ì— í•´ë‹¹ ë³€ìˆ˜ë‚˜ ìƒìˆ˜ì— í• ë‹¹í•˜ê±°ë‚˜ í•¨ìˆ˜ì— ë„˜ê¸¸ ë•Œ ë³µì‚¬í•˜ì§€ ì•ŠìŒ ë³µì‚¬ ëŒ€ì‹ ì— ê¸°ì¡´ì— ê°™ì€ instanceì— ì°¸ì¡°ê°€ ì‚¬ìš©ë¨ ì¦‰, ê°’ì´ ë³µì‚¬ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë©”ëª¨ë¦¬ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒ ì˜ˆì œ ğŸ‘‡struct A { // êµ¬ì¡°ì²´ (ìƒì†ì´ ì•ˆë¨) var a = 10}class B { // í´ë˜ìŠ¤ (ìƒì† ê°€ëŠ¥) var a = 10}// instance ì„ ì–¸var str_1: A = A() // ê°’ì„ ë³µì‚¬ - a ê°’ì„ ë°”ê¿”ë„ struct ì•ˆì˜ aëŠ” ë³€í™” ì—†ìŒvar cls_1: B = B() // ê°’ì„ ì°¸ì¡° - a ê°’ì„ ë°”ê¾¸ë©´ class ì•ˆì˜ aë„ ë°”ë€œvar str_2 = str_1var cls_2 = cls_1str_1.a = 20cls_1.a = 20// êµ¬ì¡°ì²´ì—ëŠ” ë³€í™” ì—†ì§€ë§Œ í´ë˜ìŠ¤ì—ëŠ” ë³€í™”ê°€ ìˆìŒprint(\"\\(str_2.a) \\(cls_2.a)\") // ê²°ê³¼ : 10 20 ì„¤ëª… Struct(êµ¬ì¡°ì²´)ëŠ” ê·¸ì € ë³µì‚¬ë¥¼ í•˜ì—¬ str_1ê³¼ str_2ì˜ ê´€ê³„ëŠ” ì°¸ì¡°ë˜ì§€ ì•Šê³  ê°ê°ì˜ ê°œë³„ì˜ ê´€ê³„ Class(í´ë˜ìŠ¤)ëŠ” ì„œë¡œ ì°¸ì¡°í•˜ëŠ” ê´€ê³„ë¥¼ ê°€ì§€ë¯€ë¡œ cls_1ê³¼ cls_2ëŠ” ì°¸ì¡° ê´€ê³„ê°€ ë˜ì–´ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ì¤Œ " }, { "title": "iOS SwiftUi ViewModel", "url": "/posts/iOS-SwiftUi-ViewModel/", "categories": "Swift, SwiftUi", "tags": "ObservableObject, ObservedObject, Published, StateObject, ViewModel", "date": "2022-11-21 16:02:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Swift ì—ì„œ ViewModel ì„ ì‚¬ìš©í•˜ì—¬ MVVM íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ MVVM (Model - View - ViewModel) Model ğŸ‘‰ Application ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ì™€ ê·¸ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ ì„œë²„ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°, ë””ë°”ì´ìŠ¤ì— ì €ì¥ë˜ëŠ” Local ë°ì´í„° View ğŸ‘‰ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” UI ë¶€ë¶„ ViewModelì˜ ë°ì´í„°ê°€ ë³€ê²½ëœ ê²ƒì„ ê°ì§€í•´ UIë¥¼ Updateí•¨ ViewModel ğŸ‘‰ Viewë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ë§Œë“  Viewë¥¼ ìœ„í•œ Model Viewì™€ Model ì„ ì—°ê²° ì‹œì¼œ ì£¼ëŠ” ê³³ ë°ì´í„°ì˜ ë³€ê²½ì‚¬í•­ì„ ì•Œë ¤ì£¼ëŠ” LiveDataë¥¼ ê°€ì§€ê³  ìˆìŒ Model ì´ ë³€ê²½ëœ ê²ƒì„ ê°ì§€í•˜ì—¬ UIë¥¼ ìœ„í•œ ë°ì´í„°ë¥¼ ë³€ê²½í•´ì•¼í•¨ ViewëŠ” Modelì„ ëª¨ë¥´ì§€ë§Œ ViewModelì„ ì•Œê³  ìˆìŒ ViewModelì€ Viewë¥¼ ëª¨ë¥´ì§€ë§Œ Modelì„ ì•Œê³  ìˆìŒ Viewë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ì‚¬ìš©ì ì¸í„°ë ‰ì…˜ì€ ViewModelì—ê²Œ ì „ë‹¬ë˜ì–´ íŠ¹ì • ë¡œì§ì´ ì‹¤í–‰ë¨ âœ… ì¦‰, ì˜ì¡´ì„± ë¶„ë¦¬ Viewì™€ Model ì‚¬ì´ì˜ ì˜ì¡´ì„±ì´ ì—†ìŒ (Viewì˜ ë¶€ë‹´ì„ ì¤„ì—¬ì¤Œ) ViewModelì€ Data Bindingì„ í†µí•´ Viewì™€ Modelì„ ì´ì–´ì¤Œ ê°ê°ì˜ ë¶€ë¶„ì€ ë…ë¦½ì  ì´ê¸° ë•Œë¬¸ì— ëª¨ë“ˆí™” í•˜ì—¬ ê°œë°œí•  ìˆ˜ ìˆìŒ. âœ… ì¥ì  View ì™€ data ê°€ ì™„ì „ ë¶„ë¦¬ëœë‹¤. Viewê°€ dataê´€ë¦¬ë¥¼ í•  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ UI updateì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆìŒ ê° View ê°„ì— data ê³µìœ ê°€ í›¨ì”¬ ì‰¬ì›Œì§„ë‹¤. ìœ ì§€ë³´ìˆ˜ì˜ ì¥ì  ğŸ‘‰ ì˜ì¡´ì„±ì´ ë¶„ë¦¬ë˜ë¯€ë¡œ, Viewì˜ ì½”ë“œë¥¼ ë³€ê²½í•  ë•Œ ë‹¤ë¥¸ ë¶€ë¶„ì˜ ì½”ë“œë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŒ âœ… ë™ì‘ ìˆœì„œ 1ï¸âƒ£ ì‚¬ìš©ìì˜ actionì´ Viewë¥¼ í†µí•´ ë“¤ì–´ì˜´ 2ï¸âƒ£ command íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ViewModelì— Actionì„ ì „ë‹¬í•¨ 3ï¸âƒ£ ViewModelì´ Modelì—ì„œ dataë¥¼ ìš”ì²­í•˜ê³ , Modelì€ ViewModelì—ì„œ ìš”ì²­ë°›ì€ ë°ì´í„°ë¥¼ ViewModelì— ì „ë‹¬í•¨ 4ï¸âƒ£ ViewModelì€ ì‘ë‹µë°›ì€ ë°ì´í„°ë¥¼ ê°€ê³µ, ì €ì¥í•¨ 5ï¸âƒ£ ViewëŠ” ViewModelê³¼ì˜ Data Bindingì„ ì´ìš©í•´ í™”ë©´ì„ ê°±ì‹ í•¨ (Observer íŒ¨í„´) ğŸ€ Swift with ViewModel ObservableObjectë¥¼ ì´ìš©í•˜ì—¬ Data Modelê³¼ Viewë¥¼ ì‰½ê²Œ Bindingí•  ìˆ˜ ìˆìŒ ObservableObjectë¡œ ViewModelì„ ì„¤ì •í•˜ê³ , View ë‹¨ì—ì„œëŠ” ViewModelì— @ObservedObjectë¥¼ ë¶™ì—¬ì¤Œìœ¼ë¡œì„œ ViewModelì˜ ë³€í™”ë¥¼ ê´€ì°° í•  ìˆ˜ ìˆê³ , ê·¸ ë³€í™”ì— ë°˜ì‘í•  ìˆ˜ ìˆìŒâ˜˜ï¸ @ObservableOjbect í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê´€ì°°í•˜ê³  ìˆë‹¤ê°€ ê°’ì´ ë³€ê²½ë˜ë©´ Viewë¥¼ Updateí•œë‹¤. ì˜ˆì œ ğŸ‘‡ class MainviewModel: ObservableObject {} â˜˜ï¸ @Published ObservableOject ì—ì„œ ì†ì„±ì„ ì„ ì–¸í•  ë•Œ ì‚¬ìš© í•˜ëŠ” PropertyWrapper í•´ë‹¹ ì†ì„±ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ Viewë¥¼ Update, $ operatorë¥¼ ë¶™ì—¬ ê²Œì‹œìì— ì—‘ì„¸ìŠ¤ ê°€ëŠ¥ @Publishedê°€ ë¶™ì–´ìˆëŠ” ë³€ìˆ˜ê°€ ë³€ê²½ ë˜ë©´ ì´ë¥¼ ì§€ì¼œë³´ê³  ìˆëŠ” Viewì—ê²Œ ViewModelì´ ë³€ê²½ë˜ì—ˆìŒì„ ì•Œë ¤ì£¼ê³ , ViewëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Viewë¥¼ Refresh í•œë‹¤. Android ì˜ LiveDataì™€ ìœ ì‚¬ ì˜ˆì œ ğŸ‘‡ class MainviewModel: ObservableObject { @Published var youngjun = Person(name: \"ì˜ì¤€\", birthday: Date()) var name: String { youngjun.name } var age: String { return \"29\" } func changeName(_ name: String) { youngjun.name = name }} â˜˜ï¸ @ObservedObject ObservableObjectë¥¼ êµ¬ë…í•˜ê³  ê°’ì´ Updateë  ë•Œ ë§ˆë‹¤ Viewë¥¼ ê°±ì‹ í•˜ëŠ” PropertyWrapper Viewë¥¼ ë§Œë£Œì‹œí‚¤ê³  ìƒˆë¡œ ê·¸ë¦¼ âš ï¸ Viewê°€ ìƒˆë¡œ ê·¸ë ¤ì§ˆ ë•Œ ë§ˆë‹¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒˆë¡œ ì´ˆê¸°íšŒë¨ ì˜ˆì œ ğŸ‘‡ struct ContentView: View { @ObservedObject var viewModel = MainViewModel()} â˜˜ï¸ @StateObject ë‹¨ í•œ ë²ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„± Viewë¥¼ ì²˜ìŒë¶€í„° ìƒˆë¡œ ê·¸ë¦¬ì§€ ì•Šê³ , ObservableObjectì—ì„œì˜ ë°ì´í„°ê°€ ë³€í•  ë•Œ, ê·¸ ObservableObjectì˜ ë°ì´í„°ê°€ ë“¤ì–´ê°„ ë¶€ë¶„ë§Œ Viewë¥¼ ë‹¤ì‹œ ê·¸ ë¦¼ Viewê°€ ì–¼ë§ˆë‚˜ ë‹¤ì‹œ ê·¸ë ¤ì§€ë“  ìƒê´€ì—†ì´ ë³„ê°œì˜ ê°ì²´ë¡œ ê´€ë¦¬ ì˜ˆì œ ğŸ‘‡ struct ContentView: View { @StateObject var viewModel = MainViewModel()} â˜˜ï¸ SharedViewModel êµ¬í˜„ âœ… ì¶”ì²œ Observable Objectë¥¼ ì²˜ìŒ ì´ˆê¸°í™” í•  ë•ŒëŠ” StateObject ë¥¼ ì‚¬ìš©í•˜ê³ , ì´ë¯¸ ê°ì²´í™”ëœ ê²ƒì„ ë„˜ê²¨ ë°›ì„ ë•ŒëŠ” ObservedObjectë¥¼ ì‚¬ìš© StateObject ì™€ ObservedObjectë¥¼ ì‚¬ìš©í•˜ì—¬ SharedViewModelì„ ì‚¬ìš©ê°€ëŠ¥ ìƒìœ„ Viewì—ì„œ ê°ì²´ë¡œ ë§Œë“¤ì–´ì„œ ë”°ë¡œ ì €ì¥í•´ë‘ê³ , í•˜ìœ„ Viewë„ ì´ Observable Objectì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ê³ , ê°™ì€ ì •ë³´ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆìŒ ì˜ˆì œ ğŸ‘‡ struct UpperView: View { @StateObject var viewModel: MainViewModel = MainViewModel() var body: some View { LowerView(viewModel: viewModel) }}struct LowerView: View { @ObservedObject var viewModel: ViewModel var body: some View { Text(\"Hello\") }} â˜˜ï¸ @State DataBindingì„ ìœ„í•´ ì‚¬ìš© $ í‚¤ì›Œë“œë¥¼ ë¶™í˜€ DataBinding $ê°€ ë¶™ìœ¼ë©´ ê°’ì„ ìˆ˜ì •ê°€ëŠ¥í•œ Bindingíƒ€ì… ì°¸ì¡° @StateëŠ” View ì™¸ë¶€ë¡œëŠ” ì‚¬ìš©í•  ìˆ˜ê°€ ì—†ê³  private í˜•íƒœë¡œ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ì˜ˆì œ ğŸ‘‡ struct ContentView: View { @State var isToggleOn: Bool = true var body: some View { VStrck { Toggle(isOn: $isToggleOn) { Text(\"ê¸€ìë¥¼ ê°€ë¦½ë‹ˆë‹¤.\") }.padding() if isToggleOn { Text(\"ê·¸ìœ¼ìœ¼ì„ì!\") } } }} â˜˜ï¸ @Binding 2ê°œì˜ Viewê°€ ë™ì‹œì— í•˜ë‚˜ì˜ Stateë¥¼ ì°¸ì¡° í•´ì•¼í•˜ëŠ” ê²½ìš° ì‚¬ìš© ì˜ˆì œ ğŸ‘‡ struct Toggole: View { @Binding var isOn: Bool var body: some View { // TODO.. }} " }, { "title": "ìë£Œêµ¬ì¡° Cookie, Session", "url": "/posts/Data-Structure-Cookie-Session/", "categories": "DataStructure", "tags": "cookie, session, data structure", "date": "2022-11-21 09:02:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì¿ í‚¤(Cookie)ì™€ ì„¸ì…˜(Session)ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ğŸ€ ì‚¬ìš© ì´ìœ  Cookieì™€ Sessionì€ ì£¼ë¡œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë¥¼ êº¼ë‚´ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©ë¨ HTTPì˜ íŠ¹ì§•ìœ¼ë¡œ ì¸í•´ ì‚¬ìš© ğŸ‘‡ Connectionless(ë¹„ ì—°ê²°ì§€í–¥) ğŸ‘‰ HTTPëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìš”ì²­&amp;ì‘ë‹µë§Œ í•˜ê³  ëŠì–´ë²„ë¦¼ Stateless(ìƒíƒœì •ë³´ìœ ì§€ì•ˆí•¨) ğŸ‘‰ HTTPëŠ” ìƒíƒœì •ë³´ë¥¼ ì €ì¥í•˜ì§€ ì•ŠìŒ, ë”°ë¼ì„œ Session í˜¹ì€ Cookieë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•¨ ğŸ€ Cookie (ì¿ í‚¤) ë¸Œë¼ìš°ì €ì— íœ˜ë°œì„± ë°ì´í„° ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ ìœ ì €ë“¤ì˜ íš¨ìœ¨ì ì´ê³  ì•ˆì „í•œ ì›¹ ì‚¬ìš©ì„ ë³´ì¥í•˜ê¸° ìœ„í•˜ì—¬ ì‚¬ìš© ì›¹ ì‚¬ì´íŠ¸ ì ‘ì†ì‹œ ì ‘ì†ìì˜ ê°œì¸ ì¥ì¹˜ì— ë‹¤ìš´ë¡œë“œë˜ê³ , ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ëŠ” ì‘ì€ TextíŒŒì¼ ì›¹ ì‚¬ì´íŠ¸ëŠ” ì¿ í‚¤ë¥¼ í†µí•´ ì ‘ì†ìì˜ ì¥ì¹˜ë¥¼ ì¸ì‹í•˜ê³ , ì ‘ì†ìì˜ ì„¤ì •ê³¼ ê³¼ê±° ì´ìš©ë‚´ì—­ì— ëŒ€í•œ ì¼ë¶€ ë°ì´í„°ë¥¼ ì €ì¥ ì°¸ê³  ğŸ‘‰ íŠ¹ì • ì‚¬ì´íŠ¸ì— ê°€ë©´, ìë™ì ìœ¼ë¡œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ì…ë ¥ ë˜ëŠ” ê²½ìš° ì´ë¦„, ê°’, ë§Œë£Œë‚ ì§œ, ê²½ë¡œ ì •ë³´ê°€ ë“¤ì–´ìˆìŒ ì°¸ê³  ğŸ‘‰ ì¼ì • ì‹œê°„ë™ì•ˆ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆì–´ì„œ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ìœ ì§€ í•˜ê±°ë‚˜, ì‚¬ìš©ì ì •ë³´ë¥¼ ì¼ì • ì‹œê°„ ë™ì•ˆ ìœ ì§€í•´ì•¼ í•˜ëŠ” ê²½ìš° ì— ì£¼ë¡œ ì‚¬ìš© Cookieê°€ ìƒì„±ë˜ë©´ ë¸Œë¼ìš°ì €ëŠ” Request Headerì— ìë™ì ìœ¼ë¡œ Cookie ì •ë³´ë¥¼ ë„£ì–´ì„œ ë³´ë‚´ê²Œ ë¨ ì°¸ê³  ğŸ‘‰ ë§¤ ìš”ì²­ë§ˆë‹¤ Cookieë¥¼ ë‹´ì•„ì„œ ë³´ëƒ„ âœ… ì‚¬ìš© ê²½ìš° 1ï¸âƒ£ Sessionê´€ë¦¬ ğŸ‘‰ ì„œë²„ì— ì €ì¥í•´ì•¼ í•  ë¡œê·¸ì¸, ì¥ë°”êµ¬ë‹ˆ, ê²Œì„ ìŠ¤ì½”ì–´ ë“±ì˜ ì •ë³´ ê´€ë¦¬ 2ï¸âƒ£ ê°œì¸í™” ğŸ‘‰ ì‚¬ìš©ì ì„ í˜¸ í…Œë§ˆ ë“±ì˜ ì„¸íŒ… 3ï¸âƒ£ íŠ¸ë˜í‚¹ ğŸ‘‰ ì‚¬ìš©ìì˜ í–‰ë™ì„ ê¸°ë¡í•˜ê³  ë¶„ì„í•˜ëŠ” ìš©ë„ â—ï¸ ë‹¨ì  â—ï¸ ì‚¬ìš©ì ì •ë³´ê°€ ëˆ„ì¶œë  ìˆ˜ ìˆìŒ. (ë³´ì•ˆì„± ë‚®ìŒ) â˜˜ï¸ Cookie ì˜ Flow (íë¦„) 1ï¸âƒ£ ì›¹ ë¸Œë¼ìš°ì €(Client)ì—ì„œ ì„œë²„ë¡œ ìš”ì²­(request) 2ï¸âƒ£ ì„œë²„ì—ì„œ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ì‹¶ì€ ê°’ì„ Cookieë¡œ ìƒì„± 3ï¸âƒ£ ì„œë²„ê°€ ì‘ë‹µ(response)í•  ë•Œ HTTP Headerì— Cookieë¥¼ í¬í•¨í•´ì„œ Clientì—ê²Œ ì „ì†¡ 4ï¸âƒ£ CookieëŠ” Clientì— íŒŒì¼ ë‹¨ìœ„ë¡œ ì €ì¥ 5ï¸âƒ£ ì´í›„ Clientì—ì„œ ì´ Cookieë¥¼ í¬í•¨í•˜ì—¬ ìš”ì²­(request)ğŸ€ Session (ì„¸ì…˜) ì„œë²„ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ëŠ” ì •ë³´ ì°¸ê³  ğŸ‘‰ ì„œë²„ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— Cookieì™€ëŠ” ë‹¬ë¦¬ ì‚¬ìš©ì ì •ë³´ê°€ ë…¸ì¶œë˜ì§€ ì•ŠìŒ ìˆ˜ëª… ğŸ‘‰ Clientê°€ ì›¹ ì„œë²„ì— ì—°ê²°ëœ ìˆœê°„ë¶€í„° ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ë‹«ì•„ ì„œë²„ì™€ì˜ HTTP ëë‚  ë•Œ ê¹Œì§€ì˜ ê¸°ê°„ ì„œë²„ì— Sessionì— ëŒ€í•œ ì •ë³´(Session ìƒíƒœ, Client ìƒíƒœ, Session ë°ì´í„° ë“±)ë¥¼ ì €ì¥í•´ ë†“ê³  Session Cookie(ê³ ìœ í•œ Session ID ê°’)ë¥¼ Clientì—ê²Œ ì£¼ì–´ ì„œë²„ê°€ Clientë¥¼ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ì‹ ìì²´ë¥¼ ì˜ë¯¸ âœ… íŠ¹ì§• 1ï¸âƒ£ ë”°ë¡œ ìš©ëŸ‰ì˜ ì œí•œì´ ì—†ìŒ(ì„œë²„ì˜ ëŠ¥ë ¥ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ) 2ï¸âƒ£ ì„œë²„ì— Session ê°ì²´ë¥¼ ìƒì„±í•˜ë©°, ê° Client ë§ˆë‹¤ ê³ ìœ í•œ Session ID ê°’ì„ ë¶€ì—¬í•¨. 3ï¸âƒ£ Cookieë¥¼ ì‚¬ìš©í•˜ì—¬ Session ID ê°’ì„ Clientì— ë³´ëƒ„ 4ï¸âƒ£ ì›¹ ë¸Œë¼ìš°ì €ê°€ ì¢…ë£Œë˜ë©´ Session, CookieëŠ” ì‚­ì œë¨ â˜˜ï¸ Session ì˜ Flow (íë¦„) 1ï¸âƒ£ ì›¹ ë¸Œë¼ìš°ì €(Client)ì—ì„œ ì„œë²„ë¡œ ìš”ì²­(request) 2ï¸âƒ£ ì„œë²„ë‚´ë¶€ì—ì„œ í•´ë‹¹ Clientì—ê²Œ Session IDë¥¼ ë¶€ì—¬ 3ï¸âƒ£ ì„œë²„ê°€ ì‘ë‹µ(response)í•  ë•Œ HTTP Headerì— Session IDë¥¼ í¬í•¨í•´ì„œ Clientì—ê²Œ ì „ì†¡ 4ï¸âƒ£ ì›¹ ë¸Œë¼ìš°ì €(Client)ëŠ” ì´í›„ ì›¹ ë¸Œë¼ìš°ì €(Client)ë¥¼ ë‹«ê¸°ê¹Œì§€ ë¶€ì—¬ëœ Session IDë¥¼ ê¸°ì–µí•¨ 5ï¸âƒ£ ì´í›„ Clientì—ì„œ ì´ Session IDë¥¼ í¬í•¨í•˜ì—¬ ìš”ì²­(request) 6ï¸âƒ£ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí•˜ë©´ Session IDë¥¼ ì‚­ì œğŸ€ Cookie ì™€ Session ì˜ ì°¨ì´ Â  Cookie Session ì €ì¥ ìœ„ì¹˜ ë¸Œë¼ìš°ì €(Local) ì„œë²„ ë³´ì•ˆì„± ë‚®ìŒ ë†’ìŒ ìˆ˜ëª… ë°˜ì˜êµ¬ ë¸Œë¼ìš°ì € ì¢…ë£Œì‹œ ì‚­ì œ ì†ë„ ë¹ ë¦„ ëŠë¦¼ " }, { "title": "Android Jetpack Compose DropDownMenu", "url": "/posts/Android-Jetpack-Compose-DropDownMenu/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, snackbar", "date": "2022-11-02 15:41:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Composeì—ì„œ ì§€ì›í•˜ëŠ” í¼ì³ì§€ëŠ” ë©”ë‰´ì¸ DropDownMenuì— ëŒ€í•˜ì—¬ ê°„ë‹¤í•œ ì˜ˆì œë¡œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ DropDownMenu ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì„ íƒì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” Menu item êµ¬ì„±ìš”ì†Œ expanded ğŸ‘‰ DropDownMenuê°€ í¼ì³ì¡ŒëŠ”ì§€ ì—¬ë¶€ onDismissRequest ğŸ‘‰ DropDownMenuë¥¼ ë‹«ìœ¼ë¼ëŠ” ëª…ë ¹ì´ ë–¨ì–´ì¡Œì„ ë•Œì˜ Callback offset ğŸ‘‰ DropDownMenuë¥¼ í˜¸ì¶œí•˜ëŠ” Composableì˜ ê¸°ì¤€ì ìœ¼ë¡œë¶€í„°ì˜ ê±°ë¦¬(offset)ì„ ì„¤ì • âš ï¸ì£¼ì˜âš ï¸ DropDownMenuëŠ” ë‚´ë¶€ì—ì„œ DropDownMenuPositionProviderì— ì˜í•´ ìë™ìœ¼ë¡œ ìœ„ì¹˜ê°€ ì¡°ì •ë˜ì–´ í™”ë©´ ìƒì— í‘œì‹œë¨ properties ğŸ‘‰ Back Buttonì„ ëˆŒë €ì„ ë•Œ DropDownMenuë¥¼ Dismissí•  ê²ƒì¸ì§€, DropDownMenuì˜ ë°”ê¹¥ìª½ì„ ëˆŒë €ì„ ë•Œ Dismissí•  ê²ƒì¸ì§€ ë“±ì˜ DropDownMenuì˜ ê¸°ë³¸ ë™ì‘ì„ ì •ì˜ content ğŸ‘‰ DropDownMenuì•ˆì— ë“¤ì–´ê°ˆ Menu Itemì„ ë„£ëŠ” ê³µê°„, @Composable ë„£ê¸°, ëŒë‹¤ í˜•ì‹ ğŸ€ DropDownMenuItem onClick ğŸ‘‰ Menu Itemì„ ëˆŒë €ì„ ë•Œ Callback enabled ğŸ‘‰ Menu Itemì„ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ í•  ê²ƒì¸ì§€ ì—¬ë¶€ contentPadding ğŸ‘‰ DropDownMenuItemì— ì ìš©í•  Padding ê°’ interactionSource ğŸ‘‰ DropDownMenuItemê³¼ ì‚¬ìš©ìì™€ì˜ Interactionì— ëŒ€í•œ Eventë¥¼ ê´€ë¦¬. content ğŸ‘‰ DropDownMenuItemì— í‘œê¸°í•  ìš”ì†Œ ê´€ë¦¬, @Composableë„£ê¸°, ëŒë‹¤ í˜•ì‹ ì˜ˆì œ DropDownMenu + DropDownMenuItem ì„ ì‚¬ìš© í•„ìˆ˜ 3ê°€ì§€ ìš”ì†Œ DropDownMenuê°€ í¼ì²˜ì§€ëŠ”ì§€ ì œì–´í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ í•„ìš” DropDownMenuì˜ í¼ì²˜ì§ ìƒíƒœë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ë²„íŠ¼ í˜¹ì€ onClick Eventë¥¼ í¬í•¨í•œ Composable í•„ìš” DropDownMenu ì •ì˜ @Composablefun ButtonWithDropDownMenu() { // 1. DropDownMenu í¼ì²˜ì§ ì—¬ë¶€ ìƒíƒœ val isExpanded = remember { mutableStateOf(false) } // 2. DropDownMenu ë¥¼ Controller í•  ë²„íŠ¼ ë° Event ìƒì„± Button(onClick = { isExpanded.value = true }) { Text(text = \"Show Menu\") } // 3. DropDownMenu ì •ì˜ DropdownMenu( modifier = Modifier.wrapContentSize(), expanded = isExpanded.value, offset = DpOffset(0.dp, 12.dp), onDismissRequest = { isExpanded.value = false } ) { // 4. DropDownMenuItem ì„ ì •ì˜ DropdownMenuItem(onClick = { println(\"Hello\") }) { Text(text = \"Print Hello\") } DropdownMenuItem(onClick = { println(\"Compose Dropdown\") }) { Text(text = \"Print Compose Dropdown\") } }}" }, { "title": "Android Jetpack Compose Snackbar", "url": "/posts/Android-Jetpack-Compse-Snackbar/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, snackbar", "date": "2022-11-02 14:09:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Android Jetpack Compose ì—ì„œ snackbar ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ê°„ë‹¨í•œ ì˜ˆì œë¥¼ í†µí•´ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ğŸ Scaffold ë¥¼ ì‚¬ìš©í•˜ì—¬ Snackbar ë§Œë“¤ê¸° Compose ì—ì„œ Snackbarë¥¼ ê¸°ì¡´ Snackbarì˜ ë™ì‘ëŒ€ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Scaffold Stateë¡œ ê°ì‹¸ì•¼ í•¨ âš ï¸ ì£¼ì˜ âš ï¸ ìµœìƒë‹¨ Componentë¥¼ Scaffoldë¡œ ê°ì‹¸ì¤˜ì•¼ rememberScaffoldState()ë¥¼ ì‚¬ìš©í•˜ì—¬ snackbar ì‚¬ìš©ê°€ëŠ¥ ë§Œì•½ Scaffoldë¡œ ê°ì‹¸ì§€ ì•Šìœ¼ë©´ ë³´í†µì˜ Composableê³¼ ê°™ì´ ë™ì‘í•¨ Coroutine Builder ë‚´ë¶€ì—ì„œ Snackbarê°€ ë¶ˆë ¤ì•¼í•¨ rememberScaffoldState() ğŸ‘‰ Scaffoldë¥¼ ì‚¬ìš© ì˜ˆì œ ğŸ‘‡@Composablefun NoteScreen( navController: NavController, scaffoldState: ScaffoldState, onActionButtonClick: () -&gt; Unit) { Scaffold( topBar = { TopAppBar( title = { Text(text = stringResource(id = R.string.app_name)) }, actions = { IconButton( onClick = { navController.navigate(route = NavigationType.SEARCH_SCREEN.name) } ) { Icon(imageVector = Icons.Default.Search, contentDescription = \"Search\") } }, backgroundColor = Color.White ) }, scaffoldState = scaffoldState, // state ì—°ê²° floatingActionButton = { onActionButtonClick() }, floatingActionButtonPosition = FabPosition.End, ) { // TODO:: do something... }}fun NoteNavigation(viewModel: NoteViewModel) { val navController = rememberNavController() // SnackBar val scaffoldState = rememberScaffoldState() val coroutineScope = rememberCoroutineScope() NavHost( navController = navController, startDestination = NavigationType.HOME_SCREEN.name ) { composable (route = NavigationType.HOME_SCREEN.name) { NoteScreen( navController = navController, scaffoldState = scaffoldState, ) { scaffoldState.snackbarHostState.showSnackbar(\"Floating Action Button Click\") } } }}" }, { "title": "Android Jetpack Compose Tab + ViewPager", "url": "/posts/Android-Jetpack-Compose-Tab-ViewPager/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, viewpager, tab", "date": "2022-11-02 13:47:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Android Jetpack Compose ì—ì„œ Tab + ViewPager ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì˜ˆì œë¥¼ í†µí•´ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ğŸ Tab + ViewPager ê¸°ì¡´ TabLayout + ViewPager2 ë¥¼ Compose ì—ì„œ ì‚¬ìš©í•˜ê¸°ğŸ€ 1. Dependency ì¶”ê°€ (build.gradle)implementation \"com.google.accompanist:accompanist-pager:0.20.1\"implementation \"com.google.accompanist:accompanist-pager-indicators:0.20.1\"ğŸ€ 2. rememberPagerState rememberPagerState ğŸ‘‰ TabRow ì™€ Pager ê°ì²´ì—ì„œ ê³µìœ í•  ë°ì´í„° í˜„ì¬ ëª‡ í˜ì´ì§€ì— ìˆëŠ”ì§€ ì €ì¥ rememberCoroutineScrope ğŸ‘‰ Composableì—ì„œ í˜ì´ì§€ë¥¼ ì´ë™í•˜ëŠ” ë™ì‘ì€ CoroutineScopeì—ì„œ ìˆ˜í–‰ë˜ì–´ì•¼ í•¨ TabRow ğŸ‘‰ ê¸°ì¡´ TabLayout ê³¼ ê°™ìŒ selectedTabIndex ğŸ‘‰ í˜„ì¬ ì„ íƒëœ í˜ì´ì§€ Index indicator ğŸ‘‰ indicator ì„¤ì • HorizontalPager ğŸ‘‰ ê¸°ì¡´ ViewPager2 ì™€ ê°™ìŒ@Composablefun TabViewPagerScreen( pages: List&lt;String&gt; = listOf(\"í˜ì´ì§€1\", \"í˜ì´ì§€2\", \"í˜ì´ì§€3\")) { val pagerState = rememberPagerState() val coroutineScope = rememberCoroutineScope() Surface( modifier = Modifier.fillMaxSize(), color = MaterialTheme.colors.background, ) { Column( modifier = Modifier.fillMaxSize(), verticalArrangement = Arrangement.Center, ) { TabRow( selectedTabIndex = pagerState.currentPage, indicator = { tabPositions: List&lt;TabPosition&gt; -&gt; TabRowDefaults.Indicator( Modifier.pagerTabIndicatoroffset(pagerState, tabPositions) ) } ) { // pages ê°œìˆ˜ ë§Œí¼ Tab ë§Œë“¤ê¸° pages.forEachIndexed { index, title -&gt; Tab( text = { Text(text = title) }, selected = pagerState.currentPosition == index, onClick = { // Tab í´ë¦­ ì‹œ í•´ë‹¹ í˜ì´ì§€ë¡œ ìŠ¤í¬ë¡¤ë§ coroutineScope.launch { pagerState.scrollToPage(index) } } ) } } } // ViewPager2 HorizontalPager(count = pagers.size, state = pagerState) { page -&gt; Text( modifier = Modifier.wrapContentSize(), text = page.toString(), textAlign = TextAlign.Center, fontSize = 30.sp ) } }}" }, { "title": "Android Jetpack Compose Navigation", "url": "/posts/Android-Jetpack-Compose-Navigation/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, navigation", "date": "2022-11-02 13:06:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Compose ì˜ í™”ë©´ì „í™”ì— ì‚¬ìš©ë˜ëŠ” Compose Navigationì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ğŸ Compose NavigationğŸ€ 1. Dependency ì¶”ê°€ (build.gradle)implementation \"androidx.navigation:navigation-compose:2.5.3\"ğŸ€ 2. rememberNavController navigation êµ¬ì„±ìš”ì†Œì˜ ì¤‘ì‹¬ API Stateful ì´ë©°, ì•±ì˜ í™”ë©´ê³¼ ê° í™”ë©´ ìƒíƒœë¥¼ êµ¬ì„±í•˜ëŠ” Composable Back Stackì„ ì¶”ì í•¨ ëª¨ë“  Composableì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê³³ì— ë§Œë“¤ì–´ì•¼ í•¨ ì¦‰, ìµœìƒìœ„ í•¨ìˆ˜ ì˜ˆì œ ğŸ‘‡ ì²˜ìŒ ì‹œì‘ ì‹œ HomeScreen ì„ ë³´ì—¬ì£¼ê³  Click ì‹œ DetailScreen ìœ¼ë¡œ ì´ë™ NavGraph ì„¤ì • @Composablefun MovieNavigation() { val navController = rememberNavController() // Navigation Graph ë¥¼ ê·¸ë¦¼ NavHost( navController = navController, startDestination = MovieScreen.HomeScreen.name // ì²˜ìŒ ì‹œì‘í™”ë©´ ì„¤ì • ) { composable(route = MovieScreen.HomeScreen.name) { HomeScreen(navController = navConttoller) } // \"/{movie}\" -&gt; DetailScreen ì—ì„œ ì‚¬ìš©í•  íŒŒë¼ë¯¸í„° ì´ë¦„ (ë°ì´í„°ë¥¼ ë„˜ê¹€) // í•˜ë‚˜ì˜ DetailScreen ì„ ì—¬ëŸ¬êµ°ë°ì—ì„œ ì¬ì‚¬ìš©í•˜ë¯€ë¡œ Unique Key í•„ìš” composable( route = MovieScreen.DetailScreen.name + \"/{movie}\", argument = listOf(navArgument(name = \"movie\") { type = NavType.StringType }) ) { DetailScreen( navController = navController, it.argument?.getString(\"movie\") ) } }}enum class MovieScreen { HomeScreen, DetailScreen} ì˜ˆì œ ğŸ‘‡ Navigationì„ í™œìš©í•˜ì—¬ HomeScreen -&gt; DetailScreen ì´ë™ navController.navigate(route = MovieScreens.DetailScreen.name + \"/$ë³´ë‚´ëŠ” ê°’\") ì˜ˆì œ ğŸ‘‡ Navigation ë’¤ë¡œê°€ê¸° navController.popBackStack()ğŸ€ 3. Navigation + Dialog ì˜ˆì œ ğŸ‘‡ Custom Dialog ë¥¼ ìƒì„±í•˜ì—¬ Navigation ìœ¼ë¡œ ë„ìš°ê¸° NavGraphì— Custom Dialog ë“±ë¡ @Composablefun NoteNavigation(viewModel: NoteViewModel) { val navController = rememberNavController() val coroutineScope = rememberCoroutineScope() // CustomDialog val customDialogTitle = viewModel.customDialogTitle.collectAsState() val customDialogConfirmText = viewModel.customDialogConfirmText.collectAsState() val customDialogCancelText = viewModel.customDialogCancelText.collectAsState() NavHost( navController = navController, startDestination = NoteNavigation.HomeScreen.name ) { composable(route = NoteNavigation.HomeScreen.name) { NoteScreen(navController = navController) } dialog( route = NoteNavigation.CustomDialog.name, dialogProperies = DialogProperties( dismissOnBackPress = true, dismissOnClickOutside = true, ) ) { CustomDialog( navController = navController, value = customDialogTitle.value.first, valueRes= customDialogTitle.value.second, confirmText = customDialogConfirmText.value, cancelText = customDialogCancelText.value, ) { coroutineScope.launch { if (customDialogTitle.value.second == R.string.dialog_all_remove_title) { viewModel.removeAllNote() return@launch } viewModel.currentNote.value?.let { if (customDialogTitle.value.second == R.string.dialog_modify_title) { viewModel.updateNote(it) scaffoldState.snackbarHostState.showSnackbar(\"${it.title}ë¥¼ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.\") return@launch } viewModel.removeNote(it) scaffoldState.snackbarHostState.showSnackbar(\"${it.title}ë¥¼ ì‚­ì œí•˜ì˜€ìŠµë‹ˆë‹¤.\") } } } } }} ì˜ˆì œ ğŸ‘‡ Custom Dialog ìƒì„± ì°¸ê³  @Composablefun CustomDialog( navController: NavController, value: String, @StringRes valueRes: Int? = null, @StringRes confirmText: Int, @StringRes cancelText: Int, onConfirmClick: () -&gt; Unit,) { Surface( shape = RoundedCornerShape(16.dp), color = Color.White ) { Box(contentAlignment = Alignment.Center) { Column { Row( modifier = Modifier .fillMaxWidth() .padding(10.dp), horizontalArrangement = Arrangement.End, ) { Icon(imageVector = Icons.Filled.Cancel, contentDescription = \"\", modifier = Modifier .width(30.dp) .height(30.dp) .clickable { navController.popBackStack() }) } Row( modifier = Modifier .fillMaxWidth() .padding(10.dp), horizontalArrangement = Arrangement.Center, verticalAlignment = Alignment.CenterVertically ) { Text( text = if (valueRes != null) { stringResource(id = valueRes, value) } else { value }, style = TextStyle( fontSize = 20.sp, fontFamily = FontFamily.Default, fontWeight = FontWeight.Bold ) ) } Spacer(modifier = Modifier.height(20.dp)) Row( modifier = Modifier .fillMaxWidth() .padding(20.dp) ) { Button( onClick = { navController.popBackStack() /** * navController.currentBackStackEntry?.destination?.route * -&gt; í˜„ì¬ Navigation Route ì´ë¦„ ê°€ì ¸ì˜¤ê¸° */ if (navController.currentBackStackEntry?.destination?.route == NavigationType.DETAIL_SCREEN.name) { navController.popBackStack() } onConfirmClick() }, shape = RoundedCornerShape(50.dp), modifier = Modifier .height(50.dp) .padding(end = 10.dp) .weight(1f) ) { Text(text = stringResource(id = confirmText)) } Button( onClick = { navController.popBackStack() }, shape = RoundedCornerShape(50.dp), modifier = Modifier .height(50.dp) .padding(start = 10.dp) .weight(1f), colors = ButtonDefaults.buttonColors( backgroundColor = Color.White, contentColor = Color.Black, ) ) { Text( text = stringResource(id = cancelText), style = TextStyle(color = Color.Black) ) } } } } }}ğŸ Compose BottomSheet NavigationğŸ€ 1. Dependency ì¶”ê°€ (build.gradle) Jetpack Navigation Compose Material ì‚¬ìš© ê³µì‹ í™ˆí˜ì´ì§€ ìì„¸í•œ ì„¤ëª… implementation \"com.google.accompanist:accompanist-navigation-material:0.27.0\"ğŸ€ 2. rememberNavController, rememberBottomSheetNavigator rememberBottomSheetNavigator, rememberNavControllerë¥¼ ì‚¬ìš©í•˜ì—¬ NavGraph ì‘ì„±@Composablefun MovieNavigation(mainViewModel: MainViewModel) { val bottomSheetNavigator = rememberBottomSheetNavigator() val navController = rememberNavController(bottomSheetNavigator) ModalBottomSheetLayout( bottomSheetNavigator = bottomSheetNavigator, sheetShape = RoundedCornerShape(topEnd = 16.dp, topStart = 16.dp), ) { NavHost( navController = navController, startDestination = NavigationType.HomeScreen.name ) { composable(route = NavigationType.HomeScreen.name) { HomeScreen(navController = navController) } bottomSheet(route = NavigationType.BottomSheet.name) { Text(\"This is a cool bottom sheet!\") } } }} ì˜ˆì œ ğŸ‘‡ í™”ë©´ ì „í™˜navController.navigate(route = NavigationType.BottomSheet.name) ì˜ˆì œ ğŸ‘‡ ë’¤ë¡œê°€ê¸°navController.popBackStack()ğŸ€ 3. Navigating with Arguments bottomSheet ì— ë°ì´í„° ì „ë‹¬ ì˜ˆì œ ğŸ‘‡@Composablefun MyNavigation(mainViewModel: MainViewModel) { val navController = rememberNavController() val bottomSheetNavigator = rememberBottomSheetNavigator() navController.navigatorProvider += bottomSheetNavigator ModalBottomSheetLayout(bottomSheetNavigator) { NavHost(navController, startDestination = \"home\") { composable(route = \"home\") { Button(onClick = { navController.navigate(\"sheet?message=hellow_world\") }) { Text(\"Click me to see something cool!\") } } bottomSheet(route = \"sheet?message={message}\") { backStackEntry -&gt; val message = backStackEntry.arguments?.getString(\"message\") Text(\"This is a cool bottom Sheet\") if (message != null) { Text(\"Magic message: $message\") } Button(onClick = { navController.navigate(\"home\") }) { Text(\"Take me back, please\") } } } }}" }, { "title": "Android Jetpack Compose Side Effect", "url": "/posts/Android-Jetpack-Compose-SideEffect/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, side-effect", "date": "2022-11-02 11:16:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Side-Effectì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ Side Effect Composable ë²”ìœ„ ë°–ì—ì„œ ë°œìƒí•˜ëŠ” ì•± ìƒíƒœì— ëŒ€í•œ ë³€ê²½ Composableì€ ê°ê°ì˜ Lifecycleì„ ê°€ì§€ê³  ìˆìŒ Composableì€ ë‹¨ë°©í–¥ìœ¼ë¡œë§Œ Stateë¥¼ ì „ë‹¬ Composableì„ ì‚¬ìš©í•  ë–„ ì—¬ëŸ¬ Composableë“¤ì„ ê²¹ì³ì„œ ì‚¬ìš©í•¨. ê·¸ëŸ¬ë©´ Systemì€ ê° Composableì— ëŒ€í•œ Lifecycleì„ ë§Œë“¤ê³  Composableë³„ë¡œ ì¬êµ¬ì„±ì´ í•„ìš”í• ë•Œë§Œ ì¬êµ¬ì„± ì‹œí‚¨ë‹¤. Composableì€ ê¸°ë³¸ì ìœ¼ë¡œ ë°”ê¹¥ìª½ Composableì´ ì•ˆìª½ Composableë¡œ Stateë¥¼ ë‚´ë ¤ì¤Œ. ì´ë¡œ ì¸í•´ ë‹¨ë°©í–¥ìœ¼ë¡œë§Œ ì˜ì¡´ì„±ì´ ìƒê¹€ âš ï¸ í•˜ì§€ë§Œ, ë§Œì•½ ì•ˆìª½ì— ìˆëŠ” Composableì—ì„œ ë°”ê¹¥ìª½ì— ìˆëŠ” Composableì˜ ìƒíƒœì— ëŒ€í•œ ë³€ê²½ì„ ì¤€ë‹¤ë©´??í˜¹ì€ Composableì—ì„œ Composable ì´ ì•„ë‹Œ ì•± Stateì— ëŒ€í•œ ë³€í™”ë¥¼ ì¤€ë‹¤ë©´?? ğŸ‘‡ ì–‘ë°©í–¥ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” Effectê°€ ìƒê¸´ë‹¤. ì´ë¥¼ Side Effectë¼ ë¶€ë¦„ ğŸ Side Effect ì²˜ë¦¬í•˜ê¸° LaunchedEffect ğŸ‘‰ Composable Lifecycle Scopeì—ì„œ suspend funì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš© DisposableEffect ğŸ‘‰ Composableì´ Disposeë  ë•Œ ì •ë¦¬ë˜ì–´ì•¼ í•  Side Effectë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ ì‚¬ìš© SideEffect ğŸ‘‰ Composableì˜ Stateë¥¼ Composeì—ì„œ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ê°ì²´ì™€ ê³µìœ í•˜ê¸° ìœ„í•´ ì‚¬ìš© ComposeëŠ” ìœ„ 3ê°€ì§€ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ CoroutineScopeì™€ Stateê´€ë ¨ í•¨ìˆ˜ë¥¼ ì œê³µ rememberCoroutineScope ğŸ‘‰ Composableì˜ CoroutineScopeë¥¼ ì°¸ì¡°í•˜ì—¬ ì™¸ë¶€ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì¤Œ rememberUpdatedState ğŸ‘‰ Launded EffectëŠ” Composableì˜ Stateê°€ ë³€ê²½ë˜ë©´ ì¬ì‹¤í–‰ë˜ëŠ”ë° ì¬ì‹¤í–‰ë˜ì§€ ì•Šì•„ë„ ë˜ëŠ” Stateë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ ì‚¬ìš© produceState ğŸ‘‰ Compose Stateê°€ ì•„ë‹Œ ê²ƒì„ Composeì˜ Stateë¡œ ë³€í™˜ derivedStateOf ğŸ‘‰ Stateë¥¼ ë‹¤ë¥¸ Stateë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©, Composableì€ ë³€í™˜ëœ Stateì—ë§Œ ì˜í–¥ì„ ë¯¸ì¹¨ snapshotFlow ğŸ‘‰ Composableì˜ Stateë¥¼ Flowë¡œ ë³€í™˜ ğŸ€ 1. Launched Effect Composable ì—ì„œ Compositionì´ ì¼ì–´ë‚  ë•Œ suspend funì„ ì‹¤í–‰í•´ì£¼ëŠ” Composable ì„ âš ï¸ Recompositionì€ Composableì˜ Stateê°€ ë°”ë€”ë•Œë§ˆë‹¤ ì¼ì–´ë‚˜ë¯€ë¡œ Recompositionì´ ì¼ì–´ë‚ ë•Œë§ˆë‹¤ ì´ì „ Launched Effectê°€ ì·¨ì†Œë˜ê³  ë‹¤ì‹œ ìˆ˜í–‰ëœë‹¤ë©´ ë§¤ìš° ë¹„íš¨ìœ¨ì  âœ… ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ LaunchedEffectëŠ” keyë¼ ë¶ˆë¦¬ëŠ” ê¸°ì¤€ê°’ì„ ë‘ì–´ keyê°€ ë°”ë€”ë•Œë§Œ LaunchedEffectì˜ suspend funì„ ì·¨ì†Œí•˜ê³  ì¬ì‹¤í–‰í•¨ ì˜ˆì œ ğŸ‘‡ LaunchedEffect ì—ì„œ í•œë²ˆë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ë™ì‘ ì²˜ë¦¬ í•œë²ˆë§Œ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ê²½ìš° keyê°’ì— trueë‚˜ Unitì„ ë„˜ê²¨ì£¼ëŠ” ë°©í–¥ìœ¼ë¡œ ì„¤ê³„ @Composablefun KotlinWorldScreen(oneTimeEffect: () -&gt; String) { LaunchedEffect(true) { onTimeEffect() }} ì˜ˆì œ ğŸ‘‡ LaunchedEffect ì—ì„œ í•œë²ˆë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ”ë° ë™ì‘ì´ ê¸¸ë•Œ ê¸´ ë™ì‘ì˜ ëŒë‹¤ì‹ì„ ì²˜ë¦¬í•  ë•Œ ğŸ‘‰ rememberUpdatedState ë¥¼ ì‚¬ìš©í•˜ì—¬ launchë¥¼ ê¸°ì–µí•´ì•¼ í•¨ fun KotlinWorldScreen(longTimeJob: suspend () -&gt; String) { val rememberLongTimeJob by rememberUpdatedState(longTimeJob) LaunchedEffect(true) { println(rememberLongTimeJob()) }}ğŸ€ 2. Disposable Effect Composableì´ Disposeëœ í›„ì— ì •ë¦¬í•´ì•¼ í•  Side Effectê°€ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©ë˜ëŠ” Effect Composableì˜ Lifecycleì— ë§ì¶° ì •ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” Listenerë‚˜ ì‘ì—…ì´ ìˆëŠ” ê²½ìš°ì— Listenerë‚˜ ì‘ì—…ì„ ì œê±°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” Effect âš ï¸ Lifecycleì— ë”°ë¼ Side Effectë¥¼ ë°œìƒì‹œí‚¨ ë‹¤ìŒ ì •ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ë§ì„ ê²½ìš° ì œëŒ€ë¡œ Side Effectì— ëŒ€í•œ ì •ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ Memory Leak(ë©”ëª¨ë¦¬ ëˆ„ìˆ˜)ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ ì²« ë²ˆì¨° ì¸ì key ğŸ‘‰ key ê°’ì´ ë°”ë€”ë•Œ ë§ˆë‹¤ effect í˜¸ì¶œ ë‘ ë²ˆì§¸ ì¸ì effect Effect ë¸”ëŸ­ì€ ì²˜ìŒì—ëŠ” ì´ˆê¸°í™” ë¡œì§ë§Œ ìˆ˜í–‰í•˜ê³  ì´í›„ì—ëŠ” key ê°’ì´ ë°”ë€”ë•Œë§ˆë‹¤ onDispose ë¸”ë¡ì„ í˜¸ì¶œí•œ í›„ ì´ˆê¸°í™” ë¡œì§ì„ ë‹¤ì‹œ í˜¸ì¶œí•¨ onDispose ë¸”ë¡ì˜ returnê°’ì´ ë°”ë¡œ DisposableEffect ì—¬ì„œ onDisposeë¸”ë¡ì€ effectëŒë‹¤ì‹ì˜ ë§¨ ë§ˆì§€ë§‰ì— ë¬´ì¡°ê±´ ì™€ì•¼í•¨ ì˜ˆì œ ğŸ‘‡DisposableEffect(key) { // Composable ì´ ì œê±°ë  ë•Œ Dispose ë˜ì–´ì•¼ í•˜ëŠ” íš¨ê³¼ ì´ˆê¸°í™” onDispose { // Composable ì´ Dispose ë  ë•Œ í˜¸ì¶œë˜ì–´ Dispose ë˜ì–´ì•¼ í•˜ëŠ” íš¨ê³¼ ì œê±° }} ì˜ˆì œ ğŸ‘‡ ì‚¬ìš©ìì˜ ì‚¬ìš© íŒ¨í„´ ë¶„ì„ì„ ìœ„í•œ ë¡œê¹… (Activity ì˜ onStart()ì—ì„œ ì‹œì‘ë˜ì–´ onStop()ì—ì„œ ëë‚˜ì•¼ í•¨) Lifecycle ì´ ë°”ë€” ë•Œ ìƒˆë¡œìš´ Observerê°€ Lifecycleì— ë¶™ì–´ ë³€í™”ë¥¼ êµ¬ë…í•˜ê³  Composableì´ ì œê±°ë  ë–„ Observer ë˜í•œ ì œê±°ë˜ë„ë¡ êµ¬í˜„ @Composablefun HomeScreen( lifecycleOwner: LifecycleOwner = LocalLifecycleOwner.current, _onStartLogging: () -&gt; Unit, _onStopLogging: () -&gt; Unit,) { val startLoggingOnStart by rememberUpdatedState(_onStartLogging) val stopLoggingOnStop by rememberUpdatedState(_onStopLogging) DisposableEffect(lifecycleOwner) { val observer = LifecycleEventObserver { _, event -&gt; if (event == Lifecycle.Event.ON_START) { startLoggingOnStart() } else { stopLoggingOnStop() } } lifecycleOwner.lifecycle.addObserver(observer) onDispose { lifecycleOwner.lifecycle.removeObserver(observer) } }}ğŸ€ 3. SideEffect Composableì˜ Compositionì´ ì„±ê³µì ìœ¼ë¡œ ë˜ì—ˆì„ ë•Œ ë°œìƒí•˜ëŠ” Effect Composeì—ì„œ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ê°ì²´ì™€ Compose ë‚´ë¶€ì˜ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ ì‚¬ìš© âš ï¸ SideEffect ì˜ í•œê³„ì  SideEffectë¡œ ìˆ˜í–‰í•˜ëŠ” EffectëŠ” Composableì´ Disposeë  ë•Œ ì •ë¦¬ê°€ ë¶ˆê°€ëŠ¥ SideEffectëŠ” LaunchedEffect or DisposableEffectë¡œ ì¶©ë¶„íˆ ëŒ€ì²´ ê°€ëŠ¥ ì˜ˆì œ ğŸ‘‡ FocusRequester ì˜ requestFocusëŠ” Composableì´ ì•„ë‹Œ Systemì˜ Eventì´ë¯€ë¡œ Composable ì´ ê´€ë¦¬í•˜ëŠ” Event ê°€ ì•„ë‹˜ ë”°ë¼ì„œ, Composableì˜ êµ¬ì„±ì´ ì™„ë£Œëœ ì´í›„ì— requestFocusê°€ í˜¸ì¶œë˜ë„ë¡ ë³´ì¥í•˜ë ¤ë©´ SideEffectë¥¼ ì‚¬ìš©í•´ì•¼ í•¨ @Composablefun HomeScreen() { var isVisible by remember { mutableStateOf(false) } // Composable ì´ ì•„ë‹Œ Systemì˜ Event val focusRequester = remember { FocusRequester() } Column (modifier = Modifier.fillMaxSize()) { Button(onClick = { isVisible = true }) { Text(text = \"ë²„íŠ¼ í´ë¦­\") } if (isVisible) { OutlinedTextField( modifier = Modifier.fillMaxSize() .focusRequester(focusRequester), value = \"\", onValueChange={} ) } } SideEffect { if (isVisible) { focusRequester.requestFocus() } }}" }, { "title": "Android Jetpack Compose Remember, State<T>", "url": "/posts/Android-Jetpack-Compose-State/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, remember, state", "date": "2022-11-02 10:05:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Jetpack Compose ì—ì„œ ì‚¬ìš©ë˜ëŠ” remember ì™€ state ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ State / RememberğŸ€ 1. State ìƒíƒœ ë³€ê²½ì— ëŒ€ì‘í•˜ëŠ” ê²ƒì€ Composeì˜ í•µì‹¬ Composeì•±ì€ Composableí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ UIë¡œ ë³€í™˜í•˜ëŠ”ë°, ë°ì´í„°ê°€ ë³€ê²½ë˜ë©´ ìƒˆ ë°ì´í„°ë¡œ ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ í˜¸ì¶œí•˜ì—¬ Update ëœ UIë¥¼ ë§Œë“ ë‹¤ recomposing ComposeëŠ” ê¸°ì¡´ì˜ Observer íŒ¨í„´ê³¼ ê°™ì´ ì•± ë°ì´í„°ì˜ ë³€ê²½ ì‚¬í•­ì„ ê´€ì°°í•˜ê¸° ìœ„í•œ ë„êµ¬ë¥¼ ì œê³µí•œë‹¤. ComposeëŠ” ë°ì´í„°ê°€ ë³€ê²½ëœ êµ¬ì„± ìš”ì†Œë§Œ ì¬êµ¬ì„± í•˜ê³ , ì˜í–¥ì„ ë°›ì§€ ì•Šì€ êµ¬ì„±ì„ ê±´ë„ˆ ë›¸ ìˆ˜ ìˆë„ë¡ ê°œë³„ êµ¬ì„±ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ í™•ì¸í•œë‹¤. âš ï¸ ì£¼ì˜ âš ï¸ @Composable í•¨ìˆ˜ëŠ” recomposeë˜ê¸° ë•Œë¬¸ì— ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„ ì–¸í•˜ë©´ ì•ˆë¨ (í•¨ìˆ˜ê°€ ì¬ì‹œì‘ë ë•Œë§ˆë‹¤ ì´ˆê¸°í™”ë˜ê¸° ë•Œë¬¸) Compose ëŠ” State ê°’ì´ ë³€ê²½ë˜ë©´ í•´ë‹¹ ìš”ì†Œê°€ ë‹¤ì‹œ ê·¸ë ¤ì§(Recomposing) í•˜ë‚˜ì˜ Componentì—ì„œ State ë³€í™”ê°€ ì¼ì–´ë‚˜ë©´ í•´ë‹¹ ComponentëŠ” recomposing ì„ ê±°ì¹˜ê³  ì´ë•Œ remember í‚¤ì›Œë“œë¥¼ í†µí•´ state ë¥¼ ê¸°ì–µí•¨ìœ¼ë¡œì¨ ì„±ê³µì ìœ¼ë¡œ UIë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.ğŸ€ 2. Remember ì´ ë³€ìˆ˜ëŠ” initial compositionì—ì„œ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì–´, recomposeë•Œì— ê°’ì„ ë°˜í™˜ë°›ì•„ ì‚¬ìš© ê°€ëŠ¥ recomposeë¡œ ì¸í•œ í•¨ìˆ˜ì˜ ì¬í˜¸ì¶œê³¼ ìƒê´€ì—†ì´ ë³€ìˆ« ê°’ì´ ìœ ì§€ë  ìˆ˜ ìˆë‹¤. Composition ì´ ìœ ì§€ë˜ëŠ” ë™ì•ˆì—ë§Œ ì ìš© ì¦‰, Composition ì´ ê·¸ë ¤ì§€ëŠ” ë°‘ë°”ë‹¥ì˜ activity/fragmentì˜ Lifecycleì´ ë³€ê²½ë˜ë©´ State ë˜í•œ ì´ˆê¸°í™”ë¨ í•´ë‹¹ Composable functionì´ composition ì—ì„œ ì œê±¸ë  ë•Œ ë§ˆë‹¤ ê°™ì´ ì œê±°ëœë‹¤. âš ï¸ ì£¼ì˜ âš ï¸ Configuration change ë°œìƒ ì‹œ ê°’ì´ ìœ ì§€ë˜ì§€ ì•ŠìŒ. (ê¸°ê¸° íšŒì „, ë‹¤í¬ ëª¨ë“œì ìš© ë“±ë“±..) rememberSaveable ğŸ‘‰ Configuration Changeì—ë„ Stateê°€ ì‚´ì•„ ìˆë„ë¡ í•´ì¤ŒğŸ€ 3. MutableState mutableStateOf(defaultValue) ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§Œë“¬ State&lt;T&gt; íƒ€ì…ì˜ ë³€ìˆ˜ë¥¼ Runtime ì— Observing í•  ìˆ˜ ìˆë‹¤ Stateì˜ value ê°€ ë³€ê²½ë˜ë©´ ì´ ê°’ì„ ì½ì–´ê°€ëŠ” Compose ë“¤ì€ Recompose ëŒ€ìƒì´ ëœë‹¤. ì˜ˆì œ ğŸ‘‡ MutableState ê°ì²´ë¥¼ Composable function ë‚´ë¶€ì— ì„ ì–¸í•˜ëŠ” 3ê°€ì§€ ë°©ë²•val mutableState = remember { mutableStateOf(ê¸°ë³¸ê°’) }var value by remember { mutableStateOf(ê¸°ë³¸ê°’) }val (value, setValue) = remember { mutableStateOf(ê¸°ë³¸ê°’) } ì˜ˆì œ ğŸ‘‡@Composablefun MyScreenContent(names: List&lt;String&gt; = listOf(\"android\", \"compose\")) { val counterState = remember { mutableStateOf(0) } Column { names.forEach { Greeting(name = it) Divder(color = Color.Black) } Divider(color = Color.Transparent, thickness = 32.dp) Counter(counterState.value) { counterState.value = it } }}@Composablefun Counter(counte: Int, updateCount: (Int) -&gt; Unit) { Button(onClick = { updateCount(count + 1) }) { Text(text = \"$count ë²ˆ í´ë¦­í•˜ì…¨ì–´ìš”!\") }}ğŸ€ 4. ViewModel ì— State ì‚¬ìš© Composeì—ì„œëŠ” State ë³€í™”ì‹œì— í•´ë‹¹ Stateì™€ ì—°ê²°ëœ Composableì´ Recompositionì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì— ViewModelì—ì„œ Stateì™€ ì´ë¥¼ Updateí•˜ëŠ” í•¨ìˆ˜ë¥¼ ì§ì ‘ ì„ ì–¸í•˜ê³  Composable í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¡œ ViewModelì„ ë°›ì•„ ì‚¬ìš© LiveData, Flow -&gt; State ë³€í™˜ LiveData ğŸ‘‰ LiveData.observeAsState() Flow ğŸ‘‰ Flow.collectAsState() ì˜ˆì œ ğŸ‘‡class TodoViewModel : ViewModel() { var todoItems = mutableStateListOf&lt;TodoItem&gt;() private set fun addItem(item: TodoItem) { todoItems.add(item) } fun removeItem(item: TodoItem) { todoItems.remove(item) }} ì˜ˆì œ ğŸ‘‡ ìœ„ ViewModel ì‚¬ìš©âœ… state holder ì„¤ì • ë§Œì•½ ì‹¤ì œ UIë¥¼ ê·¸ë¦¬ëŠ” TodoScreen ì— ì§ì ‘ ViewModel ì„ ì „ë‹¬í•˜ë©´ Preview ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›Œì§€ê³  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì´ ë–¨ì–´ì§ ë”°ë¼ì„œ, UI ë¥¼ ì§ì ‘ ê·¸ë¦¬ëŠ” Composableì—ëŠ” ViewModel ì„ ì§ì ‘ ì£¼ì…í•˜ì§€ ì•Šê³  State Holder ë¥¼ ë‹´ë‹¹í•˜ëŠ” Composable ì„ í•œ ë‹¨ê³„ ê±°ì¹˜ë„ë¡ í•¨ // MyScreen -&gt; state holder ë¥¼ ë‹´ë‹¹í•˜ëŠ” @Composable@Composablefun MyScreen(todoViewModel: TodoViewModel) { TodoScreen( items = todoViewModel.todoItems, onAddItem = todoViewModel::addItem, onRemoveItem = todoViewModel::removeItem, )} ì˜ˆì œ ğŸ‘‡ Flow&lt;T&gt;.collectAsState() ì‚¬ìš© ViewModel ì—ì„œ StateFlow ë“±ë¡ í›„ .collectAsState()ë¥¼ ì‚¬ìš© ì‹œ Configuration Change ë°œìƒ ì‹œì—ë„ ê°’ì„ ìœ ì§€í•  ìˆ˜ ìˆìŒ class NoteViewModel : ViewModel() { private val _searchValue = MutableStateFlow(\"\") val searchValue = _searchValue.asStateFlow() fun setSearchValue(query: String) { _searchValue.value = query }}@Composablefun NoteNavigation(viewModel: NoteViewModel) { val navController = rememberNavController() val searchValue = viewModel.searchValue.collectAsState() // TODO:: something do..}ğŸ Stateless ë¥¼ ìœ„í•œ State Hoisting stateful - stateë¥¼ ê°–ê³  ìˆìœ¼ë©° ì´ë¥¼ ì§ì ‘ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” Composable stateless - stateë¥¼ ê°–ê³ ìˆì§€ ì•Šê³ , stateë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì£¼ì…ë°›ëŠ” ë°©ì‹ state hoisting ê°œë°œìëŠ” ìµœëŒ€í•œ stateful composableì„ ì¤„ì´ê³ , ì´ë“¤ì„ statelessë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì´ìƒì  í•˜ìœ„ì˜ Composableì— ì„ ì–¸ëœ Stateë“¤ì„ ì´ë“¤ì˜ ê³µí†µ ì¡°ìƒì¸ ìƒìœ„ Composableë¡œ ì˜®ê¸°ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜í–‰ ì¥ì  stateë¥¼ í•œ ê³³ì—ì„œë§Œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ë²„ê·¸ ë°©ì§€ì— ë„ì›€ì´ë¨ Hoisting í•œ Stateë¥¼ ì—¬ëŸ¬ Composableê³¼ ê³µìœ í•  ìˆ˜ ìˆìŒ ğŸ€ State ë¥¼ ì–´ëŠ ìˆ˜ì¤€ì˜ Composable ê¹Œì§€ ëŒì–´ì˜¬ë ¤ì•¼ í• ì§€ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ê·œì¹™ 3ê°€ì§€ ì½ê¸° ğŸ‘‰ StateëŠ” ì ì–´ë„ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  Composableì˜ ê°€ì¥ ë‚®ì€ ê³µí†µ ìƒìœ„ ìš”ì†Œë¡œ ëŒì–´ ì˜¬ë ¤ì•¼í•¨ ì“°ê¸° ğŸ‘‰ StateëŠ” ìµœì†Œí•œ ì´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” Composableì¤‘ ê°€ì¥ ìƒìœ„ Composableë¡œ ëŒì–´ì˜¬ë ¤ì•¼ í•¨ ë™ì¼í•œ Eventì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ ë‘ Stateê°€ ë³€ê²½ë˜ëŠ” ê²½ìš° ë‘ Stateë¥¼ ê°™ì´ ëŒì–´ ì˜¬ë ¤ì•¼í•¨ ì˜ˆì œ ğŸ‘‡ Buttonì„ í†µí•´ Componentë¥¼ ìˆ¨ê¸°ê³  í‘œì‹œ@Composablefun MyScreen() { val visible = remember { mutableStateOf(true) } Column() { if (visible.value) MyCard() MyButton(onClick = { visible.value = !visible.value }, visible = visible.value) }}@Composablefun MyButton(onClic: () -&gt; Unit, visible: Boolean) { Button(onClick = onClick) { Text(if(visible) \"show\" else \"hide\") }} ğŸ¬ ì°¸ê³  ğŸ¬ MyButtonì— Stateë¥¼ ì„ ì–¸í•  í•„ìš”ì—†ì´, ì ë‹¹í•œ ìƒë‹¨ Composableì— Stateë¥¼ ì„ ì–¸í•œ ë’¤ Stateì˜ Valueë‚˜ Stateë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ë§Œ ì „ë‹¬í•´ì£¼ë©´ statelessë¥¼ ìœ ì§€í•œ ì±„ êµ¬í˜„í•  ìˆ˜ ìˆìŒ ğŸ Composable ì—ì„œ ì˜¬ë°”ë¥¸ CoroutinScope Composable ë‚´ë¶€ì—ì„œ Coroutineì„ ìˆ˜í–‰í•  ê²½ìš° Composableì— ëŒ€í•œ Recompositionì´ ì¼ì–´ë‚  ë•Œ ì •ë¦¬ë˜ì–´ì•¼ í•˜ëŠ” Coroutineì´ ì •ë¦¬ê°€ ì•ˆëœ ìƒíƒœë¡œ ê³„ì†í•´ì„œ Coroutineì´ ìŒ“ì¼ ìˆ˜ ìˆìŒ Composable ì—ì„œ Coroutineì„ ìƒì„±í•œë‹¤ë©´ Recompositionì´ ì¼ì–´ë‚  ë•Œ ì·¨ì†Œë˜ì–´ì•¼ í•¨ rememberCoroutineScope Composableì˜ Lifecycleì„ ë”°ë¥´ëŠ” CoroutineScope ë¥¼ ë°˜í™˜ Composable ì´ íŒŒê´´ë˜ë©´ ìë™ìœ¼ë¡œ Coroutine Job íŒŒê´´ Composable ì´ íŒŒê´´ë  ë•Œ íŒŒê´´ë˜ëŠ” Coroutineì„ ìƒì„±í•´ì•¼ë  ë•Œì—ëŠ” rememberCoroutineScope ì‚¬ìš© " }, { "title": "Android Compose Animation ê¸°ì´ˆ", "url": "/posts/Android-Compose-Animation/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, animation, alpha", "date": "2022-11-02 09:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Composeì—ì„œ Animation ì„ ì‚¬ìš©í•˜ëŠ” ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.Animationì— ëŒ€í•œ ì´í•´ê°€ ì•„ì§ ë¶€ì¡±í•˜ì—¬ ë³´ë‹¤ ìì„¸íˆ ì•Œê³  ì‹¶ìœ¼ì‹œë©´ ë°‘ì˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.Simple AnimationDeep AnimationğŸ 1. animateColorAsState UI ë³€ê²½ì‹œì˜ Animation ì‚¬ìš© animatedColorAsState(Color ê°’ ë„£ê¸°) ì˜ˆì œ animateColorAsState ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ê°€ í´ë¦­ëœ ìƒíƒœë©´ ë¹¨ê°„ìƒ‰, ì•„ë‹ˆë¼ë©´ íˆ¬ëª…ìƒ‰ ë°°ê²½ ì§€ì • ğŸ‘‡@Composablefun Greeting(name: String) { var isSelected by remember { mutableStateOf(false) } val backgroundColor by animatedColorAsState(if (isSelected) Color.Red else Color.Transparent) Text( text = \"ì•ˆë…•í•˜ì„¸ìš” $name\", modifier = Modifier .padding(24.dp) .backgroundColor(color = backgroundColor) .clickable(onClick = { isSelected = !isSelected }) )}ğŸ 2. CompositionLocalProvider alpha ê°’ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš© í•´ë‹¹ ë¸”ëŸ­ì•ˆì— ìˆëŠ” ëª¨ë“  í•˜ìœ„ ê³„ì¸µì˜ Composable ë“¤ì—ê²Œ ì˜í–¥ì„ ì¤Œ LocalContentAlpha Material Theme Level ì—ì„œ ì‚¬ìš©í•˜ëŠ” Text, Icon ì„ ìœ„í•œ alpha ê°’ ê¸°ë³¸ê°’ ğŸ‘‰ 1f, íˆ¬ëª…ë„ê°€ ì—†ì´ ë³´ì—¬ì§ ì˜ˆì œ ğŸ‘‡@Composablefun PhotoGrapherCard() { Coloumn { Text(text = \"ì•ˆë“œë¡œì´ë“œ\", fontWeight = FontWeight.Bold) CompositionLocalProvider(LocalContentAlpha provides ContentAlpha.medium) { Text(text = \"3 minutes ago\", style = MaterialTheme.typography.body2) } }}ğŸ 3. Animatable animateTo ë¥¼ í†µí•´ ê°’ì´ ë³€ê²½ë  ë•Œ ìë™ìœ¼ë¡œ ê°’ì— Animation ì„ ì ìš©í•˜ëŠ” ê°’ í™€ë” ì²« ë²ˆì§¸ ì¸ì initialValue ğŸ‘‰ ì´ˆê¸° ê°’ ë‘ ë²ˆì§¸ ì¸ì typeConverter ğŸ‘‰ Animation ê°ì²´ì— ì‚¬ìš©í•  AnimationVector ì„¸ ë²ˆì§¸ ì¸ì visibilityThreshold ğŸ‘‰ ê°€ì‹œì„± ì„ê³„ê°’ ë‚´ë¶€ í•„ë“œ value ğŸ‘‰ Animation ì˜ í˜„ì¬ ê°’ targetValue ğŸ‘‰ í˜„ì¬ Animation ì˜ ëŒ€ìƒ animateTo ğŸ‘‰ targetValue ê°’ì„ í–¥í•´ Animation ì„ ì‹œì‘ animateTo ì¸ì targetValue, animationSpec, initialVelocity, block ì´ ìˆìŒ targetValue ğŸ‘‰ Animation ë„ë‹¬ ê°’, ì´ ê°’ì´ ì‘ì„ ìˆ˜ë¡ Animation ì´ ì‘ì•„ì§ initialVelocity ğŸ‘‰ Animation ì˜ ì‹œì‘ ê°’ì„ ì˜ë¯¸ block ğŸ‘‰ ë§¤ Animation í”„ë ˆì„ ë§ˆë‹¤ í˜¸ì¶œë¨ ì˜ˆì œ Splash í™”ë©´ğŸ‘‡ì›ì´ ì»¤ì¡Œë‹¤ê°€ ì‘ì•„ì§€ëŠ” Animation, Animation ì´ ëë‚˜ë©´ ë‹¤ìŒ í™”ë©´ìœ¼ë¡œ ì§„ì…@Composablefun WeatherSplashScreen(navController: NavController) { val scale = remember { Animatable(initialValue = 0f) } // LaunchedEffect : key1 ì´ ë°”ë€”ë•Œë§ˆë‹¤ ë¸”ë¡ë‚´ì˜ ë™ì‘ì„ ì¤‘ì§€í•˜ê³  ë‹¤ì‹œ ì‹œì‘í•¨ // LaunchedEffect ì—ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ë™ì‘ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ trueë¥¼ ë„£ìŒ LaunchedEffect(key1 = true) { scale.animateTo( targetValue = 0.9f, // ì´ ê°’ì´ ì‘ì„ ìˆ˜ë¡ Animation ì´ ì‘ì•„ì§ animationSpec = tween( durationMillis = 800, // ì´ ê°’ì´ ì»¤ì§ˆìˆ˜ë¡ Animation ì´ ëŠ¦ê²Œ ëë‚¨ easing = { OvershootInterpolator(8f).getInterpolation(it) } ) ) // Animation ì´ ëë‚˜ê³  2ì´ˆ ë’¤ MainScreen ìœ¼ë¡œ ì´ë™ delay(2000L) navController.navigate(WeatherScreens.MainScreen.name) } Surface( modifier = Modifier .padding(15.dp) .size(330.dp) .scale(scale.value), shape = CircleShape, color = Color.White, border = BorderStroke(width = 2.dp, color = Color.LightGray) ) { Column( modifier = Modifier.padding(1.dp), horizontalAlignment = Alignment.CenterHorizontally, verticalArrangement = Arrangement.Center ) { Image( painter = painterResource(id = R.drawable.sun), contentDescription = \"sunny icon\", contentScale = ContentScale.Fit, modifier = Modifier.size(95.dp) ) Text( text = \"Find the Sun?\", style = MaterialTheme.typography.h5, color = Color.LightGray ) } }}" }, { "title": "Android Compose ê¸°ì´ˆ", "url": "/posts/Android-Jetpack-Compose/", "categories": "Android, Jetpack-Compose", "tags": "android, jetpack, compose, surface, modifier, row, column", "date": "2022-11-01 16:19:00 +0900", "snippet": "ë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Android jetpack Compose ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ğŸ Jetpack Compose ì„ ì–¸í˜• UI, íŠ¹ì • ìƒíƒœì— ë”°ë¼ UIê°€ ë¬´ì—‡ì„ ë³´ì—¬ì£¼ë©´ ë˜ëŠ”ì§€ ìƒíƒœì— ë”°ë¥¸ UIë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ í›¨ì”¬ ì ì€ ì½”ë“œë¥¼ ì‚¬ìš© ìœ ì§€ë³´ìˆ˜ ì¸¡ë©´ì—ì„œ ìœ ë¦¬ Viewì˜ ì†ì„±ë“±ì˜ êµ¬í˜„ì„ í•  ê²½ìš° ê²½ìš°ì— ë”°ë¼ ìƒì„¸í•˜ê²Œ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ ì¬ì‚¬ìš©, í™•ì¥ì„±ì— ìš©ì´ Fragmentë¥¼ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.ğŸ€ 1. @Composable ë°ì´í„°ë¥¼ ë°›ì•„ì„œ UIìš”ì†Œë¡œ Emit í•˜ëŠ” í•¨ìˆ˜ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ë°ì´í„°ê°€ UIë¥¼ ë³€í•œí•˜ê¸° ìœ„í•œ í•¨ìˆ˜ì„ì„ ì•Œë¦¼ íŒŒë¼ë¯¸í„°ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ ì•„ë¬´ê²ƒë„ return í•˜ì§€ ì•ŠëŠ”ë‹¤ ëª…ë“±ì›ì´ë©°, Side-Effectê°€ ì—†ìŒ ğŸ¬ì°¸ê³ ğŸ¬ ëª…ë“±ì„± ğŸ‘‰ ì—°ì‚°ì„ ì—¬ëŸ¬ë²ˆ ì ìš©í•˜ë”ë¼ë„ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” ì„±ì§ˆ Composable í•¨ìˆ˜ëŠ” ìˆœì„œì™€ ê´€ê³„ì—†ì´ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, @Composable ì´ ë¶™ì–´ìˆëŠ” í•¨ìˆ˜ ë‚´ë¶€ì— ë‹¤ë¥¸ @Composable í•¨ìˆ˜ í˜¸ì¶œì´ í¬í•¨ë˜ì–´ ìˆëŠ” ê²½ìš° Composable í•¨ìˆ˜ëŠ” ìˆœì„œì™€ ê´€ê³„ì—†ì´ ì‹¤í–‰ ê°€ëŠ¥ ì¬êµ¬ì„±ì€ ìµœëŒ€í•œ ë§ì€ ìˆ˜ì˜ Composable í•¨ìˆ˜ ë° ëŒë‹¤ë¥¼ ê±´ë„ˆëœ€ ì¬êµ¬ì„±ì€ ë‚™ê´€ì ì´ë©°, ì·¨ì†Œê°€ ë  ìˆ˜ ìˆìŒ Composable í•¨ìˆ˜ëŠ” Animation ì˜ ëª¨ë“  í”„ë ˆì„ê³¼ ê°™ì€ ë¹ˆë„ë¡œ ë§¤ìš° ìì£¼ ì‹¤í–‰ë  ìˆ˜ ìˆìŒ ë°ì´í„° ë³€ê²½ ì‹œ ë°ì´í„°ê°€ ë³€ê²½ëœ ìœ„ì ¯ë§Œ ìƒˆë¡œ ê·¸ë ¤ì§ SharedPreferenceì—ì„œ ê°’ì„ ì½ì–´ì˜¤ëŠ” ê²ƒê³¼ ê°™ì´ ë¹„ìš©ì´ ë§ì´ë“œëŠ” ì‘ì—…ì€ Background Threadì—ì„œ ì‹¤í–‰í•˜ì—¬ ê²°ê³¼ê°’ì„ Composable í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•´ì•¼í•¨ Composable ì™¸ë¶€ì—ì„œ Background Threadì—ì„œ ì‹¤í–‰í•˜ê³  LiveData ë‚˜ StateFlow ë“±ì„ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ ë°›ê¸° ğŸ€ 2. Surface ìš”ì†Œë¥¼ ê°ì‹¸ëŠ” Container ì™€ ê°™ì€ ì—­í• ì„ í•˜ëŠ” ìš”ì†Œ, ë°°ê²½ì˜ ìƒ‰ìƒì„ ë³€ê²½í•  ìˆ˜ ìˆìŒ ì˜ˆì œ ğŸ‘‡@Composablefun Greeting(name: String) { Surface(color = Purple200) { Text(text=\"Hello $name\") }}ğŸ€ 3. Modifiers êµ¬ì„±ìš”ì†Œì˜ í¬ê¸°, ë§ˆì§„ë“±ì„ ë³€ê²½í•˜ê±°ë‚˜ í´ë¦­ì´ë‚˜ ìŠ¤í¬ë¡¤ë“±ì˜ ì´ë²¤íŠ¸ë¥¼ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•¨ UIë¥¼ ê¾¸ë¯¸ê³  ìƒí˜¸ì‘ìš© Surfaceì™€ Textì™€ ê°™ì€ ëŒ€ë¶€ë¶„ì˜ UI Componentì˜ ìœ„ì¹˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ(ìœ„ì¹˜, ìƒ‰ìƒ, ìŠ¤íƒ€ì¼ ìˆ˜ì •) Modifierì˜ ìˆœì„œëŠ” ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ë¯€ë¡œ ì¤‘ìš” ì˜ˆì œ ğŸ‘‡@Composablefun Greeting(name: String) { Text(text=\"Hello $name\", modifier = Modifier.Padding(2.dp))}ğŸ€ 4. Divider ìˆ˜í‰ êµ¬ë¶„ì„  ì—­í• ğŸ€ 5. Column ë‚´ë¶€ Componentë“¤ì„ ìˆ˜í‰ë°©í–¥ìœ¼ë¡œ ë°°ì¹˜ ì˜ˆì œ ğŸ‘‡@Composablefun MyScreenContent(name: List&lt;String&gt; = listOf(\"ì•ˆë“œë¡œì´ë“œ\", \"ì»´í¬ì¦ˆ\")) { Column { names.forEach { Greeting(name = it) Divider(color = Color.Black) } }}ğŸ€ 6. Row ë‚´ë¶€ Componentë“¤ì„ ìˆ˜ì§ë°©í–¥ìœ¼ë¡œ ë°°ì¹˜ ì˜ˆì œ ğŸ‘‡@Composablefun ComposeRow() { Row { Text(text= \"Text1\") Text(text= \"Text2\") }}ğŸ€ 7. Box êµ¬ì„±ìš”ì†Œë¥¼ ë‹¤ë¥¸ êµ¬ì„±ìš”ì†Œ ìœ„ì— ë°°ì¹˜fun ComposeBox() { Box { Text(text=\"Text1\") Text(text=\"Text2\") }}ğŸ€ 8. LazyColumn, LazyRow RecyclerViewì™€ ë™ì¼í•œ ê¸°ëŠ¥ LazyColumn ğŸ‘‰ RecyclerView orientation Vertical LazyRow ğŸ‘‰ RecyclerView orientation Horizontal Viewë¥¼ ì¬í™œìš©í•˜ì§€ëŠ” ì•ŠìŒ, ìŠ¤í¬ë¡¤í• ë•Œ ìƒˆë¡œìš´ Composableì„ ë‚´ë³´ëƒ„ ì°¸ê³  ğŸ‘‰ ìƒˆë¡œìš´ Composableì„ ë‚´ë³´ë‚´ëŠ” ê²ƒì´ ê¸°ì¡´ì˜ ë°©ë²•ì¸ Viewë¥¼ instanceí•˜ëŠ” ê²ƒì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ íš¨ìœ¨ì ì„ ì˜ˆì œ ğŸ‘‡ LazyColumn@Composablefun MyScreenContent(names: List&lt;String&gt; = List(100) {\"ì•ˆë“œë¡œì´ë“œ $it\"}) { val counterState = remember { mutableStateOf(0) } Column(modifier = Modifier.fillMaxHeight()) { NameList(names = names, Modifier.weight(1f)) Counter(counterState.value) { counterState.value = it } }}@Composablefun NameList(names: List&lt;String&gt;, modifier: Modifier = Modifier) { LazyColumn(modifier = modifier) { items(items = names) { name -&gt; Greeting(name = name) Divider(color = Color.Black) } }} ì˜ˆì œ ğŸ‘‡ LazyColumn Scroll Controll rememberLazyListState() ì‚¬ìš© LazyColum, LazyRow ì˜ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ê¸°ì–µ ë§¨ìœ„ë¡œ ëŒì–´ë‹¹ê¸°ê¸°, ë§¨ ì•„ë˜ë¡œ ë„˜ê¸°ê¸° ë“±ì— ì‚¬ìš© @Composablefun SimpleLazyColumn() { val listSize = 100 val scrollState = rememberLazyListState() val scrollCoroutineScope = rememberCoroutineScope() Column { Row { Button(onClick = { scrollCoroutineScope.launch { scrollState.animateScrollToItem(index = 0) } }) { Text(text = \"Scroll to Top\") } Button(onClick = { scrollCoroutineScope.launch { scrollState.animateScrollToItem(index = listSize - 1) } }) { Text(text = \"Scroll to Bottom\") } } } LazyColumn( state = scrollState, contentPadding = PaddingValues(horizantal = 16.dp, vertical = 8.dp), verticalArrangment = Arrangement.spaceBy(4.dp) // ê° Item ì‚¬ì´ì˜ ê°„ê²© ) { items(listSize) { index -&gt; ImageListItem(index) } }}ğŸ€ 9. Weight Modifier íŠ¹ì • ì•„ì´í…œì˜ ìœ„ì¹˜ë¥¼ ì§€ì • ì•„ì´í…œì˜ Weightë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²• ğŸ‘‰ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” Columì˜ Modifier.fillMaxHeight()ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨ Modifier.fillMaxHeight() ğŸ‘‰ Colum ì´ ìµœëŒ€ì˜ ë†’ì´ë¥¼ ê°€ì§€ë„ë¡ í•¨ ì˜ˆì œ ğŸ‘‡@Composablefun MyScreenContent(names: List&lt;String&gt; = listOf(\"Android\", \"Compose\")) { val countState = remember { mutableStateOf(0) } Column(modifier = Modifier.fillMaxHeight()) { Column(modifier = Modifier.weight(1f)) { names.forEach { Greeting(name = it) Divider(color = Color.Black) } } Counter(counterState.value) { counterState.value = it } }} ì˜ˆì œ ë²„íŠ¼ ìƒ‰ìƒ ë³€ê²½ ğŸ‘‡@Composablefun Counter(count: Int, updateCount: (Int) -&gt; Unit) { Button( onClick = { updateCount(count + 1) }, colors = ButtonDefaults.buttonColor( backgroundColor = if (count &gt; 5) Color.Cyan else Color.White ) ) { Text(text = \"$count ë²ˆ í´ë¦­\") }}ğŸ€ 10. Scaffold ê¸°ë³¸ìœ¼ë¡œ ì œê³µë˜ëŠ” Material Component Composableì¤‘ ê°€ì¥ ë†’ì€ ë ˆë²¨ì˜ Composable TopAppBar, BottomBar, SnackBar, FloatingActionButton ë° Drawer ìš© slotì´ ìˆìŒ slot ğŸ‘‰ ì—¬ëŸ¬ê°€ì§€ ì†ì„±ë“¤ì„ ê°œë°œìê°€ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ í•˜ê¸°ìœ„í•´ ì œê³µí•˜ëŠ” ë¹ˆê³µê°„ ë¼ˆëŒ€ ì—­í•  ì£¼ë¡œ Main í™”ë©´ ë§Œë“¤ë•Œ ì‚¬ìš© ì˜ˆì œ ì•±ë°” + ì•±ë°” ì˜¤ë¥¸ìª½ ë Icon ğŸ‘‡@Composablefun ScaffoldEx() { Scaffold(topBar = { TopAppBar( title = { Text(text = \"ì•± ë°” íƒ€ì´í‹€\") }, actions = { IconButton(onClick = {}) { Icon(Icons.Filled.Favorite, contentDescription = null) } } ) }) { innerPadding -&gt; BodyContent(Modifier.padding(innerPadding).padding(8.dp)) }}ğŸ ë²ˆì™¸ğŸ€ 1. Custom Button@Composablefun CreateButton() { Button(onClick = {}) { Row() { Image(painter = painterResource(R.drawable.something), contentDescription = \"\") Text( \"ë²„íŠ¼\", fontWeight = FontWeight.Bold, modifier = Modifier.padding(4.dp).align(Alignment.CenterVerticall) ) } }}ğŸ€ 2. UI ê¾¸ë¯¸ê¸° padding ìœ¼ë¡œ í´ë¦­ ì˜ì—­ ëŠ˜ë¦¬ê¸° ğŸ‘‰ clickableì „ì— paddingì„ í•˜ëŠ” ê²½ìš° í´ë¦­ ì˜ì—­ì€ ëŠ˜ëŸ¬ë‚˜ì§€ ì•ŠìŒ@Composablefun PhotographerCard(modifier: Modifier = Modifier) { Row( modifier.padding(8.dp) .clip(RoundedCornerShape(4.dp)) // Row ì— ì½”ë„ˆ ì¶”ê°€ (Radius) .backgroundColor = MaterialTheme.colors.surface .clickable {} .padding(16.dp) ) { // size ê°€ 50ì¸ ì› ë§Œë“¤ê¸° Surface( modifier = Modifier.size(50.dp), shape = CircleShape, color = MaterialTheme.colors.onSurface.copy(alpha = 0.2f), border = BorderStroke(width = 2.dp, color = Color.LightGray) // í…Œë‘ë¦¬ ) { // TODO :: something view... } }}" }, { "title": "React-Native React-Query", "url": "/posts/React-Native-Query/", "categories": "React-Native, React-Query", "tags": "react-query, react-native, useQuery, useMutation", "date": "2022-10-27 16:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” ì„œë²„ì˜ ê°’ì„ client ì— ê°€ì ¸ì˜¤ê±°ë‚˜ ìºì‹±, ê°’ ì—…ë°ì´íŠ¸, ì—ëŸ¬ í•¸ë“¤ë§ ë“± ë¹„ë™ê¸° ê³¼ì •ì„ ë”ìš± í¸í•˜ê²Œ í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” react-queryì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ğŸš© React-Query ğŸ¬ ì„œë²„ì˜ ê°’ì„ client ì— ê°€ì ¸ì˜¤ê±°ë‚˜ Caching, value updating, error handling ë“± ë¹„ë™ê¸° ê³¼ì •ì„ ë”ìš± í¸í•˜ê²Œ í•˜ëŠ”ë° ì‚¬ìš©ë¨ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.ğŸ€ 1. React-Query ì¥ì  ìºì‹± getì„ í•œ ë°ì´í„°ì— ëŒ€í•´ updateë¥¼ í•˜ë©´ ìë™ìœ¼ë¡œ getì„ ë‹¤ì‹œ ìˆ˜í–‰í•œë‹¤. Ex ğŸ‘‰ ê²Œì‹œíŒì˜ ê¸€ì„ ê°€ì ¸ì™”ì„ ë•Œ ê²Œì‹œíŒì˜ ê¸€ì„ ìƒì„±í•˜ë©´ ê²Œì‹œíŒ ê¸€ì„ getí•˜ëŠ” apië¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŒ ë°ì´í„°ê°€ ì˜¤ë˜ë˜ì—ˆë‹¤ê³  íŒë‹¨ë˜ë©´ ë‹¤ì‹œ get (invalidateQueries) ë™ì¼ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ë²ˆ ìš”ì²­í•˜ë©´ í•œë²ˆë§Œ ìš”ì²­í•œë‹¤. (Option ì— ë”°ë¼ ì¤‘ë³µ í˜¸ì¶œ, í—ˆìš© ì‹œê°„ ì¡°ì ˆ ê°€ëŠ¥) ë¬´í•œ ìŠ¤í¬ë¡¤ Infinite Queriesë¥¼ ì‚¬ìš©í•˜ì—¬ pagination ì²˜ë¦¬ ê°€ëŠ¥ ë¹„ë™ê¸° ê³¼ì •ì„ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. react ì˜ Hookê³¼ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ê°€ ë¹„ìŠ·í•˜ë‹¤.ğŸ€ 2. useQuery ë°ì´í„°ë¥¼ get í•˜ê¸° ìœ„í•œ api (post, update ëŠ” useMutation ì„ ì‚¬ìš©) ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„° Unique Keyê°€ ë“¤ì–´ê°, ìš”ì²­ì˜ ê²°ê³¼ë¬¼ì´ íŠ¹ì • ë³€ìˆ˜ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤ë©´ ê¼­ Unique keyì— í¬í•¨í•´ì•¼ í•¨ Unique keyëŠ” String ê³¼ []ì„ ë°›ëŠ”ë‹¤. ë°°ì—´ë¡œ ë„˜ê¸°ë©´ 0ë²ˆ ê°’ì€ String ê°’ìœ¼ë¡œ ë‹¤ë¥¸ Componentì—ì„œ ë¶€ë¥¼ ê°’ì´ ë“¤ì–´ê°€ê³  ë‘ ë²ˆì§¸ ê°’ì„ ë„£ìœ¼ë©´ Query í•¨ìˆ˜ ë‚´ë¶€ì— íŒŒë¼ë¯¸í„°ë¡œ í•´ë‹¹ ê°’ì´ ì „ë‹¬ë¨ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„° ë¹„ë™ê¸° í•¨ìˆ˜(api í˜¸ì¶œ í•¨ìˆ˜)ê°€ ë“¤ì–´ê° (promiseê°€ ë“¤ì–´ê°€ì•¼ í•¨) ì´ Component ê°€ ëœë”ë§ë  ë•Œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ , ì´ì— ëŒ€í•œ ìƒíƒœê°€ ê´€ë¦¬ë¨ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì„¤ì •í•œ Unique KeyëŠ” ë‹¤ë¥¸ Component ì—ì„œë„ í•´ë‹¹ keyë¥¼ ì‚¬ìš©í•˜ë©´ í˜¸ì¶œ ê°€ëŠ¥ Return ê°’ Api ìš”ì²­ì˜ ì„±ê³µ, ì‹¤íŒ¨ ì—¬ë¶€ ë° Api ê²°ê³¼ ê°’ì„ í¬í•¨í•œ ê°ì²´ status ğŸ‘‰ APIì˜ ìš”ì²­ ìƒíƒœë¥¼ ë¬¸ìì—´ë¡œ ë‚˜íƒ€ëƒ„ loading ğŸ‘‰ ì•„ì§ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ì§€ ì•Šê³ , í˜„ì¬ ë°ì´í„°ë¥¼ ìš”ì²­ ì¤‘ error ğŸ‘‰ ì˜¤ë¥˜ ë°œìƒ success ğŸ‘‰ ë°ì´í„° ìš”ì²­ ì„±ê³µ idle ğŸ‘‰ ë¹„í™œì„±í™”ëœ ìƒíƒœ(ë”°ë¡œ ì„¤ì •í•´ ë¹„í™œì„±í™”í•œ ê²½ìš°) isLoading ğŸ‘‰ status === â€˜loadingâ€™ ê³¼ ê°™ìŒ isError ğŸ‘‰ status === â€˜errorâ€™ ì™€ ê°™ìŒ isSuccess ğŸ‘‰ staus === â€˜successâ€™ ì™€ ê°™ìŒ isIdle ğŸ‘‰ staus === â€˜idleâ€™ ê³¼ ê°™ìŒ error ğŸ‘‰ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ì˜¤ë¥˜ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ data ğŸ‘‰ ìš”ì²­ ì„±ê³µí•œ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚´ isFetching ğŸ‘‰ ë°ì´í„°ê°€ ìš”ì²­ ì¤‘ì¼ ë•Œ trueê°€ ë¨ ë°ì´í„°ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ìƒíƒœì—ì„œ ì¬ìš”ì²­í•  ë•Œ isLoading ì€ false ì´ì§€ë§Œ, isFetching ì€ true ì„ refetch ğŸ‘‰ ë‹¤ì‹œ ìš”ì²­ì„ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ ë¹„ë™ê¸°ë¡œ ì‘ë™ ì—¬ëŸ¬ê°œì˜ ë¹„ë™ê¸° Queryê°€ ìˆë‹¤ë©´ useQuery ë³´ë‹¤ëŠ” useQueries ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ enabled ë¥¼ ì‚¬ìš©í•˜ë©´ useQuery ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥ useQueryì˜ 3ë²ˆì§¸ ì¸ìë¡œ Option ê°’ì´ ë“¤ì–´ê°€ëŠ”ë° ê·¸ Optionì˜ enabledì— ê°’ì„ ë„£ìœ¼ë©´ enabled ê°’ì´ true ì¼ë•Œ useQueryë¥¼ ì‹¤í–‰í•¨ useQuery Option enable ğŸ‘‰ boolean íƒ€ì…ì˜ ê°’ì„ ì„¤ì •, ì´ ê°’ì´ false ì´ë©´ Component ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ìë™ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•ŠìŒ. refetch í•¨ìˆ˜ë¡œë§Œ ìš”ì²­ì´ ì‹œì‘ë¨ retry ğŸ‘‰ boolean or number or (failureCount: number, error: TError) =&gt; boolean íƒ€ì…ì˜ ê°’ì„ ì„¤ì • ìš”ì²­ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì¬ìš”ì²­í• ì§€ ì„¤ì •í•  ìˆ˜ ìˆìŒ ì´ ê°’ì„ trueë¡œ í–ˆì„ë•Œ ğŸ‘‰ ì‹¤íŒ¨í–ˆì„ ë•Œ ì„±ê³µí•  ë•Œê¹Œì§€ ê³„ì† ë°˜ë³µ ìš”ì²­ ì´ ê°’ì„ falseë¡œ í–ˆì„ë•Œ ğŸ‘‰ ì‹¤íŒ¨í–ˆì„ ë–„ ì¬ìš”ì²­í•˜ì§€ ì•ŠìŒ ì´ ê°’ì„ 3 ìœ¼ë¡œ í•˜ë©´ ğŸ‘‰ 3ë²ˆê¹Œì§€ë§Œ ì¬ìš”ì²­ ì´ ê°’ì„ í•¨ìˆ˜ íƒ€ì…ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ğŸ‘‰ ì‹¤íŒ¨ íšŸìˆ˜ì™€ ì˜¤ë¥˜ íƒ€ì…ì— ë”°ë¼ ì¬ìš”ì²­í• ì§€ í•¨ìˆ˜ ë‚´ì—ì„œ ê²°ì •í•  ìˆ˜ ìˆìŒ retryDelay ğŸ‘‰ number or (retryAttempt: number, error: TError) =&gt; number íƒ€ì… ê°’ì„ ì„¤ì • ì‹œê°„ ë‹¨ìœ„ëŠ” ms(ë°€ë¦¬ì„¸ì»¨ë“œ 0.001ì´ˆ)ì„ ê¸°ë³¸ê°’ ğŸ‘‰ (retryAttempt) =&gt; Math.min(1000 * 2 ** failureCount, 30000) ì‹¤íŒ¨ íšŸìˆ˜ n ì— ë”°ë¼ 2ì˜ n ì œê³± ì´ˆë§Œí¼ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì¬ìš”ì²­í•˜ê³  ìµœëŒ€ 30ì´ˆê¹Œì§€ ê¸°ë‹¤ë¦¼ staleTime ğŸ‘‰ ë°ì´í„°ì˜ ìœ íš¨ ì‹œê°„ì„ ms ë‹¨ìœ„ë¡œ ì„¤ì •, ê¸°ë³¸ê°’ 0 (ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ìˆœê°„ ë°ì´í„°ëŠ” ë°”ë¡œ ìœ íš¨í•˜ì§€ ì•Šê²Œ ë¨) cacheTime ğŸ‘‰ ë°ì´í„°ì˜ ìºì‹œ ì‹œê°„ì„ ms ë‹¨ìœ„ë¡œ ì„¤ì •, ê¸°ë³¸ê°’ì€ 5ë¶„, ìºì‹œ ì‹œê°„ì€ Hookì„ ì‚¬ìš©í•˜ëŠ” Component ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ê³  ë‚˜ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ì–¼ë§ˆë‚˜ ìœ ì§€í• ì§€ ê²°ì •í•¨ ğŸ€ ì°¸ê³  ğŸ€ staleTime ê³¼ cacheTime ì˜ ì°¨ì´ ğŸ‘‡ useQuery ë¥¼ ì‚¬ìš©í•  ë•Œ staleTime ì˜µì…˜ì€ ê¸°ë³¸ê°’ì´ 0 ì„. ì¦‰, ë°ì´í„°ë¥¼ ì¡°íšŒí•œ ìˆœê°„ ë°ì´í„°ëŠ” ë°”ë¡œ ìœ íš¨í•˜ì§€ ì•Šê²Œë¨. ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ ê¸°íšŒê°€ ì£¼ì–´ì¡Œì„ ë•Œ ë‹¤ì‹œ ìš”ì²­í•˜ì—¬ ë°ì´í„°ë¥¼ ìµœì‹ í™” í•´ì•¼í•¨ ì¬ìš”ì²­ ê¸°íšŒê°€ ì£¼ì–´ì§€ëŠ” ì‹œì  : ë˜‘ê°™ì€ Cache key ë¥¼ ì‚¬ìš©í•˜ëŠ” useQuery ë¥¼ ì‚¬ìš©ì¤‘ì¸ Component ê°€ ë§ˆìš´íŠ¸ë  ë•Œ cacheTimeì€ useQuery Hookì„ ì‚¬ìš©í•œ Componentê°€ ì–¸ë§ˆìš´íŠ¸ë˜ê³  ë‚˜ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ì–¼ë§ˆ ë™ì•ˆ ìœ ì§€í• ì§€ì— ëŒ€í•œ ì„¤ì •, ê¸°ë³¸ê°’ì€ 5 ë§Œì•½ useQueryë¥¼ ì‚¬ìš©í•œ Component ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ê³  ë‚˜ì„œ 5ë¶„ì•ˆì— ë‹¤ì‹œ ë§ˆìš´íŠ¸ëœë‹¤ë©´ isLoading ê°’ì´ trueë¡œ ë˜ì§€ ì•Šê³ , ì²˜ìŒ ë Œë”ë§í•˜ëŠ” ì‹œì ë¶€í„° data ê°’ì´ ì´ì „ì— ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¡œ ì±„ì›Œì ¸ ìˆê²Œ ëœë‹¤. ê·¸ë¦¬ê³  staleTimeì— ë”°ë¼ í•´ë‹¹ ë°ì´í„°ê°€ ìœ íš¨í•˜ë‹¤ë©´ ì¬ìš”ì²­í•˜ì§€ ì•Šê³ , ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ ì¬ìš”ì²­í•œë‹¤. refetchInterval ğŸ‘‰ false or number íƒ€ì…ê°’ì„ ì„¤ì • ì´ ì„¤ì •ìœ¼ë¡œ nì´ˆë§ˆë‹¤ ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŒ ì‹œê°„ ë‹¨ìœ„ëŠ” ms ì„ refetchOnmount ğŸ‘‰ boolean or â€˜alwaysâ€™ íƒ€ì…ì˜ ê°’ì„ ì„¤ì • ì´ ì„¤ì •ìœ¼ë¡œ Componentê°€ ë§ˆìš´íŠ¸ë  ë•Œ ì¬ìš”ì²­í•˜ëŠ” ë°©ì‹ì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ ê¸°ë³¸ ê°’: true trueì¼ ë•ŒëŠ” ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•Šì„ ë•Œ ì¬ìš”ì²­í•¨ falseì¼ ë•ŒëŠ” Componentê°€ ë‹¤ì‹œ ë§ˆìš´íŠ¸ë˜ì–´ë„ ì¬ìš”ì²­í•˜ì§€ ì•ŠìŒ â€˜alwaysâ€™ì¼ ë•ŒëŠ” ë°ì´í„°ì˜ ìœ íš¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ë¬´ì¡°ê±´ ì¬ìš”ì²­í•¨ onSuccess ğŸ‘‰ (data: Data) =&gt; void íƒ€ì…ì˜ í•¨ìˆ˜ë¥¼ ì„¤ì •, ë°ì´í„° ìš”ì²­ì´ ì„±ê³µí•˜ê³  ë‚˜ì„œ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© onError ğŸ‘‰ (error: Error) =&gt; void íƒ€ì…ì˜ í•¨ìˆ˜ë¥¼ ì„¤ì •, ë°ì´í„° ìš”ì²­ì´ ì‹¤íŒ¨í•˜ê³  ë‚˜ì„œ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© onSettled ğŸ‘‰ (data?: Data, error?: Error) =&gt; void íƒ€ì…ì˜ í•¨ìˆ˜ë¥¼ ì„¤ì •, ë°ì´í„° ìš”ì²­ì˜ ì„±ê³µ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ìš”ì²­ì´ ëë‚˜ë©´ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì„¤ì • initialData ğŸ‘‰ Data () =&gt; Data íƒ€ì…ì˜ ê°’ì„ ì„¤ì •, Hook ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°ì˜ ì´ˆê¹ƒê°’ì„ ì§€ì •í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© refetchOnWindowFocus ğŸ‘‰ React-QueryëŠ” ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” ìœˆë„ìš°ê°€ ë‹¤ë¥¸ ê³³ì„ ê°”ë‹¤ê°€ ë‹¤ì‹œ í™”ë©´ìœ¼ë¡œ ëŒì•„ì˜¤ë©´ ì´ í•¨ìˆ˜ë¥¼ ì¬ì‹¤í–‰í•¨, ê·¸ ì¬ì‹¤í–‰ ì—¬ë¶€ ì˜µì…˜ ì˜ˆì œ ğŸ‘‡ ê¸°ë³¸ ì„¤ì • &gt; index.js ì— ì‘ì„± import { QueryClient, QueryClientProvider } from \"react-query\";import { ReactQueryDevtools } from \"react-query/devtools\";const queryClient = new QueryClient();const root = ReactDOM.createRoot(documnet.getElementById(\"root\"));root.Render( &lt;React.StrictMode&gt; &lt;QueryClientProvider client={queryClient}&gt; &lt;ReactQueryDevtools initialIsOpen={true} /&gt; &lt;App /&gt; &lt;/QueryClientProvider&gt; &lt;/React.StrictMode&gt;); ì˜ˆì œ ğŸ‘‡ useQuery ì‚¬ìš© const Todo = () =&gt; { const { isLoading, isError, data, error } = useQuery(\"todos\", fetchTodoList, { refetchOnWindowFocus: false, retry: 0, onSuccess: (data) =&gt; { console.log(data); }, onError: (e) =&gt; { console.log(e.message); }, }); if (isLoading) { return ( &lt;View&gt; &lt;Text&gt;{\"Loading\"}&lt;/Text&gt; &lt;/View&gt; ); } if (isError) { return ( &lt;View&gt; &lt;Text&gt;{\"ì—ëŸ¬\"}&lt;/Text&gt; &lt;/View&gt; ); } // Something...};ğŸ€ 3. useQueries useQueryë¥¼ ë¹„ë™ê¸°ë¡œ ì—¬ëŸ¬ê°œ ì‹¤í–‰í•  ê²½ìš° ì‚¬ìš© promise.allê³¼ ë§ˆì°¬ê°€ì§€ë¡œ í•˜ë‚˜ì˜ ë°°ì—´ì— ê° Queryì— ëŒ€í•œ ìƒíƒœ ê°’ì´ ê°ì²´ë¡œ ë“¤ì–´ì˜´ ì˜ˆì œ ğŸ‘‡ useQueries ì‚¬ìš© (lol ë£¬ê³¼ ìŠ¤í ì„ ë°›ì•„ì˜¤ëŠ” ì˜ˆì‹œ) const result = useQueries([ /** * getRune -&gt; Unique Key * riot.version -&gt; íŒŒë¼ë¯¸í„° */ { queryKey: [\"getRune\", riot.version], queryFn: () =&gt; api.getRunInfo(riot.version), }, { queryKey: [\"getSpell\", riot.version], queryFn: () =&gt; api.getSpellInfo(riot.version), },]);useEffect(() =&gt; { console.log(result); const loadingFinishAll = result.some((result) =&gt; result.isLoading); console.log(loadingFinishAll);}, [result]); ì˜ˆì œ ğŸ‘‡ useQueries ì‚¬ìš© &gt; Unique Key í™œìš© &gt; Unique Keyë¥¼ ë°°ì—´ë¡œ ë„£ìœ¼ë©´ queryFn(ì¿¼ë¦¬ í•¨ìˆ˜) ë‚´ë¶€ì—ì„œ ë³€ìˆ˜ë¡œ ì‚¬ìš© ê°€ëŠ¥ const result = useQueries([ { queryKey: [\"getRune\", riot.version], queryFn: (params) =&gt; { // ê²°ê³¼ -&gt; {queryKey: ['getRune', '12.1.1'], pageParam: undifined, meta: undifined} console.log(params); return api.getRunInfo(riot.version); }, }, { queryKey: [\"getSpell\", riot.version], queryFn: () =&gt; api.getSpellInfo(riot.version), },]);ğŸ€ 4. useMutation ê°’ì„ ë°”ê¿€ ë•Œ ì‚¬ìš©í•˜ëŠ” api ë°ì´í„°ë¥¼ ìƒì„±(POST), ìˆ˜ì •(UPDATE), ì‚­ì œ(DELETE)í•  ë–„ ì‚¬ìš©í•˜ëŠ” Hook íŠ¹ì • í•¨ìˆ˜ì—ì„œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë•Œì— ì§ì ‘ ìš”ì²­ì„ ì‹œì‘í•˜ëŠ” í˜•íƒœ ìš”ì²­ ê´€ë ¨ ìƒíƒœì˜ ê´€ë¦¬ì™€ ìš”ì²­ ì²˜ë¦¬ ì „/í›„ë¡œ ì‹¤í–‰í•  ì‘ì—…ì„ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŒ ì²« ë²ˆì¨° ì¸ì ğŸ‘‰ Promiseë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ë‘ ë²ˆì§¸ ì¸ì ğŸ‘‰ ì´ ì‘ì—…ì´ ì²˜ë¦¬ë˜ê¸° ì „í›„ë¡œ ì‹¤í–‰í•  í•¨ìˆ˜ë¥¼ ë„£ìŒ(ìƒëµê°€ëŠ¥) onMutate ğŸ‘‰ ìš”ì²­ ì§ì „ ì²˜ë¦¬, ì—¬ê¸°ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì€ í•˜ë‹¨ í•¨ìˆ˜ë“¤ì˜ contextë¡œ ì‚¬ìš© onError ğŸ‘‰ ë°ì´í„° ìš”ì²­ì´ ì‹¤íŒ¨í•˜ê³  ë‚˜ì„œ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© onSuccess ğŸ‘‰ ë°ì´í„° ìš”ì²­ì´ ì„±ê³µí•˜ê³  ë‚˜ì„œ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© onSettled ğŸ‘‰ ë°ì´í„° ìš”ì²­ì˜ ì„±ê³µ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ìš”ì²­ì´ ëë‚˜ë©´ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì„¤ì • return ê°’ ğŸ‘‰ useQuery ì™€ ë™ì¼ mutate ğŸ‘‡ ìš”ì²­ì„ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜ ì²« ë²ˆì§¸ ì¸ì ğŸ‘‰ API í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•  ì¸ì ë‘ ë²ˆì¨° ì¸ì {onSuccess, onSettled, onError} ê°ì²´, (ìƒëµê°€ëŠ¥) option ì— ì„¤ì •ëœ í•¨ìˆ˜ê°€ ë¨¼ì € í˜¸ì¶œë˜ê³ , mutate ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ë„£ì€ í•¨ìˆ˜ê°€ í˜¸ì¶œë¨ mutateAsync ğŸ‘‰ mutateì™€ ì¸ìëŠ” ë™ì¼, í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ë°˜í™˜ ê°’ì´ Primse staus ğŸ‘‰ ìš”ì²­ ìƒíƒœë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜(idle, loading, error, success) error ğŸ‘‰ ì˜¤ë¥˜ ì •ë³´ data ğŸ‘‰ ìš”ì²­ ì„±ê³µ ì‹œ ë°ì´í„°ê°€ ë‹´ê²¨ìˆìŒ reset ğŸ‘‰ ìƒíƒœë¥¼ ëª¨ë‘ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜ ì˜ˆì œ ğŸ‘‡ useMutation ì‚¬ìš© const Index = () =&gt; { const [id, setId] = useState(''); const [password, setPassword] = useState(''); const loginMutation = useMutation(loginApi, { // variable -&gt; {loginId: xxx, password: xxx} onMutate: variable =&gt; { console.log(\"onMutate\", variable); }, onError: (error, variable, context) =&gt; { // TODO: Error í•¸ë“¤ë§ }, onSuccess: (data, variables, context) =&gt; { console.log(\"success\", data, varibles, context); }, onSettled: () =&gt; { console.log('end); }, }); // API í˜¸ì¶œì— ì‚¬ìš©ë  ì¸ì const onSubmit = () =&gt; { loginMutation.mutate({loginId: id, password: password}); }} ì˜ˆì œ ğŸ‘‡ invalidateQueriesë¥¼ ì‚¬ìš©í•˜ì—¬ UPDATE í›„ GET í•¨ìˆ˜ë¥¼ ê°„ë‹¨í•˜ê²Œ ì‹¤í–‰mutation í•¨ìˆ˜ê°€ ì„±ê³µí•  ë•Œ, unique keyë¡œ ë§µí•‘ëœ GETí•¨ìˆ˜ë¥¼ invalidateQueriesì— ë„£ì–´ì£¼ë©´ ë¨ë§Œì•½ mutationì—ì„œ returnëœ ê°’ì„ ì´ìš©í•´ì„œ GETí•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë³€ê²½í•´ì•¼ í•  ê²½ìš° setQueryDataë¥¼ ì‚¬ìš© const mutation = useMutation(postTodo, { onSuccess: () =&gt; { // postTodo ê°€ ì„±ê³µí•˜ë©´ todos ë¡œ ë§µí•‘ëœ useQuery API í•¨ìˆ˜ë¥¼ ì‹¤í–‰ queryClient.invalidateQueries(\"todos\"); },});// ë§Œì•½ mutationì—ì„œ returnëœ ê°’ì„ ì´ìš©í•´ì„œ GET í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë³€ê²½í•´ì•¼í•  ê²½ìš° setQueryDataë¥¼ ì‚¬ìš©const queryClient = useQueryClient();// data ê°€ fetchTodoById ë¡œ ë“¤ì–´ê°const mutation = useMutation(editTodo, { onSuccess: (data) =&gt; { queryClient.setQueryData([\"todo\", { id: 5 }], data); },});const { status, data, error } = useQuery([\"todo\", { id: 5 }], fetchTodoById);mutation.mutate({ id: 5, name: \"nkh\",});ğŸ€ 5. react-suspense ì™€ react-query ì‚¬ìš© ë¹„ë™ê¸°ë¥¼ ì¢€ ë” ì„ ì–¸ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ. suspense ë¥¼ ì‚¬ìš©í•˜ì—¬ loading ì„, Error bundaryë¥¼ ì‚¬ìš©í•˜ì—¬ error handlingì„ ë”ìš± ì§ê´€ì ìœ¼ë¡œ í•  ìˆ˜ ìˆìŒ. suspense ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ QueryClient ì— option ì„ í•˜ë‚˜ ì¶”ê°€í•´ì•¼ í•¨ ì˜ˆì œ ğŸ‘‡ Global í•˜ê²Œ suspense ë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì •ì˜ &gt; src/index.js ì— ì„ ì–¸ const queryClient = new QueryClient({ defaultOptions: { queries: { retry: 0 suspense: true } }})ReactDom.render( &lt;React.StrictMode&gt; &lt;QueryClientProvider client={queryClient}&gt; &lt;App /&gt; &lt;/QueryClientProvider&gt; ...) ì˜ˆì œ ğŸ‘‡ í•¨ìˆ˜ë§ˆë‹¤ suspenseë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œ const { data } = useQuery(\"test\", testApi, { suspense: ture });return ( &lt;Suspense fallback={&lt;div&gt; loading... &lt;/div&gt;}&gt; &lt;ErrorBoundary fallback={&lt;div&gt;ì—ëŸ¬ë°œìƒ&lt;/div&gt;}&gt; &lt;div&gt;{data}&lt;/div&gt; &lt;/ErrorBoundary&gt; &lt;/Suspense&gt;);ğŸ€ 6. React-Query Cache ë°ì´í„° ìƒˆë¡œê³ ì¹¨ React-Queryì—ëŠ” useQueryë¥¼ ì‚¬ìš©í•  ë•Œ ì…ë ¥í•œ Unique Keyë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë§Œë£Œì‹œí‚¤ê³ , ìƒˆë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. invalidateQueries ğŸ‘‡ ìºì‹œë¥¼ ë§Œë£Œì‹œì¼œ ë°ì´í„°ë¥¼ ìƒˆë¡œ ê³ ì¹¨ Unique Keyë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë§Œë£Œì‹œí‚¤ê³ , APIë¥¼ ì¬ìš”ì²­í•˜ëŠ” ë°©ì‹ useQueryClient ğŸ‘‰ ì´ Hookì€ ì´ì „ì— App Componentì—ì„œ QueryClientProviderì— ë„£ì—ˆë˜ queryClientë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ getQueryData ğŸ‘‡ Unique Keyë¥¼ ì‚¬ìš©í•˜ì—¬ Cache Data ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŒ ë°ì´í„°ê°€ undifinedì¼ ìˆ˜ ìˆìœ¼ë‹ˆ, ë§Œì•½ ë°ì´í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë¹ˆ ë°°ì—´ì„ ì‚¬ìš©í•˜ë„ë¡ ì¤€ë¹„ TypeScript í™˜ê²½ì—ì„œëŠ” Genericì„ ì§€ì •í•˜ë©´ ë°˜í™˜ê°’ì˜ ë°ì´í„° type ì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ setQueryData ğŸ‘‡ Cache Data ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë©”ì„œë“œ ë°ì´í„°ë¥¼ ë‘ ë²ˆì§¸ ì¸ìì— ë„£ì–´ë„ë˜ê³ , ì—…ë°ì´íŠ¸ í•¨ìˆ˜í˜•íƒœì˜ ê°’ì„ ì¸ìë¡œ ë„£ì„ ìˆ˜ ìˆìŒ ë§Œì•½ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ í˜•íƒœë¡œ ë„£ëŠ”ë‹¤ë©´ getQueryDataëŠ” ìƒëµ ê°€ëŠ¥ ì˜ˆì œ ğŸ‘‡ QueryClientë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ const queryClient = useQueryClient();const { mutate: write } = useMutation(writerArticle, { onSuccess: () =&gt; { queryClient.invalidateQueries(\"articles\"); navigation.goBack(); },}); ì˜ˆì œ ğŸ‘‡ QueryClientë¡œ Cache Dataë¥¼ ì§ì ‘ UPDATEí•˜ê¸°APIë¥¼ ì¬ìš”ì²­í•˜ì§€ ì•Šê³  Cache Dataë¥¼ UPDATE const queryClient = useQueryClient();const { mutate: write } = useMutation(writeArticle, { onSuccess: (article) =&gt; { const articles = queryClient.getQueryData&lt;Article[]&gt;(\"articles\") ?? []; queryClient.setQueryData(\"articles\", articles.concat(article)); },}); ì˜ˆì œ ğŸ‘‡ getQueryData ìƒëµ, UPDATE í•¨ìˆ˜ í˜•íƒœì˜ ê°’ì„ ì¸ìë¡œ ë„£ìŒUnique Keyë¡œ ë°ì´í„° ì¡°íšŒ í›„ ê·¸ ë°ì´í„°ë¥¼ UPDATE í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ UPDATE const queryClient = useQueryClient();const { mutate: write } = useMutation(writeArticle, { onSuccess: (article) =&gt; { queryClient.setQueryData&lt;Article[]&gt;(\"articles\", (articles) =&gt; (articles ?? []).concat(article) ); },});ğŸ€ 7. useInfiniteQuery React-Queryì—ì„œ Pagenationì„ êµ¬í˜„í•  ë•Œ ì‚¬ìš© í•¨ìˆ˜ ë¶€ë¶„ì—ì„œ pageParamì„ ì‚¬ìš©í•˜ê³ , optionë¶€ë¶„ì— getNextPageParamì„ ì„¤ì •í•´ì¤˜ì•¼ í•¨ getNextPageParam ğŸ‘‰ (lastPage, allPages) =&gt; unknown | undefined íƒ€ì… í•¨ìˆ˜ ì´ í•¨ìˆ˜ì—ì„œëŠ” pageParamìœ¼ë¡œ ì‚¬ìš©í•  ê°’ì„ ê²°ì • getNextPageParam ì—ì„œ ë” ì´ìƒ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° undefined ë¥¼ ë°˜í™˜í•´ì•¼ í•¨ allPages ğŸ‘‰ ì§€ê¸ˆê¹Œì§€ ë¶ˆëŸ¬ì˜¨ ëª¨ë“  í˜ì´ì§€ë¥¼ ê°€ë¦¬í‚´, ë°°ì—´ë¡œ ì´ë£¨ì–´ì§„ ë°°ì—´ex) Article[][] lastPage ğŸ‘‰ ê°€ì¥ ë§ˆì§€ë§‰ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ í˜ì´ì§€, í˜„ì¬ data typeex) Article[] return ê°’ data ğŸ‘‰ {pageParams, pages} íƒ€ì…ì„ ê°€ì§€ê³  ìˆìŒ pageParams ğŸ‘‰ ê° í˜ì´ì§€ì—ì„œ ì‚¬ìš©ëœ íŒŒë¼ë¯¸í„° ë°°ì—´ pages ğŸ‘‰ ê° í˜ì´ì§€ë“¤ì„ ë°°ì—´ íƒ€ì…ìœ¼ë¡œ ë‚˜íƒ€ëƒ„ ex) Article[][] fetchNextPage ğŸ‘‰ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ hasNextPage ğŸ‘‰ ë‹¤ìŒ í˜ì´ì§€ì˜ ì¡´ì¬ ìœ ë¬´ë¥¼ ì•Œë ¤ì¤Œë§Œì•½ getNextPageParam ì—ì„œ undefined ë¥¼ ë°˜í™˜í–ˆë‹¤ë©´ ì´ ê°’ì€ falseê°€ ë˜ê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ trueê°€ ëœë‹¤. isFetchingNextPage ğŸ‘‰ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ì•Œë ¤ì¤Œ ê·¸ ì™¸ì— useQueryì—ì„œ ë°˜í™˜ë˜ëŠ” ëª¨ë“  í•„ë“œë“¤ì´ ì¡´ì¬ ì˜ˆì œ ğŸ‘‡ useInfiniteQuery ì‚¬ìš© const ArticlesScreen = () =&gt; { const {data, isFetchingNextPage, fetchNextPage} = useInfiniteQuery( 'articles', ({pageParam}) =&gt; getArticle({cursor: pageParam}), { getNextPageParam: (lastPage) =&gt; lastPage.length === 10 ? lastPage[lastPage.length - 1].id : undefined, }, ); /** * [][] =&gt; [] ìœ¼ë¡œ ë³€ê²½ * [] as Aritlce[] ì´ë¼ê³  ì…ë ¥í•˜ì—¬ í•´ë‹¹ ë°°ì—´ì´ Articleì˜ ë°°ì—´ì´ë€ ê²ƒì„ ëª…ì‹œí•˜ê³ , concatì„ í•´ì¤Œ * concat ì—ëŠ” ë°°ì—´ íƒ€ì…ì„ ë„£ìœ¼ë©´ í•´ë‹¹ ë°°ì—´ì„ í•´ì²´í•´ì„œ ì•ë¶€ë¶„ì˜ ë°°ì—´ì— ë¶™ì—¬ì£¼ê¸° ë•Œë¬¸ì—, í•´ë‹¹ ë°©ì‹ìœ¼ë¡œ * í•˜ë©´ ë°°ì—´ë“¤ì´ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì³ì§ */ const item = useMemo(() =&gt; { if (!data) return null; return ([] as Article[]).concat(...data.length) }, [data]); const [user] = useUserState(); if (!items) { return ( &lt;ActivityIndicator size=\"large\" style={styles.spinner} color=\"black\"&gt; ); } return ( &lt;Articles articles={items} showWriteButton={!!user} isFetchingNextPage={isFetchingNextPage} fetchNextPage={fetchNextPage} &gt; );} ì˜ˆì œ ğŸ‘‡ useInfiniteQuery ì‚¬ìš© &gt; FlatList ì—°ê²° interface ArticlesProps { articles: Article[]; showWriteButton: boolean; isFetchingNextPage: boolean; fetchNextPage(): void;}const Articles({ articles, showWriteButton, isFetchingNextPage, fetchNextPage}: ArticlesProps) { return ( &lt;FlatList data={articles} renderItem={({item}) =&gt; ( &lt;ArticleItem id={item.id} title={item.title} publishedAt={item.published_at} username={item.user.username} /&gt; )} keyExtractor={(item) =&gt; item.id.toString()} style={styles.list} ItemSeparatorComponent={() =&gt; &lt;View style={styles.separator} /&gt;} ListHeaderComponent={() =&gt; (showWriteButton ? &lt;WriteButton /&gt; : null)} ListFooterComponent={() =&gt; ( &lt;&gt; {articles.length &gt; 0 ? &lt;View style={styles.separator} /&gt; : null} {isFetchingNextPage &amp;&amp; ( &lt;ActivityIndicator size=\"small\" color=\"black\" style={styles.spinner} /&gt; )} &lt;/&gt; )} onEndReachedThrehold={0.5} onEndReached={fetchNextPage} /&gt; );}const styles = StyleSheet.create({ list: { flex: 1, }, separator: { width: '100%', height: 1, backgroundColor: '#cfd8dc', }, spinner: { backgroundColor: 'white', paddingTop: 32, paddingBottom: 32, },})" }, { "title": "React-Native Reduxë¡œ ì „ì—­ ìƒíƒœ ê´€ë¦¬í•˜ê¸°", "url": "/posts/React-Native-Redux/", "categories": "React-Native, Redux", "tags": "redux, react-native", "date": "2022-08-25 16:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Reduxë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ê¸°ì¡´ì—ëŠ” Reactì˜ Context APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.Context APIë¥¼ ì‚¬ìš©í•˜ë©´ ì›¬ë§Œí•œ ê¸°ëŠ¥ì€ ëª¨ë‘ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì „ì—­ì ìœ¼ë¡œ ë‹¤ë¤„ì•¼ í•  ìƒíƒœê°€ ë‹¤ì–‘í•´ì§€ê³  ë³µì¡í•´ì§ˆìˆ˜ë¡ ì¤€ë¹„í•´ì•¼ í•  ì½”ë“œê°€ ë§ì•„ì§‘ë‹ˆë‹¤.íŠ¹íˆ ìµœì í™”ê°€ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” Contextì™€ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” Contextë¥¼ ë”°ë¡œ ê´€ë¦¬í•´ì•¼ í•´ì„œ ì¤€ë¹„í•  ì½”ë“œì˜ ì–‘ì´ ë”ìš± ë§ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë”°ë¼ì„œ Reduxì— ê´€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸš© Redux (ë¦¬ë•ìŠ¤) Reduxì˜ ìƒíƒœ ì—…ë°ì´íŠ¸ ë°©ë²•ì€ useReducerì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤. ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. âœ… ì°¸ê³  action: ë³€í™”ë¥¼ ì •ì˜í•˜ëŠ” ê°ì²´ì´ë©° typeí•„ë“œë¥¼ ë°˜ë“œì‹œ ì§€ë‹ˆê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. state: ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.ì£¼ì˜ â—ï¸ ë¦¬ë“€ì„œ í•¨ìˆ˜ì—ì„œëŠ” stateì™€ actionê°’ì„ ì°¸ì¡°í•˜ì—¬ ì—…ë°ì´íŠ¸ëœ ìƒíƒœë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ function reducer(state, action) {// actionì— ë”°ë¼ ì—…ë°ì´íŠ¸ëœ ìƒíƒœë¥¼ ë°˜í™˜} Context APIë³´ë‹¤ ë” ì ì€ ì½”ë“œë¡œ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆê³ , ì„ ì‘ì„ ìµœì í™”í•˜ê¸°ì—ë„ ìš©ì´í•©ë‹ˆë‹¤. ë¯¸ë“¤ì›¨ì–´ë¼ëŠ” ê¸°ëŠ¥ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.1. Module(ëª¨ë“ˆ) ì‘ì„±í•˜ê¸° Reducì—ì„œ ìƒíƒœ ê´€ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´ Moduleì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. action ì˜ type: action typeì€ ë¬¸ìì—´ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œì˜ typeì€ TypeScriptì™€ëŠ” ë‹¤ë¦…ë‹ˆë‹¤. actionê°ì²´ë¥¼ ë§Œë“¤ ë•Œ typeìœ¼ë¡œ ì‚¬ìš©ë  ê°’ì…ë‹ˆë‹¤. âœ… ì°¸ê³  : action typeì€ ì£¼ë¡œ ëŒ€ë¬¸ìë¡œ ì„ ì–¸í•©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ // action ì˜ typeconst INCREASE = 'increase';const DECREASE = 'decrease';const INCREASE_BY = 'increase_by';const DECREASE_BY = 'decrease_by'; action ìƒì„± í•¨ìˆ˜ âœ… ì°¸ê³  action ìƒì„± í•¨ìˆ˜ëŠ” action ê°ì²´ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. action ê°ì²´ë¥¼ ë§Œë“¤ë•Œë§ˆë‹¤ ì§ì ‘ ê°ì²´ë¥¼ ì‘ì„±í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ action ìƒì„± í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤. action ìƒì„± í•¨ìˆ˜ëŠ” ì¶”í›„ Componentì—ì„œ ë¶ˆëŸ¬ì™€ì•¼ í•˜ë¯€ë¡œ exportí•´ì•¼ í•©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ // action ìƒì„± í•¨ìˆ˜export const increase = () =&gt; ({ type: INCREASE });export const decrease = () =&gt; ({ type: DECREASE });export const increaseBy = (by) =&gt; ({ type: INCREASE_BY, by });export const decreaseBy = (by) =&gt; ({ type: DECREASE_BY, by }); ì´ˆê¸° ìƒíƒœ ì˜ˆì œ ğŸ‘‡ const initialState = { value: 1}; ë¦¬ë“€ì„œ í•¨ìˆ˜ âœ… ì°¸ê³  stateì™€ action íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì™€ì„œ ì—…ë°ì´íŠ¸ëœ ìƒíƒœë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. useReducerì˜ ë¦¬ë“€ì„œì™€ ë‹¤ë¥¸ì ì€ ì´ˆê¸° ìƒíƒœë¥¼ ê¸°ë³¸ íŒŒë¼ë¯¸í„° ë¬¸ë²•ì„ ì‚¬ìš©í•´ state = initialState í˜•ì‹ìœ¼ë¡œ ì§€ì •í•´ì¤˜ì•¼ í•˜ë©°, default : ì¼€ì´ìŠ¤ì—ì„œëŠ” ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šê³  stateë¥¼ ë°˜í™˜í•˜ë„ë¡ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë¦¬ë“€ì„œ í•¨ìˆ˜ì—ì„œëŠ” ìƒíƒœì˜ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ì—…ë°ì´íŠ¸ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ stateë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ë©´ ì•ˆ ë˜ê³ , ìƒˆë¡œìš´ ê°’ì„ ë§Œë“¤ì–´ì„œ ë°˜í™˜í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì£¼ì˜ â—ï¸ ê°ì²´ì— ì—¬ëŸ¬ ê°’ì´ ìˆë‹¤ë©´ {...state, value: state.value + 1}ê³¼ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë¶ˆë³€ì„±ì„ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ ë°°ì—´ì¸ ê²½ìš°ì—ëŠ” push, splice ì²˜ëŸ¼ ë°°ì—´ì— ì§ì ‘ ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ê³  concat, filterì²˜ëŸ¼ ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±ì‹œí‚¤ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ë¦¬ë“€ì„œ í•¨ìˆ˜ëŠ” ì¶”í›„ ì—¬ëŸ¬ ë¦¬ë“€ì„œë¥¼ í•©ì³ì•¼ í•˜ë¯€ë¡œ ì´ ë˜í•œ exportí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì£¼ë¡œ export defaultë¡œ ë‚´ë³´ë‚´ì¤ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ // ë¦¬ë“€ì„œ í•¨ìˆ˜export function counter(state= initialState, action) {switch (action.type) { case INCREASE: return { value: state.value + 1 }; case DECREASE: return { value: state.value - 1}; case INCREASE_BY: return { value: state.value + action.by }; case DECREASE_BY: return { value: state.value - action.by }; default: return state;}} ì „ì²´ ì½”ë“œ// action ì˜ typeconst INCREASE = 'increase';const DECREASE = 'decrease';const INCREASE_BY = 'increase_by';const DECREASE_BY = 'decrease_by';// action ìƒì„± í•¨ìˆ˜export const increase = () =&gt; ({ type: INCREASE });export const decrease = () =&gt; ({ type: DECREASE });export const increaseBy = (by) =&gt; ({ type: INCREASE_BY, by });export const decreaseBy = (by) =&gt; ({ type: DECREASE_BY, by });// ì´ˆê¸° ìƒíƒœconst initialState = { value: 1};// ë¦¬ë“€ì„œ í•¨ìˆ˜export function counter(state= initialState, action) { switch (action.type) { case INCREASE: return { value: state.value + 1 }; case DECREASE: return { value: state.value - 1}; case INCREASE_BY: return { value: state.value + action.by }; case DECREASE_BY: return { value: state.value - action.by }; default: return state; }}2. Root ë¦¬ë“€ì„œ ë§Œë“¤ê¸° Reduxë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ê¸°ëŠ¥ë³„ë¡œ Moduleì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ê° Moduleì— ìˆëŠ” ì—¬ëŸ¬ ë¦¬ë“€ì„œë¥¼ í•˜ë‚˜ì˜ ë¦¬ë“€ì„œë¡œ í•©ì³ì•¼ í•©ë‹ˆë‹¤. ë¦¬ë“€ì„œë¥¼ í•˜ë‚˜ë¡œ í•©ì¹  ë•ŒëŠ” combineReducersë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¦¬ë“€ì„œë¥¼ í•©ì¹œ ë¦¬ë“€ì„œë¥¼ ë£¨íŠ¸ ë¦¬ë“€ì„œë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.// 3ê°œì˜ ë¦¬ë“€ì„œê°€ ìˆë‹¤ê³  ê°€ì •counter : { value: 1 }todos: [{ id: 1, text: 'ë¦¬ë•ìŠ¤', done: false}]setting: { filter: 'all' }// ë¦¬ë“€ì„œë¥¼ í•˜ë‚˜ë¡œ í•©ì¹¨ combineReducers ì‚¬ìš©import {combineReducers} from 'redux'// combineReducersì— í•©ì¹˜ê³  ì‹¶ì€ reducer í•¨ìˆ˜ ë„£ê¸°const rootReducer = combineReducers({ counter, todos, setting});export default rootReducer;3. Store(ìŠ¤í† ì–´) ë§Œë“¤ê¸° Root Reducerë¥¼ ë§Œë“  ë‹¤ìŒì—ëŠ” storeë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. React Projectì—ì„œëŠ” ë‹¨ í•˜ë‚˜ì˜ storeë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Redux storeì—ì„œëŠ” Reduxì—ì„œ ê´€ë¦¬í•˜ëŠ” ëª¨ë“  ìƒíƒœê°€ ë“¤ì–´ìˆìœ¼ë©°, í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” getStateí•¨ìˆ˜ì™€ actionì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆëŠ” dispatchí•¨ìˆ˜ê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤. âœ… ì°¸ê³  : dispatch(increase())ì™€ ê°™ì´ actionê°ì²´ë¥¼ ì¸ìì— ë„£ì–´ì„œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¤€ë¹„í•œ reducerê°€ í˜¸ì¶œë˜ë©´ì„œ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ import {createStore} from 'redux'import rootReducer from './modules/'const store = createStore(rootReducer);export default store; 4. Providerë¡œ React Projectì— Redux ì ìš© React Projectì—ì„œ ì‘ì„±í•œ storeë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ Provider Componentë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ì•±ì„ ê°ì‹¸ì¤˜ì•¼ í•©ë‹ˆë‹¤.import {createStore} from 'redux';import {Provider} from 'react-native';import rootReducer from './modules';const store = createStore(rootReducer);function App() { return ( &lt;Provider store={store}&gt; {/* .. */} &lt;/Provider&gt; );}export default App;5. useSelectorê³¼ useDispatchë¡œ Componentì—ì„œ Redux ì—°ë™í•˜ê¸° Providerë¥¼ ì‚¬ìš©í•˜ì—¬ Reduxë¥¼ ì ìš© âœ… ì°¸ê³  useSelector : Hookì„ ì‚¬ìš©í•´ ë¦¬ë•ìŠ¤ì˜ ìƒíƒœë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. useSelector Hook ì—ì„œëŠ” ì…€ë ‰í„° í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë„£ì–´ì¤ë‹ˆë‹¤. ì´ í•¨ìˆ˜ì—ì„œ state íŒŒë¼ë¯¸í„°ëŠ” storeê°€ ì§€ë‹ˆê³  ìˆëŠ” í˜„ì¬ ìƒíƒœë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ì…€ë ‰í„° í•¨ìˆ˜ì—ì„œëŠ” ì´ Componentì—ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê°’ì„ ë°˜í™˜í•˜ë©´ ë©ë‹ˆë‹¤. useDispatch : actionì„ ë°œìƒì‹œì¼œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì…€ë ‰í„°ë¥¼ ì‚¬ìš©í•´ ì¡°íšŒí•œ ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ Componentê°€ ë Œë”ë§ë©ë‹ˆë‹¤. useSelectorëŠ” ìµœì í™”ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” ìƒíƒœê°€ ë°”ë€” ë•Œë§Œ ë¦¬ë Œë”ë§í•©ë‹ˆë‹¤. ì£¼ì˜ â—ï¸ ì´ componentì—ì„œ ì˜ì¡´í•˜ì§€ ì•ŠëŠ” Reduxì—ì„œ ê´€ë¦¬í•˜ëŠ” ë‹¤ë¥¸ ìƒíƒœê°€ ë³€ê²½ëì„ ë•ŒëŠ” ë Œë”ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ì ì´ Contextë¥¼ ì‚¬ìš©í–ˆì„ ë•Œì™€ ê°€ì¥ ë‹¤ë¥¸ ì°¨ì´ì  ì…ë‹ˆë‹¤. import {useSelector, useDispatch} from 'react-redux';import {increase, decrease} from './modules/counter/';function Counter() { const value = useSelector(state =&gt; state.counter.value); const dispatch = useDispatch(); const onPressIncrease = () =&gt; { dispatch(increase()); }; const onPressDecrease = () =&gt; { dispatch(decrease())); };}export default Counter;ğŸš© Redux (ë¦¬ë•ìŠ¤) ê°œë… ì •ë¦¬ Reduxë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ìƒíƒœì˜ ì¢…ë¥˜ë³„ë¡œ Moduleì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. Moduleì—ëŠ” action type, action ìƒì„± í•¨ìˆ˜, Reducerë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤. ì—¬ëŸ¬ Reducerë¥¼ combineReducersë¡œ í•©ì³ Root Reducersë¥¼ ë§Œë“­ë‹ˆë‹¤. createStoreë¥¼ ì‚¬ìš©í•˜ì—¬ storeë¥¼ ë§Œë“­ë‹ˆë‹¤. Providerë¥¼ ì‚¬ìš©í•˜ì—¬ React Projectì— Reduxë¥¼ ì ìš©í•©ë‹ˆë‹¤. useSelectorì™€ useDispatchë¥¼ ì‚¬ìš©í•˜ì—¬ Reduxì˜ ìƒíƒœë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.ğŸš© ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Reduxì— ê´€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ReduxëŠ” useReducerì™€ ë¹„ìŠ·í•˜ë©° Reduxë¥¼ í†µí•´ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©´ ë” ì ì€ì–‘ì˜ ì½”ë“œë¡œ ìµœì í™”ëœ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Redux Toolkitì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "React-Native Redux Toolkit ì‚¬ìš©", "url": "/posts/React-Native-Redux-Toolkit/", "categories": "React-Native, Redux", "tags": "redux-toolkit, redux, react-native", "date": "2022-08-25 16:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Redux Toolkitì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Reduxë¥¼ ì‚¬ìš©í•˜ë©´ action typeì„ ì„ ì–¸í•˜ê³ , action ìƒì„± í•¨ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , Reducerì—ì„œ í•´ë‹¹ actionì„ ìœ„í•œ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Moduleì˜ ìƒíƒœê°€ ë³µì¡í•´ì§€ë©´ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ì ìƒí•´ì•¼ í•  ì½”ë“œì˜ ì–‘ë„ ë§ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì´ëŸ° ìƒí™©ì— Redux Toolkitì„ ì‚¬ìš©í•˜ë©´ Moduleì„ ì‘ì„±í•  ë•Œ action type, action ìƒì„± í•¨ìˆ˜, reducerë¥¼ í•œë²ˆì— ì‘ì„±í•  ìˆ˜ ìˆì–´ í¸ë¦¬í•©ë‹ˆë‹¤.ìì„¸í•œ ì„¤ëª…ì€ ë°‘ì—ì„œ í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Reduxì— ëŒ€í•˜ì—¬ ì˜ ëª¨ë¥´ì‹œë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ì„¸ìš”. ğŸ‘‰ React-Native Reduxì— ëŒ€í•˜ì—¬ğŸš© Redux Toolkit Moduleì„ ì‘ì„±í•  ë•Œ action type, action ìƒì„± í•¨ìˆ˜, reducerë¥¼ í•œë²ˆì— ì‘ì„±í•  ìˆ˜ ìˆì–´ í¸ë¦¬í•©ë‹ˆë‹¤. ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œ ë¶ˆë³€ì„±ì— ëŒ€í•´ ì‹ ê²½ ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ìƒíƒœë¥¼ ì§ì ‘ ì—…ë°ì´íŠ¸í–ˆì„ ë•Œ ë‚´ì¥ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ immerë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ì—…ë°ì´íŠ¸í•´ì¤ë‹ˆë‹¤. createSlice : action ìƒì„± í•¨ìˆ˜ì™€ reducerë¥¼ í•©ì¹œ ê°œë…ì…ë‹ˆë‹¤. âœ… ì°¸ê³  createSliceë¥¼ ì‚¬ìš©í•˜ë©´ action ìƒì„± í•¨ìˆ˜ì™€ reducerë¥¼ ë™ì‹œì— ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— action typeì„ ë”°ë¡œ ì„ ì–¸í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. ë§Œì•½ action typeì„ ì¡°íšŒí•´ì•¼ í•  ì¼ì´ ìƒê¸°ë©´ action ìƒì„± í•¨ìˆ˜ì˜ type í•„ë“œë¥¼ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤. counterSlice.actions: action ìƒì„± í•¨ìˆ˜ë“¤ì´ ë“¤ì–´ìˆëŠ” ê°ì²´ counterSlice.reducer: reducer í•¨ìˆ˜ actionì˜ payload : Redux Toolkitì—ì„œëŠ” actionì— ì¶”ê°€ë¡œ ë„£ì–´ì¤„ ê°’ì˜ ì´ë¦„ì´ playloadë¡œ í†µì¼ë˜ë©°, ì•¡ì…˜ ìƒì„± í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì •í•´ì§‘ë‹ˆë‹¤. ì˜ˆ) increaseBy(5) ë¼ê³  action ìƒì„± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ action.payloadì˜ ê°’ì€ 5ê°€ ë©ë‹ˆë‹¤. ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ë¶ˆë³€ì„± ê´€ë¦¬ createSliceì—ì„œ ì‚¬ìš©í•˜ëŠ” Reducer ë©”ì„œë“œì—ì„œëŠ” ë¶ˆë³€ì„±ì„ ì‹ ê²½ì“°ì§€ ë§ê³  stateê°’ì„ ì§ì ‘ ìˆ˜ì •í•´ë„ ë©ë‹ˆë‹¤. ë¼ì´ë¸Œë¦¬ ìì²´ì—ì„œ immerë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë‚´ì¥ë˜ì–´ ìˆì–´ ë¶ˆë³€ì„±ì„ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤. sliceë¥¼ ë§Œë“¤ ë•ŒëŠ” nameì„ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. name : action typeì´ ë§Œë“¤ì–´ì§ˆ ë•Œ name/ì•¡ì…˜ ì´ë¦„ í˜•íƒœë¡œ ë§Œë“¤ì–´ ì§‘ë‹ˆë‹¤. ì˜ˆ) slice ì˜ nameì´ counterì¼ ê²½ìš°, increaseì˜ action typeì€ counter/increaseê°€ ë©ë‹ˆë‹¤. import {createSlice} from '@reduxjs/toolkit';const initialState = {value: 1};const counterSlice = createSlice({ name: 'counter', initialState, reducers: { increase(state, action) { state.value += 1; }, decrease(state, action) { state.value -= 1; }, increaseBy(state, action) { state.value += action.playload; }, decreaseBy(state, action) { state.value -= action.playload; } }});export const {increase, decrease, increaseBy, decreaseBy} = counterSlice.actions;export default counterSlice.reducer; ìœ„ì˜ ì½”ë“œì—ì„œ increase(state, action)ì€ Shorthand method namesë¼ëŠ” ë¬¸ë²•ìœ¼ë¡œ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì„ ì–¸í•˜ëŠ” ë¬¸ë²•ì…ë‹ˆë‹¤.í•´ë‹¹ ì½”ë“œëŠ” ì•„ë˜ì˜ ì½”ë“œì™€ ê°™ìŠµë‹ˆë‹¤. ğŸ‘‡ increase: function(state, action) { state.value += 1;} ğŸš© Typescript ì™€ í•¨ê¼ Redux Toolkit ì‚¬ìš©í•˜ê¸° initialStateì— íƒ€ì…ì„ ë‹¬ì•„ì¤˜ì•¼ í•©ë‹ˆë‹¤. action typeì— PlayloadActionì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. playload ê°’ì˜ typeì€ PlayloadActionì˜ Genericìœ¼ë¡œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.import {createSlice, PlayloadAction} from '@reduxjs/toolkit';interface CounterState { value: number};const initialState: CounterState = {value: 1};const counterSlice = createSlice({ name: 'counter', initialState, reducers: { increase(state, action) { state.value += 1; }, decrease(state, action) { state.value -= 1; }, increaseBy(state, action: PlayloadAction&lt;number&gt;) { state.value += action.payload; }, decreaseBy(state, action: PlayloadAction&lt;number&gt;) { state.value -= action.payload; } }});export const {increase, decrease, increaseBy, decreaseBy} = counterSlice.actions;export default counterSlice.reducer;ğŸš© ë§ˆì¹˜ë©°ì´ë²ˆ ì‹œê°„ì—ëŠ” Redux Toolkitì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³  ë˜í•œ TypeScriptì„ í†µí•´ Redux Toolkitì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ë‹¤ìŒ ì‹œê°„ì—ëŠ” ë”ìš± ìœ ìš©í•œ ê¸€ë¡œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤." }, { "title": "Typescript ë¡œ React-Navigations ì‚¬ìš©í•˜ê¸°", "url": "/posts/React-Native-Using-React-Navigation-With-Typescript/", "categories": "React-Native, TypeScript", "tags": "typescript, react-navigation, react-native", "date": "2022-08-25 16:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. NarviS2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” TypeScriptë¡œ React-Navigationsì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.íƒ€ì… ì„¤ì •ì„ ì˜ í•˜ë©´ ìƒˆë¡œìš´ í™”ë©´ì„ ë„ìš°ëŠ” ê³¼ì •ì—ì„œ í™”ë©´ì˜ ì´ë¦„ì„ ìë™ ì™„ì„± í•˜ê³ , route íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë˜í•œ í™”ë©´ Componentì—ì„œëŠ” í•´ë‹¹ í™”ë©´ì—ì„œ ë°›ì•„ì˜¬ íŒŒë¼ë¯¸í„°ë“¤ì˜ íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸš© ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ TypeScriptê°€ ê³µì‹ì ìœ¼ë¡œ ì§€ì›ë˜ê¸° ë•Œë¬¸ì— ë³„ë„ë¡œ í•´ì•¼í•  ì‘ì—…ì€ ì—†ìŠµë‹ˆë‹¤. ëª…ë ¹ì–´ ğŸ‘‡ $ yarn add @react-navigation/native react-native-screens react-native-safe-area-context @react-navigation/native-stack @react-navigation/bottom-tabs ğŸš© NavigationContainer ì ìš© App.tsx ì—ì„œ NavigationContainerë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ğŸ‘‡import React from 'react';import {NavigationContainer} from '@react-navigation/native';function App() { return &lt;NavigationContainer&gt;{/* TODO: í™”ë©´ ì¶”ê°€ */}&lt;/NavigationContainer&gt;;}export default App;ğŸš© Native Stack Navigation ì‚¬ìš©í•˜ê¸° RootStack.tsx ì—ì„œ native-stackì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ğŸ‘‡import React from 'react';import {Button, Text, View} from 'react-native'import {createNativeStackNavigator} from '@react-navigation/native-stack';import {useNavigation} from '@react-navigation/native';const Stack = createNativeStackNavigator();function HomeScreen() { const navigation = useNavigation(); const onPress = () =&gt; { navigation.navigate('Detail'); }; return ( &lt;View&gt; &lt;Text&gt;Home&lt;/Text&gt; &lt;Button title=\"Open Detail\" onPress={onPress} /&gt; &lt;/View&gt; );}function DetailScreen() { return ( &lt;View&gt; &lt;Text&gt;Detail&lt;/Text&gt; &lt;/View&gt; );}function RootStack() { return ( &lt;Stack.Navigator&gt; &lt;Stack.Screen component={HomeScreen} name=\"Home\" /&gt; &lt;Stack.Screen component={DetailScreen} name=\"Detail\" /&gt; &lt;/Stack.Navigator&gt; );}export default RootStack; TypeScriptë¥¼ ì‚¬ìš©í•  ê²½ìš° ì´ ì½”ë“œì—ì„œ navigation.native('Detail')ì„ í•  ë•Œ Detail ë¶€ë¶„ì— ë¹¨ê°„ ì¤„ì´ ê·¸ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.ì£¼ì˜ â—ï¸ TypeScriptì—ì„œ native-stack navigationì„ ì‚¬ìš©í•  ë•ŒëŠ” ì–´ë–¤ í™”ë©´ì— ì–´ë–¤ íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•œì§€ StackParamListíƒ€ì…ì„ ì •ì˜í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.ì´ íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ë¥¸ í™”ë©´ì„ ë„ìš¸ ë•Œ í™”ë©´ì˜ ì´ë¦„ê³¼ route íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Native Stack Navigationì—ì„œ ì‚¬ìš©í•  í™”ë©´ íƒ€ì… ì„ ì–¸í•˜ê¸° createNativeStackNavigator ì˜ Genericìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.ì£¼ì˜ â—ï¸ RootStackParamList íƒ€ì…ì„ ì„ ì–¸í•  ë•ŒëŠ” interfaceê°€ ì•„ë‹Œ typeì„ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤. type RootStackParamList = { Home: undefined; Detail: { id: number; };};const Stack = createStackNavigator&lt;RootStackParamList&gt;(); ğŸš© useNavigation ì‚¬ìš©í•˜ê¸° useNavigationì„ ì‚¬ìš©í•  ë•ŒëŠ” NavigationPopì„ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤. ì„ ì–¸í•œ íƒ€ì…ì„ useNavigation ì˜ Genericìœ¼ë¡œ ì§€ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. native-stackì˜ ê²½ìš°ì—ëŠ” NativeStackNavigationPropì„ ë¶ˆëŸ¬ì™€ì„œ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ì˜ â—ï¸ TypeScriptë¥¼ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì—ì„œëŠ” NativeStackNavigationPropì„ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸ëœ NavigationPropì´ useNavigationì˜ Genericìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ navigation.push,navigation.pop ë“±ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. import React from 'react';import {Button, Text, View} from 'react-native';import { createNativeStackNavigator, NativeStackNavigationProp,} from '@react-navigation/native-stack';import {useNavigation} from '@react-navigation/native';type RootStackParamList = { Home: undefined; Detail: { id: number; };};// exportë¥¼ ë¶™ì—¬ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì´ë¥¼ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì •(ì¶”í›„ ë‚´ë¹„ê²Œì´ì…˜ì„ ê°ì‹¸ëŠ” ë°©ë²•ì„ ë‹¤ë£° ë•Œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©)export type RootStackNavigationProp = NativeStackNavigationProp&lt;RootStackParamList&gt;;const Stack = createStackNavigator&lt;RootStackParamList&gt;();function HomeScreen() { // Generic ì„ ì‚¬ìš©í•˜ë©´ íŠ¹ì • í™”ë©´ìœ¼ë¡œ navigateí•  ë•Œ route íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. const navigation = useNavigation&lt;RootStackNavigationProp&gt;(); const onPress = () =&gt; { navigation.navigate('Detail', {id: 1}); }; return ( &lt;View&gt; &lt;Text&gt;Home&lt;/Text&gt; &lt;Button title=\"Open Detail\" onPress={onPress} /&gt; &lt;/View&gt; );}ğŸš© useRoute ì‚¬ìš©í•˜ê¸° ì´ Hookì„ ì‚¬ìš©í•  ë•ŒëŠ” RoutePropì„ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸í•œ íƒ€ì…ì„ Genericìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. âœ… ì„¤ëª… RouteProp ğŸ‘‡ ì²« ë²ˆì§¸ Generic: í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë‚´ë¹„ê²Œì´ì…˜ì˜ route íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ìœ„í•´ ì„ ì–¸í•œ RooteStackParamListë¥¼ ë„£ìŠµë‹ˆë‹¤. ë‘ ë²ˆì§¸ Generic: í™”ë©´ ì´ë¦„ì„ ë„£ìŠµë‹ˆë‹¤. import React from 'react';import {Button, Text, View} from 'react-native';import { createNativeStackNavigator, NativeStackNavigationProp,} from '@react-navigation/native-stack';import {useNavigation, RouteProp, useRoute} from '@react-navigation/native';type RootStackParamList = { Home: undefined; Detail: { id: number; };};// exportë¥¼ ë¶™ì—¬ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ì´ë¥¼ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ì •(ì¶”í›„ ë‚´ë¹„ê²Œì´ì…˜ì„ ê°ì‹¸ëŠ” ë°©ë²•ì„ ë‹¤ë£° ë•Œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©)export type RootStackNavigationProp = NativeStackNavigationProp&lt;RootStackParamList&gt;;const Stack = createStackNavigator&lt;RootStackParamList&gt;();type DetailScreenRouteProp = RouteProp&lt;RootStackParamList, 'Detail'&gt;();function HomeScreen() { // Generic ì„ ì‚¬ìš©í•˜ë©´ íŠ¹ì • í™”ë©´ìœ¼ë¡œ navigateí•  ë•Œ route íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. const navigation = useNavigation&lt;RootStackNavigationProp&gt;(); const onPress = () =&gt; { navigation.navigate('Detail', {id: 1}); }; return ( &lt;View&gt; &lt;Text&gt;Home&lt;/Text&gt; &lt;Button title=\"Open Detail\" onPress={onPress} /&gt; &lt;/View&gt; );}function DetailScreen() { const {params} = useRoute&lt;DetailScreenRouteProp&gt;(); return ( &lt;View&gt; &lt;Text&gt;Detail {params.id}&lt;/Text&gt; &lt;/View&gt; );}function RootStack() { return ( &lt;Stack.Navigator&gt; &lt;Stack.Screen component={HomeScreen} name=\"Home\" /&gt; &lt;Stack.Screen component={DetailScreen} name=\"Detail\" /&gt; &lt;/Stack.Navigator&gt; );}export default RootStack; App.tsxì—ì„œ ì‚¬ìš©import React from 'react';import {NavigationContainer} from '@react-navigation/native';import Rootstack from './screens/RootStack';function App() { return ( &lt;NavigationContainer&gt; &lt;RootStack /&gt; &lt;/NavigationContainer&gt; );}export default App;ğŸš© Navigation ê°ì‹¸ê¸° ì—¬ëŸ¬ê°œì˜ navigationì„ ê°ìŒ€ ë•ŒëŠ” CompositeNavigationPropì„ ì‚¬ìš©í•˜ì—¬ NavigationPopì„ í•©ì¹©ë‹ˆë‹¤. í•˜ë‹¨ íƒ­ ë„¤ì´ê²Œì´ì…˜ì˜ íƒ€ì…ì„ ì§€ì •í•  ë•Œ ì˜ˆì œ ğŸ‘‡ âœ… ì„¤ëª… Native Stack Navigation ì—†ì´ í•˜ë‹¨ íƒ­ ë‚´ë¹„ê²Œì´ì…˜ë§Œ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ë©´ type MainTabNavigationProp = BottomTabNavigationProp&lt;MainTabParamList&gt;;ìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤. í•˜ë‹¨ íƒ­ ë‚´ë¹„ê²Œì´ì…˜ì—ì„œ ê·¸ ìƒìœ„ì— ìˆëŠ” RootStackì˜ DetailScreenì— ì ‘ê·¼í•˜ë ¤ë©´ NavigationPropë“¤ì„ í•©ì³ì¤˜ì•¼ í•©ë‹ˆë‹¤. import React from 'react';import { BottomTabNavigationProp, createBottomTabNavigator,} from '@react-navigation/bottom-tabs';import {Button, Text, View} from 'react-native';import { CompositeNavigationProp, NavigatorScreenParams, useNavigation} from '@react-navigation/native';import {RootStackNavigationProp} from './RootStack/';type MainTabParamList = { Home: undefined; Account: undefined;};export type MainTabNavigationProp = CompositeNavigationProp&lt; RootStackNavigationProp, BottomTabNavigationProp&lt;MainTabParamList&gt;&gt;;// ì¶”í›„ RootStack ë‚´ë¶€ í™”ë©´ì—ì„œ navigation.navigate('MainTap', {screen: 'Account'})ê°€ ê°€ëŠ¥í•˜ê²Œ í•´ì¤ë‹ˆë‹¤.export type MainTapNavigationScreenParams = NavigatorScreenParams&lt;MainTabParamList&gt;;const Tab = createBottomTabNavigator&lt;MainTapParamList&gt;();function HomeScreen() { const navigation = useNavigation&lt;MainTabNavigationProp&gt;(); const onPress = () =&gt; { navigation.navigate('Detail', {id: 1}) }; return ( &lt;View&gt; &lt;Text&gt;Home&lt;/Text&gt; &lt;Button title=\"Open Detail\" onPress={onPress} /&gt; &lt;/View&gt; );}function AccountScreen() { return ( &lt;View&gt; &lt;Text&gt;Account&lt;/Text&gt; &lt;/View&gt; );}function MainTab() { return ( &lt;Tab.Navigator&gt; &lt;Tab.Screen name=\"Home\" component={HomeScreen} /&gt; &lt;Tab.Screen name=\"Account\" component={AccountScreen} /&gt; &lt;/Tab.Navigator&gt; );}export default MainTab;ğŸš© RootStack ì—ì„œ HomeSceen ì§€ìš°ê³  MainTabìœ¼ë¡œ ëŒ€ì²´import React from 'react';import {Text, View} from 'react-native';import { createNativeStackNavigator, NativeStackNavigationProp,} from '@react-navigation/native-stack';import {RouteProp, useRoute} from '@react-navigation/native';import MainTab, {MainTabNavigationScreenParams} from './MainTab';type RootStackParamList = { MainTab: MainTabNavigationScreenParams; Detail: { id: number; };};export type RootStackNavigationProp = NativeStackNavigationProp&lt;RootStackParamList&gt;;const Stack = createNativeStackNavigator&lt;RootStackParamList&gt;();type DetailScreenRouteProp = RouteProp&lt;RootStackParamList, 'Detail'&gt;;function DetailScreen() { const {params} = useRoute&lt;DetailScreenRouteProp&gt;(); return ( &lt;View&gt; &lt;Text&gt;Detail {params.id}&lt;/Text&gt; &lt;/View&gt; );}function RootStack() { return ( &lt;Stack.Navigator&gt; &lt;Stack.Screen component={MainTab} name=\"MainTab\" options= /&gt; &lt;Stack.Screen component={DetailScreen} name=\"Detail\" /&gt; &lt;/Stack.Navigator&gt; );}export default RootStack;ğŸš© ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Typescript ë¡œ React-Navigationsë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.í•´ë‹¹ ë‚´ìš©ì€ ì¶©ë¶„íˆ í—·ê°ˆë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì—¬ëŸ¬ë²ˆ ë°˜ë³µí•´ì„œ ë³´ì‹œëŠ”ê±¸ ì¶”ì²œí•©ë‹ˆë‹¤." }, { "title": "Typescript ì—ì„œ Context API ì‚¬ìš©í•˜ê¸°", "url": "/posts/React-Native-How-To-Use-Context-Api-With-Typescript/", "categories": "React-Native, TypeScript", "tags": "typescript, context-api, react-native", "date": "2022-08-25 15:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì§€ë‚œ í¬ìŠ¤íŒ…ì— ì´ì–´ TypeScriptì—ì„œ Context APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ì§€ë‚œ í¬ìŠ¤íŒ… ğŸ‘‰ Typescript ì—ì„œ Hook ì‚¬ìš©í•˜ê¸°ğŸš© TypeScript ë¡œ Context API ì‚¬ìš©í•˜ê¸° createContext í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ Genericì„ ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. AuthContext.Providerë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—ëŠ” ê¸°ë³¸ ê°’ì´ null ì´ë¯€ë¡œ AuthContextValue | nullì„ createContextì˜ Genericìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ interface User { id: number; username: string;}interface AuthContextValue { user: User | null; setUser(user: User): void;}const AuthContext = createContext&lt;AuthContextValue | null&gt;(null); Context ì „ìš© Provider Componentë¥¼ ë”°ë¡œ ë§Œë“¤ ë•Œ í•´ë‹¹ Component ì—ì„œ children Propsë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ íƒ€ì…ë„ íŒŒë¼ë¯¸í„° ë¶€ë¶„ì—ì„œ ì§€ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ export function AuthContextProvider({children}: {children: React.ReactNode}) { // TODO: AuthContext.Provider ë Œë”ë§} ì „ìš© Hookì„ ë§Œë“¤ ë•Œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œ í›„ ì—ëŸ¬ë¥¼ throwí•´ì¤˜ì•¼ í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ íƒ€ì…ì´ AuthContextValueê°€ ë©ë‹ˆë‹¤. ë‚˜ì¤‘ì— í•´ë‹¹ Contextë¥¼ ë” í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Hookì„ ì‚¬ìš©í•  ë•Œ ë”°ë¡œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ export function useAuth() { const auth = useContext(AuthContext); if (!auth) { throw new Error('AuthContextProvider is not used'); } return auth;} authì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•´ì¤˜ì•¼, useAuchì˜ ë°˜í™˜ê°’ íƒ€ì…ì´ AuthContextValueë¡œ ë˜ê³ , throw í•˜ì—¬ null íƒ€ì…ì„ ì œì™¸í•©ë‹ˆë‹¤. ì „ì²´ ì½”ë“œ AuthContext.tsx ì‘ì„±import React, {createContext, useContext, useState} from 'react';interface User { id: number; username: string;}interface AuthContextValue { user: User | null; setUser(user: User): void;}const AuthContext = createContext&lt;AuthContextValue | null&gt;(null);export function AuthContextProvider({children}: {children: React.ReactNode}) { const [user, setUser] = userState&lt;User | null&gt;(null); return ( &lt;AuthContext.Provider value=&gt; {children} &lt;/AuthContext.Provider&gt; );}export function useAuth() { const auth = useContext(AuthContext); // authì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•´ì¤˜ì•¼ useAuthì˜ ë°˜í™˜ê°’ íƒ€ì…ì´ AuthContextValueë¡œ ë¨ if (!auth) { // throw í•˜ì—¬ null íƒ€ì… ì œì™¸ throw new Error('AuthContextProvider is not used'); } return auth;}ğŸš© ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Typescript ì—ì„œ Context API ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Typescript ë¡œ React-Navigationsë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Typescriptë¡œ React-Navigationsë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•" }, { "title": "Typescript ì—ì„œ Hook ì‚¬ìš©í•˜ê¸°", "url": "/posts/React-Native-Using-Hooks-In-Typescript/", "categories": "React-Native, TypeScript", "tags": "typescript, hook, react-native", "date": "2022-08-25 13:57:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. NarviS2 ì…ë‹ˆë‹¤.ì§€ë‚œ í¬ìŠ¤íŒ…ì—ì„œëŠ” TypeScriptì— ê´€í•˜ì—¬ ê¸°ì´ˆì ì¸ ë¬¸ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì§€ë‚œ í¬ìŠ¤íŒ…ì„ ì•ˆë³´ì‹  ë¶„ë“¤ì€ ğŸ‘‰ Typescriptì— ê´€í•˜ì—¬ë¥¼ í†µí•´ ì°¸ê³ í•˜ì‹œê¸¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.ë˜í•œ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” TypeScriptë¡œ Hookì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì˜ˆì œë¥¼ í†µí•˜ì—¬ ì•Œì•„ë³´ë„ë¡í• í…ë° Hookì— ê´€í•˜ì—¬ ëª¨ë¥´ì‹œëŠ” ë¶„ë“¤ì€ğŸ‘‰ React-Native Hookì„ ì°¸ê³ í•˜ì‹œê¸¸ ê¶Œì¥í•©ë‹ˆë‹¤.ğŸš© React Componentë¥¼ TypeScriptë¡œ ì‘ìƒí•˜ê¸° propsì— typeì´ ë¶™ëŠ” ê²ƒ ë§ê³ ëŠ” ë‹¬ë¼ì§ˆ ê²ƒì´ ì—†ìŠµë‹ˆë‹¤. (props ê°€ ì—†ëŠ” ComponentëŠ” JavaScriptë¡œ ì‘ì„±í•  ë•Œì™€ ë˜‘ê°™ìŠµë‹ˆë‹¤.) ì£¼ì˜â—ï¸ React Componentë¥¼ ì‘ì„±í•  ë•ŒëŠ” tsxí™•ì¥ì, JSXë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œëŠ” tsí™•ì¥ìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 1. Props ì‚¬ìš©í•˜ê¸° Propsê°€ í•„ìš”í•´ì§€ë©´ Propsë¥¼ ìœ„í•œ typeì„ ì„ ì–¸í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. Propsë¥¼ ìœ„í•œ typeì€ interfaceë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸í•©ë‹ˆë‹¤. ì˜ˆì œğŸ‘‡import React from 'react';import {View, Text} from 'react-native';interface Props { name: string;}function Profile({name}: Props) { return ( &lt;View&gt; &lt;Text&gt;{name}&lt;/Text&gt; &lt;/View&gt; );}export default Profile;2. ì˜µì…”ë„ Props ì‚¬ìš©í•˜ê¸° interfaceì—ì„œ íŠ¹ì • í•„ë“œì— ?ë¥¼ ë¶™ì—¬ì„œ íƒ€ì…ì„ ì„ ì–¸í•©ë‹ˆë‹¤. ì°¸ê³  : ì˜µì…”ë„ Propsë€ ìƒëµê°€ëŠ¥í•œ Propsë¼ëŠ” ëœ»ì…ë‹ˆë‹¤. import React from 'react';import {View, Text, StyleSheet} from 'react-native';interface Props { name: string; isActive?: boolean;}function Profile({name, isActive}: Props) { return ( &lt;View style={isActive &amp;&amp; styles.activeStyle}&gt; &lt;Text&gt;{name}&lt;/Text&gt; &lt;/View&gt; );}const styles = StyleSheet.create({ activeStyle: { backgroundColor: 'yellow', },});export default Profile; Profile Componentë¥¼ ì‚¬ìš©í•  ë•Œ isActive Propsë¥¼ ìƒëµí•´ë„ TypeScriptì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.3. ê¸°ë³¸ê°’ Props ì‚¬ìš©í•˜ê¸° defaultProps ì‚¬ìš© ğŸ‘‡import React from 'react';import {View, Text, StyleSheet, Image} from 'react-native';interface Props { name: string; isActive?: boolean; image: string;}function Profile({name, isActive, image}: Props) { return ( &lt;View style={isActive &amp;&amp; styles.activeStyle}&gt; &lt;Image source= /&gt; &lt;Text&gt;{name}&lt;/Text&gt; &lt;/View&gt; );}Profile.defaultProps = { image: ''.};const styles = StyleSheet.create({ activeStyle: { backgroundColor: 'yellow', },});export default Profile; JavaScript ê¸°ë³¸ê°’ ë§¤ê°œë³€ìˆ˜ ë¬¸ë²• ì‚¬ìš© Props íŒŒë¼ë¯¸í„°ê°€ êµ¬ì¡°ë¶„í•´ë˜ëŠ” ê³¼ì •ì—ì„œ íŠ¹ì • ê°’ì˜ ê¸°ë³¸ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ í•„ë“œì— ì˜µì…”ë„ ?ë¥¼ ë¶™í˜€ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ import React from 'react';import {View, Text, StyleSheet, Image} from 'react-native';interface Props { name: string; isActive?: boolean; image?: string;}function Profile({name, isActive, image='ì´ë¯¸ì§€ ì£¼ì†Œ ë„£ê¸°'}: Props) { return ( &lt;View style={isActive &amp;&amp; styles.activeStyle}&gt; &lt;Image source= /&gt; &lt;Text&gt;{name}&lt;/Text&gt; &lt;/View&gt; );}const styles = StyleSheet.create({ activeStyle: { backgroundColor: 'yellow', },});export default Profile;4. children Props ì‚¬ìš©í•˜ê¸° (React.ReactNode) JSX íƒ€ì…ì˜ Propsë¥¼ ë°›ì•„ì˜¤ëŠ” ìƒí™©ì—ì„œëŠ” React.ReactNode íƒ€ì…ì„ ì‚¬ìš© âœ… ì°¸ê³  : ë§Œì•½ children Propsê°€ ë°˜ë“œì‹œ í•„ìš”í•˜ì§€ ì•Šë‹¤ë©´ children ?: React.ReactNode ë¼ê³  ì…ë ¥í•˜ì—¬ ì´ Propsë¥¼ ìƒëµí•´ë„ ëœë‹¤ëŠ” ê²ƒì„ ëª…ì‹œí•´ì•¼í•¨ì˜ˆì œ ğŸ‘‡ import React from 'react';import {View, Text, StyleSheet, Image} from 'react-native';interface Props { name: string; isActive?: boolean; image?: string; children: React.ReactNode;}function Profile({ name, isActive, image='ì´ë¯¸ì§€ ì£¼ì†Œ ë„£ê¸°', children,}: Props) { return ( &lt;View style={isActive &amp;&amp; styles.activeStyle}&gt; &lt;Image source= /&gt; &lt;Text&gt;{name}&lt;/Text&gt; &lt;View&gt;{children}&lt;/View&gt; &lt;/View&gt; );}const styles = StyleSheet.create({ activeStyle: { backgroundColor: 'yellow', },});export default Profile; App.tsx ì—ì„œ ì‚¬ìš© ğŸ‘‡import React from 'react';import {Text} from 'react-native';import Profile from './profile/';function App() { return ( &lt;Profile name=\"NarviS2\"&gt; &lt;Text&gt;Hello World&lt;/Text&gt; &lt;/Profile&gt; );}export default App;ğŸš© TypeScript ì—ì„œ useState ì‚¬ìš©í•˜ê¸° Genericì„ ì‚¬ìš©í•˜ì—¬ ìƒíƒœì˜ íƒ€ì…ì„ ì§€ì •í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. âœ… ì°¸ê³  : useStateì— ë„£ì€ ì¸ìì˜ íƒ€ì…ì„ ìœ ì¶”í•  ìˆ˜ ì—†ê±°ë‚˜ ì—¬ëŸ¬ íƒ€ì…ì„ ì§€ë‹Œ ê²½ìš°ì—ëŠ” Genericì„ ê¼­ ì„¤ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ import React, {useState} from 'react';import {Button, Text, TextInput, View} from 'react-native';function MessageForm() { // í•´ë‹¹ ì œë„¤ë¦­ì€ ìƒëµê°€ëŠ¥ const [text, setText] = useState&lt;String&gt;(''); // ì—¬ëŸ¬ íƒ€ì…ì„ ì§€ë‹Œ ê²½ìš° const [lastMessage, setLastMessage] = useState&lt;{ message: string; date: Date; } | null&gt;(null); const onPress = () =&gt; { setLastMessage({ message: text, date: new Date(), }); setText(''); }; return ( &lt;View&gt; &lt;TextInput value={text} onChangeText={setText} /&gt; &lt;Button title=\"PRESS ME\" onPress={onPress} /&gt; {lastMessage &amp;&amp; ( &lt;View&gt; &lt;Text&gt; ë§ˆì§€ë§‰ ë©”ì‹œì§€: {lastMessage.message} ( {lastMessage.date.toLocaleString()} ) &lt;/Text&gt; &lt;/View&gt; )} &lt;/View&gt; );}export default MessageForm;ğŸš© TypeScript ì—ì„œ useRef ì‚¬ìš©í•˜ê¸° useRefì— ë‹´ì„ ê°’ì˜ íƒ€ì…ì„ Genericìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.import React, {useState, useRef, useEffect} from 'react';import {Button, Text, TextInput, View} from 'react-native';function MessageForm() { // í•´ë‹¹ ì œë„¤ë¦­ì€ ìƒëµê°€ëŠ¥ const [text, setText] = useState&lt;String&gt;(''); // ì—¬ëŸ¬ íƒ€ì…ì„ ì§€ë‹Œ ê²½ìš° const [lastMessage, setLastMessage] = useState&lt;{ id: number; message: string; date: Date; } | null&gt;(null); // useRef ì‚¬ìš© const nextId = useRef&lt;Number&gt;(1); // ì²˜ìŒ ë Œë”ë§ë  ë•ŒëŠ” nullì´ê³  í•œë²ˆ ë Œë”ë§ëœ ë’¤ì—ëŠ” TextInputì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹´ê¹ë‹ˆë‹¤. const inputRef = useRef&lt;TextInput | null&gt;(null); const onPress = () =&gt; { setLastMessage({ id: nextId.current, message: text, date: new Date(), }); setText(''); nextId.current += 1; }; // useEffectë¥¼ í†µí•´ ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë³´ì—¬ì§€ëŠ” ìˆœê°„ TextInputì— í¬ì»¤ìŠ¤ê°€ ì¡íˆë„ë¡ ì„¤ì • useEffect(() =&gt; { if (!inputRef.current) { retrun; } inputRef.current.focus(); }, []); return ( &lt;View&gt; &lt;TextInput value={text} onChangeText={setText} ref={inputRef}/&gt; &lt;Button title=\"PRESS ME\" onPress={onPress} /&gt; {lastMessage &amp;&amp; ( &lt;View&gt; &lt;Text&gt; ë§ˆì§€ë§‰ ë©”ì‹œì§€: {lastMessage.message} ( {lastMessage.date.toLocaleString()} ) &lt;/Text&gt; &lt;/View&gt; )} &lt;/View&gt; );}export default MessageForm;ğŸš© TypeScript ì—ì„œ useReducer ì‚¬ìš©í•˜ê¸° useReducerë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë¦¬ë“€ì„œì—ì„œ ê´€ë¦¬í•  stateì™€ actioníƒ€ì…ì„ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤. state ì„ ì–¸ (interface ì‚¬ìš©) ì˜ˆì œ ğŸ‘‡ interface CounterState { value: number;}const initialState: CounterState = { value: 1,}; type ì„ ì–¸ (Type Alias ì‚¬ìš©) ì˜ˆì œ ğŸ‘‡ type CounterAction = {type: 'increment'} | {type: 'decrement'; by: number}; ë§Œì•½ actionì˜ ê°¯ìˆ˜ê°€ ë§ì•„ì§ˆ ê²½ìš° (ì—¬ëŸ¬ì¤„ë¡œ ì‘ì„±) ì˜ˆì œ ğŸ‘‡ type CounterAction = | {type: 'increment'}| {type: 'decrement'; by: number}| {type: 'random'}| {type: 'nothing'}; ë˜ëŠ” ê° action ë§ˆë‹¤ interface íƒ€ì…ì„ ì„ ì–¸í•œ ë’¤ Type Aliasë¡œ í•©ì¹  ìˆ˜ë„ ìˆìŒ interface IncrementAction { type: 'increment';}interface DecrementAction { type: 'decrement'; by: number;}type CounterAction = IncrementAction | DecrementAction; reducer() í•¨ìˆ˜ ì„ ì–¸ stateì™€ actionì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì™€ ê·¸ë‹¤ìŒ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.ì˜ˆì œ ğŸ‘‡ function reducer(state: CounterState, action: CounterAction) { switch (action.type) { case 'increment': return { value: state.value + 1 }; case 'decrement': return { value: state.value - action.by }; default: throw new Error('Unhandled action type'); }} ì‚¬ìš© ë° ì „ì²´ ì½”ë“œ interface CounterState { value: number;}const initialState: CounterState = { value: 1,};type CounterAction = {type: 'increment'} | {type: 'decrement'; by: number};function reducer(state: CounterState, action: CounterAction) { switch (action.type) { case 'increment': return { value: state.value + 1 }; case 'decrement': return { value: state.value - action.by }; default: throw new Error('Unhandled action type'); }}function Counter() { const [state, dispatch] = useReducer(reducer, initialState); return ( &lt;View&gt; &lt;Text&gt;{state.value}&lt;/Text&gt; &lt;Button title:\"+1\" onPress={() =&gt; dispatch({type: 'increment'})} /&gt; &lt;Button title:\"-1\" onPress={() =&gt; dispatch({type: 'decrement'})} /&gt; &lt;/View&gt; );}export default Counter; ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” React Componentì—ì„œ TypeScriptë¥¼ ì‘ì„±í•˜ëŠ”ë²•ê³¼ TypeScriptë¡œ Hookì„ ì‘ì„±í•˜ëŠ” ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ë‹¤ìŒ ì‹œê°„ì—ëŠ” TypeScriptë¡œ Context APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "React-Native Hook", "url": "/posts/React-Native-Hook/", "categories": "React-Native, Hook", "tags": "react-native, hook", "date": "2022-08-23 13:37:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” React-Native Hook ì— ê´€í•˜ì—¬ ì•Œì•„ë³¼ê¹Œ í•©ë‹ˆë‹¤.React ì—ëŠ” useë¡œ ì‹œì‘í•˜ëŠ” ë‹¤ì–‘í•œ í•¨ìˆ˜ê°€ ë‚´ì¥ë˜ì–´ ìˆëŠ”ë°, ì´ í•¨ìˆ˜ë“¤ì„ Hookì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.Hookì„ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ê´€ë¦¬, ìµœì í™”, ì»´í¬ë„ŒíŠ¸ ì‘ë™ íë¦„ ê´€ë¦¬ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸš© Hook ì˜ ê·œì¹™ Hookì€ Component ìµœìƒìœ„ ë ˆë²¨ì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì£¼ì˜â—ï¸ Hookì€ ì¡°ê±´ë¬¸ì´ë‚˜ ë°˜ë³µë¬¸ ë˜ëŠ” ì¤‘ì²© í•¨ìˆ˜ì—ì„œ í˜¸ì¶œí•˜ë©´ ì•ˆë©ë‹ˆë‹¤. ë§Œì•½ í•¨ìˆ˜ì˜ íë¦„ ì¤‘ê°„ì— returnì„ í•˜ëŠ” ê²½ìš°ì—ëŠ” Hookì€ í•¨ìˆ˜ê°€ returnë˜ê¸° ì „ì— ì‚¬ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ Hookì„ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ Hookì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ Custom Hookì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. reactíŒ¨í‚¤ì§€ì™¸ì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” Hookì€ ëª¨ë‘ Custom Hookì…ë‹ˆë‹¤. Hookì€ Custom Hook ë˜ëŠ” í•¨ìˆ˜ Component ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ì˜â—ï¸ Classì—ì„œëŠ” ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë©°, reactì™€ ê´€ë ¨ì—†ëŠ” ì¼ë°˜ì ì¸ JavaScript í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ë©´ Errorê°€ ë°œìƒí•©ë‹ˆë‹¤. useState - ìƒíƒœ ê°’ì„ ê´€ë¦¬í•˜ëŠ” í•¨ìˆ˜ useState ê°€ í˜¸ì¶œë˜ë©´ ë‘ ê°€ì§€ ì›ì†Œê°€ ë“¤ì–´ìˆëŠ” ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ ì›ì†Œ : ìƒíƒœ ê°’ ë‘ ë²ˆì§¸ ì›ì†Œ : ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ í•´ë‹¹ ì½”ë“œì—ì„œ ì‚¬ìš©í•œ ë¬¸ë²•ì€ ë°°ì—´ êµ¬ì¡° ë¶„í•´ í• ë‹¹ì„ ì‚¬ìš©ì¤‘ì´ë©°, Button Click ì‹œ visibleì„ ë°”ê¿”ì£¼ëŠ” ì½”ë“œì…ë‹ˆë‹¤.ğŸ‘‡import React, {useState} from 'react';import {SafeAreaView, Button} from 'react-native';function App() { const [visible, setVisible] = useState(true); const onPress = () =&gt; { setVisible(!visible); }; return ( &lt;SafeAreaView&gt; &lt;Button title=\"í† ê¸€\" onPress={onPress} /&gt; &lt;/SafeAreaView&gt; );}; useState ë¥¼ ì‚¬ìš©í•´ Boolean ë¿ë§Œ ì•„ë‹ˆë¼ ìˆ«ì, ê°ì²´, ë°°ì—´ ë“±ì˜ í˜•íƒœë¥¼ ê°€ì§„ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.ğŸš© useEffect - íŠ¹ì • ê°’ì„ Observing í•˜ëŠ” í•¨ìˆ˜ Componentì—ì„œ íŠ¹ì • ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì›í•˜ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ Componentê°€ ë§ˆìš´íŠ¸(ê°€ì¥ ì²˜ìŒ í™”ë©´ì— ë‚˜íƒ€ë‚¨)ë˜ê±°ë‚˜ ì–¸ë§ˆìš´íŠ¸(í™”ë©´ì—ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§)ë  ë•Œ ì›í•˜ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ì¸ì : ì£¼ì‹œí•˜ê³  ì‹¶ì€ ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œ í˜¸ì¶œí•˜ê³  ì‹¶ì€ í•¨ìˆ˜ë¥¼ ë„£ìŠµë‹ˆë‹¤. ë‘ ë²ˆì§¸ ì¸ì : ì£¼ì‹œí•˜ê³  ì‹¶ì€ ê°’ì„ ë°°ì—´ ì•ˆì— ë„£ìŠµë‹ˆë‹¤. ì˜ˆì‹œ todosë¥¼ ì˜µì €ë¹™í•˜ë‹¤ê°€ todosê°€ ë°”ë€Œë©´ logë¥¼ ì°ëŠ” ì½”ë“œğŸ‘‡import React, {useState, useEffect} from 'react';function App() { const today = new Date(); const [todos, setTodos] = useState([ {id: 1, text: 'Hello', done: true}, {id: 2, text: 'Hello 2', done: false}, {id: 3, text: 'hello 3', done: false}, ]); useEffect(() =&gt; { console.log(todos); }, [todos]);} useEffectì— ë“±ë¡í•œ í•¨ìˆ˜ëŠ” ë‘ ë²ˆì§¸ ì¸ìì˜ ë°°ì—´ ì•ˆì— ë„£ì€ ê°’ì´ ë°”ë€” ë•Œë„ í˜¸ì¶œë˜ì§€ë§Œ, Componentê°€ ê°€ì¥ ì²˜ìŒ ë Œë”ë§ëì„ ë•Œë„ í˜¸ì¶œë©ë‹ˆë‹¤.ğŸš© useNavigation - ë‚´ë¹„ê²Œì´ì…˜ Hooks Screen ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ navigationê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.import {useNavigation} from '@react-navigation/native';function Test() { const navigation = useNavigation(); retrun ( &lt;Button title= \"Detail ì—´ê¸°\" onPress={() =&gt; navigation.navigate('Detail', {id: 1})} /&gt; );};ğŸš© useRoute - ë‚´ë¹„ê²Œì´ì…˜ Hooks useNavigationê³¼ ë¹„ìŠ·í•˜ê²Œ, Screenì´ ì•„ë‹Œ Componentì—ì„œ routeê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. Android ì—ì„œ Fragment/Activity ê°„ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. import {useRoute} from '@react-navigation/native';function Test() { const route = useRoute(); return &lt;Text&gt;id: {rounte.params.id}&lt;/Text&gt;;}ğŸš© useFocusEffect - ë‚´ë¹„ê²Œì´ì…˜ Hooks í™”ë©´ì— í¬ì»¤ìŠ¤ê°€ ì¡í˜”ì„ ë•Œ íŠ¹ì • ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” Hookì…ë‹ˆë‹¤. ë‹¤ë¥¸ í™”ë©´ì„ ì—´ì—ˆë‹¤ê°€ ëŒì•„ì™”ì„ ë•Œ íŠ¹ì • ì‘ì—…ì„ í•˜ê³  ì‹¶ë‹¤ë©´ useFocusEffect Hookì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ í™”ë©´ì—ì„œ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ë„˜ì–´ê°ˆ ë•Œ íŠ¹ì • ì‘ì—…ì„ í•˜ê³  ì‹¶ë‹¤ë©´ useFocusEffectì—ì„œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í•˜ë©´ ë©ë‹ˆë‹¤. ì£¼ì˜â—ï¸ useFocusEffectëŠ” ê¼­ useCallbackê³¼ ê°™ì´ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ useCallbackì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Componentê°€ ë¦¬ë Œë”ë§ë  ë•Œë§ˆë‹¤ useFocusEffectì— ë“±ë¡í•œ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.useCallback : Component ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ ë•Œ, ìƒˆë¡œ ë§Œë“  í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì´ì „ì— ë§Œë“  í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.ê·¸ë¦¬ê³  ê·¸ í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¡œì§ì—ì„œ ì˜ì¡´í•˜ëŠ” ê°’ì´ ìˆë‹¤ë©´ ì˜ì¡´í•˜ëŠ” ê°’ì´ ë°”ë€Œì—ˆì„ ë•Œ í•¨ìˆ˜ë¥¼ êµì²´í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤. import React, {useEffect, useCallback} from 'react';import {createMaterialBottomTabNavigator} from '@react-navigation/material-bottom-tabs';import {Text, Button, View} from 'react-native';import Icon from 'react-native-vector-icons/MaterialIcons';import {useNavigation, useFocusEffect} from '@react-navigation/native';const Tab = createMaterialBottomTabNavigator();function OpenDetailButton() { const navigation = useNavigation(); return ( &lt;Button title=\"Detail 1 ì—´ê¸°\" onPress={() =&gt; navigation.push('Deatil', {id: 1})} /&gt; );};function HomeScreen() { useFocusEffect( useCallback(() =&gt; { console.log('ì´ í™”ë©´ì„ ë³´ê³  ìˆì–´ìš”.'); return () =&gt; { console.log('ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ë„˜ì–´ê°”ì–´ìš”.'); } }, []), ); retrun ( &lt;View&gt; &lt;Text&gt;Home&lt;/Text&gt; &lt;OpenDetailButton /&gt; &lt;/View&gt; )};ğŸš© useMemo - ë©”ëª¨ë¦¬ ìµœì í™” ë©”ëª¨ì´ì œì´ì…˜í•´ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë©”ëª¨ì´ì œì´ì…˜ : ë™ì¼í•œ ê³„ì‚°ì„ ë°˜ë³µí•´ì•¼ í•  ë•Œ ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ì œê±°í•˜ê¸° ìœ„í•´ ì´ì „ì— ê³„ì‚°í•œ ê°’ì„ ì¬ì‚¬ìš©í•´ ì²˜ë¦¬ë¥¼ ìµœì í™”í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡const value = useMemo(() =&gt; compute(a, b), [a, b]); ì„¤ëª… ğŸ‘‰ a, bì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ê°’ì´ ì—°ì‚°ë©ë‹ˆë‹¤. ì „ì²´ ì˜ˆì œ ğŸ‘‡import {fromat} from 'date-fns';import React, {useContext, useMemo, useState} from 'react';import CalendarView from '../components/CalendarView';import FeedList from '../components/FeedList';import LogContext from '../contexts/LogContext';function CalendarScreen() { const {logs} = useContext(LogContext); const [selectedDate, setSelectedDate] = useState(format(new Date(), 'yyyy-MM-dd'),); const markedDates = useMemo( () =&gt; logs.reduce((acc, current) =&gt; { const formattedDate = format(new Date(current.date), 'yyyy-MM-dd'); acc[formattedDate] = {marked: true}; return acc; }, {}), [logs], );} ì„¤ëª… ğŸ‘‰ logs ë°°ì—´ì´ ë°”ë€” ë•Œë§Œ logs.reduce í•¨ìˆ˜ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤.ğŸš© useReducer - ì—¬ëŸ¬ê°€ì§€ ìƒíƒœë¥¼ ê´€ë¦¬ ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë˜ ë‹¤ë¥¸ Hook í•¨ìˆ˜ ì…ë‹ˆë‹¤. state: ìƒíƒœ action: ë³€í™”ë¥¼ ì •ì˜í•˜ëŠ” ê°ì²´ reducer: stateì™€ actionì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì™€ ê·¸ë‹¤ìŒ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. dispatch: actionì„ ë°œìƒì‹œí‚¤ëŠ” í•¨ìˆ˜ useStateë¥¼ ì—¬ëŸ¬ë²ˆ ì‚¬ìš©í•˜ëŠ” ìƒí™©ì—ì„œ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë¬´ì¡°ê±´ ì´ Hookì„ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ìŒ) ê°ê¸° ë‹¤ë¥¸ ìƒíƒœë¥¼ ë™ì‹œì— ì—…ë°ì´íŠ¸í•˜ëŠ” ìƒí™©ì—ì„œ useReducerë¥¼ ê³ ë¯¼í•´ë³´ë©´ ì¢‹ìŠµë‹ˆë‹¤. ğŸ‘‡const onPressDate = () =&gt; { // ë²„íŠ¼ í´ë¦­ ì‹œ useState í•¨ìˆ˜ë¥¼ 2ê°œ ì‚¬ìš© setMode('date'); setVisible(true);}; ì¹´ìš´í„°ë¥¼ useReducerë¡œ êµ¬í˜„í•˜ëŠ” ì˜ˆì œ ğŸ‘‡const initialState = {value: 1};// state: í˜„ì¬ ìƒíƒœ, action: dispatch í•¨ìˆ˜ì˜ ì¸ìë¡œ ë„£ì€ ì•¡ì…˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.function reducer(state, action) { swich (action.type) { case 'increase': return {value: state.value + 1}; case 'decrease': return {value: state.value - 1}; default: throw new Error('Unhandled action type'); }}function Counter() { const [state, dispatch] = useReducer(reducer, initialState); const onIncrase = () =&gt; dispatch({type: 'increase'}); const onDecrease = () =&gt; dispatch({type: 'decrease'}); return (...)} ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë¡œì§ì„ Component ë°”ê¹¥ì— êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. dispatchë¼ëŠ” í•¨ìˆ˜ í•˜ë‚˜ë¡œ ë‹¤ì–‘í•˜ê²Œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Contextì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•©ë‹ˆë‹¤. useReducerì˜ ì²« ë²ˆì§¸ ì¸ì : reducer í•¨ìˆ˜ë¥¼ ë„£ìŠµë‹ˆë‹¤. useReducerì˜ ë‘ ë²ˆì§¸ ì¸ì : ìƒíƒœì˜ ì´ˆê¸°ê°’ ì…ë‹ˆë‹¤. í•¨ìˆ˜ì˜ ê²°ê³¼ ë¬¼ì˜ ì²« ë²ˆì§¸ ì›ì†Œ : í˜„ì¬ ìƒíƒœ í•¨ìˆ˜ì˜ ê²°ê³¼ ë¬¼ì˜ ë‘ ë²ˆì§¸ ì›ì†Œ : dispatch í•¨ìˆ˜ reducerì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ : ê·¸ë‹¤ìŒ ì—…ë°ì´íŠ¸í•  ê°’ìœ¼ë¡œ ì‚¬ìš© ğŸš© useRef - ì»´í¬ë„ŒíŠ¸ ë ˆí¼ëŸ°ìŠ¤ ì„ íƒ í•¨ìˆ˜ Componetì—ì„œ Componentì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” Hookì…ë‹ˆë‹¤. âœ‹ ì œëª©ì„ ì…ë ¥í•˜ê³  Enterë¥¼ ëˆ„ë¥´ë©´ í•˜ë‹¨ ë‚´ìš©ìœ¼ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì´ë™ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´ TextInputì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì„ íƒí•˜ì—¬ í¬ì»¤ìŠ¤ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. refë¥¼ ìƒì„±í•˜ì—¬ TextInputì˜ íŒŒë¼ë¯¸í„°ë¡œ ì§€ì •í•´ì£¼ë©´ ì›í•˜ëŠ” Componentì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì°¸ê³ ğŸ” TextInputì˜ ë ˆí¼ëŸ°ìŠ¤ focus() : TextInputì— í¬ì»¤ìŠ¤ë¥¼ ì¡ì•„ì¤ë‹ˆë‹¤. blur() : TextInputì— í¬ì»¤ìŠ¤ë¥¼ í•´ì œí•©ë‹ˆë‹¤. clear() : TextInputì˜ ë‚´ìš©ì„ ëª¨ë‘ ë¹„ì›ë‹ˆë‹¤. current : useRefë¡œ ì„ íƒí•œ ë ˆí¼ëŸ°ìŠ¤ëŠ” .current ê°’ì„ ì¡°íšŒí•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. onSubmitEditing ì†ì„±ì„ í†µí•´ Enter ë¥¼ ëˆŒë €ì„ ë•Œ ë‚´ìš© TextInputìœ¼ë¡œ í¬ì»¤ìŠ¤í•˜ëŠ” ì˜ˆì œ ğŸ‘‡import React, {useRef} from 'react';import {View, StyleSheet, TextInput} from 'react-native';function WriteEditor({title, body, onChnageTitle, onChangeBody}) { const bodyRef = useRef() return ( &lt;View&gt; &lt;TextInput placeholder=\"ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.\" style={styles.titleInput} returnKeyType=\"next\" onChangeText={onChnageTitle} value={title} onSubmitEditing={() =&gt; { bodyRef.current.focus() }} /&gt; &lt;TextInput plcaeholder=\"ë‹¹ì‹ ì˜ ì˜¤ëŠ˜ì„ ê¸°ë¡í•´ë³´ì„¸ìš”.\" style={styles.bodyInput} multiline textAlignVertical=\"top\" onChangeText={onChangeBody} value={body} ref={bodyRef} /&gt; &lt;/View&gt; );}ë§ˆì¹˜ë©°ì´ë²ˆì‹œê°„ì—ëŠ” React-Native Hookì— ê´€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.í•´ë‹¹ í¬ìŠ¤íŒ…ì€ React-Naviveì— ëŒ€í•˜ì—¬ ì²˜ìŒ ê³µë¶€í•˜ë©´ì„œ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.ì¶”í›„ ê³„ì† ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì…ë‹ˆë‹¤." }, { "title": "React-Native Context API", "url": "/posts/React-Native-Context-API/", "categories": "React-Native, Context", "tags": "react-native, context-api", "date": "2022-08-22 16:03:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” React-Native Context API ì— ê´€í•˜ì—¬ ì•Œì•„ë³¼ê¹Œ í•©ë‹ˆë‹¤.Context APIëŠ” reactì— ë‚´ì¥ëœ ê¸°ëŠ¥ìœ¼ë¡œ Propsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ íŠ¹ì • ê°’ì´ í•„ìš”í•œ Componentë¼ë¦¬ ì‰½ê²Œ ê°’ì„ ê³µìœ í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.ì£¼ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.ğŸš© Context API Componentì˜ ìƒíƒœë¥¼ ê³µìœ í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì„œë¡œ ë‹¤ë¥¸ í™”ë©´ì—ì„œ ìƒíƒœë¥¼ ê³µìœ ) Androidë¡œ ì¹˜ë©´ activityViewModels()ë¥¼ ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì£¼ë¡œ í”„ë¡œì íŠ¸ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ Contextë¥¼ ë§Œë“¤ ë•ŒëŠ” createContextí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ğŸ‘‡import {createContext} from 'react';const LogContext = createContext('ì•ˆë…•í•˜ì„¸ìš”');export default LogContext; Contextë¥¼ ë§Œë“¤ë©´ LogContext.Providerë¼ëŠ” Componentì™€ LogContext.Consumerë¼ëŠ” Componentê°€ ë§Œë“¤ì–´ ì§‘ë‹ˆë‹¤. ProviderëŠ” Contextì•ˆì— ìˆëŠ” ê°’ì„ ì‚¬ìš©í•  Componentë“¤ì„ ê°ì‹¸ì£¼ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. Providerì˜ valueë¼ëŠ” Props ë¥¼ í†µí•´ ì—¬ëŸ¬ Componentì—ì„œ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê°’ì„ ì§€ì •í•©ë‹ˆë‹¤. Provider Componentë¥¼ ì‚¬ìš©í•˜ë©´ ì´ Component ë‚´ë¶€ì— ì„ ì–¸ëœ ëª¨ë“  Componentì—ì„œ Contextì•ˆì˜ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. import React from 'react';import {NavigationContainer} from '@react-navigation/native';import RootStack from './sreens/RootStack';import LogContext from './contexts/LogContext';function App() { // ì´ë ‡ê²Œí•˜ë©´ RootStackì— ìˆëŠ” ëª¨ë“  Componentì—ì„œ í•´ë‹¹ Contextë¥¼ í†µí•´ valueê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. return ( &lt;NavigationContainer&gt; &lt;LogContext.Provider value=\"ì•ˆë…•í•˜ì„¸ìš”\"&gt; &lt;RootStack /&gt; &lt;/LogContext.Provider&gt; &lt;/NavigationContainer&gt; );}export default App; í•´ë‹¹ Context ê°’ ì‚¬ìš© ğŸ‘‡import React from 'react';import {View, Text} from 'react-native';import LogContext from '../contexts/LogContext';function FeedsScreen() { return ( &lt;View&gt; &lt;LogContext.Consumer&gt; {(value) =&gt; &lt;Text&gt;{value}&lt;/Text&gt;} &lt;/LogContext.Consumer&gt; &lt;/View&gt; );}export default FeedsScreen;ğŸš© useContext - Hook í•¨ìˆ˜ Render Props ì™€ LogContext.Consumer ëŒ€ì²´ Contextì˜ ê°’ì„ í›¨ì”¬ ê°„ê²°í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ğŸ‘‡import React, {useContext} from 'react';import {View, Text} from 'react-native';import LogContext from '../contexts/LogContext';function FeedsScreen() { const value = useContext(LogContext); return ( &lt;View&gt; &lt;Text&gt;{value}&lt;/Text&gt; &lt;/View&gt; );}export default FeedsScreen; Componentì—ì„œ JSXë¥¼ ë°˜í™˜í•˜ê¸° ì „ì— ê°’ì„ ì¡°íšŒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Component ë¡œì§ ì‘ì„±ì´ ë”ìš± ê°„í¸í•©ë‹ˆë‹¤.ğŸš© Contextì—ì„œ ìœ ë™ì ì¸ ê°’ ë‹¤ë£¨ê¸° Providerë¥¼ ì‚¬ìš©í•˜ëŠ” Componentì—ì„œ Contextì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” Provider ì „ìš© Componentë¥¼ ë”°ë¡œ ë§Œë“œëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë” ë†’ìŠµë‹ˆë‹¤. íŠ¹íˆ Contextì—ì„œ ë‹¤ë£¨ëŠ” ë¡œì§ì´ ë³µì¡í•  ë•ŒëŠ” ì „ìš© Componentë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë³„ë„ì˜ Context Provider Component ë§Œë“¤ê¸° ì˜ˆì œ ì½”ë“œ ğŸ‘‡import React from 'react';import {createContext, useState} from 'react';const LogContext = createContext();export function LogContextProvider({children}) { const [text, setText] = useState(''); return ( &lt;LogContext.Provider value=&gt; {children} &lt;/LogContext.Provider&gt; );}export default LogContext; Context Provider Component ì‚¬ìš© ğŸ‘‡import React from 'react';import {NavigationContainer} from '@react-navigation/native';import RootStack from './screens/RootStack';import {LogContextProvider} from './contexts/LogContext';function App() { return ( &lt;NavigationContainer&gt; &lt;LogContextProvider&gt; &lt;RootStack /&gt; &lt;/LogContextProvider&gt; &lt;/NavigationContainer&gt; );}export default App; useContextë¥¼ ì‚¬ìš©í•˜ì—¬ Context Providerë¡œ ì œê³µëœ Data ì‚¬ìš© ğŸ‘‡import React, {useContext} from 'react';import {View, TextInput} from 'react-native';import LogContext from '../contexts/LogContext';function FeedsScreen() { const {text, setText} = useContext(LogContext); return ( &lt;View&gt; &lt;TextInput&gt; value={text} onChangeText={setText} placeHolder=\"í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.\" &lt;/TextInput&gt; &lt;/View&gt; );}export default FeedsScreen;ğŸš© ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Context APIì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.Context APIëŠ” ì„œë¡œ ë‹¤ë¥¸ í™”ë©´ê°„ì— ë°ì´í„°ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ë©° Android ì˜ Fragmentê°„ ë°ì´í„° ê³µìœ ì— ì‚¬ìš©í•˜ëŠ” activityViewModels()ë¥¼ ìƒê°í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤." }, { "title": "TypeScript", "url": "/posts/TypeScript/", "categories": "React-Native, TypeScript", "tags": "typescript", "date": "2022-08-22 13:37:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” TypeScriptì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.JavaScriptëŠ” ë™ì  íƒ€ì… ì–¸ì–´ ì…ë‹ˆë‹¤. ì¦‰, íŠ¹ì • ë³€ìˆ˜ë¥¼ ì„ ì–¸í–ˆì„ ë•Œ ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ ëŒ€ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.JavaScriptì˜ ë³€ìˆ˜ì˜ íƒ€ì…ì€ Runtimeì—ì„œ ê²°ì •ë©ë‹ˆë‹¤. ë”°ë¼ì„œ í”„ë¡œì íŠ¸ì˜ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì‹¤ìˆ˜í•  ê°€ëŠ¥ì„±ë„ ë†’ì•„ì§€ê³  íƒ€ì… ì¶”ë¡ ì´ ì¼ë¶€ë§Œ ë˜ê¸° ë•Œë¬¸ì— ê°œë°œì´ ë¶ˆí¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì˜¤ë¥˜ ë°œìƒì´ Runtimeì—ì„œ ë°œìƒí•˜ë¯€ë¡œ ì˜¤ë¥˜ë¥¼ í•¸ë“¤ë§í•˜ê¸°ê°€ ë¶ˆí¸í•©ë‹ˆë‹¤.ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ JavaScriptì— ì •ì  íƒ€ì… ì‹œìŠ¤í…œì„ ì ìš©í•©ë‹ˆë‹¤.ğŸš© TypeScript MicroSoftì—ì„œ ë§Œë“  ì˜¤í”ˆ ì†ŒìŠ¤ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì…ë‹ˆë‹¤. JavaScriptì— ì •ì  íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. TypeScriptë¡œ ì‘ì„±ëœ ì½”ë“œëŠ” tsc(TypeScript Compiler)ë¥¼ í†µí•´ JavaScriptì½”ë“œë¡œ ë³€í™˜ë©ë‹ˆë‹¤. TypeScriptì˜ í™•ì¥ìëŠ” ts ë˜ëŠ” tsx ì…ë‹ˆë‹¤. ì£¼ì˜â—ï¸ React Componentë¥¼ ì‘ì„±í•œë‹¤ë©´ í™•ì¥ìë¥¼ tsxë¡œ í•´ì•¼ JSXê°€ ì§€ì›ë©ë‹ˆë‹¤. JSXë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í™•ì¥ìë¥¼ tsë¡œ ì €ì¥í•˜ë©´ ë©ë‹ˆë‹¤. TypeScriptê°€ ì ìš©ëœ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì„ ì–¸ëœ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ì—†ìœ¼ë©´ Errorë¥¼ ë°œìƒì‹œí‚¤ëŠ” ê·œì¹™ì´ ìˆìŠµë‹ˆë‹¤. ì£¼ì˜â—ï¸ .eslintrc.js íŒŒì¼ì„ ì—´ì–´ì„œ ë°‘ì˜ ì½”ë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. module.exports = { root: true, extends: '@react-native-community', rules: { '@typescript-eslint/no-unused-vars': 0, }} ğŸš© TypeScript React Native ì—ì„œ ì‚¬ìš©$ npx react-native init í”„ë¡œì íŠ¸ì´ë¦„ --template react-native-template-typescriptğŸš© TypeScript ê¸°ì´ˆ ë¬¸ë²•1. ê¸°ë³¸ íƒ€ì… ê¸°ë³¸ íƒ€ì…ë“¤ì€ íƒ€ì…ì„ ëª…ì‹œí•´ì£¼ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ íƒ€ì…ì¶”ë¡ ë©ë‹ˆë‹¤. ë³€ìˆ˜ê°€ í•˜ë‚˜ì˜ íƒ€ì…ë§Œ ì§€ë‹ˆê³  ìˆë‹¤ë©´ íƒ€ì… ì„ ì–¸ì„ ìƒëµí•´ë„ ë©ë‹ˆë‹¤. string : ë¬¸ìì—´ number : ìˆ«ì boolean : true / false any : ëª¨ë“  íƒ€ì… undefined : ë³€ìˆ˜ëŠ” ì¡´ì¬í•˜ë‚˜, ì–´ë– í•œ ê°’ìœ¼ë¡œë„ í• ë‹¹ë˜ì§€ ì•Šì•„ ìë£Œí˜•ì´ ì •í•´ì§€ì§€(undefined) ì•Šì€ ìƒíƒœ | : or ì˜ˆì œ ì½”ë“œ ğŸ‘‡ let message: string = 'Hello World';let value: number = 1;// ë¬¸ìì—´ or Null íƒ€ì…let nullableString: string | null = null;nullableString = 'Hi';// undefined or ìˆ«ì íƒ€ì… let undefinedDrNumber: undefined | number;undefinedDrNumber = 'Hi';// ìˆ«ì or ë¬¸ìì—´ or Null íƒ€ì…let numberOrStringOrNull: number | string | null = null;numberOrStringOrNull = 1;numberOrStringOrNull = 'Bye';numberOrStringOrNull = null;let isCompleted: boolean = true;isCompleted = false;// ëª¨ë“  íƒ€ì…ì˜ ê°’ì„ ëŒ€ì…í•  ìˆ˜ ìˆìŒlet anyValue: any = null;anyValue = undefined;anyValue = 1;anyValue = 'hello world';2. í•¨ìˆ˜ íƒ€ì… ì—¬ëŸ¬ ë°˜í™˜ê°’ íƒ€ì…ì„ ì§€ë‹Œ í•¨ìˆ˜ ğŸ‘‡ âœ…ì°¸ê³  : í•¨ìˆ˜ì—ì„œ ë¬´ì—‡ì„ ë°˜í™˜í•˜ëŠëƒì— ë”°ë¼ ë°˜í™˜ê°’ì˜ íƒ€ì…ì´ ê²°ì •ë˜ë„ë¡ í•¨ìˆ˜ ë°˜í™˜ê°’ì„ ë”°ë¡œ ì„¤ì •ì•ˆí•¨ function sum(a: number, b: number) { return a + b;} ëª…ì‹œì ìœ¼ë¡œ í•¨ìˆ˜ ë°˜í™˜ê°’ ì„ ì–¸ ğŸ‘‡ âœ…ì°¸ê³  : í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì´ ì§€ì •í•œ íƒ€ì…ê³¼ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•œë‹¤ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. function sum(a: number, b: number): number { retrun a + b;} 3. ì˜µì„œë…ˆ íŒŒë¼ë¯¸í„° ìƒë½í•´ë„ ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ğŸ‘‡ âœ…ì°¸ê³  : ë°‘ì˜ ì½”ë“œì—ì„œ isDouble ì€ boolean | undefined ë¡œ ì„¤ì •ë©ë‹ˆë‹¤. function process(a: number, b: number, isDouble?: boolean) { const sum = a + b; return isDouble ? sum * 2 : sum;} 4. interface TypeScriptì—ì„œ ê°ì²´ë‚˜ í´ë˜ìŠ¤ë¥¼ ìœ„í•œ Typeì„ ì •í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì„ ì–¸ëœ ê°ì²´ íƒ€ì…ì€ ë³€ìˆ˜ì˜ íƒ€ì…ì´ë‚˜ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆì œğŸ‘‡ interface Profile { id: number; username: string; displayName: string;}function printUsername(profile: Profile) { console.log(profile.username);}const profile: Profile = { id: 1, username: 'narvis2', displayName: 'Youngjun Choi',};printUsername(profile) ë‹¤ë¥¸ interfaceì—ì„œ ì°¸ì¡° ì˜ˆì œğŸ‘‡ interface Profile { id: number; username: string; displayName: string;}interface RelationShip { from: Profile; to: Profile;}const relationship: RelationShip = { from: { id: 1, username: 'narvis2', displayName: 'Youngjun Choi', }, to: { id: 2, username: 'astatrte', displayname: 'Jun' },}; 5. interface ìƒì†í•˜ê¸° ê¸°ì¡´ interface íƒ€ì…ì— í•„ë“œë¥¼ ë” ì¶”ê°€í•  ë•Œ ëŠ” ìƒì†ì„ í†µí•´ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ‘‡ ì˜ˆì œğŸ‘‡ interface Profile { id: number; username: string; displayName: string;}interface Account extends Profile { email: string; password: string;}const account: Account = { id: 1, username: 'narvis2', displayName: 'Youngjun Choi', email: 'narvis2@naver.com', password: '123123',}; 6. ì˜µì…”ë„ ì†ì„± interfaceì—ì„œ ì˜µì…”ë„ ì†ì„±ì„ ë‹¤ë£° ë•ŒëŠ” í•¨ìˆ˜ì˜ ì˜µì…”ë„ íŒŒë¼ë¯¸í„°ì™€ ë¹„ìŠ·í•˜ê²Œ ?ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆì œğŸ‘‡ interface Profile { id: number; username: string; displayname: string; photoURL?: string;}const profile: Profile = { id: 1, usename: 'narvis2', displayName: 'Youngjun Choi',}const profileWithPhoto: Profile = { id: 1, usename: 'narvis2', displayName: 'Youngjun Choi', photoURL: 'photo.png',} 7. í´ë˜ìŠ¤ì—ì„œ interfaceë¥¼ implement í•˜ê¸° interfaceì—ì„œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ë©”ì„œë“œë“¤ì˜ íƒ€ì…ì„ ë¯¸ë¦¬ ì„ ì–¸í•˜ê³ , ì´ì— ë§ì¶° í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•˜ëŠ” ì˜ˆì œ ğŸ‘‡ interface Shape { getArea(): number; getPerimeter(): number;}class Circle implements Shape { // Classì˜ ê¸°ë³¸ ìƒì„±ì constructor(private radius: number) {} getArea() { return Math.PI * Match.pow(this.radius, 2); } getPerimeter() { return 2 * Math.PI * this.radius; }}class Rectangle implements Shape { constructor(private width: number, private height: number) {} getArea() { return this.width + this.height; } getPerimeter() { return 2 * (this.width + this.height); }} âœ…ì°¸ê³  : constructor ë¶€ë¶„ì— private radius: number ëŠ” ë‹¤ìŒ í˜•ì‹ê³¼ ê°™ìŒ ğŸ‘‡ class Circle implements Shape { radius: number; constructor(radius: number) { this.radius = radius; }} 8. ë°°ì—´ íƒ€ì… TypeScriptì—ì„œ ë°°ì—´ íƒ€ì… ì„ ë‹¤ë£° ë•ŒëŠ” íƒ€ì… ë’¤ì— []ë¥¼ ë¶™ì—¬ì¤ë‹ˆë‹¤. ì˜ˆì œğŸ‘‡ const numbers: number[] = [1, 2, 3, 4, 5];const texts: string[] = ['hello', 'world'];// ê°ì²´ë¥¼ ë°°ì—´ë¡œinterface Person { name: string;}const people: Person[] = [{name: 'narvis2'}, {name: 'Choi Young Jun'}]; 9. Type Alias íƒ€ì…ì— ë³„ì¹­ì„ ë¶™ì—¬ì£¼ëŠ” ê¸°ëŠ¥ ì˜ˆì œğŸ‘‡ type Persion = { name: String;};const person: Person = { name: 'Choi Young Jun',};// ê°ì²´ ë°°ì—´ íƒ€ì…type People = Person[];const people: People = [{name: 'Choi Young Jun'}];// Android ë¡œ ì¹˜ë©´ Enum Classtype Color = 'red' | 'orange' | 'yellow';const color: Color = 'red'; typeì„ ì‚¬ìš©í•˜ì—¬ ë§Œë“  ê°ì²´ íƒ€ì…ì—ë„ í•„ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. &amp; ë¬¸ìë¥¼ ì‚¬ìš© ì˜ˆì œğŸ‘‡ type Persion = { name: string;};// Persion ê°ì²´ì— job ì´ë¼ëŠ” í•„ë“œ ì¶”ê°€type Employee = Persion &amp; { job: string;};// Employee ê°ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ì—¬ í•„ë“œì— ê°’ ì¶”ê°€const empolyee: Emplyee = { name: 'narvis2', job: 'Programmer',}; 10. Generic(ì œë„¤ë¦­) í•¨ìˆ˜, ê°ì²´, í´ë˜ìŠ¤ íƒ€ì…ì—ì„œ ì‚¬ì „ì— ì •í•˜ì§€ ì•Šì€ ë‹¤ì–‘í•œ íƒ€ì…ì„ ë‹¤ë£° ë•Œ ì‚¬ìš© í•¨ìˆ˜(function)ì—ì„œ Generic ì‚¬ìš© Genericì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° any íƒ€ì… ì‚¬ìš© ì£¼ì˜â—ï¸ í•´ë‹¹ í˜•ì‹ì„ ì‚¬ìš©í•  ê²½ìš° result ì—ì„œ ì¦‰ í•¨ìˆ˜ í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ type ì¶”ë¡ ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.ì˜ˆì œğŸ‘‡ function wrap(value: any) { return {value};}const result = wrap('Hello World'); Genericì„ ì‚¬ìš©í•˜ì—¬ type ì¶”ë¡ ì´ ê°€ëŠ¥í•˜ê²Œ ì„¤ì • ì˜ˆì œğŸ‘‡ function wrap&lt;T&gt;(value: T) { return {value};}const result = wrap('Hello World'); ê°ì²´(interface)ì—ì„œ Generic ì‚¬ìš© ê°ì²´ íƒ€ì…ì˜ íŠ¹ì •í•œ í•„ë“œì— ë‹¤ì–‘í•œ ê°’ì´ ì˜¬ ìˆ˜ ìˆë‹¤ê³  ê°€ì • ì˜ˆì œğŸ‘‡ interface Item&lt;T&gt; { id: number; data: T;}interface Persion { name: string;}interface Place { location: string;}const personItem: Item&lt;Person&gt; = { id: 1, data: { name: \"narvis2\", },};const placeItem: Item&lt;Place&gt; = { id: 2, data: { location: \"Korea\", },}; Type Aliasì—ì„œ Genericì‚¬ìš© type Item&lt;T&gt; = {id: number; data: T} í´ë˜ìŠ¤(Class)ì—ì„œ Genericì‚¬ìš© Queue í´ë˜ìŠ¤ë¥¼ ì˜ˆì œë¡œ ì‚¬ìš©í•´ ë³´ê² ìŠµë‹ˆë‹¤. (ì„ ì… ì„ ì¶œ) âœ…ì°¸ê³  : Queueì— ëŒ€í•˜ì—¬ ì˜ ëª¨ë¥´ì‹ ë‹¤ë©´ ìë£Œ êµ¬ì¡° Queue, Stack ì •ë¦¬ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•´ ì£¼ì„¸ìš”.ì˜ˆì œğŸ‘‡ class Queue&lt;T&gt; { list: T[] = []; get length() { return this.list.length; } enqueue(item: T) { this.list.push(item); } dequeue() { return this.list.shift(); }}const queue = new Queue&lt;number&gt;();queue.enqueue(0);queue.enqueue(1);const first = queue.dequeue(); // 0const second = queue.dequeue(); // 1 ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” TypeScriptì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.JavaScriptëŠ” ë™ì  íƒ€ì…ì´ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ ë°œìƒì´ Runtimeì— ë°œìƒí•˜ì—¬ TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì  íƒ€ì…ìœ¼ë¡œ ë°”ê¿” ì˜¤ë¥˜ ë°œìƒì„ Compile ì‹œì ìœ¼ë¡œ ë°”ê¿” ì˜¤ë¥˜ í•¸ë“¤ë§ì— ë”ìš± ì´ì ì„ ë³´ê³ ì TypeScriptë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤." }, { "title": "ìë£Œêµ¬ì¡° Hash, HashMap, LinkedHashMap", "url": "/posts/Data-Structure-Hash/", "categories": "DataStructure", "tags": "hash, hashCode, hashTable, hashMap, linkedHashMap", "date": "2022-07-25 13:37:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Hashì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³  ë”ë¶ˆì–´ HashMap, LinkedHashMapì— ëŒ€í•˜ì—¬ ê°„ëµíˆ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.Hash ë‹¨ë°©í–¥ ì•”í˜¸í™” ê¸°ë²•ìœ¼ë¡œ ì‚°ìˆ  ì—°ì‚°ì„ í†µí•˜ì—¬ â€œì…ë ¥ëœ ê°’ì„ ì¶œë ¥ ë°ì´í„°ê°€ ìˆëŠ” ê³³ì„ ì•Œ ìˆ˜ ìˆëŠ” ê°’ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒâ€ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë°ì´í„°ê°€ ì €ì¥ëœ ê°ì²´ë“¤ê³¼ ì¼ì¼ì´ ë™ë“±ì„±ì„ ë¹„êµí•˜ì§€ ì•Šê³ , ì‚°ìˆ  ì—°ì‚°ìœ¼ë¡œ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤. Hash Fuctionì„ í†µí•´ ì…ë ¥ ê°’ì´ ë°ì´í„°ê°€ ìˆëŠ” ê³³ì„ ì•Œ ìˆ˜ ìˆëŠ” ì¶œë ¥ ê°’ìœ¼ë¡œ ì—°ê²°ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ Hash Fuctionì€ ì…ë ¥ê°’ì„ ì¶œë ¥ê°’ìœ¼ë¡œ Mapping í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.HashCode ê°ì²´ë¥¼ ì‹ë³„í•˜ëŠ” í•˜ë‚˜ì˜ ì •ìˆ˜ ê°’ì…ë‹ˆë‹¤. Objectì˜ hashCode() ë©”ì„œë“œëŠ” ê°ì²´ì˜ ë©”ëª¨ë¦¬ ë²ˆì§€ë¥¼ ì´ìš©í•´ì„œ HashCodeë¥¼ ë§Œë“¤ì–´ Returní•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë§ˆë‹¤ ë‹¤ë¥¸ ê°’ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê°ì²´ì˜ ê°’ì„ ë™ìŠ¹ì„± ë¹„êµ ì‹œ hashCode()ë¥¼ Overriding í•  í•„ìš”ì„±ì´ ìˆëŠ”ë° hashCode()ë¥¼ Overrding í•  ë•ŒëŠ” equals()ë„ ë°˜ë“œì‹œ Overring í•´ì•¼í•©ë‹ˆë‹¤. ì‹¤í–‰ ì¤‘ì— ê°ì²´ì˜ ìœ ì¼í•œ integer ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì°¸ê³ â—ï¸ equals ì™€ hashCodeì˜ ê´€ê³„ Java í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ” ë™ì•ˆ equalsì— ì‚¬ìš©ëœ ì •ë³´ê°€ ìˆ˜ì •ë˜ì§€ ì•Šì•˜ë‹¤ë©´ hashCodeëŠ” í•­ìƒ ë™ì¼í•œ ì •ìˆ˜ê°’ì„ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.(Javaì˜ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í• ë•Œ ë§ˆë‹¤ ë‹¬ë¼ì§€ëŠ” ê²ƒì€ ìƒê´€ì´ ì—†ìŠµë‹ˆë‹¤.) ë‘ ê°ì²´ê°€ equals ì— ì˜í•´ ë™ì¼í•˜ë‹¤ë©´, ë‘ ê°ì²´ì˜ hashCode() ê°’ ë˜í•œ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ë‘ ê°ì²´ê°€ equals ì— ì˜í•´ ë™ì¼í•˜ì§€ ì•Šë‹¤ë©´, ë‘ ê°ì²´ì˜ hashCode() ê°’ì€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. HashTable, HashSet, HashMap ê³¼ ê°™ì€ ìë£Œ êµ¬ì¡°ëŠ” â€œìë£Œë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ê¸° ìœ„í•´ HashCodeë¥¼ ì´ìš©â€í•©ë‹ˆë‹¤. ì°¸ê³ â—ï¸ HashTable, HashSet, HashMap ì˜ ê°ì²´ ë™ë“±ì„± ë¹„êµ ë°©ì‹ hashCode() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ì—¬ Return ëœ HashCode ê°’ì´ ê°™ì€ ì§€ë¥¼ ë¹„êµí•©ë‹ˆë‹¤. HashCode ê°’ì´ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ê°ì²´ë¡œ íŒë‹¨í•˜ê³ , HashCode ê°’ì´ ê°™ìœ¼ë©´ equals() ë©”ì†Œë“œë¡œ ë‹¤ì‹œ ë¹„êµí•©ë‹ˆë‹¤. ìœ„ì˜ 2ê°œê°€ ëª¨ë‘ ë§ì•„ì•¼ ë™ë“± ê°ì²´ë¡œ íŒë‹¨í•©ë‹ˆë‹¤. ì¦‰, HashCode ê°’ì´ ë‹¤ë¥¸ Entries ë¼ë¦¬ëŠ” ë™ì¹˜ì„± ë¹„êµë¥¼ ì‹œë„ ì¡°ì°¨ í•˜ì§€ì•ŠìŠµë‹ˆë‹¤. HashTable ì‘ë™ ì›ë¦¬ HashMap, HashSet ê³¼ ë™ì‘ì›ë¦¬ëŠ” ê°™ìŠµë‹ˆë‹¤. HashTable ì€ &lt;Key, Value&gt; í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì´ ë•Œ Hash Fuction ì„ ì´ìš©í•˜ì—¬ Key ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ê³ ìœ í•œ ì‹ë³„ê°’ì¸ Hash ê°’ì„ ë§Œë“¤ê³ (HashCodeê°€ í•´ì‹œ ê°’ì„ ë§Œë“œëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.) ì´ í•´ì‹œ ê°’ì„ ë²„í‚·(Bucket)ì— ì €ì¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ HashTable í¬ê¸°ëŠ” í•œì •ì ì´ê¸° ë•Œë¬¸ì— ê°™ì€ ì„œë¡œ ë‹¤ë¥¸ ê°ì²´ë¼ í•˜ì—¬ë„ ê°™ì€ Hashê°’ì„ ê°–ê²Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì´ê²ƒì„ Hash Collisions ì¦‰, í•´ì‰¬ ì¶©ëŒ ì´ë¼ê³  í•©ë‹ˆë‹¤.) ì´ëŸ° ê²½ìš° í•´ë‹¹ ë²„í‚·(Bucket)ì— LinkedList í˜•íƒœë¡œ ê°ì²´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì°¸ê³ â—ï¸ LinkedList ëŠ” ì•„ì´í…œì˜ ê°¯ìˆ˜ê°€ 8ê°œ ì´ìƒìœ¼ë¡œ ë„˜ì–´ê°€ë©´ TreeMap ìë£Œ êµ¬ì¡°ë¡œ ì €ì¥ë©ë‹ˆë‹¤. ì´ ì²˜ëŸ¼ ê°™ì€ Hash ê°’ì„ ë²„í‚·(Bucket)ì•ˆì— ë‹¤ë¥¸ ê°ì²´ê°€ ìˆëŠ” ê²½ìš° equalsê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. 1ï¸âƒ£ HashTable ì— put ë©”ì„œë“œë¡œ ê°ì²´ë¥¼ ì¶”ê°€í•˜ëŠ” ê²½ìš° ê°’ì´ ê°™ì€ ê°ì²´ê°€ ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´(equals()ê°€ true) ê¸°ì¡´ ê°ì²´ë¥¼ ë®ì–´ì”ë‹ˆë‹¤. ê°’ì´ ê°™ì€ ê°ì²´ê°€ ì—†ë‹¤ë©´(equals()ê°€ false) í•´ë‹¹ entryë¥¼ LinkedListì— ì¶”ê°€í•©ë‹ˆë‹¤. 2ï¸âƒ£ HashTable ì— get ë©”ì„œë“œë¡œ ê°ì²´ë¥¼ ì¡°íšŒí•˜ëŠ” ê²½ìš° ê°’ì´ ê°™ì€ ê°ì²´ê°€ ìˆë‹¤ë©´(equals()ê°€ true) ê·¸ ê°ì²´ë¥¼ return í•©ë‹ˆë‹¤. ê°’ì´ ê°™ì€ ê°ì²´ê°€ ì—†ë‹¤ë©´(equals()ê°€ false) nullì„ return í•©ë‹ˆë‹¤. HashMap Hash ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ëœ Map ì…ë‹ˆë‹¤. ì¦‰, Hash ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ëŠ” ìë£Œ êµ¬ì¡°ì…ë‹ˆë‹¤. ìë£Œë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ê¸° ìœ„í•´ HashCodeë¥¼ ì´ìš©í•©ë‹ˆë‹¤. ë°ì´í„°ê°€ ì¶”ê°€ë˜ëŠ” ìˆœì„œë¥¼ ìœ ì§€í•˜ì§€ ì•Šìœ¼ë‚˜ Hashing ê¸°ë²•ì˜ íŠ¹ì§•ì¸ ë¹ ë¥¸ ì ‘ê·¼ ì†ë„ê°€ ì¥ì ì…ë‹ˆë‹¤. ë°ì´í„°ì— ì ‘ê·¼í•˜ê±°ë‚˜ ê°ìƒ‰í•  ë•Œ ë°ì´í„°ë¥¼ ìˆœíšŒ(ë°˜ë³µ)í•˜ë©´ì„œ ì¼ì¼ì´ ë¹Œêµí•˜ëŠ” ì¼ë°˜ì ì¸ ìë£Œ êµ¬ì¡°ì™€ ë‹¤ë¥´ê²Œ key ê°’ì„ í†µí•´ í•œ ë²ˆì˜ ì‚°ìˆ ì—°ì‚°ìœ¼ë¡œ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•„ì£¼ ë¹ ë¥¸ ì ‘ê·¼ ì†ë„ì™€ ê²€ìƒ‰ ì†ë„ê°€ íŠ¹ì§•ì…ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì…ë ¥ ìˆœì„œëŒ€ë¡œ ì €ì¥í•˜ê±°ë‚˜ ì •ë ¬í•˜ì—¬ ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì°¸ê³ â—ï¸ ë°ì´í„°ë¥¼ ìˆœì„œëŒ€ë¡œ ì €ì¥í•˜ê³  ì‹¶ìœ¼ë©´ LinkedHashMapì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë°°ì—´ì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ì˜ ì´ ê°œìˆ˜ë¥¼ ë¯¸ë¦¬ ì–¼ì¶” ì•Œê³ ìˆë‹¤ë©´ ì´ˆê¸° ìš©ëŸ‰ì„ ì •í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.LinkedHashMap Hash ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ëŠ” ìë£Œ êµ¬ì¡°ì…ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì¶”ê°€í•œ ìˆœì„œëŒ€ë¡œ ë³´ê´€í•©ë‹ˆë‹¤.(ë°ì´í„°ë¥¼ ìˆœì„œëŒ€ë¡œ ì €ì¥) ë”°ë¼ì„œ LinkedHashMap ì„ ë°˜ë³µë¬¸ ëŒë ¤ì„œ ìˆœíšŒí•˜ë©´ ìˆœì„œëŒ€ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë°ì´í„°ì˜ ì´ ê°œìˆ˜ë¥¼ ë¯¸ë¦¬ ì•Œê³  ìˆë‹¤ë©´ ì´ˆê¸° ìš©ëŸ‰ì„ ì •í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤." }, { "title": "Android Context", "url": "/posts/Android-Context/", "categories": "Android, Context", "tags": "android, context, applicationContext, activityContext", "date": "2022-07-22 13:29:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì˜¤ëŠ˜ì€ Androidì˜ Contextì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ContextëŠ” Application í™˜ê²½ì— ëŒ€í•œ ê¸€ë¡œë²Œ ì •ë³´ë¥¼ ê°–ëŠ” ì¸í„°í˜ì´ìŠ¤ ì…ë‹ˆë‹¤.Androidì—ì„œëŠ” ëŒ€í‘œì ìœ¼ë¡œ Applicationì˜ Contextì™€, Activityì˜ Contextê°€ ì¡´ì¬í•©ë‹ˆë‹¤.ë°‘ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Context Application í™˜ê²½ì— ëŒ€í•œ ê¸€ë¡œë²Œ ì •ë³´ë¥¼ ê°–ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. Android Systemì—ì„œ êµ¬í˜„ì²´ë¥¼ ì œê³µí•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. Application ë³„ Resource ë° í´ë˜ìŠ¤ ì ‘ê·¼ì— ì‚¬ìš©ë˜ë©°, Activity ì‹¤í–‰, BroadcastReceiver, Intent ìˆ˜ì‹ ê³¼ ê°™ì€ Application ìˆ˜ì¤€ ì‘ì—…ì— ì‚¬ìš©ë©ë‹ˆë‹¤. Applicationì˜ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‡ ContextëŠ” Applicationì˜ í˜„ì¬ ìƒíƒœì˜ ë§¥ë½(Context)ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ContextëŠ” ìƒˆë¡œ ìƒê¸´ ê°ì²´ê°€ ì§€ê¸ˆ ì–´ë–¤ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Activityì™€ Applicationì— ëŒ€í•œ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ì„œëŠ” Contextë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. Activity Applicationì˜ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Activity ì™€ Applicationì€ Context í´ë˜ìŠ¤ë¥¼ í™•ì¥í•œ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ Contextë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°Resource, Database, SharedPreference ë“±ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤. Application Context Singleton ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤. Activityì—ì„œ getApplicationContext()ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Applicationì˜ Lifecycleì— ë¬¶ì—¬ ìˆìŠµë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ í˜„ì¬ Contextê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ Contextê°€ í•„ìš”í•œ ì‘ì—…ì´ë‚˜ Activity Scopeë¥¼ ë²—ì–´ë‚œ Contextê°€ í•„ìš”í•œ ì‘ì—…ì— ì í•©í•©ë‹ˆë‹¤. Singleton Objectë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ Objectê°€ Contextê°€ í•„ìš”í•˜ë©´ ApplicationContextë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì£¼ì˜â—ï¸ Singletonì— Activityì˜ Contextë¥¼ ì „ë‹¬í•  ê²½ìš°, í•´ë‹¹ Objectê°€ Activityë¥¼ í•­ìƒ ì°¸ì¡°í•˜ë¯€ë¡œ Activityê°€ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠëŠ” ìˆœê°„ì—ë„ Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜)ì´ ì§„í–‰ë˜ì§€ ì•Šì•„ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Application ì „ì²´ì—ì„œ ì‚¬ìš©í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ íŠ¹ì • Activityì— ì´ˆê¸°í™” í•œë‹¤ë©´ ApplicationContextë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‡ Room, SharedPreference, Sinlgetonì„ ì‚¬ìš©í•  ë•ŒëŠ” ApplicationContextë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ContentProvide ì˜ getContext() ëŠ” Application Contextì…ë‹ˆë‹¤. Activity Context Activity ë‚´ì—ì„œ ìœ ìš”í•œ Contextì…ë‹ˆë‹¤. Activityì˜ Lifecycleê³¼ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. Activityì™€ í•¨ê»˜ ì†Œë©¸í•´ì•¼í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, Activityì™€ Lifecycleì´ ê°™ì€ Objectë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‡ Toast, Dialog ë“±ì˜ UI Optionì—ì„œ Contextê°€ í•„ìš”í•œ ê²½ìš° Activityì˜ Contextë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. resources ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Activityì˜ Contextë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. " }, { "title": "Android Glideë¥¼ ì´ìš©í•œ Image Load", "url": "/posts/Android-Glide/", "categories": "Android, Glide", "tags": "android, glide", "date": "2022-07-22 10:19:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Glideì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.GlideëŠ” Androidì—ì„œ ì´ë¯¸ì§€ë¥¼ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.ì´ë¯¸ì§€, Gif, ë¹„ë””ì˜¤ ìŠ¤í‹¸ì˜ ë¡œë”©ê³¼ ë””ì½”ë”©, ìºì‹± ë“±ì˜ ë‹¤ì–‘í•œ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.GlideëŠ” ì–´ë– í•œ ì¢…ë¥˜ì˜ ì´ë¯¸ì§€ì´ë”ë¼ë„ ë¹ ë¥´ê³  ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤ í•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.Glide GithubGlide Cache GlideëŠ” ê¸°ì¡´ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ &amp; ë””ìŠ¤í¬ì— ì´ë¯¸ì§€ë¥¼ Caching í•˜ì—¬ ë‹¤ìŒë²ˆì— í˜¸ì¶œí•˜ì˜€ì„ ë•Œ ë¹ ë¥¸ Image Loadingì„ ì§€ì›í•©ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ìºì‹œ GlideëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ ìºì‹±ì„ í•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ìºì‹±ì„ ìœ„í•´ ì¶”ê°€ì ìœ¼ë¡œ í•  ì¼ì€ ì—†ìŠµë‹ˆë‹¤. ì£¼ì˜â—ï¸ ë‹¨, Url ì´ë¯¸ì§€ ë¡œë”© ì‹œ í•œë²ˆ Loadí•œ ì´ë¯¸ì§€ëŠ” Cacheì— ì €ì¥ë˜ì–´ ì„œë²„ì—ì„œ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•´ë„ Appì˜ ì´ë¯¸ì§€ëŠ” ê°±ìƒë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš° .skipMemoryCache(true) ë¡œ ë©”ëª¨ë¦¬ ìºì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë””ìŠ¤í¬ ìºì‹œ GlideëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë””ìŠ¤í¬ ìºì‹±ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ê°œë…ì€ ë©”ëª¨ë¦¬ ìºì‹œì™€ ê°™ìŠµë‹ˆë‹¤. .diskCacheStrategy()ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹±ì— ê´€í•œ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. DiskCacheStrategy.ALL : ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ìºì‹±í•©ë‹ˆë‹¤. DiskCacheStrategy.AUTOMATIC : default ê°’ì´ë©°, RESOURCE ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì „ëµì ì¸ ìºì‹±ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. DiskCacheStrategy.DATA : ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ìºì‹±í•©ë‹ˆë‹¤. DiskCacheStrategy.RESOURCE : í•´ìƒë„ë¥¼ ì¤„ì¸ ì´ë¯¸ì§€ë§Œ ìºì‹±í•©ë‹ˆë‹¤. DiskCacheStrategy.NONE : ë””ìŠ¤í¬ ìºì‹±ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Glide ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸° ì ˆì°¨ (ì—¬ëŸ¬ ìºì‹œë¥¼ í™•ì¸) Active Resources : í˜„ì¬ ì´ ì´ë¯¸ì§€ê°€ ë‹¤ë¥¸ Viewì— ë‚˜íƒ€ë‚˜ëŠ”ê°€? ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. Memory Cache : ì´ ì´ë¯¸ì§€ê°€ ìµœê·¼ì— ë©”ëª¨ë¦¬ì— load ë˜ì—ˆê±°ë‚˜ ì—¬ì „íˆ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ìˆëŠ”ê°€? ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. Resource : ì´ ì´ë¯¸ì§€ê°€ ì˜ˆì „ì— decode ë˜ì—ˆê±°ë‚˜, ë³€í˜• ë˜ì—ˆê±°ë‚˜, ë””ìŠ¤í¬ ìºì‹œì— ê¸°ë¡ë˜ì–´ ìˆëŠ”ê°€? ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. Data : ì´ ì´ë¯¸ì§€ê°€ ì´ì „ì— ë””ìŠ¤í¬ ìºì‹œì— ê¸°ë¡ ë˜ì—ˆë˜ ë°ì´í„° ì˜€ëŠ”ê°€? ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.Glide Image Loading GlideëŠ” ë¹Œë” íŒ¨í„´ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆê³ , 3ê°œì˜ í•„ìˆ˜ íŒŒíƒ€ë¯¸ëŸ¬ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤. GlideëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ë™ê¸°ë¡œ ì´ë¯¸ì§€ë¥¼ load í•©ë‹ˆë‹¤. ì°¸ê³  : í•„ìˆ˜ íŒŒë¼ë¯¸í„° with() : contextë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. load() : ëŒ€ìƒ ì´ë¯¸ì§€ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.(URL, Resource Id, File Url â€¦) into() : ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤„ ImageViewë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. âœ”ï¸ ì´ë¯¸ì§€ ë³€í˜• ì°¸ê³  : ì´ë¯¸ì§€ ë³€í˜• í•¨ìˆ˜ centerCrop() : ì´ë¯¸ì§€ê°€ ImaveViewë³´ë‹¤ í´ ë•Œ, ImageViewì˜ í¬ê¸°ì— ë§ì¶° ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì¡°ì • í›„ ìë¦…ë‹ˆë‹¤. ImageViewê°€ ì™„ì „íˆ ì±„ì›Œì§€ì§€ë§Œ, ì „ì²´ ì´ë¯¸ì§€ê°€ í‘œì‹œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. fitCenter() : ì´ë¯¸ì§€ê°€ ImageViewì˜ ì‚¬ì´ì¦ˆì™€ ë‹¤ë¥¼ ë•Œ, ImageView í¬ê¸°ì™€ ê°™ê±°ë‚˜ ì‘ë„ë¡ ì´ë¯¸ì§€ì˜ í¬ê¸°ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤. ì´ë¯¸ì§€ê°€ ì™„ì „íˆ í‘œì‹œë˜ì§€ë§Œ, ì „ì²´ ImageView í¬ê¸°ë¥¼ ì±„ìš°ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. circleCrop() : ì´ë¯¸ì§€ê°€ ì›ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.(CenterCrop()ê³¼ ë™ì¼í•œ ë°©ì‹ì…ë‹ˆë‹¤.) âœ”ï¸ Option : ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆëŠ” ìœ í˜• ë…ë¦½ì  ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤. ğŸš© RequestOption() ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  apply()ë¥¼ í™œìš©í•˜ì—¬ ì›í•˜ëŠ” Optionì„ ë„£ìŠµë‹ˆë‹¤. placeHolder(@DrawableRes int resourceId) : ìš”ì²­ë°›ì€ ì´ë¯¸ì§€ê°€ ë‚˜íƒ€ë‚˜ê¸° ì „ê¹Œì§€ ì§€ì •í•œ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ë¡œ ì´ë¯¸ì§€ë¥¼ ìš”ì²­í•˜ê±°ë‚˜ í° ì´ë¯¸ì§€ë¥¼ ìš”ì²­í•˜ì—¬ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ë•Œ PlaceHolder ë¡œ ì§€ì •í•œ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. error(@DrawableRes int resourceId) : ì´ë¯¸ì§€ ë¡œë“œì— ì‹¤íŒ¨í•œ ê²½ìš° Error ì— ì§€ì •ëœ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. fallback(@Nullable Drawable drawable) : ìš”ì²­ëœ URL or ëª¨ë¸ì´ null ì¸ ê²½ìš° fallbackìœ¼ë¡œ ì§€ì •í•œ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. Glide.into(context).load(\"Image Url ë„£ê¸°\").apply( RequestOption().placeHoler(ì´ë¯¸ì§€ ë¡œë”© ì¤‘ í‘œì‹œë  ì´ë¯¸ì§€ ë„£ê¸°).error(ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ í‘œì‹œë  ì´ë¯¸ì§€ ë„£ê¸°)).into(imageView) âœ”ï¸ Target Glideì—ì„œ Target ì„ ì‚¬ìš©í•˜ë©´ bitmap, drawable, placeHolder ë¥¼ ë°›ì•„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì˜ˆì œ ì½”ë“œ ì…ë‹ˆë‹¤. í•´ë‹¹ ì˜ˆì œ ì½”ë“œëŠ” ì•”ì‹œì  ì¸í…íŠ¸ ì‚¬ìš©í•˜ì—¬ í•¸ë“œí°ì˜ ê°¤ëŸ¬ë¦¬ì— ì ‘ê·¼í•´ ë°›ì•„ì˜¨ Uriì„ ë¹„íŠ¸ë§µìœ¼ë¡œ ë°”ê¾¸ëŠ” ë¡œì§ì…ë‹ˆë‹¤. ğŸ‘‡ private val startIntentGallery: ActivityResultLauncher&lt;Intent&gt; = registerForActivityResult( ActivityResultContracts.StartActivityForResult()) { result: ActivityResult -&gt; result.data?.extras?.clear() if (result.data?.data != null &amp;&amp; result.resultCode == AppCompatActivity.RESULT_OK) { val context = binding.imageView.context // ContentProviderë¥¼ í†µí•´ Image Urië¥¼ bitmapìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. val bitmap = MediaStore.Images.Media.getBitmap( context.contentResolver, result.data?.data!! ) Glide.with(context) .asBitmap() .load(bitmap) override(1024, 1024) .into(object : CustomTarget&lt;Bitmap&gt;() { override fun onResourceReady( resource: Bitmap, transition: Transition&lt;in Bitmap&gt;? ) { // TODO : ImageViewì— ì´ë¯¸ì§€ ë„£ê¸° } override fun onLoadCleared(placeholder: Drawable?) {} }) }} Glide Blur ì²˜ë¦¬ Blurë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ íë¦¬ê²Œ ë§Œë“­ë‹ˆë‹¤. gradle íŒŒì¼ì— ë‹¤ìŒ dependency ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.ğŸ‘‡ implementation \"jp.wasabeef:glide-transformations::4.3.0\" ì°¸ê³  : ë‹¤ìŒì€ Glide Blur ì²˜ë¦¬ ì˜ˆì œ ì½”ë“œì…ë‹ˆë‹¤. ğŸ‘‡BlurTransformation ì˜ ì²« ë²ˆì§¸ ì¸ìëŠ” radius ì…ë‹ˆë‹¤. í•´ë‹¹ radius ê°’ì— ë”°ë¼ íë¦¼ì˜ ì •ë„ê°€ ì„¤ì •ë©ë‹ˆë‹¤.ì£¼ì˜â—ï¸ : BlurTransformationì„ ì‚¬ìš©í• ë•Œ centerCrop()ì„ ë¨¼ì € ì‚¬ìš©í•˜ê³  BlurTransformationì„ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. fun blurImageLoader( context: Context, imageView: ImageView, url: String) { Glide.with(context) .setDefaultRequestOptions( RequestOptions() .diskCacheStrategy(DiskCacheStrategy.RESOURCE) // í•´ìƒë„ë¥¼ ì¤„ì¸ ì´ë¯¸ì§€ë§Œ ìºì‹± .centerCrop() .transform(BlurTransformation(10, 3)) // Blur ì ìš© ) .load(url) .into(imageView)} Glide error, placeHolder ì²˜ë¦¬ ì˜ˆì œ ë‹¤ìŒì€ Glideë¥¼ ì´ìš©í•˜ì—¬ Imageë¥¼ Loadí• ë•Œ error, placeHolderë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ fun loadImage( view: ImageView, imageUrl: String, @DrawableRes placeholder: Int = 0, @DrawableRes error: Int = 0,) { // imageUrl ì´ ë¹„ì–´ìˆì„ ë•Œ ë¡œì§ ì¶”ê°€ if (imageUrl.isEmpty()) { if (placeholder != 0) { view.setImageResource(placeholder) } return } val options = RequestOptions() @SuppressLint(\"CheckResult\") if (error != 0) { // ë¡œë“œê°€ ì‹¤íŒ¨í•  ê²½ìš° í‘œì‹œí•  ë¦¬ì†ŒìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. options.error(error) } Glide.with(view.context) .setDefaultRequestOptions(options) .load(imageUrl).apply { @SuppressLint(\"CheckResult\") if (placeholder != 0) { // ë¦¬ì†ŒìŠ¤ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆ í‘œì‹œí•  ë“œë¡œì–´ë¸” ë¦¬ì†ŒìŠ¤ì˜ Android ë¦¬ì†ŒìŠ¤ IDë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. apply(options.placeholder(placeholder)) } } .into(object : CustomTarget&lt;Drawable&gt;() { override fun onResourceReady(resource: Drawable, transition: Transition&lt;in Drawable&gt;?) { view.setImageDrawable(resource) } override fun onLoadCleared(placeholder: Drawable?) { view.setImageDrawable(placeholder) } })} ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Glideì˜ ê¸°ë³¸ ê°œë…ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.GlideëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹„ë™ê¸°ë¡œ loadí•˜ë©°, ê¸°ë³¸ì ìœ¼ë¡œ ìºì‹±ì„ ì§€ì›í•˜ì—¬ ë³´ë‹¤ ë¹ ë¥´ê²Œ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê¸°ì–µí•´ì£¼ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤." }, { "title": "Android Paging3 ì— ëŒ€í•˜ì—¬", "url": "/posts/Android-Paging3/", "categories": "Android, Paging3", "tags": "android, paging3", "date": "2022-07-21 17:06:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Paging3 ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.í˜ì´ì§•ì´ë€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•„ìš”í•œ ë§Œí¼ â€œâ€œì¼ë¶€ë¶„ì„ ë‚˜ëˆ ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒ\"â€ì„ ë§í•©ë‹ˆë‹¤.APIì— ë”°ë¼ limit(í•œ ë²ˆì— ë³´ì—¬ì¤„ ë°ì´í„°ì˜ ê°œìˆ˜ ì œí•œ), offset(ë°ì´í„°ì˜ ì¸ë±ìŠ¤)ë“±ìœ¼ë¡œ í˜ì´ì§•ì´ ì²˜ë¦¬ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” Naver Open API ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª… ë“œë¦¬ê² ìŠµë‹ˆë‹¤.í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ì „ì²´ ì½”ë“œì…ë‹ˆë‹¤. ğŸ‘‰ğŸ¿ ì˜í™”ê²€ìƒ‰ì•±Paging 3 ì‚¬ìš© ì´ìœ  í˜ì´ì§• ëœ ë°ì´í„°ì˜ ë©”ëª¨ë¦¬ ìºì‹±ìœ¼ë¡œ ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì²­ ì¤‘ë³µ ì œê±° ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. RecyclerView ë¥¼ ìŠ¤í¬ë¡¤ í•  ë•Œ ë°‘ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì‹œ nextKeyì— ë”°ë¼ ìë™ìœ¼ë¡œ dataë¥¼ load í•©ë‹ˆë‹¤. Refresh(ìƒˆë¡œê³ ì¹¨), Retry(ì¬ì‹œë„), ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.Paging3 ì˜ êµ¬ì¡° í˜ì´ì§• ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì•ˆë“œë¡œì´ë“œ ê¶Œì¥ ì•„í‚¤í…ì³ì— ë§ê²Œ ì„¤ê³„ ë˜ì–´ìˆìœ¼ë©°, ì´ 3ê°œì˜ Layerë¡œ êµ¬ì„± ë©ë‹ˆë‹¤. ìœ„ì˜ ê·¸ë¦¼ì„ ì°¸ê³ í•˜ì—¬ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. 1. Repository Layer PagingSource : ê° í˜ì´ì§€ì—ì„œ ë°ì´í„°ë¥¼ ì–»ëŠ” ë°©ë²•ì„ ì •ì˜í•©ë‹ˆë‹¤. (Local DBì—ì„œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ì„œë²„ì—ì„œ ë°›ì•„ì˜¤ë„ë¡ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.) ì¦‰, ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì„ ì •ì˜í•©ë‹ˆë‹¤. RemoteMediaor : ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ìš©í•´ ë„¤íŠ¸ì›Œí¬ ë°ì´í„°ë¥¼ ìºì‹±í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.2. ViewModel Layer PagingConfigë¥¼ ë°”íƒ•ìœ¼ë¡œ PagingSourceì—ì„œ ë°ì´í„°ë¥¼ ì–»ì–´ PagingDataë¥¼ ë§Œë“¤ê³  Flowí˜•ìœ¼ë¡œ UIì— ë„˜ê²¨ì¤ë‹ˆë‹¤. Pager : PagingSourceë¥¼ ë¦¬í„´íƒ€ì…ìœ¼ë¡œ í•˜ëŠ” ëŒë‹¤ì™€ PagingConfigë¥¼ ìƒì„±ìë¡œ ë°›ìœ¼ë©° PagingData ë¥¼ ë°˜ì‘í˜• ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì°¸ê³  PagingConfig í˜ì´ì§• êµ¬ì„± í´ë˜ìŠ¤ë¡œ PagingSourceë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•©ë‹ˆë‹¤. pageSize íŒŒë¼ë¯¸í„°ë¡œ ê° í˜ì´ì§€ì— ì–¼ë§ˆë‚˜ ë§ì€ ë°ì´í„°ê°€ ìˆì–´ì•¼ í•˜ëŠ”ì§€ ì •ì˜í•©ë‹ˆë‹¤. ì¦‰ ê° í˜ì´ì§€ì— ë³´ì—¬ì¤„ ë°ì´í„°ì˜ ê°¯ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. PagingData : í˜ì´ì§•ëœ ë°ì´í„°ë¥¼ ë‹´ì•„ë‘ëŠ” ì»¨í…Œì´ë„ˆ ì…ë‹ˆë‹¤. Paging Sourceì—ì„œ loadí•œ ê²°ê³¼ë¥¼ ì €ì¥í•˜ë©° UI Layerì˜ PagingDataAdapterë¡œ ë„˜ê²¨ ì¤ë‹ˆë‹¤. (ViewModel Layerë¥¼ UI Layerì— ì—°ê²°í•˜ëŠ” êµ¬ì„±ìš”ì†Œ ì…ë‹ˆë‹¤.)í˜ì´ì§€ë¡œ ë‚˜ëˆˆ ë°ì´í„°ì˜ SnapShotì„ ë³´ìœ í•˜ëŠ” ì»¨í…Œì´ë„ˆ ì…ë‹ˆë‹¤.3. UI Layer PagingDataAdapter PagingData ë¥¼ ì…ë ¥ ìœ í˜•ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ë‚´ë¶€ ë¡œë“œ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤. RecyclerViwe ì˜ Adapter ì™€ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤. BackGround Threadì—ì„œ DiffUtil ì„ ì‚¬ìš©í•˜ì—¬ ë¯¸ì„¸ ì¡°ì •í•œ í›„ ë°ì´í„°ë¥¼ load í•˜ë¯€ë¡œ UI Threadì— ìƒˆ í•­ëª©ì„ ì¶”ê°€í•˜ëŠ” ë™ì•ˆ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ê¸° ê¹ƒí—ˆë¸Œ í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” Naver Open API ë¥¼ ì´ìš©í•˜ì˜€ìœ¼ë©° Clean Archtecture MVVM êµ¬ì¡° ì…ë‹ˆë‹¤. 1. PagingSource ì •ì˜ suspend fun load(params: LoadParams) : ê° í˜ì´ì§€ì—ì„œ ë°ì´í„°ë¥¼ load í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•©ë‹ˆë‹¤. nextKey : ìŠ¤í¬ë¡¤ì„ ë°‘ìœ¼ë¡œ ë‚´ë ¸ì„ ë•Œ ë” ë§ì€ ë°ì´í„°ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆëŠ” ê²½ìš° ë‹¤ìŒ í˜ì´ì§€ì— ëŒ€í•œ Key ì…ë‹ˆë‹¤. ì´ keyë¥¼ ê¸°ì ìœ¼ë¡œ ë‹¤ìŒ Pageì˜ ë°ì´í„°ë¥¼ Loadí•©ë‹ˆë‹¤. ë‹¤ìŒ Pageê°€ ì—†ì„ ê²½ìš° Null ì…ë‹ˆë‹¤. prevKey : ìŠ¤í¬ë¡¤ì„ ìœ„ë¡œ ì˜¬ë ¸ì„ ë•Œ ë” ë§ì€ ë°ì´í„°ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆëŠ” ê²½ìš° ì´ì „ í˜ì´ì§€ì— ëŒ€í•œ Keyì…ë‹ˆë‹¤. ì´ keyë¥¼ ê¸°ì ìœ¼ë¡œ ì´ì „ Pageì˜ ë°ì´í„°ë¥¼ Load í•©ë‹ˆë‹¤. ì´ì „ Pageì— loadí•  ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° Null ì…ë‹ˆë‹¤. params.key ëŠ” í˜„ì¬ í˜ì´ì§€ì˜ Keyë¡œ Naver API ì˜ ê²½ìš° ì²˜ìŒ Index ê°€ 1ì´ê¸° ë•Œë¬¸ì— null ì¼ ê²½ìš° 1ì„ ë°˜í™˜í•©ë‹ˆë‹¤.(params.keyëŠ” ì²˜ìŒ loadí•  ê²½ìš° nullì…ë‹ˆë‹¤.) getRefreshKey(state: PagingState&lt;Int, MovieInfoModel&gt;) í•¨ìˆ˜ëŠ” Adapter Refreshë¥¼ í•  ê²½ìš° í•´ë‹¹ ë©”ì„œë“œê°€ í˜¸ì¶›ë˜ëŠ”ë° ì—¬ê¸°ì„œëŠ” Refresh í•  ê²½ìš° ì²˜ìŒ ë¶€í„° ì „ë¶€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ Nullì„ ë°˜í™˜í•©ë‹ˆë‹¤. class MovieInfoListPagingDataSource @Inject constructor( private val remoteDataSource: RemoteDataSource, private val searchQuery: StateFlow&lt;String&gt;, private val limit: Int) : PagingSource&lt;Int, MovieInfoModel&gt;() { override suspend fun load(params: LoadParams&lt;Int&gt;): LoadResult&lt;Int, MovieInfoModel&gt; { val pageNumber = params.key ?: 1 try { val response = withContext(Dispatchers.IO) { remoteDataSource.requestSearchMovie( query = searchQuery.value, start = pageNumber, display = limit ) } if (response.isSuccessful) { response.body()?.let { val movieList = it.items.toMovieInfoListModel() /** * nextKey -&gt; naver Apiì˜ start ëŠ” index ì´ê³ , í˜„ì¬ display(limit) ê°€ 10 ì´ë¯€ë¡œ * 10 ì´í›„ì— start ê°’ì€ 11 ì´ ë˜ì–´ì•¼í•¨ * ìŠ¤í¬ë¡¤ë˜ì–´ í˜ì´ì§€ê°€ ì¶”ê°€ë ë•Œ ë§ˆë‹¤ 10ê°œì”© ê°€ì ¸ì˜¨ë‹¤. */ return LoadResult.Page( data = movieList, prevKey = null, nextKey = if (it.items.size &gt;= limit) { pageNumber + limit } else { null } ) } } return LoadResult.Error( LoadException(\"ì˜í™” ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.\") ) } catch (e: Exception) { Timber.e(\"paging catch Error -&gt; ${e.message}\") return LoadResult.Error(e) } } override fun getRefreshKey(state: PagingState&lt;Int, MovieInfoModel&gt;): Int? { // ìƒˆë¡œê³ ì¹¨ ë ë•Œ í•­ìƒ ì „ë¶€ ìƒˆë¡œê³ ì¹¨ ë˜ë„ë¡ null ì„ return return null }} 2. RepositoryImpl (ë ˆíŒŒì§€í† ë¦¬ êµ¬í˜„) Flow&lt;PagingData&gt; ê°ì²´ë¥¼ Return í•©ë‹ˆë‹¤. pageSize ëŠ” í•œ í˜ì´ì§€ë‹¹ ëª‡ ê°œì˜ Dataë¥¼ ë³´ì—¬ì¤„ì§€ ì„¤ì •í•©ë‹ˆë‹¤. class NaverRepositoryImpl @Inject constructor( private val remoteDataSource: RemoteDataSource) : NaverRepository { override fun getMovieList(query: StateFlow&lt;String&gt;): Flow&lt;PagingData&lt;MovieInfoModel&gt;&gt; { return Pager( config = PagingConfig(pageSize = 10), pagingSourceFactory = { MovieInfoListPagingDataSource( remoteDataSource = remoteDataSource, searchQuery = query, limit = 10 ) } ).flow.distinctUntilChanged().flowOn(Dispatchers.IO) }} 3. UseCaseì—ì„œ ë°›ê¸° í•´ë‹¹ UseCaseì—ì„œ NaverRepositoryë¥¼ ë°›ì•„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ì²˜ë¦¬ëœ UseCaseëŠ” ViewModel ì—ì„œ Hiltë¥¼ í†µí•´ ìƒì„±ìì— ì£¼ì…ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤. class GetMovieListPagingDataUseCase @Inject constructor( private val naverRepository: NaverRepository) { operator fun invoke( query: StateFlow&lt;String&gt; ): Flow&lt;PagingData&lt;MovieInfoModel&gt;&gt; { return naverRepository.getMovieList(query) }} 4. ViewModel ì—ì„œ ì‚¬ìš© ViewModel ì—ì„œ GetMovieListPagingDataUseCaseë¥¼ Hiltë¥¼ í†µí•´ ìƒì„±ìì—ì„œ ë°›ì•„ ì²˜ë¦¬í•©ë‹ˆë‹¤. í•´ë‹¹ LoadingType ì€ PagingData ì˜ loadStateì— ë”°ë¼ DataBindingì„ í†µí•´ UIë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤. cachedIn(viewModelScope)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹±ì— ì‚¬ìš©ë  Coroutine Scopeë¥¼ ì§€ì •í•©ë‹ˆë‹¤. @HiltViewModelclass HomeViewModel @Inject constructor( private val getMovieListPagingDataUseCase: GetMovieListPagingDataUseCase) : BaseViewModel() { val loadingType = MutableStateFlow(MovieLoadingType.LOADING) val getMovieList: Flow&lt;PagingData&lt;MovieInfoModel&gt;&gt; = getMovieListPagingDataUseCase(searchQuery).cachedIn(viewModelScope) enum class MovieLoadingType { LOADING, EMPTY, ERROR, VIEW }} PagingAdapter êµ¬í˜„ RecyclerView ì˜ Adapter ì— ì‚¬ìš©ë  PagingAdapterë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. DiffUtilì„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©°, í´ë¦­ ë¦¬ìŠ¤ë„ˆë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ DataBindingìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. DiffUtil ì€ areItemsTheSame()ì´ tureë¥¼ ë°˜í™˜í•˜ë©´, areContentsTheSame()ë¥¼ í˜¸ì¶œí•˜ê³  areContentsTheSame()ë˜í•œ trueë¥¼ ë°˜í™˜í•˜ë©´ ê°™ì€ ê°ì²´ë¼ê³  íŒë‹¨í•©ë‹ˆë‹¤. class MovieInfoAdapter : PagingDataAdapter&lt;MovieInfoModel, MovieInfoAdapter.MovieInfoViewHolder&gt;( diffUtil) { interface OnItemClickListener { fun onClick(item: MovieInfoModel, position: Int) } interface MovieRankingPresenter { fun onRootClick(view: View?) } private var listener: OnItemClickListener? = null fun setOnItemClickListener(listener: OnItemClickListener) { this.listener = listener } override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MovieInfoViewHolder { val binding: MovieInfoItemBinding = DataBindingUtil.inflate( LayoutInflater.from(parent.context), R.layout.movie_info_item, parent, false ) return MovieInfoViewHolder(binding) } override fun onBindViewHolder(holder: MovieInfoViewHolder, position: Int) { getItem(position)?.let { holder.bind(it, listener) } } inner class MovieInfoViewHolder( private val binding: MovieInfoItemBinding ) : RecyclerView.ViewHolder(binding.root), MovieRankingPresenter { private var listener: OnItemClickListener? = null fun bind(info: MovieInfoModel, listener: OnItemClickListener?) { binding.info = info binding.presenter = this this.listener = listener binding.executePendingBindings() } override fun onRootClick(view: View?) { binding.info?.let { listener?.onClick(it, bindingAdapterPosition) } } } companion object { private val diffUtil = object : DiffUtil.ItemCallback&lt;MovieInfoModel&gt;() { override fun areItemsTheSame( oldItem: MovieInfoModel, newItem: MovieInfoModel ): Boolean { return oldItem.title == newItem.title } override fun areContentsTheSame( oldItem: MovieInfoModel, newItem: MovieInfoModel ): Boolean { return oldItem == newItem } } }} Fragment êµ¬í˜„ ViewModelë¡œ ë¶€í„° Flow&lt;PagingData&gt;ë¥¼ ë°›ì•„ PagingDataAdapterì— ë„˜ê²¨ì¤ë‹ˆë‹¤. PagingAdapterì˜ loadStateë¥¼ ë°›ì•„ì™€ ìƒí™©ë³„ë¡œ UIë¥¼ ì»¨íŠ¸ë¡¤ í•©ë‹ˆë‹¤. ì°¸ê³  ğŸš© loadState ìƒíƒœ ì„¤ëª… LoadState.NotLoading : ë¡œë”©ì´ ëë‚˜ê³  Error ì—†ì´ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” ìƒíƒœì…ë‹ˆë‹¤. LoadState.Loading : ë°ì´í„°ê°€ load ë˜ê³  ìˆìœ¼ë©°, ì‚¬ìš©ìì—ê²Œ ì§„í–‰ ìƒí™©ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. LoadState.Error : ë°ì´í„° load ì¤‘ error ë°œìƒí•œ ìƒíƒœì…ë‹ˆë‹¤. CombinedLoadStates.refresh : PagingData ì˜ Load ê°€ ëë‚œ ìƒíƒœì…ë‹ˆë‹¤. CombinedLoadStates.append : PagingData ì˜ Load ê°€ ëë‚œ ìƒíƒœì…ë‹ˆë‹¤. endOfPaginationReached : Load ê°€ëŠ¥ ì—¬ë¶€, true ë©´ ë” ì´ìƒ Load ë¥¼ í•˜ì§€ ëª»í•©ë‹ˆë‹¤. @AndroidEntryPointclass HomeFragment : BaseFragment&lt;FragmentHomeBinding, HomeViewModel&gt;( R.layout.fragment_home), View.OnFocusChangeListener, TextWatcher { override val viewModel: HomeViewModel by viewModels() private val movieInfoAdapter by lazy { MovieInfoAdapter() } private lateinit var scrollLayoutManager: LinearLayoutManager private var scrollReset = false private val scrollListener = object : RecyclerView.OnScrollListener() { override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: Int) { super.onScrolled(recyclerView, dx, dy) val lastVisibleItemPosition = scrollLayoutManager.findFirstVisibleItemPosition() // ìŠ¤í¬ë¡¤ ì‹œ Scroll Top Button ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. if (lastVisibleItemPosition &gt;= 1) { binding.topButton.show() } else { binding.topButton.hide() } } } private val keyboardObserver = object : KeyboardUtils.SoftKeyboardToggleListener { override fun onToggleSoftKeyboard(isVisible: Boolean, height: Int) { // keyboard ê°€ ë³´ì´ì§€ ì•Šì„ ë•Œ searchEt í¬ì»¤ìŠ¤ë¥¼ í•´ì œí•©ë‹ˆë‹¤. if (!isVisible) { binding.searchEt.let { if (it.isFocusable) { it.clearFocus() } } } } } override fun onAttach(context: Context) { super.onAttach(context) KeyboardUtils.addKeyboardToggleListener(requireActivity(), keyboardObserver) } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) binding.viewModel = this.viewModel binding.focusListener = this binding.textListener = this binding.noResultLayout.noResultText = resources.getString(R.string.str_no_search) binding.listView.apply { scrollLayoutManager = layoutManager as LinearLayoutManager adapter = movieInfoAdapter.withLoadStateHeaderAndFooter( header = MyLoadStateAdapter { movieInfoAdapter.retry() }, footer = MyLoadStateAdapter { movieInfoAdapter.retry() } ) addOnScrollListener(scrollListener) } // ViewModelë¡œ ë¶€í„° ë°›ì•„ì˜¨ PagingData ë¥¼ PagingDataAdapter ì— ë„£ì–´ì¤ë‹ˆë‹¤. viewModel.getMovieList.observeOnLifecycleStop(viewLifecycleOwner) { movieInfoAdapter.submitData(it) } // PagingDataAdapter ì˜ loadState ì— ë”°ë¼ UIë¥¼ ì»¨íŠ¸ë¡¤ í•©ë‹ˆë‹¤. movieInfoAdapter.loadStateFlow.observeOnLifecycleStop(viewLifecycleOwner) { viewModel.loadingType.value = when { // ì´ˆê¸° load ë˜ëŠ” ìƒˆë¡œê³ ì¹¨ì´ ì‹¤íŒ¨í•˜ë©´ -&gt; ERROR it.source.refresh is LoadState.Error &amp;&amp; movieInfoAdapter.itemCount == 0 -&gt; { if (binding.refreshView.isRefreshing) { binding.refreshView.isRefreshing = false } MovieLoadingType.ERROR } // List ê°€ ë¹„ì–´ìˆëŠ” ê²½ìš° -&gt; EMPTY it.source.refresh is LoadState.NotLoading &amp;&amp; movieInfoAdapter.itemCount == 0 -&gt; { if (binding.refreshView.isRefreshing) { binding.refreshView.isRefreshing = false } MovieLoadingType.EMPTY } // Local Db ë˜ëŠ” Remote ì—ì„œ ìƒˆë¡œ ê³ ì¹¨ì´ ì„±ê³µí•œ ê²½ìš° -&gt; VIEW it.source.refresh is LoadState.NotLoading -&gt; { if (binding.listRefreshView.isRefreshing) { binding.listRefreshView.isRefreshing = false } if (scrollReset) { scrollReset = false binding.listView.stopScroll() scrollLayoutManager.scrollToPositionWithOffset(0, 0) } MovieLoadingType.VIEW } else -&gt; MovieLoadingType.LOADING } } // PagingDataAdapter ì˜ Click Listener ì…ë‹ˆë‹¤. movieInfoAdapter.setOnItemClickListener(object : MovieInfoAdapter.OnItemClickListener { override fun onClick(item: MovieInfoModel, position: Int) { startActivity( WebViewActivity.getInAppBrowserIntent( activity = requireActivity(), url = item.link, pageTitle = \"ì˜í™” ìƒì„¸ ì •ë³´\", showTitle = true ) ) } }) // IME_ACTION_SEARCH : í‚¤ë³´ë“œ search ëª¨ì–‘ í´ë¦­ ì‹œ Listener ë“±ë¡ binding.searchEt.setOnEditorActionListener { _, actionId, _ -&gt; if (actionId == EditorInfo.IME_ACTION_SEARCH) { viewModel.onSearchClick() true } else { false } } initViewModelCallback() } private fun initViewModelCallback() = with (viewModel) { // ìŠ¤í¬ë¡¤ Top ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ Callbackì´ ì‹¤í–‰ë©ë‹ˆë‹¤. scrollTop.onEach { binding.listView.stopScroll() scrollLayoutManager.scrollToPositionWithOffset(0, 0) }.observeInLifecycleStop(viewLifecycleOwner) // Refresh Layout ìœ¼ë¡œ Refresh í•  ê²½ìš° í•´ë‹¹ Callbackì´ ì‹¤í–‰ë©ë‹ˆë‹¤. refresh.onEach { if (binding.refreshView.isRefreshing) { binding.refreshView.isRefreshing = false } scrollReset = true movieInfoAdapter.refresh() onScrollTop() }.observeInLifecycleStop(viewLifecycleOwner) // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ Callbackì´ ì‹¤í–‰ë©ë‹ˆë‹¤. search.onEach { onRefreshList() }.observeInLifecycleStop(viewLifecycleOwner) } // Edit Textì˜ OnFocusChangeListenerë¥¼ ì •ì˜í•©ë‹ˆë‹¤. override fun onFocusChange(view: View?, hasFocus: Boolean) { if (view != null) { when (view.id) { R.id.searchEt -&gt; { viewModel.searchFocusView.value = hasFocus } } } } // Edit Textì˜ TextWatcherë¥¼ ì •ì˜í•©ë‹ˆë‹¤. override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {} override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {} override fun afterTextChanged(s: Editable?) { viewModel.notBlankContents.value = if (!s.isNullOrEmpty()) { viewModel.searchFocusView.value = true true } else { false } } override fun onDetach() { KeyboardUtils.removeKeyboardToggleListener(keyboardObserver) super.onDetach() }}ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Paging3ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ Clean Architectureì—ì„œ Paging3ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.í˜ì´ì§•ì´ë€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•„ìš”í•œ ë§Œí¼ â€œâ€œì¼ë¶€ë¶„ì„ ë‚˜ëˆ ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒâ€â€ ì´ë¼ëŠ” ì ì„ ê¸°ì–µí•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ì „ì²´ ì½”ë“œëŠ” Naver Open API ì˜í™” ê²€ìƒ‰ì—ì„œ í™•ì¸í•˜ì‹¤ìˆ˜ ìˆìŠµë‹ˆë‹¤." }, { "title": "Android StateFlow, SharedFlow, Coroutine Channel ì— ëŒ€í•˜ì—¬", "url": "/posts/Android-StateFlow/", "categories": "Android, Coroutine", "tags": "android, stateFlow, sharedFlow, channel, coroutine", "date": "2022-07-21 11:11:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” StateFlow, SharedFlow, Coroutine Channel ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ì•„ì§ Flowì— ëŒ€í•˜ì—¬ ì˜ ëª¨ë¥´ì‹œë©´ Flow í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ğŸ‘‰ Flowì— ê´€í•˜ì—¬FlowëŠ” Cold Streamì…ë‹ˆë‹¤. ì¦‰, collector ë¥¼ ê³µìœ í•  ìˆ˜ ì—†ì–´ collectë¥¼ í• ë•Œë§ˆë‹¤ ê°ê¸° ë‹¤ë¥¸ ë°ì´í„°ê°€ ìˆ˜ì§‘ë©ë‹ˆë‹¤.StateFlow, SharedFlowëŠ” Flowì˜ ë‹¨ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ë‚˜ì™”ìŠµë‹ˆë‹¤.StateFlow, SharedFlowëŠ” Hot Streamìœ¼ë¡œ collectorë¥¼ ê³µìœ  í•©ë‹ˆë‹¤. ìì„¸í•œê±´ ë°‘ì—ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Flowì˜ ë‹¨ì  FlowëŠ” ìŠ¤ìŠ¤ë¡œ Androidì˜ Lifecycleì— ëŒ€í•´ ì•Œì§€ ëª»í•©ë‹ˆë‹¤. âœ… ì¦‰, Lifecycleì— ë”°ë¥¸ ì¤‘ì§€ë‚˜ ì¬ê°œê°€ ì–´ë µìŠµë‹ˆë‹¤. FlowëŠ” ìƒíƒœê°€ ì—†ì–´ ê°’ì´ í• ë‹¹ëœ ê²ƒì¸ì§€, í˜„ì¬ ê°’ì€ ë¬´ì—‡ì¸ì§€ ì•Œê¸° ì–´ë µìŠµë‹ˆë‹¤. FlowëŠ” Cold Stream ë°©ì‹ìœ¼ë¡œ, ì—°ì†í•´ì„œ ê³„ì† ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ìœ¼ë©°, Collect ë˜ì—ˆì„ ë•Œë§Œ ìƒì„±ë˜ê³  ê°’ì„ ë°˜í™˜ í•©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ ë§Œì•½, í•˜ë‚˜ì˜ flow builder ì— ëŒ€í•´ ë‹¤ìˆ˜ì˜ Collector ê°€ ìˆë‹¤ë©´ Collector í•˜ë‚˜ë§ˆë‹¤ í•˜ë‚˜ì”© ë°ì´í„°ë¥¼ í˜¸ì¶œ í•˜ê¸° ë•Œë¬¸ì— UpSteamì´ ë¹„ì‹¼ ë¹„ìš©ì„ ìš”êµ¬í•˜ëŠ” DB ì ‘ê·¼ì´ë‚˜ ì„œë²„ í†µì‹  ë“±ì´ë¼ë©´ ì—¬ëŸ¬ ë²ˆ ë¦¬ì†ŒìŠ¤ ìš”ì²­ ì„ í•˜ê²Œ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ€ StateFlow Hot Stream ë°©ì‹ì…ë‹ˆë‹¤. ì¦‰, collectê°€ ê³µìœ  ë˜ì–´ ì˜¤ì§ í•˜ë‚˜ì˜ Flowë§Œì„ ì‹¤í–‰ í•˜ê²Œ í•©ë‹ˆë‹¤. âœ… ì°¸ê³  ğŸ‘‰ Flowì™€ ë‹¤ë¥´ê²Œ í•˜ë‚˜ì˜ StateFlowë¥¼ í†µí•´ DBì— ì ‘ê·¼í•  ë•Œ ì—¬ëŸ¬ê°œì˜ Collectë¥¼ ì“°ë”ë¼ë„ DBì—ëŠ” í•œë²ˆë§Œ ì ‘ê·¼ í•©ë‹ˆë‹¤. ì´ˆê¸° ë°ì´í„°(ê¸°ë³¸ ê°’)ì´ í•­ìƒ ì¡´ì¬ í•´ì•¼ í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ ê°’ì˜ ê°œë…ì´ ìˆìœ¼ë©° ìƒì„±í•˜ì ë§ˆì í™œì„±í™” ë©ë‹ˆë‹¤. ê°’ì´ ì—…ë°ì´íŠ¸ ëœ ê²½ìš°ì—ë§Œ ë°˜í™˜í•˜ê³  ë™ì¼í•œ ê°’ì„ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Flow ì˜ distinctUtilChanged()ê°€ í•­ìƒ í¬í•¨ë˜ì–´ ìˆë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. .valueë¥¼ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ê°’ì— ì ‘ê·¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. SharedFlow ì˜ replay ê°’ì´ 1ë¡œ ê³ ì •ëœ ê²½ìš°ì™€ ê°™ìŠµë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ ìƒˆë¡œìš´ subscriberê°€ ë“±ë¡ë  ë•Œ ë°”ë¡œ ìµœì‹ ì˜ ê°’ì„ ê°€ì ¸ ì˜µë‹ˆë‹¤. 1ï¸âƒ£ ì˜ˆì œ ) StateFlow ìƒì„± ğŸ‘‡ğŸ¾ @HiltViewModelclass MainViewModel @Inject constructor() : ViewModel() { // StateFlow ìƒì„± private val _isAdult = MutableStateFlow(false) val isAdult: StateFlow&lt;Boolean&gt; = _isAudult.asStateFlow() // StateFlowì— ê°’ ë„£ê¸° fun onIsAdultClick() { _isAdult.value = !isAdult.value }} 2ï¸âƒ£ ì˜ˆì œ ) StateFlow Collect ğŸ‘‡ğŸ¾ @AndroidEntryPointclass MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding private val mainViewModel: MainViewModel by viewModels() override fun onCreate(saveInstanceState: Bundle?) { binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this lifecycleScope.launchWhenStarted { mainViewModel.isAdult.collect { it: Boolean // TODO : true, false ë™ì‘ ë„£ê¸° } } }} ğŸ€ SharedFlow Hot Stream ë°©ì‹ìœ¼ë¡œ ì—¬ëŸ¬ê°œì˜ Collectorë¥¼ ê³µìœ í•˜ì—¬ ì˜¤ì§ í•˜ë‚˜ì˜ Flowë§Œì„ ì‹¤í–‰í•˜ê²Œ í•©ë‹ˆë‹¤.( ì•„ë¬´ë¦¬ ë§ì€ Collectorê°€ ì¡´ì¬í•´ë„ ì˜¤ì§ í•˜ë‚˜ì˜ Flowë§Œ ì‹¤í–‰ ) firstOrNullì„ í†µí•´ í˜„ì¬ ê°’ì— ì ‘ê·¼ ê°€ëŠ¥ í•©ë‹ˆë‹¤. ì´ˆê¸° ê°’ì´ í•„ìš”ì—†ìœ¼ë©°, ì¤‘ë³µëœ ê°’ì´ í•„ìš”í•œ ê²½ìš° ì‚¬ìš© âœ… ì°¸ê³  ğŸ‘‰ ì¤‘ë³µ ê°’ì´ í•„ìš”í•œ ê²½ìš°ë€ Eventë¥¼ ë§í•˜ëŠ”ë° ì˜ˆë¥¼ë“¤ì–´ APIë¥¼ í˜¸ì¶œí•˜ì˜€ì„ ë•Œ ì‹¤íŒ¨ì˜ ê²½ìš° ì—°ì† ì ìœ¼ë¡œ ì‹¤íŒ¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ëŸ´ë•ŒëŠ” SharedFlowë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë§Œì•½, SharedFlow í•œ ê°œë¥¼ ì •ì˜í•˜ê³  Database ê²°ê³¼ê°’ì„ ê³µìœ í•˜ê²Œ í•œ ë’¤, ì—¬ëŸ¬ ê°œì˜ Collectorë¥¼ ë‹¬ì•„ ì¤€ë‹¤ë©´ Database ì ‘ê·¼ì€ ì˜¤ì§ í•œ ë²ˆë§Œ ì¼ì–´ë‚©ë‹ˆë‹¤. SharedFlow íŒŒë¼ë¯¸í„° ğŸ‘‡ replay : Collect ì‹œ ì „ë‹¬ë°›ì„ ì´ì „ ë°ì´í„°ì˜ ê°œìˆ˜ ì§€ì •, replayê°€ 0ì´ë©´ Collect ì‹œì ì— ë‹´ê²¨ìˆë˜ ë°ì´í„°ë¶€í„° ì „ë‹¬ ë°›ìŠµë‹ˆë‹¤. replayê°€ 1ì´ë©´ collect ì‹œì  ì§ì „ì˜ ë°ì´í„°ë¶€í„° ì „ë‹¬ ë°›ìœ¼ë©° ì‹œì‘(ìµœì‹  ë°ì´í„°)í•©ë‹ˆë‹¤. 0 : collect ì´í›„ì˜ ë°ì´í„°ë¥¼ ì „ë‹¬ ë°›ìŠµë‹ˆë‹¤. (ìƒˆë¡œìš´ êµ¬ë…ìì—ê²Œ ì´ì „ ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.) 1 : collect ì‹œì  ì§ì „ì˜ ë°ì´í„°ë¶€í„° ì „ë‹¬ë°›ìœ¼ë©° ì‹œì‘í•©ë‹ˆë‹¤.( ìµœì‹  ë°ì´í„° ) 2 : í˜„ì¬ ë°ì´í„° ì´ì „ ë‘ê°œì˜ ë°ì´í„° ë¶€í„° ì „ë‹¬ë°›ìœ¼ë©´ì„œ ì‹œì‘í•©ë‹ˆë‹¤. extraBufferCapacity : bufferì˜ ê°œìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. flowì˜ emitì´ ë¹ ë¥´ê³  collectê°€ ëŠë¦´ ë•Œ ì§€ì •ëœ ê°œìˆ˜ë§Œí¼ bufferì— ì €ì¥ë˜ê³ , ì €ì¥ëœ ê°œìˆ˜ê°€ ë„˜ì–´ê°€ë©´ 'onBufferOverFlow'ì— ì„¤ì •ëœ ì •ì±…ì— ë”°ë¼ ë™ì‘ í•©ë‹ˆë‹¤. onBufferOverFlow : Buffer ê°€ ê½‰ ì°¼ì„ ë•Œ ë™ì‘ì„ ì •ì˜í•©ë‹ˆë‹¤. SUSPEND : bufferê°€ ê½‰ ì°¼ì„ ë•Œ emitì„ ìˆ˜í–‰í•˜ë©´ emit ì½”ë“œê°€ blocking ë©ë‹ˆë‹¤. ì¦‰, bufferì˜ ë¹ˆìë¦¬ê°€ ìƒê²¨ì•¼ emitì½”ë“œ ì´í›„ì˜ ì½”ë“œê°€ ìˆ˜í–‰ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DROP_OLDSET : bufferê°€ ê½‰ ì°¼ì„ ë•Œ emitì„ ìˆ˜í–‰í•˜ë©´ ì˜¤ë˜ëœ ë°ì´í„°ë¶€í„° ì‚­ì œí•˜ë©´ì„œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë„£ìŠµë‹ˆë‹¤. DROP_LATEST : buffer ê°€ ê½‰ ì°¼ì„ ë•Œ emitì„ ìˆ˜í–‰í•˜ë©´ ìµœê·¼ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë„£ìŠµë‹ˆë‹¤. ğŸ€ StateIn / SharedIn Flow Builder ë¡œ ë§Œë“  Clod Flowë¥¼ Hot Flowë¡œ ë³€ê²½ í•  ìˆ˜ ìˆëŠ” í™•ì¥í•¨ìˆ˜ ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ Flow ì—ì„œ ë°©ì¶œëœ ê°’ì„ ì—¬ëŸ¬ê°œì˜ Collector ì—ì„œ ë°›ì•„ì•¼í•  ê²½ìš° ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤. stateIn() / sharedIn() íŒŒë¼ë¯¸í„° scope ğŸ‘‰ ê³µìœ ê°€ ì‹œì‘ë˜ëŠ” Coroutine Scopeë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. started ğŸ‘‰ ê³µìœ ê°€ ì‹œì‘ ë° ì¤‘ì§€ë˜ëŠ” ì‹œê¸°ë¥¼ ì œì–´ í•˜ëŠ” ì „ëµì„ ì„¤ì •í•©ë‹ˆë‹¤. Eagerly ğŸ‘‡ Collector ê°€ ì¡´ì¬í•˜ì§€ ì•Šë”ë¼ë„ ë°”ë¡œ Sharingì´ ì‹œì‘ë˜ë©°, ì¤‘ê°„ì— ì¤‘ì§€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°’ì´ replay í¬ê¸° ë³´ë‹¤ ë§ì´ ë“¤ì–´ì˜¤ë©´ ë°”ë¡œ ì‚­ì œë©ë‹ˆë‹¤. ì¦‰, ì¦‰ì‹œ ì‹œì‘ë˜ë©° Scopeê°€ ì·¨ì†Œë˜ë©´ ì¤‘ì§€ë©ë‹ˆë‹¤. Lazily ğŸ‘‡ Collector ê°€ ë“±ë¡ëœ ì´í›„ë¶€í„° Sharingì´ ì‹œì‘ë˜ë©° ì¤‘ê°„ì— ì¤‘ì§€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ CollectorëŠ” ê·¸ ë™ì•ˆ emitëœ ëª¨ë“  ê°’ë“¤ì„ ì–»ìœ¼ë©°, ì´í›„ì— CollectorëŠ” replay ê°œìˆ˜ ë§Œí¼ ê°’ì„ ì–»ì–´ê°‘ë‹ˆë‹¤. âœ… ì¦‰, Collectorê°€ ëª¨ë‘ ì—†ì–´ì§€ë”ë¼ë„ Sharing ë™ì‘ì„ ìœ ì§€ë˜ë©° replay ê°œìˆ˜ë§Œí¼ Cacheí•˜ê³  Sopceê°€ ì·¨ì†Œë˜ë©´ ì¤‘ì§€ë©ë‹ˆë‹¤. WhileSubscribed ğŸ‘‡ Collector ê°€ ë“±ë¡ë˜ë©´ ë°”ë¡œ Sharingì„ ì‹œì‘í•˜ë©°, Collector ê°€ ì „ë¶€ ì—†ì–´ì§€ë©´ ë°”ë¡œ Sharingì„ ì¤‘ì§€ í•©ë‹ˆë‹¤. ì´ë•Œ replay ê°œìˆ˜ë§Œí¼ Cache ì²˜ë¦¬ ë©ë‹ˆë‹¤. stopTimeOutMillis ğŸ‘‡ collectorê°€ ëª¨ë‘ ì‚¬ë¼ì§„ ì´í›„ì— ì •ì§€í•  delayë¥¼ ë„£ìŠµë‹ˆë‹¤. ì¦‰, Collectê°€ ì‚¬ë¼ì§€ê³  ëª‡ ì´ˆ í›„ì— Sharingì„ ì¤‘ì§€í• ì§€ ì„¤ì • í•©ë‹ˆë‹¤. 0ì´ë©´ Collectorê°€ ëª¨ë‘ ì‚¬ë¼ì§€ëŠ” ìˆœê°„ì— ë°”ë¡œ ì •ì§€í•©ë‹ˆë‹¤. 5,000ì„ ì‚¬ìš©í•˜ë©´ Configuration(êµ¬ì„±ìš”ì†Œ) ë³€ê²½ê³¼ ê°™ì€ íŠ¹ì • ìƒí™©ì—ì„œ ì´ë“ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. replayExpirationMillis ğŸ‘‡ cache í•œ ê°’ì„ ìœ ì§€í•  ì‹œê°„ì„ ì •í•©ë‹ˆë‹¤. ì‹œê°„ì´ ì§€ë‚˜ë©´ stateInì˜ ì´ˆê¸° ê°’ìœ¼ë¡œ ë³µì› ë©ë‹ˆë‹¤. ê¸°ë³¸ ê°’ ğŸ‘‰ replay cacheë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ìœ ì§€í•˜ë©° bufferë¥¼ ì¬ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 0ì„ ì‚¬ìš© ğŸ‘‰ cacheë¥¼ ì¦‰ê°ì ìœ¼ë¡œ ë§Œë£Œ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. initialValue ğŸ‘‰ stataIn ì‚¬ìš© ì‹œ ì´ˆê¸° ê°’ì„ ì„¤ì • í•©ë‹ˆë‹¤. replay ğŸ‘‡ sharedIn ì‚¬ìš© ì‹œ ì‚¬ìš©ë˜ë©°( StateFlowëŠ” replace ê°’ì´ 1ë¡œ ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ), Collect ì‹œ ì „ë‹¬ë°›ì„ ì´ì „ ë°ì´í„°ì˜ ê°œìˆ˜ ì§€ì • ì§€ì • replayê°€ 0 ğŸ‘‰ Collect ì‹œì ì— ë‹´ê²¨ìˆë˜ ë°ì´í„°ë¶€í„° ì „ë‹¬ ë°›ìŠµë‹ˆë‹¤. replayê°€ 1 ğŸ‘‰ collect ì‹œì  ì§ì „ì˜ ë°ì´í„°ë¶€í„° ì „ë‹¬ ë°›ìœ¼ë©° ì‹œì‘í•©ë‹ˆë‹¤.( ìµœì‹  ë°ì´í„° ) â—ï¸ì£¼ì˜â—ï¸ ğŸ‘‰ stateIn, sharedInì„ í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ ë§¤ë²ˆ ì¬ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ìƒˆë¡œìš´ instanceë¥¼ ë§Œë“¤ê²Œ ë©ë‹ˆë‹¤. ì•„ë˜ëŠ” í•´ë‹¹ ì½”ë“œì˜ ìƒ˜í”Œ ì˜ˆì œ ì…ë‹ˆë‹¤. ğŸ‘‡ğŸ¾ @HiltViewModelclass MainViewModel @Inject constructor( private val getCastInfoUseCase: GetCastInfoUseCase) : ViewModel() { // í•´ë‹¹ Result Sealed Class ëŠ” ë³´ë‹¤ ì´í•´ë¥¼ ë•ê¸°ìœ„í•´ ViewModelì—ì„œ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. sealed class Result&lt;T&gt;( val data: T? = null, val message: String? = null ) { class Loading&lt;T&gt;: Result&lt;T&gt;() class Success&lt;T&gt;(data: T) : Result&lt;T&gt;(data) class NetworkError&lt;T&gt;(message: String?, data: T? = null) : Result&lt;T&gt;(data, message) class Error&lt;T&gt;(message: String?, data: T? = null) : Result&lt;T&gt;(data, message) } private val getCastInfo: StateFlow&lt;Result&lt;CastInfoResponseModel&gt;&gt; = getCastInfoUseCase() .stateIn( scope = viewModelScope, started = SharingStarted.WhileSubscribed(5000), initialValue = Result.Loading() ) fun requestCastInfo() = viewModelScope.launch { getCastInfo().collect { result -&gt; when (result) { is Result.Loading -&gt; { showLoadingDialog() } is Result.Success -&gt; { hideLoadingDialog() // TODO : API ìš”ì²­ ì„±ê³µì¼ ë•Œ ë™ì‘ ë„£ê¸° } is Result.NetworkError -&gt; { hideLoadingDialog() // TODO : Network ì˜¤ë¥˜ ë°œìƒ ë•Œ ë™ì‘ ë„£ê¸° } is Result.Error -&gt; { hideLoadingDialog() // TODO : API ERROR ë°œìƒ ë•Œ ë™ì‘ ë„£ê¸° } } } }} ğŸ€ Coroutine Channel Channelì€ ë‹¨ë°©í–¥ Observing ì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ì‰½ìŠµë‹ˆë‹¤. âœ… ì°¸ê³  LiveDataì—ì„œëŠ” ë‹¨ë°©í–¥ ì˜µì €ë¹™ì„ ìœ„í•´ SingleLiveEvent í˜¹ì€ Event Wrapper ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Coroutine Channel ì€ Flowì˜ ë‹¨ë°©í–¥ ì˜µì €ë¹™ ì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. Channelì€ ì •í™•íˆ í•œ ë²ˆë§Œ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ì´ë²¤íŠ¸ ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¨ì¼ êµ¬ë…ì ê°€ìˆëŠ” ì´ë²¤íŠ¸ ìœ í˜•ì˜ ì„¤ê³„ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. âœ… ì°¸ê³  ì˜ˆë¥¼ ë“¤ë©´ Click Event Listener ê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤. Click Event ListenerëŠ” í•­ìƒ Observing í•  í•„ìš”ì—†ì´ ëˆŒë €ì„ ë•Œë§Œ Observing í•˜ë©´ ë˜ë¯€ë¡œ ì´ëŸ´ ë•Œ Channel ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. send ê°’ì´ ì˜¤ì§€ì•Šìœ¼ë©´ Observingì„ í•˜ì§€ì•Šê³ , send ê°’ì´ ë“¤ì–´ì˜¤ë©´ Observing ì‹œì‘í•©ë‹ˆë‹¤. Channelì˜ Buffer Type Rendezvous (Unbuffered) : ê¸°ë³¸ íƒ€ì…ìœ¼ë¡œ ë²„í¼ê°€ ì—†ìŠµë‹ˆë‹¤. Conflated : í¬ê¸°ê°€ 1ì¸ ê³ ì • ë²„í¼ê°€ ìˆëŠ” ì±„ë„ì´ ìƒì„± ë©ë‹ˆë‹¤. ë§Œì•½ì— ìˆ˜ì‹ í•˜ëŠ” Coroutineì´ ì†¡ì‹ í•˜ëŠ” Coroutineì„ ë”°ë¼ì¡ì§€ ëª»í–ˆë‹¤ë©´, ì†¡ì‹ í•˜ëŠ” ìª½ì€ ìƒˆë¡œìš´ ê°’ì„ Bufferì˜ ë§ˆì§€ë§‰ ì•„ì´í…œì— ë®ì–´ì”Œì›ë‹ˆë‹¤. ì¦‰, ìµœì‹  ê°’ì„ ë°›ìŠµë‹ˆë‹¤. Buffered : ì´ ëª¨ë“œëŠ” ê³ ì •ëœ í¬ê¸°ì˜ ë²„í¼ë¥¼ ìƒì„± (BufferëŠ” Array í˜•ì‹)í•©ë‹ˆë‹¤. ì†¡ì‹  Coroutineì€ Bufferê°€ ê½‰ ì°¨ìˆìœ¼ë©´ ìƒˆë¡œìš´ ê°’ì„ ë³´ë‚´ëŠ” ê±¸ ì¤‘ë‹¨ í•©ë‹ˆë‹¤. ìˆ˜ì‹  Coroutine ì€ Bufferê°€ ë¹Œë•Œê¹Œì§€ ê³„ì†í•´ì„œ êº¼ë‚´ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤. Unlimited : ì œí•œ ì—†ëŠ” í¬ê¸°ì˜ ë²„í¼ë¥¼ ìƒì„± (BufferëŠ” LinkedList í˜•ì‹)í•©ë‹ˆë‹¤. ë§Œì•½ì— Bufferê°€ ì†Œë¹„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ë©”ëª¨ë¦¬ê°€ í˜ë“¤ì–´í• ë•Œê¹Œì§€ ê³„ì†í•´ì„œ ì•„ì´í…œì„ ì°©ì°© ì±„ìš°ê³  ê²°êµ­ì—” OutOfMemeoryExceptionì„ ì¼ìœ¼í‚¤ê²Œ ë©ë‹ˆë‹¤. 1ï¸âƒ£ ë‹¤ìŒì€ Coroutine Channel ì˜ˆì œ ì…ë‹ˆë‹¤. ğŸ‘‡ğŸ¾ @HiltViewModelclass MainViewModel @Inject constructor() : ViewModel() { private val _actionLogin = Channel&lt;Unit&gt;(Channel.CONFLATED) val actionLogin = _actionLogin.receiveAsFlow() fun onLoginClick() = viewModelScope.launch { _actionLogin.send(Unit) }} 2ï¸âƒ£ ë‹¤ìŒì€ ìˆ˜ì‹ ì„ ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ìª½ ì˜ˆì œ ì…ë‹ˆë‹¤. @AndroidEntryPointclass MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding private val mainViewModel: MainViewModel by viewModels() override fun onCreate(saveInstanceState: Bundle?) { binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this lifecycleScope.launchWhenStarted { mainViewModel.actionLogin.collect { // TODO: ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘í•  ì½”ë“œ ë„£ê¸° } } }} ğŸ€ Flow Observer FlowëŠ” ìŠ¤ìŠ¤ë¡œ Androidì˜ Lifecycleì— ëŒ€í•´ ì•Œì§€ ëª»í•©ë‹ˆë‹¤. ( Lifecycleì— ë”°ë¥¸ ì¤‘ì§€ë‚˜ ì¬ê°œê°€ ì–´ë µìŠµë‹ˆë‹¤. ) ë”°ë¼ì„œ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Custom Classë¥¼ ë§Œë“­ë‹ˆë‹¤. í•´ë‹¹ ì½”ë“œëŠ” lifecycle ì´ onStartê°€ ë˜ë©´ êµ¬ë…ì„ ì‹œì‘í•˜ê³ , onStopì´ ë˜ë©´ êµ¬ë… ì·¨ì†Œ í•©ë‹ˆë‹¤. 1ï¸âƒ£ ë‹¤ìŒì€ FlowObserver ì˜ˆì œ ì½”ë“œ ì…ë‹ˆë‹¤. ğŸ‘‡ class FlowObserverInStop&lt;T&gt;( lifecycleOwner: LifecycleOwner, private val flow: Flow&lt;T&gt;, private val collector: suspend (T) -&gt; Unit) { private var job: Job? = null init { lifecycleOwner.lifecycle.addObserver(LifecycleEventObserver { source, event -&gt; when (event) { Lifecycle.Event.ON_START -&gt; { job = source.lifecycleScope.launch { flow.collect { collector(it) } } } Lifecycle.Event.ON_STOP -&gt; { job?.cancel() job = null } else -&gt; {} } }) }}inline fun &lt;reified T&gt; Flow&lt;T&gt;.observeOnLifecycleStop( lifecycleOwner: LifecycleOwner, noinline collector: suspend (T) -&gt; Unit) = FlowObserverInStop(lifecycleOwner, this, collector)// .onEach{ } ì‚¬ìš©í• ë•Œ ì‚¬ìš©inline fun &lt;reified T&gt; Flow&lt;T&gt;.observeInLifecycleStop( lifecycleOwner: LifecycleOwner) = FlowObserverInStop(lifecycleOwner, this) {} âœ… ì„¤ëª… ğŸ‘‡ observeOnLifecycleStop() ì˜ ë§¤ê°œë³€ìˆ˜ì—ëŠ” lifecycle ì„ ë„£ìŠµë‹ˆë‹¤. Activityì˜ ê²½ìš° this ì´ê³ , Fragmentì¸ ê²½ìš° viewLifecycleOwnerë¥¼ ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. 2ï¸âƒ£ FlowObserver ì‚¬ìš© ì˜ˆì œ ì…ë‹ˆë‹¤. ğŸ‘‡ğŸ¾ @AndroidEntryPointclass MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding private val mainViewModel: MainViewModel by viewModels() override fun onCreate(saveInstanceState: Bundle?) { binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this // StateFlow Observing mainViewModel.actionLogin.observeOnLifecycleStop(this) { // TODO : true, false ë™ì‘ ë„£ê¸° } // Coroutine Channel Observing mainViewModel.actionLogin.onEach { // TODO: ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘í•  ì½”ë“œ ë„£ê¸° }.observeInLifecycleStop(this) }} ğŸ€ ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” StateFlow, SharedFlow, Coroutine Channel ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.LiveDataë¥¼ ì‚¬ìš©í•˜ê³  Event Wrapperë¥¼ í†µí•´ ë‹¨ë°©í–¥ Observingì„ ì²˜ë¦¬í•´ë„ ë˜ì§€ë§Œ ë¬¸ì œëŠ” Clean Architectureì— ìˆìŠµë‹ˆë‹¤.LiveDataëŠ” UIì— ë°€ì ‘í•˜ê²Œ ì—°ê´€ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— Clean Architectureë¡œ Projectë¥¼ êµ¬ì„±í•˜ë©´ Domain, Data layerì—ì„œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸°ì— ìì—°ìŠ¤ëŸ¬ìš´ ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤.ë˜í•œ LiveData ëŠ” ì•ˆë“œë¡œì´ë“œ í”Œë«í¼ì— ì†í•´ ìˆê¸° ë•Œë¬¸ì— ìˆœìˆ˜ Java / Kotlin ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” Domain Layer ì—ì„œ ì‚¬ìš©í•˜ê¸°ì— ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.ì´ëŸ´ ê²½ìš° LiveDataë¥¼ ëŒ€ì²´í•˜ì—¬ StateFlow ë‚˜ SharedFlow ë˜ëŠ” Coroutine Channelì„ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." }, { "title": "Android Naver Open API ì˜í™” ê²€ìƒ‰ ì–´í”Œ", "url": "/posts/Android-Clean-Architecture/", "categories": "Android, Naver Open API", "tags": "android, cleanArchitecture, MVVM", "date": "2022-07-21 11:11:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” â€œNaver Open APIë¥¼ ì´ìš©í•œ ì˜í™” ê²€ìƒ‰â€ ì–´í”Œì— ì‚¬ìš©ëœ ê¸°ìˆ ê³¼ í”„ë¡œì íŠ¸ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ì¬ì§ì¤‘ì¸ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì„ ê³¼ì œì˜ ì£¼ì œì— ë²—ì–´ë‚˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ ëª¨ë‘ ë³´ì—¬ë“œë¦¬ê³  ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.í•´ë‹¹ í”„ë¡œì íŠ¸ ì „ì²´ ì½”ë“œ ğŸ‘‰ğŸ¿ Naver Open APIë¥¼ ì´ìš©í•œ ì˜í™” ê²€ìƒ‰ ì–´í”Œì•± ê¸°ëŠ¥ Naver Open APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì›í•˜ëŠ” ì˜í™”ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤. ê²€ìƒ‰í•œ ë‚´ìš©ì„ RecyclerViewë¥¼ í†µí•´ ë³´ì—¬ì£¼ë©° Paging3ë¥¼ ì‚¬ìš©í•˜ì—¬ Pageì— ë”°ë¼ listë¥¼ ì¶”ê°€ë¡œ ë¶ˆëŸ¬ì™€ ë³´ì—¬ì¤ë‹ˆë‹¤. ì°¸ê³  : í•´ë‹¹ í¬ìŠ¤íŒ…ì— Paging3ì— ê´€í•˜ì—¬ ìì„¸íˆ ì •ë¦¬ í–ˆìŠµë‹ˆë‹¤. ğŸ‘‰ğŸ¿ Paging3ì— ëŒ€í•˜ì—¬ RecyclerViewì— ì¸ë„¤ì¼ ì´ë¯¸ì§€, ì œëª©, í‰ì , ì—°ë„, ê°ë…, ì¶œì—° ë°°ìš°ë¥¼ í‘œê¸°í•˜ê³  Item Click ì‹œ í•´ë‹¹ API Responseì— ìˆëŠ” linkë¥¼ ë°”íƒ•ìœ¼ë¡œ WebViewë¥¼ ë„ì›Œì¤ë‹ˆë‹¤. ì°¸ê³  : í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” Image Loadë¥¼ ìœ„í•´ Glideë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ìŒì€ Glide ê´€ë ¨ í¬ìŠ¤íŒ…ì…ë‹ˆë‹¤. ğŸ‘‰ğŸ¿ Glide Image ì²˜ë¦¬ í•´ë‹¹ ì–´í”Œì€ Networkê°€ ëŠê²¼ì„ ë•Œ í•  ìˆ˜ ìˆëŠ” ë™ì‘ì´ ì—†ê¸° ë•Œë¬¸ì— ConnectivityManagerë¥¼ í†µí•´ Network Callbackì„ ë°›ì•„ ë„¤íŠ¸ì›Œí¬ê°€ ëŠê²¼ì„ ë•Œ ë„¤íŠ¸ì›Œí¬ê°€ ëŠê²¼ë‹¤ëŠ” í™”ë©´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ í™”ë©´ì´ ì‚¬ë¼ì§€ê³  ì–´í”Œì„ ê³„ì† ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì°¸ê³  : í•´ë‹¹ í¬ìŠ¤íŒ…ì— ConnectivityManagerë¥¼ í†µí•œ Netwrok ê´€ë¦¬ì— ê´€í•˜ì—¬ ìì„¸íˆ ì •ë¦¬ í–ˆìŠµë‹ˆë‹¤.ğŸ‘‰ğŸ¿ Netwrok ê´€ë¦¬ í”„ë¡œì íŠ¸ì˜ íŒ¨í„´ì€ Claen Architecture MVVM ì„ ì±„íƒí•˜ì˜€ìŠµë‹ˆë‹¤. AAC ViewModel ì„ ì‚¬ìš©í•˜ì—¬ ì•± êµ¬ì„±ìš”ì†Œ ë³€ê²½ì—ë„ ì•±ì˜ ë°ì´í„°ì™€ ë‚´ìš©ì´ ì‚¬ë¼ì§€ì§€ ì•Šê²Œ ì„¤ê³„í•˜ì˜€ìŠµë‹ˆë‹¤. Single Activityë¥¼ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. Jetpack Navigationì„ í†µí•´ Single Activityë¥¼ ì ìš©í•˜ì˜€ìœ¼ë©°, ì´ë ‡ê²Œí•œ ì´ìœ  ì—­ì‹œ ì¬ì§ì¤‘ì¸ íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì„ ê³¼ì œì˜ ì£¼ì œì— ë²—ì–´ë‚˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ ëª¨ë‘ ë³´ì—¬ë“œë¦¬ê³ ì ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.ğŸš©ì°¸ê³ ğŸš© Single Activityì˜ ì¥ë‹¨ì  1ï¸âƒ£ ì¥ì  : Activity Stackì— Activityë¥¼ ìŒ“ì•„ë‘ê¸° ë³´ë‹¤. Fragment BackStackì—ì„œ Fragmentë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ ê´€ë¦¬ì—ì„œì˜ íš¨ìœ¨ë„ ì±™ê¸°ê³  í™”ë©´ ì „í™˜ì‹œ Activity ë³´ë‹¤ ìˆœì¡°ë¡­ìŠµë‹ˆë‹¤. 2ï¸âƒ£ ì¥ì  : ë°ì´í„° ê³µìœ ì— ìˆì–´ ì´ì ì´ ìˆìŠµë‹ˆë‹¤. Activityê°„ Dataë¥¼ ì „ë‹¬í•˜ë ¤ë©´ Intentë¥¼ í†µí•´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ê³¼ì •ì„ ê±°ì³ì•¼ í•˜ë©°, ì´ëŠ” ë©”ëª¨ë¦¬ ê³µìœ ì— ë¹„í•´ ê²°ì½” ê°€ë²¼ìš´ ì‘ì—…ì´ ì•„ë‹™ë‹ˆë‹¤. 3ï¸âƒ£ ì¥ì  : ì¬ì‚¬ìš©ì„±ì´ ì¦ê°€í•©ë‹ˆë‹¤. View ë‚˜ Business Logicì„ Fragment ë‹¨ìœ„ë¡œ ë¶„ë¦¬ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ëŠ” ì•„í‚¤í…ì³ ì›ì¹™ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì›ì¹™ì¸ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ê³  ë…ë¦½ì„±ì„ ê°€ì§€ê²Œ í•©ë‹ˆë‹¤. 4ï¸âƒ£ ì¥ì  : ìœ ì—°í•œ UI êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (Navigation Component, BottomSheetDialog ë“±..) 1ï¸âƒ£ ë‹¨ì  : ë¹„ë™ê¸°ë¡œ ì¸í•´ ì˜ˆê¸°ì¹˜ ì•Šì€ ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2ï¸âƒ£ ë‹¨ì  : Transaction ë‚´ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ ë””ë²„ê·¸ê°€ ë§¤ìš° ì–´ë ¤ìš´ IllegalStateExceptionì„ ë°œìƒì‹œí‚µë‹ˆë‹¤. StateFlow, Coroutine Channelì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. Clean Architectureì—ì„œ LiveData ì‚¬ìš©ì‹œ Viewì˜ ì˜ì¡´ì„±ì´ ì—†ëŠ” Domain, Data Layerì—ì„œëŠ” ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸°ì— ìì—°ìŠ¤ëŸ¬ìš´ ë°©ë²•ì´ ì—†ê¸°ì— StateFlow, Coroutine Channel ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.ì°¸ê³  : í•´ë‹¹ í¬ìŠ¤íŒ…ì— StateFlow, Channel ì— ê´€í•˜ì—¬ ìì„¸íˆ ì •ë¦¬ í–ˆìŠµë‹ˆë‹¤. ğŸ‘‰ğŸ¿ StateFlow, Channel Dagger-Hilt ë¥¼ í†µí•œ DI(Dependency Injection) ê´€ë¦¬ë¥¼ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. Domain Layer, Data Layer ì™€ ìµœì¢…ì ìœ¼ë¡œ Presentation Layerì˜ ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìœ„í•´ Hilt ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. Clean Architecture ë€ Clean Code ë¡œ ì†Œí”„íŠ¸ì›¨ì–´ ê³µí•™ì˜ ëŒ€ê°€ â€œë¡œë²„íŠ¸ C.ë§ˆí‹´â€ì´ ì œì‹œí•œ ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ ì² í•™ì…ë‹ˆë‹¤. ì†Œí”„íŠ¸ì›¨ì–´ì˜ ê´€ì‹¬ì‚¬ë¥¼ ê³„ì¸µë³„ë¡œ(domain, data, presentation)ë¡œ ë¶„ë¦¬í•˜ì—¬ ì½”ë“œ ì¢…ì†ì„±ì´ ì™¸ë¶€ë¡œë¶€í„° ë‚´ë¶€ë¡œ ì˜ì¡´í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ì£¼ìš” ì›ì¹™ì…ë‹ˆë‹¤.Clean Architecture ì¥ì  ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì´ ìš©ì´í•´ì§‘ë‹ˆë‹¤. ì°¸ê³  : ë©€í‹° ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±ì‹œ APIëŠ” ê°™ê³ (íšŒì›ê°€ì…, ë¡œê·¸ì¸) ì•±ì˜ êµ¬ì„±ë§Œ ë‹¤ë¥¸ ê²½ìš° Domain Layer, Data LayerëŠ” ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ Unit Testì— ìˆì–´ ìš©ì´í•´ì§‘ë‹ˆë‹¤. ì°¸ê³  : ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì€ UI, DB, ë°±ì—”ë“œ ì„œë²„ë“± ì™¸ë¶€ì™€ ë¬´ê´€í•˜ê²Œ í…ŒìŠ¤íŒ…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. UI ë…ë¦½ì„± ì°¸ê³  : UI ë³€ê²½ì´ ì‹œìŠ¤í…œì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìœ ì§€ë³´ìˆ˜ ìš©ì´ ì°¸ê³  : ê° ëª¨ë“ˆì˜ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ë¯€ë¡œ ë§Œì•½ ì½”ë“œ í•œ ê³³ì„ ë°”ê¾¼ë‹¤ê³  í•˜ì—¬ë„ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì„ ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. Android Clean Architecture êµ¬ì¡° ìœ„ì˜ ì‚¬ì§„ì„ ì°¸ê³ í•˜ì‹œë©´ ì´í•´ê°€ ì‰½ìŠµë‹ˆë‹¤. ìœ„ì˜ ì‚¬ì§„ì˜ EntityëŠ” Androidì—ì„œëŠ” Modelë¡œ ì •ì˜í•©ë‹ˆë‹¤. ì°¸ê³  : Domain Layerì˜ Modelì€ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ë³´ì—¬ì¤„ Model ë¡œ APIì—ì„œ ë‚´ë ¤ì˜¤ëŠ” Responseì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³  DTOë¥¼ í†µí•´ ì ‘ê·¼í•œë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. 1. Domain Layer ì–´ë–¤ ëª¨ë“ˆì—ë„ ì˜ì¡´ì ì´ì§€ ì•ŠëŠ” ë…ë¦½ì ì¸ Module ì…ë‹ˆë‹¤.(ìµœìƒìœ„ ëª¨ë“ˆ) ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê³³ ì…ë‹ˆë‹¤. Data Layerì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ interfaceë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. (Repository interfaceì •ì˜) ì•ˆë“œë¡œì´ë“œì— ì˜ì¡´ì„±ì„ ê°€ì§€ì§€ ì•Šì€ ìˆœìˆ˜ Java ë° Kotlin ì½”ë“œë¡œë§Œ êµ¬ì„±ë©ë‹ˆë‹¤. ì°¸ê³  : Paging3ë¥¼ ì‚¬ìš© ì‹œ Android ì˜ì¡´ì„±ì„ ê°€ì§€ê³ ìˆì§€ ì•Šì„ ë°©ë²•ì´ ì—†ì–´ ìœ„ì˜ ê·¸ë¦¼ì—ì„œëŠ” ì–´ì©” ìˆ˜ ì—†ì´ android ì˜ì¡´ì„±ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. UseCase í–‰ë™ë“¤ì˜ ìµœì†Œ ë‹¨ìœ„, ì¦‰ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì°¸ê³  : ì‚¬ìš©ìë¥¼ ê°€ì ¸ì˜¤ëŠ” UseCase, Loginì„ í•˜ëŠ” UseCase, Tokenì„ ê°€ì ¸ì˜¤ëŠ” UseCase ë“±ì´ í¬í•¨ ë©ë‹ˆë‹¤. ë³´í†µ UseCase í•˜ë‚˜ë‹¹ í•˜ë‚˜ì˜ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì°¸ê³  : UseCase ì´ë¦„ë§Œ ë³´ê³  ì´ê²ƒì´ ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•˜ëŠ”ì§€ ì§ì‘í•˜ê³  êµ¬ë¶„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Pesentation Layer ì—ì„œ ì–´ë– í•œ ì´ë²¤íŠ¸ë‚˜ ë™ì‘ì— ì˜í•˜ì—¬ í˜¸ì¶œë˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì„¤ê³„í•©ë‹ˆë‹¤. ì°¸ê³  : ë³´í†µ ViewModel ì˜ ìƒì„±ìì— DI(Dependency Inject)ì„ í†µí•´ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤. UseCase ìƒì„±ì‹œ ì–´ë–¤ DataBase or Remote(API)ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ì— ëŒ€í•œ ê³ ë¯¼ì„ í•˜ì§€ ì•Šê³  Domain Layerì—ì„œ ì •ì˜í•œ Repository í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤. Data Layer ì—ì„œ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ì§€ì— ëŒ€í•œ ì •ì˜ëŠ” í•˜ì§€ ì•Šê³  í•´ë‹¹ Repositoryì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤. ì°¸ê³  : ë‹¤ìŒì€ Naver ê²€ìƒ‰ API ë¥¼ í†µí•´ ê²€ìƒ‰ ê²°ê³¼ë¥¼ PagingSourceë¡œ ê°€ì ¸ì˜¤ëŠ” UseCase ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ class GetMovieListPagingDataUseCase @Inject constructor( private val naverRepository: NaverRepository) { operator fun invoke( query: StateFlow&lt;String&gt; ): Flow&lt;PagingData&lt;MovieInfoModel&gt;&gt; { return naverRepository.getMovieList(query) }} Repository ë°ì´í„°ì˜ ì¶œì²˜(Local DB ì¸ì§€ API ì‘ë‹µì¸ì§€ ë“±..)ì™€ ê´€ê³„ì—†ì´ ë™ì¼ Interfaceë¡œ ë°ì´í„°ì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ë§Œë“­ë‹ˆë‹¤. UseCaseê°€ í•„ìš”ë¡œ í•˜ëŠ” ë°ì´í„° ì €ì¥/ìˆ˜ì • ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” Interfaceì…ë‹ˆë‹¤. Interfaceì— í•¨ìˆ˜ë§Œ ì •ì˜í•˜ê³  êµ¬í˜„ì€ Data Layerì—ì„œ í•©ë‹ˆë‹¤. ì°¸ê³  : ë‹¤ìŒì€ Naver ê²€ìƒ‰ API ë¥¼ í†µí•´ ê²€ìƒ‰ ê²°ê³¼ë¥¼ PagingSourceë¡œ ê°€ì ¸ì˜¤ëŠ” Repository ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ interface NaverRepository { fun getMovieList(query: StateFlow&lt;String&gt;): Flow&lt;PagingData&lt;MovieInfoModel&gt;&gt;} Model ì•±ì˜ ì‹¤ì§ˆì ì¸ ë°ì´í„°ê°€ ì—¬ê¸°ì— êµ¬í˜„ë©ë‹ˆë‹¤. ì¦‰, UIì— ë³´ì—¬ì§ˆ ì‹¤ì œ ë°ì´í„°ì…ë‹ˆë‹¤. ì°¸ê³  : ë§Œì•½ API í˜¸ì¶œì„ í†µí•´ Responseë¥¼ ë°›ì•„ ì™”ë‹¤ë©´ í•´ë‹¹ Responseì— ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³  Domain Layerì˜ Modelì„ í†µí•´ ì ‘ê·¼í•œë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. DTO(Data Transfer Object)ì™€ ìœ ì‚¬í•˜ë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. ì°¸ê³  : ë‹¤ìŒì€ Naver ê²€ìƒ‰ API ë¥¼ í†µí•´ ê²€ìƒ‰ ê²°ê³¼ì˜ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ë³´ì—¬ì¤„ Model ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ data class MovieInfoModel( val title: String, val link: String, val image: String, val subtitle: String, val pubDate: String, val director: String, val actor: String, val userRating: Float) { val rating = userRating / 2} 2. Data Layer Domain Layerì—ì„œ ì •ì˜í•œ Repository êµ¬í˜„ì œ, dataSource, Retrofit API ì •ì˜, Room DB ì •ì˜, Mapper, API Response Model ë“±ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. Domain Layerì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ë² ì´ìŠ¤(Local DB)ì™€ ì„œë²„(Remote)ì˜ í†µì‹ ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. âœ”ï¸ Data Model : API í†µì‹ ì„ í†µí•´ì„œ ë°›ê²Œë˜ëŠ” Response ë‚˜ Local DBë¥¼ í†µí•´ ì–»ê²Œë˜ëŠ” Entityë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì°¸ê³  : ë‹¤ìŒì€ Naver ê²€ìƒ‰ API ë¥¼ í†µí•´ ê²€ìƒ‰ ê²°ê³¼ Response ì…ë‹ˆë‹¤. ğŸ‘‡ data class MovieResponse( @SerializedName(\"lastBuildDate\") val lastBuildDate: String, @SerializedName(\"total\") val total: Int, @SerializedName(\"start\") val start: Int, @SerializedName(\"display\") val display: Int, @SerializedName(\"items\") val items: List&lt;MovieInfo&gt;)data class MovieInfo( @SerializedName(\"title\") val title: String, @SerializedName(\"link\") val link: String, @SerializedName(\"image\") val image: String, @SerializedName(\"subtitle\") val subtitle: String, @SerializedName(\"pubDate\") val pubDate: String, @SerializedName(\"director\") val director: String, @SerializedName(\"actor\") val actor: String, @SerializedName(\"userRating\") val userRating: String) âœ”ï¸ DataSource ğŸš© RemoteDataSource : ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” interface ì…ë‹ˆë‹¤. ğŸš© LocalDataSource : Local Databaseì™€ì˜ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” interface ì…ë‹ˆë‹¤. ì°¸ê³  : ë‹¤ìŒì€ Naver ê²€ìƒ‰ API ì— ì ‘ê·¼í•˜ëŠ” RemoteDataSource ì…ë‹ˆë‹¤. ğŸ‘‡ interface RemoteDataSource { suspend fun requestSearchMovie( query: String, start: Int, display: Int ): Response&lt;MovieResponse&gt;} ì°¸ê³  : ë‹¤ìŒì€ Naver ê²€ìƒ‰ API ì— ì ‘ê·¼í•˜ëŠ” RemoteDataSourceì˜ êµ¬í˜„ì²´ì…ë‹ˆë‹¤. Hiltë¡œ ë¶€í„° ìƒì„±ìì— NaverApiServiceë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤. ğŸ‘‡ class RemoteDataSourceImpl @Inject constructor( private val naverApiService: NaverApiService) : RemoteDataSource { override suspend fun requestSearchMovie( query: String, start: Int, display: Int ): Response&lt;MovieResponse&gt; { return naverApiService.searchMovie(query, start, display) }} âœ”ï¸ Api ğŸš© Retrofit ì„ ì´ìš©í•œ Netwrok í†µì‹ ì„ í•˜ê¸° ìœ„í•œ interface ì…ë‹ˆë‹¤. ğŸš© Urlì— ì ‘ê·¼í•˜ëŠ” í•¨ìˆ˜ë§Œ ë§Œë“¤ì–´ ë†“ê³ , Retrofitì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì„¸íŒ…ì€ Hiltë¥¼ í†µí•´í•©ë‹ˆë‹¤. ì°¸ê³  : GET ë°©ì‹ì„ ì‚¬ìš©í•˜ë©° Queryë¡œ query, start, displayë¥¼ ë„£ì–´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ startëŠ” ì•„ì´í…œ ì‹œì‘ indexì´ë©°, displayëŠ” limit ì…ë‹ˆë‹¤.ë‹¤ìŒì€ Naver ê²€ìƒ‰ API URLì— ì ‘ê·¼í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤. ğŸ‘‡ interface NaverApiService { @GET(\"/v1/search/movie\") suspend fun searchMovie( @Query(\"query\") query: String, @Query(\"start\") start: Int, @Query(\"display\") display: Int ): Response&lt;MovieResponse&gt;} âœ”ï¸ Repository (Domain Layerì˜ Repository êµ¬í˜„ì²´) ğŸš© DataSource ë¥¼ interface í˜•íƒœë¡œ ì°¸ì¡°í•˜ì—¬ Domain Layerì˜ Repositoryë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì°¸ê³  : DI(Dependency Inject)ì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±ìì— DataSourceë¥¼ ì£¼ì…ë°›ìŠµë‹ˆë‹¤. ğŸš© ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ì§€ì— ëŒ€í•œ ì •ì˜ë¥¼ í•˜ì—¬ UseCaseì—ì„œ í•´ë‹¹ Repository êµ¬í˜„ì²´ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì°¸ê³  : í•´ë‹¹ ì½”ë“œì—ì„œëŠ” Paging3ë¥¼ ì‚¬ìš©í•˜ì—¬ Naver API Response ê²°ê³¼ë¥¼ Flow&lt;PagingSource&gt; ì˜ í˜•íƒœë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤. ğŸ‘‡ class NaverRepositoryImpl @Inject constructor( private val remoteDataSource: RemoteDataSource) : NaverRepository { override fun getMovieList(query: StateFlow&lt;String&gt;): Flow&lt;PagingData&lt;MovieInfoModel&gt;&gt; { return Pager( config = PagingConfig(pageSize = 10), pagingSourceFactory = { MovieInfoListPagingDataSource( remoteDataSource = remoteDataSource, searchQuery = query, limit = 10 ) } ).flow.distinctUntilChanged().flowOn(Dispatchers.IO) }} âœ”ï¸ Mapper ğŸš© Data Model ì— ì˜í•´ ê°€ì ¸ì˜¨ Dataë¥¼ Domain Model ë¡œ ë§ê²Œ ë°”ê¿”ì£¼ëŠ” ë§¤í•‘ ì‘ì—…ì„ í•˜ì—¬ UseCase ì—ì„œ Domain Model ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì°¸ê³  : API ë¥¼ í†µí•´ ë°›ì•„ì˜¨ Responseë¥¼ UIì— ë§ëŠ” Domain Modelë¡œ ë§µí•‘ ğŸ‘‡ (Kotlin í™•ì¥ í•¨ìˆ˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤.) object ObjectMapper { // List&lt;MovieInfo&gt; -&gt; List&lt;MovieInfoModel&gt; ë¡œ ë³€í™˜ fun List&lt;MovieInfo&gt;.toMovieInfoListModel(): List&lt;MovieInfoModel&gt; = map { MovieInfoModel( title = it.title, link= it.link, image= it.image, subtitle= it.subtitle, pubDate= it.pubDate, director= it.director, actor= it.actor, userRating= it.userRating.toFloat() ) } // MovieInfo -&gt; MovieInfoModel ë¡œ ë³€í™˜ fun MovieInfo.toMovieInfoModel(): MovieInfoModel = MovieInfoModel( title = this.title, link= this.link, image= this.image, subtitle= this.subtitle, pubDate= this.pubDate, director= this.director, actor= this.actor, userRating= this.userRating.toFloat() )} âœ”ï¸ MovieInfoListPagingDataSource ğŸš© Naverë¡œ ë¶€í„° ë°›ì•„ì˜¤ëŠ” Response ì˜ ê°’ì„ PagingSourceì— ë‹´ì•„ ë°˜í™˜í•©ë‹ˆë‹¤. ì°¸ê³  í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” Paging3ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. Hiltë¥¼ ì‚¬ìš©í•˜ì—¬ remoteDataSource ë¥¼ ìƒì„±ìì— ì£¼ì…ë°›ê³  ìˆìŠµë‹ˆë‹¤. ì°¸ê³  : í•´ë‹¹ í¬ìŠ¤íŒ…ì— Paging3ì— ê´€í•˜ì—¬ ìì„¸íˆ ì •ë¦¬ í–ˆìŠµë‹ˆë‹¤. ğŸ‘‰ğŸ¿ Paging3ì— ëŒ€í•˜ì—¬ class MovieInfoListPagingDataSource @Inject constructor( private val remoteDataSource: RemoteDataSource, private val searchQuery: StateFlow&lt;String&gt;, private val limit: Int) : PagingSource&lt;Int, MovieInfoModel&gt;() { override suspend fun load(params: LoadParams&lt;Int&gt;): LoadResult&lt;Int, MovieInfoModel&gt; { val pageNumber = params.key ?: 1 try { val response = withContext(Dispatchers.IO) { remoteDataSource.requestSearchMovie( query = searchQuery.value, start = pageNumber, display = limit ) } if (response.isSuccessful) { response.body()?.let { val movieList = it.items.toMovieInfoListModel() /** * nextKey -&gt; naver Apiì˜ start ëŠ” index ì´ê³ , í˜„ì¬ display(limit) ê°€ 10 ì´ë¯€ë¡œ * 10 ì´í›„ì— start ê°’ì€ 11 ì´ ë˜ì–´ì•¼í•¨ * ìŠ¤í¬ë¡¤ë˜ì–´ í˜ì´ì§€ê°€ ì¶”ê°€ë ë•Œ ë§ˆë‹¤ 10ê°œì”© ê°€ì ¸ì˜¨ë‹¤. */ return LoadResult.Page( data = movieList, prevKey = null, nextKey = if (it.items.size &gt;= limit) { pageNumber + limit } else { null } ) } } return LoadResult.Error( LoadException(\"ì˜í™” ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.\") ) } catch (e: Exception) { Timber.e(\"paging catch Error -&gt; ${e.message}\") return LoadResult.Error(e) } } override fun getRefreshKey(state: PagingState&lt;Int, MovieInfoModel&gt;): Int? { // ìƒˆë¡œê³ ì¹¨ ë ë•Œ í•­ìƒ ì „ë¶€ ìƒˆë¡œê³ ì¹¨ ë˜ë„ë¡ null ì„ return return null }}3. Presentation Layer (App Module) í™”ë©´ì˜ ì…ë ¥ì— ëŒ€í•œ ì²˜ë¦¬ ë“± UIì™€ ê´€ë ¨ëœ ë¶€ë¶„ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì°¸ê³  : Activity, Fragment, View, ViewModel, Di ë“±ì„ í¬í•¨í•©ë‹ˆë‹¤. Androidì— ë†’ì€ ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. Domain Layer, Data Layer ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ViewModelì—ì„œ domain layerì˜ UseCaseë¥¼ ì£¼ì… ë°›ì•„ ì‚¬ìš©í•˜ì—¬ ê° ViewModelë‹¹ ê¸°ëŠ¥ ì´ ë¬´ì—‡ì¸ì§€ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. MVVM íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ViewModelì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ View(Activity/Fragment)ì— ë„˜ê²¨ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” Single Activityë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤. ì°¸ê³  Single Activityì˜ ì¥ë‹¨ì  1ï¸âƒ£ ì¥ì  : Activity Stackì— Activityë¥¼ ìŒ“ì•„ë‘ê¸° ë³´ë‹¤. Fragment BackStackì—ì„œ Fragmentë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ ê´€ë¦¬ì—ì„œì˜ íš¨ìœ¨ë„ ì±™ê¸°ê³  í™”ë©´ ì „í™˜ì‹œ Activity ë³´ë‹¤ ìˆœì¡°ë¡­ìŠµë‹ˆë‹¤. 2ï¸âƒ£ ì¥ì  : ë°ì´í„° ê³µìœ ì— ìˆì–´ ì´ì ì´ ìˆìŠµë‹ˆë‹¤. Activityê°„ Dataë¥¼ ì „ë‹¬í•˜ë ¤ë©´ Intentë¥¼ í†µí•´ ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ê³¼ì •ì„ ê±°ì³ì•¼ í•˜ë©°, ì´ëŠ” ë©”ëª¨ë¦¬ ê³µìœ ì— ë¹„í•´ ê²°ì½” ê°€ë²¼ìš´ ì‘ì—…ì´ ì•„ë‹™ë‹ˆë‹¤. 3ï¸âƒ£ ì¥ì  : ì¬ì‚¬ìš©ì„±ì´ ì¦ê°€í•©ë‹ˆë‹¤. View ë‚˜ Business Logicì„ Fragment ë‹¨ìœ„ë¡œ ë¶„ë¦¬ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ëŠ” ì•„í‚¤í…ì³ ì›ì¹™ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì›ì¹™ì¸ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ê³  ë…ë¦½ì„±ì„ ê°€ì§€ê²Œ í•©ë‹ˆë‹¤. 4ï¸âƒ£ ì¥ì  : ìœ ì—°í•œ UI êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (Navigation Component, BottomSheetDialog ë“±..) 1ï¸âƒ£ ë‹¨ì  : ë¹„ë™ê¸°ë¡œ ì¸í•´ ì˜ˆê¸°ì¹˜ ì•Šì€ ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 2ï¸âƒ£ ë‹¨ì  : Transaction ë‚´ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ ë””ë²„ê·¸ê°€ ë§¤ìš° ì–´ë ¤ìš´ IllegalStateExceptionì„ ë°œìƒì‹œí‚µë‹ˆë‹¤. âœ”ï¸ Base ğŸš© Presentaion Layerì˜ Baseì— ì‚¬ìš©ë  Class ëª¨ìŒì…ë‹ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ì—ëŠ” BaseActivity, BaseFragment, BaseViewModel, BaseDialogFragment, MyLoadStateAdapter ê°€ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì°¸ê³  -&gt; ê¹ƒí—ˆë¸Œ âœ”ï¸ Di ğŸš© DI(Dependency Injection) ì¦‰ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ëŠ” í˜ì§€í‚¤ ì…ë‹ˆë‹¤. 1ï¸âƒ£ ApiModule : Hilt Moduleë¡œ ê´€ë¦¬í•˜ë©° @InstallInì— SingletonComponentë¥¼ ë„£ì–´ ê´€ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤. SingletonComponentëŠ” @Singleton ì–´ë…¸í…Œì´ì…˜ê³¼ ê°™ì´ ì‚¬ìš©ë˜ë©°, Applicationì´ onCreate()ê°€ ë˜ë©´ ìƒì„±ë˜ê³ , Applicationì´ onDestory()ê°€ ë˜ë©´ ìë™ìœ¼ë¡œ íŒŒê´´ë©ë‹ˆë‹¤. ApiModule ì—ì„œëŠ” Retrofit ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ Hilt ë¥¼ í†µí•´ Provideí•©ë‹ˆë‹¤. í•´ë‹¹ ë¶€ë¶„ì—ì„œ OkHttp3 Interceptor ë¥¼ ì‚¬ìš©í•˜ì—¬ Header ë¶€ë¶„ì— X-Naver-Client-Id ì™€ X-Naver-Client-Secretë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. Hilt ë¥¼ í†µí•´ NaverApiServiceë¥¼ ì œê³µí•˜ê³  ìˆìœ¼ë©°, í•´ë‹¹ NaverApiServiceëŠ” RemoteDataSourceì˜ ìƒì„±ìì— ì£¼ì…ë©ë‹ˆë‹¤. ë˜í•œ RemoteDataSource ì—­ì‹œ Hiltë¥¼ í†µí•´ ì œê³µë˜ê³  ìˆìŠµë‹ˆë‹¤. (ì´ë ‡ê²Œ ì œê³µëœ RemoteDataSourceëŠ” Hiltë¥¼ í†µí•´ RepositoryModuleì˜ ìƒì„±ìì—ì„œ ì£¼ì… ë°›ìŠµë‹ˆë‹¤.) ë‹¤ìŒì€ ApiModule ì½”ë“œ ì…ë‹ˆë‹¤. ğŸ‘‡ ê¹ƒí—ˆë¸Œ @Module@InstallIn(SingletonComponent::class)object ApiModule { @Singleton @Provides fun provideRemoteDataSource( naverApiService: NaverApiService ): RemoteDataSource { return RemoteDataSourceImpl( naverApiService ) } @Singleton @Provides fun provideNaverApiService( retrofit: Retrofit ): NaverApiService { return retrofit.create(NaverApiService::class.java) } @Singleton @Provides fun provideRetrofit( client: OkHttpClient, converter: GsonConverterFactory ): Retrofit { return Retrofit.Builder() .baseUrl(BuildConfig.API_HOST) .client(client) .addConverterFactory(converter) .build() } @Singleton @Provides fun provideGsonConverterFactory(): GsonConverterFactory { return GsonConverterFactory.create() } @Singleton @Provides fun provideOkHttpClient( logging: HttpLoggingInterceptor, interceptor: Interceptor, ): OkHttpClient = OkHttpClient.Builder().apply { if (BuildConfig.DEBUG) { addInterceptor(logging) } addInterceptor(interceptor) }.build() @Singleton @Provides fun provideLoggingInterceptor(): HttpLoggingInterceptor = HttpLoggingInterceptor().apply { level = if (BuildConfig.DEBUG) { HttpLoggingInterceptor.Level.BODY } else { HttpLoggingInterceptor.Level.NONE } } @Singleton @Provides fun provideInterceptor(): Interceptor = Interceptor { chain -&gt; val response = chain.proceed( chain.request().newBuilder().apply { addHeader(\"X-Naver-Client-Id\", BuildConfig.NAVE_CLIENT_ID) addHeader(\"X-Naver-Client-Secret\", BuildConfig.NAVE_CLIENT_SECRET) }.build() ) response }} 2ï¸âƒ£ RepositoryModule : Hilt Moduleë¡œ ê´€ë¦¬í•˜ë©° @InstallInì— SingletonComponentë¥¼ ë„£ì–´ ê´€ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤. SingletonComponentëŠ” @Singleton ì–´ë…¸í…Œì´ì…˜ê³¼ ê°™ì´ ì‚¬ìš©ë˜ë©°, Applicationì´ onCreate()ê°€ ë˜ë©´ ìƒì„±ë˜ê³ , Applicationì´ onDestory()ê°€ ë˜ë©´ ìë™ìœ¼ë¡œ íŒŒê´´ë©ë‹ˆë‹¤. Hiltë¥¼ í†µí•´ ìƒì„±ìë¡œ ë¶€í„° RemoteDataSourceë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©° NaverRepositoryë¥¼ Hiltë¥¼ í†µí•´ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒì€ Repository Module Code ì…ë‹ˆë‹¤. ğŸ‘‡ ê¹ƒí—ˆë¸Œ @Module@InstallIn(SingletonComponent::class)object RepositoryModule { @Provides @Singleton fun provideNaverRepository( remoteDataSource: RemoteDataSource ): NaverRepository { return NaverRepositoryImpl(remoteDataSource) }} 3ï¸âƒ£ UseCaseModule : Hilt Moduleë¡œ ê´€ë¦¬í•˜ì—¬ @InstallIn ì— ViewModelComponent ë¥¼ ë„£ì–´ ê´€ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ UseCaseëŠ” ViewModel ì˜ ìƒì„±ìì— ì£¼ì…ë°›ì•„ ì‚¬ìš©ë©ë‹ˆë‹¤. ë”°ë¼ì„œ @InstallIn ì— ViewModelComponentë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ViewModelComponent ëŠ” @ViewModelScope ì™€ ê°™ì´ ì‚¬ìš©ë˜ë©°, AAC ViewModelì˜ ìƒëª…ì£¼ê¸°ì— ë”°ë¼ ê´€ë¦¬ë©ë‹ˆë‹¤. ì¦‰, ViewModel ì´ ìƒì„±ë˜ë©´ ìƒì„±ë˜ê³ , ViewModelì˜ onCleared()ê°€ í˜¸ì¶œë˜ë©´ ìë™ìœ¼ë¡œ íŒŒê´´ë©ë‹ˆë‹¤. ë‹¤ìŒì€ UseCase Module Code ì…ë‹ˆë‹¤. ğŸ‘‡ ê¹ƒí—ˆë¸Œ @Module@InstallIn(ViewModelComponent::class)object UseCaseModule { @Provides @ViewModelScoped fun provideGetMovieListPagingDataUseCase( naverRepository: NaverRepository ): GetMovieListPagingDataUseCase { return GetMovieListPagingDataUseCase(naverRepository) }} âœ”ï¸ MovieApplication ğŸš© Hiltë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ê³  Debugì— í•„ìš”í•œ Timberë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. ì°¸ê³  : @HiltAndroidApp -&gt; ì»´íŒŒì¼ íƒ€ì„ ì‹œ í‘œì¤€ ì»´í¬ë„ŒíŠ¸ ë¹Œë”©ì— í•„ìš”í•œ í´ë˜ìŠ¤ë“¤ì„ ì´ˆê¸°í™” í•´ì¤ë‹ˆë‹¤. Hiltë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì•±ì€ @HiltAndroidApp ì´ ë‹¬ë¦° Application í´ë˜ìŠ¤ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. @HiltAndroidAppclass MovieApplication : Application() { override fun onCreate() { super.onCreate() if (BuildConfig.DEBUG) { Timber.plant(TimberDebugTree()) } }} âœ”ï¸ Activity ğŸš© í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” MainActivity ì™€ WebViewActivityë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. 1ï¸âƒ£ MainActivity : í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” SingleActivityë¥¼ ì±„íƒí•˜ê³  ìˆì–´ MainActivity ì—ì„œëŠ” Navigationì˜ NavHostFragmentë¥¼ ì—°ê²°í•´ì£¼ê³  ìˆìœ¼ë©°, Network ê´€ë¦¬ë¥¼ í†µí•´ Network Callbackì„ ë“±ë¡í•˜ê³  Network ìƒíƒœ ê°’ì„ Observing í•˜ëŠ” ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë’¤ë¡œ ê°€ê¸° í´ë¦­ ì‹œ í•œë²ˆ ëˆŒë €ì„ ê²½ìš° â€œí•œë²ˆ ë” ëˆ„ë¥´ë©´ ì¢…ë£Œë©ë‹ˆë‹¤.â€ ë¼ëŠ” SnackBarë¥¼ ë„ì›Œì£¼ê¸° ìœ„í•´ BackStackì„ ê´€ë¦¬í•˜ëŠ” ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ 2ï¸âƒ£ WebViewActivity : ì˜í™” ìƒì„¸ ì •ë³´ë¥¼ WebViewë¡œ ë„ì›Œì£¼ê¸° ìœ„í•´ ìƒì„±í–ˆìŠµë‹ˆë‹¤. onPause()ì™€ onResume(), onDestory()ì— ë”°ë¼ WebViewë¥¼ ê´€ë¦¬í•´ì£¼ê³  ìˆìœ¼ë©°, Intentë¥¼ í†µí•´ Main -&gt; WebView ë¡œ ì´ë™ ì‹œ ë‚´ë¶€/ì™¸ë¶€ WebViewë¥¼ ë„ì›Œì¤„ ìˆ˜ ìˆëŠ” ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ WebViewActivityëŠ” ë‚´ë¶€ ì›¹ë·° ì¼ ê²½ìš° ë™ì‘í•©ë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ âœ”ï¸ Fragment ğŸš© í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” HomeFragment ì™€ NetworkFragmentë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤. 1ï¸âƒ£ HomeFragment : ë„¤ì´ë²„ Open API ë¥¼ í™œìš©í•˜ì—¬ ì˜í™” ì •ë³´ë¥¼ ë°›ì•„ì™€ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë˜í•œ NavHostFragmentë¡œ ëª¨ë“  Navgigationì˜ ì‹œì‘ì ì´ ë©ë‹ˆë‹¤. ë„¤ì´ë²„ Open API ë¥¼ í™œìš©í•˜ì—¬ ì˜í™” ì •ë³´ë¥¼ ë°›ì•„ì™€ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ ì£¼ê¸° ìœ„í•´ RecyclerView ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ë˜í•œ PagingDataì˜ Load ìƒíƒœì— ë”°ë¼ DataBindingìœ¼ë¡œ Viewë¥¼ Controll í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ 2ï¸âƒ£ HomeViewModel : ì•ì„œ Domain Layerì˜ UseCaseë¥¼ Hiltë¥¼ í†µí•´ ìƒì„±ìì— ì£¼ì…ë°›ì•„ ë„¤ì´ë²„ Open API ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ê°€ì ¸ì˜¨ ë°ì´í„°ëŠ” HomeFragment ì—ì„œ Observing í•˜ì—¬ RecyclerView ì— ë„£ì–´ì¤ë‹ˆë‹¤. ë˜í•œ MutableStateFlowë¥¼ ì‚¬ìš©í•˜ì—¬ Data Bindingì„ í†µí•´ HomeFragment ì˜ Viewë¥¼ Controll í•´ì£¼ê³  ìˆìœ¼ë©°, Coroutine Channel ì„ í†µí•´ í•´ë‹¹ Click Eventì˜ Listenerë¥¼ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ 3ï¸âƒ£ NetworkFragment : ë„¤íŠ¸ì›Œí¬ê°€ ëŠê²¼ì„ ë•Œ ë³´ì—¬ì£¼ëŠ” DialogFragment ì…ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ë©´ ìë™ìœ¼ë¡œ dialogë¥¼ dissmiss í•´ì£¼ëŠ” ì½”ë“œë¥¼ í¬í•¨í•˜ê³  í•´ë‹¹ ë‹¤ì´ì–¼ë¡œê·¸ê°€ ë³´ì—¬ì§ˆ ë•Œ ë‹¤ë¥¸ Viewì—ì„œëŠ” í•´ë‹¹ ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ Cancel í•˜ì§€ ëª»í•˜ê²Œí•˜ëŠ” ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 4ï¸âƒ£ NetworkViewModel : ConnectivityManagerë¥¼ í†µí•´ Network Callbackì„ ë°›ì•„ Networkë¥¼ ê´€ë¦¬í•˜ëŠ” ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ViewModelì€ MainActivityì—ì„œ ìƒì„±ë˜ë©°, NetworkFragment ì—ì„œëŠ” FragmentXë¥¼ ì‚¬ìš©í•˜ì—¬ activityViewModels() ì½”ë“œë¡œ Fragment ìƒíƒœë¥¼ ê³µìœ í•©ë‹ˆë‹¤. Network ê´€ë¦¬ì— ëŒ€í•´ì„œëŠ” ì˜†ì˜ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ğŸ‘‰ Android ConnectivityManagerë¥¼ í†µí•œ Network ê´€ë¦¬ âœ”ï¸MovieInfoAdapter(PagingAdapter) RecyclerView ì— ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ê¸°ë³¸ UI êµ¬ì„±ìš”ì†Œ ì…ë‹ˆë‹¤. PagingDataë¥¼ ì…ë ¥ ìœ í˜•ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ë‚´ë¶€ load ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤. BackGround Thread ì—ì„œ DiffUtil ì„ ì‚¬ìš©í•˜ì—¬ ë¯¸ì„¸ ì¡°ì •í•œ í›„ ë°ì´í„°ë¥¼ loadí•˜ë¯€ë¡œ UI Threadì— ìƒˆ í•­ë³µì„ ì¶”ê°€í•˜ëŠ” ë™ì•ˆ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Root Click Listenerë¥¼ í¬í•¨í•˜ê³  ìˆê³  Domain Layerì— ì •ì˜í•œ MovieInfoModelì„ ë°ì´í„°ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. í•´ë‹¹ Adapter ë˜í•œ Data Bindingì„ í†µí•´ Viewì— ë°ì´í„°ë¥¼ ì—°ê²°í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì°¸ê³  : ê¹ƒí—ˆë¸Œ ì°¸ê³  : í•´ë‹¹ í¬ìŠ¤íŒ…ì— Paging3ì— ê´€í•˜ì—¬ ìì„¸íˆ ì •ë¦¬ í–ˆìŠµë‹ˆë‹¤. ğŸ‘‰ğŸ¿ Paging3ì— ëŒ€í•˜ì—¬ âœ”ï¸Utils ğŸš© í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë°ì´í„° ë°”ì¸ë”©ì„ ìœ„í•œ BindingAdapters, Flowë¥¼ Lifecyclerì— ë§ê²Œ Observingí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ FlowObserver, keyBoardUtils, Listener, TimberDebugTree ë“±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 1ï¸âƒ£ BindingAdpaters ê¹ƒí—ˆë¸Œ ì„œë²„ì—ì„œ ë°›ì•„ì˜¤ëŠ” image Urlì„ ImageViewì— ë„£ì–´ì£¼ê¸° ìœ„í•´ Glideë¥¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜, Html ì„ Stringìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜, ì¤‘ë³µ í´ë¦­ ë°©ì§€ í•¨ìˆ˜ ë“±ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì°¸ê³  : ë‹¤ìŒì€ Glideì— ëŒ€í•´ ìì„¸í•œ ë‚´ìš©ì„ ê¸°ë¡í•œ í¬ìŠ¤íŒ…ì…ë‹ˆë‹¤. ğŸ‘‰ğŸ¿ Glide Image ì²˜ë¦¬ image Load í•¨ìˆ˜ ğŸ‘‡ @BindingAdapter(value = [\"loadImage\", \"placeHolder\", \"error\"], requireAll = false)fun ImageView.loadImage( imageUrl: String, @DrawableRes placeholder: Int = 0, @DrawableRes error: Int = 0,) { // imageUrl ì´ ë¹„ì–´ìˆì„ ë•Œ ë¡œì§ ì¶”ê°€ if (imageUrl.isEmpty()) { if (placeholder != 0) { this.setImageResource(placeholder) } return } val options = RequestOptions() @SuppressLint(\"CheckResult\") if (error != 0) { // ë¡œë“œê°€ ì‹¤íŒ¨í•  ê²½ìš° í‘œì‹œí•  ë¦¬ì†ŒìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. options.error(error) } Glide.with(this.context) .setDefaultRequestOptions(options) .load(imageUrl).apply { @SuppressLint(\"CheckResult\") if (placeholder != 0) { // ë¦¬ì†ŒìŠ¤ê°€ ë¡œë“œë˜ëŠ” ë™ì•ˆ í‘œì‹œí•  ë“œë¡œì–´ë¸” ë¦¬ì†ŒìŠ¤ì˜ Android ë¦¬ì†ŒìŠ¤ IDë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. apply(options.placeholder(placeholder)) } } .into(object : CustomTarget&lt;Drawable&gt;() { override fun onResourceReady(resource: Drawable, transition: Transition&lt;in Drawable&gt;?) { setImageDrawable(resource) } override fun onLoadCleared(placeholder: Drawable?) { setImageDrawable(placeholder) } })} ì¤‘ë³µ í´ë¦­ ë°©ì§€ í•¨ìˆ˜ @BindingAdapter(value = [\"onSingleClick\", \"interval\"], requireAll = false)fun View.onSingleClick(listener: View.OnClickListener? = null, interval: Long? = null) { if (listener != null) { setOnClickListener(object : Listener.OnSingleClickListener(interval ?: 1000L) { override fun onSingleClick(v: View?) { listener.onClick(v) } }) } else { setOnClickListener(null) }} Htmlì„ Stringìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜ @BindingAdapter(\"htmlToString\")fun TextView.htmlToString(text: String) { this.text = if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) { Html.fromHtml(text, Html.FROM_HTML_MODE_LEGACY).toString() } else { @Suppress(\"DEPRECATION\") Html.fromHtml(text).toString() }} 2ï¸âƒ£ FlowObserver : Flowë¥¼ Activity/Fragment ì˜ Lifecyclerì— ë§ê²Œ Observing í•˜ê¸°ìœ„í•´ ë§Œë“  í´ë˜ìŠ¤ ì…ë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ í•´ë‹¹ í¬ìŠ¤íŒ…ì— FlowObserverì— ê´€í•˜ì—¬ ìì„¸íˆ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤. ğŸ‘‰ğŸ¿ StateFlow, Channel// FlowObserver -&gt; lifecycle ì´ onStartê°€ ë˜ë©´ êµ¬ë… ì‹œì‘, onStopì´ ë˜ë©´ êµ¬ë… ì·¨ì†Œclass FlowObserverInStop&lt;T&gt;( lifecycleOwner: LifecycleOwner, private val flow: Flow&lt;T&gt;, private val collector: suspend (T) -&gt; Unit) { private var job: Job? = null init { lifecycleOwner.lifecycle.addObserver(LifecycleEventObserver { source, event -&gt; when (event) { Lifecycle.Event.ON_START -&gt; { job = source.lifecycleScope.launch { flow.collect { collector(it) } } } Lifecycle.Event.ON_STOP -&gt; { job?.cancel() job = null } else -&gt; {} } }) }}inline fun &lt;reified T&gt; Flow&lt;T&gt;.observeOnLifecycleStop( lifecycleOwner: LifecycleOwner, noinline collector: suspend (T) -&gt; Unit) = FlowObserverInStop(lifecycleOwner, this, collector)// .onEach{ } ì‚¬ìš©í• ë•Œ ì‚¬ìš©inline fun &lt;reified T&gt; Flow&lt;T&gt;.observeInLifecycleStop( lifecycleOwner: LifecycleOwner) = FlowObserverInStop(lifecycleOwner, this) {} 3ï¸âƒ£ Listener : ì¤‘ë³µ í´ë¦­ ë°©ì§€ë¥¼ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ class Listener { abstract class OnSingleClickListener(private val minIntervalMS: Long = 1000L) : View.OnClickListener { // ë§ˆì§€ë§‰ìœ¼ë¡œ í´ë¦­í•œ ì‹œê°„ private var mLastClickTime: Long = 0 abstract fun onSingleClick(v: View?) override fun onClick(v: View?) { //í˜„ì¬ í´ë¦­í•œ ì‹œê°„ val currentClickTime = SystemClock.uptimeMillis() // ì´ì „ì— í´ë¦­í•œ ì‹œê°„ê³¼ í˜„ì¬ì‹œê°„ì˜ ì°¨ì´ val elapsedTime = currentClickTime - mLastClickTime // ë§ˆì§€ë§‰í´ë¦­ì‹œê°„ ì—…ë°ì´íŠ¸ mLastClickTime = currentClickTime // ë‚´ê°€ ì •í•œ ì¤‘ë³µí´ë¦­ì‹œê°„ ì°¨ì´ë¥¼ ì•ˆë„˜ì—ˆìœ¼ë©´ í´ë¦­ì´ë²¤íŠ¸ ë°œìƒëª»í•˜ê²Œ return if (elapsedTime &lt;= minIntervalMS) return // ì¤‘ë³µí´ë¦­ì‹œê°„ ì•„ë‹ˆë©´ ì´ë²¤íŠ¸ ë°œìƒ onSingleClick(v) } }} 4ï¸âƒ£ KeyboardUtils : í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” Keyboardê°€ ë³´ì´ì§€ ì•Šì„ë•Œ Focusë¥¼ í•´ì œí•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ê¹ƒí—ˆë¸Œ OnGlobalLayoutListener ì„ ì‚¬ìš©í•˜ì—¬ View ì˜ ì „ì²´ ì˜ì—­ì´ ë°”ë€”ë•Œ Eventë¥¼ ë°›ì•„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì£¼ì˜ : windowSoftInputMode ì— adjustNothing ì„ ì‚¬ìš©í•˜ë©´ View ì˜ ë³€ê²½ì„ ì•Œ ìˆ˜ ì—†ì–´ Listener ê°€ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§ˆì¹˜ë©°í•´ë‹¹ í¬ìŠ¤íŒ…ëŠ” Naver Open APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜í™”ë¥¼ ê²€ìƒ‰í•˜ê³  ê²€ìƒ‰í•œ ì˜í™”ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ì•±ì— ëŒ€í•˜ì—¬ ì‚¬ìš© ê¸°ìˆ ì— ëŒ€í•œ ì„¤ëª…ì— ì´ˆì ì— ë‘ê³  ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.ìµœëŒ€í•œ ì£¼ì–´ì§„ ì£¼ì œì— ë²—ì–´ë‚˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ ì œê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì„ë“¤ ì ìš©í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.í”„ë¡œì íŠ¸ ì „ì²´ ì½”ë“œ" }, { "title": "Android Coroutine Flow", "url": "/posts/Android-Coroutine-Flow/", "categories": "Android, Coroutine", "tags": "android, coroutine, flow", "date": "2022-07-18 15:28:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì˜¤ëŠ˜ì€ Kotlin Coroutines Flowì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.suspend í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ë¡œ ë‹¨ì¼ ê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤ .FlowëŠ” ë¹„ë™ê¸°ë¡œ ê³„ì‚°ëœ ì—¬ëŸ¬ê°’ì„ ë¦¬í„´ í•©ë‹ˆë‹¤. ì—°ì†ì ìœ¼ë¡œ ê°’ì„ ê°€ì ¸ì™€ì•¼í•˜ëŠ” ìƒí™©(ì‹œì‹œê°ê° ë³€í™”í•˜ëŠ” ì˜¨ë„ë¥¼ ê°€ì ¸ì˜¬ ë•Œ)ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, ë¹„ë™ê¸°ë¡œ ê³„ì‚°ëœ ê°’ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ€ Flow Coroutineì˜ FlowëŠ” Data Streamì´ë©°, Coroutine ìƒì—ì„œ Reactive Programmingì„ ì§€ì›í•˜ê¸° ìœ„í•œ êµ¬ì„±ìš”ì†Œì…ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‡ Reactive Programming(ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë°) : Dataê°€ ë³€ê²½ ë  ë•Œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œì¼œ ë°ì´í„°ë¥¼ ê³„ì†í•´ì„œ ì „ë‹¬í•˜ë„ë¡ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì…ë‹ˆë‹¤. Clod Stream í˜•ì‹ìœ¼ë¡œ, ì™¸ë¶€ì—ì„œ ì„¤ì •í•˜ëŠ” ë°ì´í„°ê°€ ì•„ë‹Œ ìƒì„± ì‹œ í•´ë‹¹ ë°ì´í„°ë¥¼ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ ë‹¨ í•œëª…ì˜ êµ¬ë…ìê°€ ì¡´ì¬ í•˜ë©°, ë°ì´í„° ë°œìƒ ì‹œì ì˜ ì£¼ì²´ê°€ êµ¬ë…ì ì…ë‹ˆë‹¤. flow {} ë¥¼ í†µí•´ ë¹Œë“œí•©ë‹ˆë‹¤. ì½”ë“œ ë‚´ë¶€ê°€ ì¼ì‹œ ì¤‘ë‹¨ ë  ìˆ˜ ìˆìœ¼ë©°, collect{}ê°€ í˜¸ì¶œë  ë•Œê¹Œì§€ ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. suspend ìˆ˜ì •ìë¥¼ ë¶™íˆì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. flowëŠ” ìì²´ì ìœ¼ë¡œ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. emit()ì„ í†µí•´ ê°’ì„ ë‚´ë³´ë‚´ê³ , Coroutine Builder ë‚´ì—ì„œ collect {} ë¥¼ í†µí•˜ì—¬ ê°’ì„ ë°›ìŠµë‹ˆë‹¤. flow {} ë¹Œë”ì˜ ì½”ë“œëŠ” Context Preservation(ì»¨í…ìŠ¤íŠ¸ ë³´ì¡´) íŠ¹ì„±ì„ ì¤€ìˆ˜í•´ì•¼ í•˜ë©°, ë‹¤ë¥¸ Contextì—ì„œ emit í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¦‰ withContextë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•©ë‹ˆë‹¤. flowOf() : ê³ ì • ê°’ì„ ì™¸ë¶€ë¡œ ë³´ë‚´ëŠ” flow ì…ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ fun main() = runBlocking { sendNumbers().collect { Timber.e(\"Received $it\") }}// Flow ìƒì„±fun sendNumbers() = flowOf(\"ONE\", \"TWO\", \"THREE\") asFlow() ë³€ìˆ˜ì˜ Collection, ì‹œí€¸ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Collectionì„ flowë¡œ ì§ì ‘ ë³€í™˜í•˜ë©° emit()ì„ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. suspend í•¨ìˆ˜ë‚˜ Coroutine Builder ì•ˆì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { (1..3).asFlow().collect { response: Int -&gt; Timber.e(\"response -&gt; $response\") }} â—ï¸ë‹¨ì  FlowëŠ” ìŠ¤ìŠ¤ë¡œ Androidì˜ Lifecycleì— ëŒ€í•˜ì—¬ ì•Œì§€ ëª»í•´ Lifecyleì— ë”°ë¥¸ ì¤‘ì§€ë‚˜ ì¬ê°œê°€ ì–´ë ¤ì›€ FlowëŠ” ìƒíƒœê°€ ì—†ì–´ ê°’ì´ í• ë‹¹ëœ ê²ƒì¸ì§€, í˜„ì¬ ê°’ì€ ë¬´ì—‡ì¸ì§€ ì•Œê¸° ì–´ë ¤ì›€ FlowëŠ” Cold Stream ë°©ì‹ìœ¼ë¡œ, ì—°ì†í•´ì„œ ê³„ì† ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ìœ¼ë©°, Collect ë˜ì—ˆì„ ë•Œë§Œ ìƒì„±ë˜ê³  ê°’ì„ ë°˜í™˜í•¨ âœ… ì¦‰, í•˜ë‚˜ì˜ flow builderì— ëŒ€í•˜ì—¬ ë‹¤ìˆ˜ì˜ collectorê°€ ìˆìœ¼ë©´ collectorí•˜ë‚˜ë§ˆë‹¤ í•˜ë‚˜ì”© ë°ì´í„°ë¥¼ í˜¸ì¶œ í•˜ê¸° ë•Œë¬¸ì— UpStreamì´ ë¹„ì‹¼ ë¹„ìš©ì„ ìš”êµ¬í•˜ëŠ” DBì ‘ê·¼ì´ë‚˜ ì„œë²„í†µì‹  ë“±ì´ë¼ë©´ ì—¬ëŸ¬ë²ˆ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ í•˜ê²Œ ë  ìˆ˜ ìˆìŒ ğŸ€ Flow Operator ì…ë ¥ Flowë¥¼ ê°€ì ¸ì™€ì„œ ë³€í™˜ í•˜ê³  ì¶œë ¥ Flowë¥¼ ë°˜í™˜ í•˜ëŠ” ë™ê¸° Flowì…ë‹ˆë‹¤. Collect {} í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.â˜˜ï¸ 1. transform transform{} ì„ í†µí•´ ì—¬ëŸ¬ê°œì˜ ê°’ì„ ë§¤í•‘ (í•˜ë‚˜ì˜ ê°’ì„ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ëŒ€ì‘ ì‹œí‚¤ëŠ” ê²ƒ)ì‹œì¼œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. take() : ë¦¬ìŠ¤íŠ¸ì˜ ê°¯ìˆ˜ë¥¼ ì œí•œ í•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ë¶€í„° ì§€ì •ëœ Countì˜ ìˆ˜ ë§Œí¼ì˜ ìš”ì†Œë¥¼ í¬í•¨í•˜ëŠ” Flowë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì˜ˆì œ ì½”ë“œ ì…ë‹ˆë‹¤. ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { (1..3).asFlow() .take(2) .transform { request: Int -&gt; emit(\"Making request -&gt; $request\") emit(performRequest(request)) } .collect { response: String -&gt; Timber.e(\"Response -&gt; $response\") }}suspend fun performRequest(request: Int): String { delay(1000) return \"response -&gt; $request\"} ê²°ê³¼ -&gt; Making request 1, response 1, Making request 2, response 2 â˜˜ï¸ 2. flowOn flow{} ë¹Œë”ì˜ ì½”ë“œëŠ” ë‹¤ë¥¸ Contextì—ì„œ emit() ì‚¬ìš©ì€ ë¶ˆê°€í•©ë‹ˆë‹¤. ì¦‰, flow{} ì•ˆì—ì„œ withContext ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ Threadë¡œ ë°”ê¿€ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ flowOn ì…ë‹ˆë‹¤. flow {} ë¹Œë” ì½”ë“œë¥¼ ë‹¤ë¥¸ Threadì—ì„œ emit() ì‹œí‚¤ê³  ì‹¶ì„ ë•Œ ì¦‰, Flowê°€ ë°©ì¶œë˜ëŠ” Contextë¥¼ ì „í™˜í•  ë•Œ flowOn() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì˜ˆì œ ì½”ë“œ ì…ë‹ˆë‹¤. ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { foo().collect { value: Int -&gt; // ê¸°ë³¸ Thread ì¦‰ MainThreadì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. Timber.e(\"[${Thread.currentThread().name} Collected : $value]\") }}private fun foo(): Flow&lt;Int&gt; = flow { for (i in 1..3) { delay(1000) Timber.e(\"[${Thread.currentThread().name} Emitting : $i]\") emit(i) }}.flowOn(Dispatchers.Default) ê²°ê³¼ [DefaultDispatcher-worker-1 Emitting : 1] [main Collected : 1] [DefaultDispatcher-worker-1 Emitting : 2] [main Collected : 2] [DefaultDispatcher-worker-1 Emitting : 3] [main Collected : 3] Main Threadì—ì„œ Collect ë˜ëŠ” ë™ì•ˆ foo() í•¨ìˆ˜ì—ì„œëŠ” ë‹¤ë¥¸ Threadì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤. â˜˜ï¸ 3. buffer flow {} ê°€ êµ¬í˜„ëœ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì†ë„ë¥¼ ë¹ ë¥´ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Flow ì²˜ë¦¬ì— ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš° buffer()ëŠ” ë‚˜ì¤‘ì— ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Flowê°’ì„ ì¶•ì  í•˜ëŠ”ë° ìœ ìš©í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì˜ˆì œ ì½”ë“œ ì…ë‹ˆë‹¤. ğŸ‘‡ fun main() = runBlocking { val time = measureTimeMillis { generate().buffer().collect { it: Int delay(300L) Timber.e(\"collect -&gt; $it\") } } Timber.e(\"Collect in $time ms\")}fun generate() = flow { for (i in 1..3) { delay(100L) emit(i) }} ê²°ê³¼ : buffer ì‚¬ìš© = ì•½ 1,000 ms, buffer ì‚¬ìš© x = ì•½ 1,250 ms â˜˜ï¸ 4. map map ì„ ì´ìš©í•œ Mapping ì˜ˆì œì…ë‹ˆë‹¤. ë¬¸ìì—´ì— ë§¤í•‘ í•©ë‹ˆë‹¤.fun main() { runBlocking{ mapOperator() } }suspend fun mapOperator() { (1..10).asFlow().map { it: Int delay(500L) \"mapping $it\" }.collect { it: String Timber.e(\"mapped values -&gt; $it\") }}â˜˜ï¸ 5. Filter filter ë¥¼ ì´ìš©í•œ ì˜ˆì œ ì…ë‹ˆë‹¤. 2ì˜ ë°°ìˆ˜ë§Œ ì¶œë ¥ í•˜ê² ìŠµë‹ˆë‹¤.(ì§ìˆ˜ ë§Œ ì¶œë ¥)fun main() { runBlocking{ filterOpertaor() } }suspend fun filterOperator() { (1..10).asFlow().filter { it: Int it%2 == 0 }.collect { it: Int Timber.e(\"filtered value -&gt; $it\") }}â˜˜ï¸ 6. zip 2ê°œì˜ Flowë¥¼ ê²°í•©í•˜ì—¬ í•˜ë‚˜ì˜ Flowë¡œ ë§Œë“­ë‹ˆë‹¤. 2ê°œì˜ Flowë¥¼ ê²°í•©ì‹œì¼œ ê° ê°’ì„ ë‹¤ë¥¸ flowì˜ í•´ë‹¹ ê°’ê³¼ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ fun main() { runBlocking&lt;Unit&gt; { val nums: Flow&lt;Int&gt; = (1..3).asFlow() val strs: Flow&lt;String&gt; flowOf(\"one\",\"two\") nums.zip(strs) { t1: Int, t2: String -&gt; \"$t1 -&gt; $t2\" }.collect { it: String Timber.e(\"response -&gt; $it\") } }} ê²°ê³¼ 1 -&gt; one, 2 -&gt; two nums ì™€ strs ì˜ ì‚¬ì´ì¦ˆê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì‚¬ì´ì¦ˆê°€ ì‘ì€ strs ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤. ì¦‰, nums ì˜ 3ì€ ì‚­ì œë©ë‹ˆë‹¤. â˜˜ï¸ 7. flatternConcat, flatMapConcat, flatMapMerge return íƒ€ì…ì´ Flow&lt;Flow&lt;T&gt;&gt; ì¼ë•Œ ì´ íƒ€ì…ì„ Flow&lt;T&gt; ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” flattern(í‰íƒ„í™”) ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ flatternConcat, flatMapConcat, flatMapMerge ì…ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ fun requestFlow(i: Int): Flow&lt;String&gt; = flow { emit(\"$i : first\") delay(500) emit(\"$i : second\")} ë‹¤ìŒì€ flattenConcat() ì‚¬ìš© ì˜ˆì œ ì…ë‹ˆë‹¤. ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { val beforeFlattening: Flow&lt;Flow&lt;String&gt;&gt; = (1..3).asFlow().onEach { delay(1000) }.map { requestFlow(it) } val flatten: Flow&lt;String&gt; = beforeFlattening.flattenConcat() flatten.collect { Timber.e(\"flatten response -&gt; $it\") }} ê²°ê³¼ ğŸ‘‡ 1 : first 1 : second 2 : first 2 : second 3 : first 3 : second ë‹¤ìŒì€ flatMapConcat ì‚¬ìš© ì˜ˆì œ ì…ë‹ˆë‹¤. ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { (1..3).asFlow().onEach { elay(1000) }.flatMapConcat { requestFlow(it) }.collect { Timber.e(\"flatten response : $it\") }} ê²°ê³¼ ğŸ‘‡ 1 : first 1 : second 2 : first 2 : second 3 : first 3 : second ë‹¤ìŒì€ flatMapMerge ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œ ì…ë‹ˆë‹¤.(flatMapMergeëŠ” ë“¤ì–´ì˜¤ëŠ” Flowë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œì¼œ ë‹¨ì¼ Flowë¡œ ê°€ëŠ¥í•œ ë¹¨ë¦¬ ê°’ì„ ì „ë‹¬ í•©ë‹ˆë‹¤.) ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { (1..3).asFlow().onEach { elay(1000) }.flatMapMerge { requestFlow(it) }.collect { Timber.e(\"flatten response : $it\") }} ê²°ê³¼ ğŸ‘‡ 1 : first 2 : first 3 : first 1 : second 2 : second 3 : second â˜˜ï¸ 8. Combine í•œ Flowì˜ ìµœì‹  ê°’ì„ ë‹¤ë¥¸ Flowì˜ ìµœì‹  ê°’ê³¼ ê²°í•© í•©ë‹ˆë‹¤. Combine() ì—°ì‚°ìì˜ ì¶œë ¥ì€ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ë‹¨ì¼ Flowì˜ ìµœì‹ ê°’ ì…ë‹ˆë‹¤. ì—ì œ ğŸ‘‡ fun main() = runBlocking&lt;Unit&gt; { combine()}private suspend fun combine() { val numbers = (1..5).asFlow().onEach { delay(300L) } val values = flowOf(\"One\", \"Two\", \"Three\", \"Four\", \"Five\").onEach { delay(400L) } numbers.combine(values) { a: Int, b: String -&gt; \"$a -&gt; $b\" }.collect { it: String Timber.e(\"combine response -&gt; $it\") }} ê²°ê³¼ ğŸ‘‡ 1 -&gt; One 2 -&gt; One 2 -&gt; Two 3 -&gt; Two 4 -&gt; Two 4 -&gt; Three 5 -&gt; Three 5 -&gt; Four 5 -&gt; Five combine() ëŒ€ì‹  zip()ì„ ì‚¬ìš©í–ˆì„ ê²½ìš° ğŸ‘‡ 1 -&gt; One 2 -&gt; Two 3 -&gt; Three 4 -&gt; Four 5 -&gt; Five â˜˜ï¸ 9. Exception handler Flow try / catchë¡œ ë‘˜ëŸ¬ ì‹¸ê¸°, emit() ê³¼ collect{}ë¥¼ ëª¨ë‘ try/catch ë¬¸ìœ¼ë¡œ ë‘˜ëŸ¬ì‹¸ì„œ ì§€ê¸ˆ ë°œìƒí•˜ëŠ” ëª¨ë“  Exceptionì„ í‘œì°©í•©ë‹ˆë‹¤. catch {} : ì˜ˆì™¸ Operator, collect{}ë¥¼ í•˜ê¸°ì „ì— ì‚¬ìš© í•˜ë©°, catch {} ì´í›„ì— ë‹¤ë¥¸ Exceptionì´ ë°œìƒí•˜ë©´ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ë¶ˆê°€í•©ë‹ˆë‹¤. onCompletion {} : catch{} ì—°ì‚°ìì™€ ê°™ì´ ì‚¬ìš© í•©ë‹ˆë‹¤. Flowì˜ ì„±ê³µ ì‹¤íŒ¨ ì—¬ë¶€ ë¥¼ ë‹´ë‹¹í•˜ë©° finally {} êµ¬ë¬¸ê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤. 1ï¸âƒ£ ë‹¤ìŒì€ try / catch ë¬¸ì„ ì‚¬ìš©í•œ ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ fun main() { runBlocking { tryCatch() }}private suspend fun tryCatch() { try { (1..3).asFlow().onEach { check(it != 2) // ê°’ì´ falseì´ë©´ IllegalStateExceptionì„ ë˜ì§‘ë‹ˆë‹¤. checkëŠ” onEachì—ì„œ ì‚¬ìš©í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. }.collect { it: Int Timber.e(\"response -&gt; $it\") } } catch (e: Exception) { Timber.e(\"caught exception -&gt; $e\") }} 2ï¸âƒ£ ë‹¤ìŒì€ catch {} ì„ ì‚¬ìš©í•œ ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ fun main() { runBlocking { catched() }}private suspend fun catched() { (1..3).asFlow().onEach { check(it != 2) // ê°’ì´ falseì´ë©´ IllegalStateExceptionì„ ë˜ì§‘ë‹ˆë‹¤. checkëŠ” onEachì—ì„œ ì‚¬ìš©í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. }.catch { e: Throwable -&gt; Timber.e(\"Caught exception -&gt; $e\") }.collect { it: Int Timber.e(\"response -&gt; $it\") }} 3ï¸âƒ£ ë‹¤ìŒì€ onCompletion {} + catch {} ë¥¼ ì‚¬ìš©í•œ ì˜ˆì œì…ë‹ˆë‹¤. ğŸ‘‡ fun main() { runBlocking { onCompletion() }}private suspend fun onCompletion() { (1..3).asFlow().onEach { check(it != 2) // ê°’ì´ falseì´ë©´ IllegalStateExceptionì„ ë˜ì§‘ë‹ˆë‹¤. checkëŠ” onEachì—ì„œ ì‚¬ìš©í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. }.onCompletion { cause: Throwable? -&gt; if (cause != null) { // TODO: ì‹¤íŒ¨ ì²˜ë¦¬ Timber.e(\"ì‹¤íŒ¨\") } else { // TODO: ì„±ê³µ ì²˜ë¦¬ Timber.e(\"ì„±ê³µ\") } }.catch { e: Throwable -&gt; Timber.e(\"Caught exception -&gt; $e\") }.collect { it: Int Timber.e(\"response -&gt; $it\") }} ê²°ê³¼ ğŸ‘‡ response -&gt; 1 ì‹¤íŒ¨ Caught exception -&gt; java.lang.IllegalStateException: Check failed. ì²˜ìŒ 1ì€ 2ì™€ ë‹¤ë¦„ ë”°ë¼ì„œ IllegalStateException ë°œìƒ ì´í›„ì˜ ê°’ì€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ ğŸ€ ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Coroutine Flow ì™€ Flow Operator ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì €ëŠ” ì‹¤ë¬´ì—ì„œ map ì€ ìì£¼ ì‚¬ìš©ì¤‘ì´ë‚˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.Coroutin FlowëŠ” emit ì„ í†µí•´ ê°’ì„ ë³´ë‚´ë©° collectë¥¼ í†µí•´ ê°’ì„ ì „ë‹¬ë°›ê³  ë˜í•œ Coroutine FlowëŠ” Cold Streamì´ê¸°ì— ê°’ì„ ê³µìœ í•  ìˆ˜ ì—†ë‹¤. ì •ë„ë§Œ ê¸°ì–µí•´ì£¼ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.Cold Stream ì´ê¸°ì— ê°’ì„ ê³µìœ í•  ìˆ˜ ì—†ë‹¤ëŠ” ë§ì˜ ì˜ë¯¸ëŠ” ì˜ˆë¥¼ ë“¤ì–´ í•˜ë‚˜ì˜ flowë¥¼ 2ê°œì˜ activityë‚˜ fragmentì—ì„œ ê°ê° collect í• ë•Œ flow ì˜ ê°’ì´ ì„œë¡œ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤ëŠ” ì´ì•¼ê¸° ì…ë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ Hot Stream ì¸ SharedFlow, StateFlow, ë˜í•œ ë‚˜ì•„ê°€ Coroutine Channel ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.StateFlow, SharedFlow, Coroutine Cannelì— ëŒ€í•˜ì—¬" }, { "title": "Android Coroutine", "url": "/posts/Android-Coroutine/", "categories": "Android, Coroutine", "tags": "android, coroutine", "date": "2022-07-18 15:12:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆì‹œê°„ì—ëŠ” Kotlin Coroutines Flowì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê¸° ì „ Coroutineì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ìš°ì„  Coroutineì— ëŒ€í•˜ì—¬ ì•Œê¸°ì „ì— ë™ê¸°, ë¹„ë™ê¸°ì— ëŒ€í•˜ì—¬ ì•„ì…”ì•¼í•©ë‹ˆë‹¤.ê°„ë‹¨í•˜ê²Œ ì„¤ëª… ë“œë¦¬ë©´ë™ê¸° ğŸ‘‰ ìˆœì°¨ì ìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ëª¨ë¸( ì–´ë–¤ ì‘ì—…ì´ ì²˜ë¦¬ ì¤‘ì´ë©´ ë‹¤ìŒ ì‘ì—…ì€ ëŒ€ê¸° )ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.ë¹„ë™ê¸° ğŸ‘‰ ë³‘ë ¬ì ìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë©°, ì–´ë–¤ ì‘ì—…ì„ ì²˜ë¦¬ì¤‘ ì´ë”ë¼ë„ ì²˜ë¦¬ ë ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ë‹¤ìŒ ì‘ì—…ì„ ì²˜ë¦¬ í•©ë‹ˆë‹¤.(ì‘ì—…ì´ ì¢…ë£Œë˜ëŠ” ì‹œì ì— ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°›ìŠµë‹ˆë‹¤.)ì´ì œ Coroutineì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ€ Coroutine ë¹„ë™ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤. ê²½ëŸ‰ Thread : Threadê°„ Context ì „í™˜ ë¹„ìš©ì´ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©°, ê°œë°œìê°€ ì§ì ‘ ì¤‘ì§€ ì‹œì ì„ ì„ íƒ ê°€ëŠ¥í•˜ê³  Threadë¥¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. âœ… ì°¸ê³  suspend í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ì— í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ Coroutine ì€ ì ì‹œ ì¤‘ë‹¨ë˜ë©°, ê·¸ ë•Œ ë‚¨ê²Œë˜ëŠ” ThreadëŠ” ë‹¤ë¥¸ Coroutineì— í• ë‹¹ë  ìˆ˜ ìˆìœ¼ë©° suspend í•¨ìˆ˜ì˜ ë¡œì§ì´ ëë‚¬ì„ ë•Œì— ì¤‘ë‹¨ë˜ì—ˆë˜ Coroutineì€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. âœ… ì¦‰, ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ì„œ ì¤‘ì§€ ìƒíƒœì¼ ë•Œ Threadë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê³  ê·¸ Threadë¥¼ ì¬ì‚¬ìš© íŠ¹ì§• : CoroutinScope Contextì˜ launch ë¹Œë”ë¥¼ í†µí•˜ì—¬ ì‹¤í–‰ë  ìˆ˜ ìˆìœ¼ë©°, ì´ ë¹Œë” ë¸”ë¡ì•ˆì˜ ì½”ë“œëŠ” Threadì²˜ëŸ¼ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ ë©ë‹ˆë‹¤. Coroutineì€ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ì„œ ì¤‘ì§€ ìƒíƒœì¼ ë•Œ Threadë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê³  ê·¸ Threadë¥¼ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë”ìš± íš¨ìœ¨ì ì´ê³  ë¹ ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ€ suspend point Coroutine ì„ ì‚¬ìš©í•˜ì‹œë ¤ë©´ suspend í•¨ìˆ˜ì— ëŒ€í•˜ì—¬ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì‘ì—…ì„ ì¤‘ì§€í•˜ê³  ë‹¤ë¥¸ ì‘ì—…ì„ ìˆ˜í–‰ì‹œí‚¤ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. Coroutineì´ ì‚¬ìš©ì¤‘ì¸ Threadë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šìœ¼ë©´ì„œ ì‹¤í–‰ì¤‘ì¸ Coroutineì„ ì ì‹œ ì¤‘ë‹¨ ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì¤‘ë‹¨ ì§€ì  í•¨ìˆ˜ ì…ë‹ˆë‹¤. suspend í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ì— í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ Coroutine ì€ ì ì‹œ ì¤‘ë‹¨ë˜ë©°, ê·¸ ë•Œ ë‚¨ê²Œë˜ëŠ” ThreadëŠ” ë‹¤ë¥¸ Coroutineì— í• ë‹¹ë  ìˆ˜ ìˆìœ¼ë©° suspend í•¨ìˆ˜ì˜ ë¡œì§ì´ ëë‚¬ì„ ë•Œì— ì¤‘ë‹¨ë˜ì—ˆë˜ Coroutineì€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. suspend í•¨ìˆ˜ëŠ” Coroutine ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ê±°ë‚˜ suspend í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. suspend í•¨ìˆ˜ í˜¸ì¶œ ë˜í•œ ë‹¤ë¥¸ Coroutineì—ì„œ ì¼ì–´ë‚˜ê±°ë‚˜ suspendí•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œë˜ì–´ì•¼ í•©ë‹ˆë‹¤. âœ… ì¦‰, suspend í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ì„œëŠ” ìµœì†Œ í•˜ë‚˜ì˜ Coroutine Builder ë¸”ë¡ì´ í•„ìš”í•˜ê²Œ ë©ë‹ˆë‹¤. ì˜ˆì œ ) ê°„ë‹¨í•œ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ê¸° ğŸ‘‡ runBlocking { launch { uniFuction() } } suspend fun somNetworkCall(): String { delay(1000) return \"data from network\" } suspend fun uniFuction() { val data = somNetworkCall() println(data) println(\"uniFuction is done\") } ê²°ê³¼ ğŸ‘‡ â€œdata from networkâ€ â€œuniFuction is doneâ€ ğŸ‘ í•´ì„¤ : uniFuction() í•¨ìˆ˜ë¥¼ Coroutineìœ¼ë¡œ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ somNetworkCall() í˜¸ì¶œì´ ì¼ì–´ë‚˜ê²Œ ë˜ê³ , ì´ ì§€ì ì—ì„œ ì‹¤í–‰ë˜ê³  ìˆë˜ unifuction() í•¨ìˆ˜ëŠ” someNetworkCall() í•¨ìˆ˜ì˜ í˜¸ì¶œì´ ëë‚  ë•Œ ê¹Œì§€ ëŒ€ê¸°í•˜ë‹¤ê°€ somNetwork() í•¨ìˆ˜ í˜¸ì¶œì´ ëë‚˜ë©´ ë‹¤ì‹œ ì‹¤í–‰ ë©ë‹ˆë‹¤. âœ… ì¦‰, uiFuction()ì„ ì‹¤í–‰í•˜ê³  ìˆëŠ” ThreadëŠ” ëŒ€ê¸°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ Coroutineì— í• ë‹¹ë  ìˆ˜ ìˆëŠ” ìƒíƒœ ê°€ ëœë‹¤. ğŸ€ Coroutine Scopeâ˜˜ï¸ 1. GlobalScope ì•±ì˜ ì‹œì‘ë¶€í„° ì¢…ë£Œê¹Œì§€ ì¥ì‹œê°„ ì‹¤í–‰ë˜ì–´ì•¼ í•  í•„ìš”ê°€ ìˆì„ ê²½ìš° ì‚¬ìš©í•©ë‹ˆë‹¤. Applicationì˜ Lifecycleê³¼ í•¨ê»˜ ë™ì‘ í•©ë‹ˆë‹¤.(ì•±ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆì—ëŠ” ë³„ë„ì˜ ìƒëª…ì£¼ê¸°ê°€ í•„ìš”ì—†ìŠµë‹ˆë‹¤.) ì¦‰, ì•± Processì˜ Lifecycleì„ ë”°ë¼ê°‘ë‹ˆë‹¤.â˜˜ï¸ 2. CoroutineScope ì‘ì—… í•„ìš”í•  ë•Œë§Œ ì‹¤í–‰í•˜ê³  ì™„ë£Œë˜ë©´ ì¢…ë£Œ ë©ë‹ˆë‹¤. Coroutineì˜ ê¸°ë³¸ Scopeë¡œ ë‹¤ë¥¸ ScopeëŠ” Coroutine Scopeë¥¼ ìƒì† ë°›ì•„ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. âœ… ì°¸ê³  : ì£¼ë¡œ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì„œë²„ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ íŒŒì¼ì„ ì—´ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤. â˜˜ï¸ 3. MainScope UI ê´€ë ¨ ì‘ì—… ì„ ì²˜ë¦¬í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ Scope ì•ˆì—ì„œ ë§Œë“¤ì–´ì§„ ëª¨ë“  Coroutine ì„ Main Threadì—ì„œ ì‹¤í–‰ í•©ë‹ˆë‹¤.â˜˜ï¸ 4. coroutineScope (ì†Œë¬¸ì) ë°˜í™˜ì „ì— ì œê³µë˜ëŠ” ìì‹ ë²”ìœ„ ë‚´ì˜ ëª¨ë“  ì‘ì—…ì˜ ì™„ë£Œë¥¼ ë³´ì¥í•©ë‹ˆë‹¤. êµ¬ì¡°í™”ëœ ë™ê¸°ì„±, suspend í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ê¸° ì „ì— ìì‹ ë²”ìœ„ ë‚´ì—ì„œ Coroutineì— ì˜í•´ ì‹œì‘ëœ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí•˜ë„ë¡ ë³´ì¥ í•©ë‹ˆë‹¤. ì¦‰, coroutineScope ë¸”ë¡ì•ˆì˜ suspend í•¨ìˆ˜ê°€ ì™„ë£Œ ë˜ë©´ ë°˜í™˜í•©ë‹ˆë‹¤.â˜˜ï¸ 5. viewModelScope ViewModel ì— ì—°ê²°ëœ Coroutine Scope ì…ë‹ˆë‹¤. ViewModelì´ í™œì„±í™”ëœ ìƒíƒœì¸ ê²½ìš°ì—ë§Œ ì‹¤í–‰í•´ì•¼ í•  ì‘ì—…ì´ ìˆì„ ê²½ìš° ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ë²”ìœ„ì—ì„œ ì‹œì‘ë˜ëŠ” ëª¨ë“  Coroutineì€ ViewModel ì´ ì‚­ì œë˜ë©´ ìë™ìœ¼ë¡œ ì·¨ì†Œ ë©ë‹ˆë‹¤.(onCleared()ê°€ í˜¸ì¶œë˜ë©´ ìë™ìœ¼ë¡œ ì·¨ì†Œë¨) ì¦‰, ìˆ˜ë™ìœ¼ë¡œ onCleared()ì—ì„œ Job Cancelì„ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.â˜˜ï¸ 6. lifecycleScope Activity/Fragment ì˜ lifecycle ì— ì—°ê²°ëœ Coroutine Scope ì…ë‹ˆë‹¤. ì´ ë²”ìœ„ì—ì„œ ì‹œì‘ëœ ëª¨ë“  Coroutine ì€ Lifecycleì´ íŒŒê´´ë˜ë©´ ìë™ìœ¼ë¡œ ì·¨ì†Œ ë©ë‹ˆë‹¤. Activity/Fragment ì™€ ê°™ì€ ìˆ˜ëª…ì£¼ê¸°ê°€ ìˆëŠ” ê°ì²´ì— Coroutineì„ ë§Œë“¤ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.â˜˜ï¸ 7. LiveData + Coroutine (LiveData Builder) LiveDataë¥¼ ì‚¬ìš©í•  ë•Œ ê°’ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê³„ì‚°í•´ì•¼ í•  ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ í™˜ê²½ ì„¤ì •ì„ ê²€ìƒ‰í•˜ì—¬ UIì— ì œê³µí•  ë•Œ ì´ëŸ° ê²½ìš° liveData { } ë¥¼ ì‚¬ìš©í•´ suspend í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ê²°ê³¼ë¥¼ LiveData ê°ì²´ë¡œ ì œê³µ(emit) í•©ë‹ˆë‹¤. emit() ì„ í†µí•´ ê²°ê³¼ë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤. LiveDataê°€ í™œì„±í™”ë˜ë©´ ì‹¤í–‰ì„ ì‹œì‘í•˜ê³  LiveDataê°€ ë¹„í™œì„±í™”ê°€ ë˜ë©´ êµ¬ì„± ê°€ëŠ¥í•œ ì œí•œ ì‹œê°„ í›„ ìë™ìœ¼ë¡œ ì·¨ì†Œ ë©ë‹ˆë‹¤. ê°„ë‹¨í•œ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ê¸° ğŸ‘‡ val isMobileDataOk: LiveData&lt;Boolean&gt; = liveData { // LiveData Builder ì…ë‹ˆë‹¤. dataStore.getUserMobileData.collect { // DataStoreì— ì €ì¥ëœ ê°’ ê°€ì ¸ì˜¤ê¸° emit(it) // ê²°ê³¼ë¥¼ LiveDataì— ë³´ë‚´ê¸° }} ğŸ€ Coroutine Builderâ˜˜ï¸ 1. runBlocking í˜„ì¬ Threadë¥¼ ë¸”ë¡í‚¹í•˜ëŠ” Coroutine Builder ì…ë‹ˆë‹¤. âœ… ì°¸ê³  ë¸”ë¡í‚¹ ğŸ‘‰ ì£¼ì–´ì§„ ë¸”ë¡ì´ ì™„ë£Œë ë•Œ ê¹Œì§€ í˜„ì¬ Threadë¥¼ ë©ˆì¶¤ ì¼ë°˜ í•¨ìˆ˜ ë‚´ì—ì„œ suspend í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœì˜ Coroutine Builder ì…ë‹ˆë‹¤. ë‚´ë¶€ suspend í•¨ìˆ˜ë“¤ë„ ëª¨ë‘ í˜„ì¬ Threadë¥¼ ë¸”ë¡œí‚¹ í•˜ê²Œ ë©ë‹ˆë‹¤. ì£¼ë¡œ Testì‹œ Top Level í•¨ìˆ˜ë¡œ ì‚¬ìš© ë˜ë©°, ì£¼ì–´ì§„ ë¸”ë¡ì´ ì™„ë£Œë ë•Œ ê¹Œì§€ í˜„ì¬ Threadë¥¼ ë©ˆì¶”ëŠ” ìƒˆë¡œìš´ Coroutineì„ ìƒì„±í•˜ì—¬ ì‹¤í–‰ í•˜ëŠ” Coroutine Builder ì…ë‹ˆë‹¤. ì˜ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë‚˜ Test ì½”ë“œë¥¼ ì§¤ë•Œ ì£¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. â—ï¸ì£¼ì˜â—ï¸ ì‹¤ë¬´ì—ì„œëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” Contextê°€ Main Threadì¼ ë•Œ runBlocking ì„ ë„£ìœ¼ë©´ ì˜¤ë¥˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì˜¤ë¥˜ë€ Main Threadë¥¼ ì¥ê¸°ê°„ ë¸”ëŸ­í‚¹ í•˜ì—¬ ANR ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ runBlocking ì€ Unit Testì—ì„œ ì£¼ë¡œ ì‚¬ìš© í•©ë‹ˆë‹¤. â˜˜ï¸ 2. launch ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” Coroutine Builder ì…ë‹ˆë‹¤. í˜„ì¬ Threadë¥¼ ë¸”ë¡í‚¹ í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œì‘ í•©ë‹ˆë‹¤. Coroutineì´ ì‹œì‘ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸ì˜ Job ê°ì²´ë¥¼ ë°˜í™˜ í•©ë‹ˆë‹¤. Job ê°ì²´ëŠ” Coroutineì˜ ì¢…ë£Œë¥¼ ê¸°ë‹¤ë¦¬ê±°ë‚˜ ì·¨ì†Œë¥¼ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•´ì„œ ì‚¬ìš© ë©ë‹ˆë‹¤. Job ì˜ isCancelled í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ ì‘ì—…ì´ ì„±ê³µì¸ì§€, ì‹¤íŒ¨ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°ê³¼ ê°’ì„ ë°˜í™˜ë°›ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— íŒŒì´ì–´ ì•¤ë“œ í¬ì¼“ ë°©ì‹ì˜ UseCaseì—ì„œ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. âš ï¸ì£¼ì˜âš ï¸ ì˜ˆì™¸ê°€ ì „íŒŒë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¸”ë¡ ë‚´ë¶€ì—ì„œ CoroutineExceptionHandler ì™€ í•¨ê»˜ try-catch ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CoroutineExceptionHandler ë¥¼ ì‚¬ìš©í•œ Sample Code ì…ë‹ˆë‹¤. ğŸ‘‡ fun main() = runBlocking { val handler = CoroutineExceptionHandler { coroutineContext, throwable -&gt; println(\"Caught:${coroutineContext[CoroutineName]}, ${throwable.message?.substring(0..28)}\") } try { val airportCodes = listOf(\"LAX\", \"SF-\", \"PD-\", \"SEA\") val jobs: List&lt;Job&gt; = airportCodes.map { onAirportCode -&gt; // SupervisorJob -&gt; ë‹¨ ë°©í–¥ ì·¨ì†Œê°€ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. (ë¶€ëª¨ì—ì„œ ìì‹ìœ¼ë¡œë§Œ ë‹¨ë°©í–¥ìœ¼ë¡œ ì·¨ì†Œê°€ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.) launch(Dispatchers.IO + CoroutineName(onAirportCode) + handler + SupervisorJob()) { val airport = Airport.getAirportData(onAirportCode) // Network ìš”ì²­ println(\"${airport.code}\") } } jobs.forEach { it.join() } jobs.forEach { println(\"cancelled : ${it.isCancelled}\") } } catch (e:Exception) { println(\"ERROR: ${e.message}\") }} â˜˜ï¸ 3. async í˜„ì¬ Threadë¥¼ ë¸”ë¡í‚¹í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œì‘ í•©ë‹ˆë‹¤. Deferred&lt;T&gt; íƒ€ì…ì˜ ê°ì²´ë¥¼ ë°˜í™˜ í•˜ë©° await()ë¥¼ í˜¸ì¶œí•˜ì—¬ ê²°ê³¼ ê°’ì„ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. await()ëŠ” susepnd í•¨ìˆ˜ ì´ê¸°ì— Coroutine ë‚´ë¶€ë‚˜ ë˜ ë‹¤ë¥¸ susepnd í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜¸ì¶œë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ ì˜ˆì™¸ê°€ ì „íŒŒë˜ê¸° ë•Œë¬¸ì— ë¸”ë¡ ì™¸ë¶€ì—ì„œ try-catch ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. â˜˜ï¸ 4. withContext í˜„ì¬ Threadë¥¼ ë¸”ë¡í‚¹í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ Coroutineì„ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. async ì²˜ëŸ¼ ê²°ê³¼ê°’ì„ ë°˜í™˜í•˜ëŠ” ë¹Œë” ì…ë‹ˆë‹¤. asyncëŠ” ë°˜í™˜í•˜ëŠ” Deferred&lt;T&gt; ê°ì²´ë¡œ ê²°ê³¼ê°’ì„ ì›í•˜ëŠ” ì‹œì ì— await()í•¨ìˆ˜ë¥¼ í†µí•´ ê²°ê³¼ê°’ì„ ì–»ì§€ë§Œ, withContext()ëŠ” Deferred&lt;T&gt;ê°ì²´ë¡œ ë°˜í™˜í•˜ì§€ ì•Šê³ , ê²°ê³¼(T)ë¥¼ ê·¸ ìë¦¬ì—ì„œ ë°˜ë‚© í•©ë‹ˆë‹¤. ì½”ë“œì˜ í•œ ë¶€ë¶„ì„ Coroutineì˜ ë‹¤ë¥¸ ì½”ë“œë“¤ê³¼ ì™„ì „íˆ ë‹¤ë¥¸ Contextì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(Coroutineì„ í•œ Contextì—ì„œ ì‹¤í–‰í•˜ë‹¤ê°€ ì¤‘ê°„ì— Contextë¥¼ ë°”ê¾¸ê³  ì‹¶ì„ ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤.)ğŸ€ Coroutine Contextâ˜˜ï¸ 1. Dispatchers.Default Coroutineì—ê²Œ DefaultDispatchers í’€(pool)ì˜ Thread ì•ˆì—ì„œ ì‹¤í–‰ì„ ì‹œì‘í•˜ë¼ê³  ì§€ì‹œí•©ë‹ˆë‹¤. í’€(Pool) ì•ˆì˜ Thread ìˆ«ìëŠ” 2ê°œ ì´ê±°ë‚˜ ì‹œìŠ¤í…œì˜ ì½”ì–´ ìˆ«ì ì¤‘ ë†’ì€ ê²ƒ ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê³„ì‚°í•œ ì¼ì´ ë§ì€ ì‘ì—…ì„ ìœ„í•œ í’€(Pool) ì…ë‹ˆë‹¤. (cpu ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ë“¤ì— ì‚¬ìš©í•©ë‹ˆë‹¤.) ì°¸ê³  ğŸ‘‰ ë°ì´í„° ì²˜ë¦¬, ì´ë¯¸ì§€ ì²˜ë¦¬ ë“±ì— ì‚¬ìš©í•©ë‹ˆë‹¤. â˜˜ï¸ 2. Dispatchers.IO IO ì‘ì—… ì‹¤í–‰ì„ ìœ„í•œ í’€(Pool)ì•ˆì— Coroutineì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Local, Network ì—ì„œ ë°ì´í„°ë¥¼ ì½ì„ ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ ë„¤íŠ¸ì›Œí¬ ì‘ì—…, ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ, íŒŒì¼ ì…ì¶œë ¥ ë“±ì˜ ì…ì¶œë ¥ì— ìµœì í™” ë˜ì–´ ìˆìŠµë‹ˆë‹¤. â—ï¸ì£¼ì˜â—ï¸ ğŸ‘‰ IOì—ì„œ UI ë³€ê²½ ì‹œ IOException ì´ ë°œìƒ í•˜ë¯€ë¡œ UI ë³€ê²½ì€ Main Threadì—ì„œë§Œ í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. â˜˜ï¸ 3. Dispatchers.Main Main Thread ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” UI ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì´ í•„ìš”í•  ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤. Android Main Thread UI ì‘ì—…ì— ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ í•­ìƒ Main Threadë¡œ Coroutineì„ ì‹œì‘í•œ ë‹¤ìŒ Background Threadë¡œ ì „í™˜í•˜ëŠ” ê²ƒ ì´ ì¢‹ìŠµë‹ˆë‹¤. â˜˜ï¸ 4. Custom Pool ì—ì„œ ì‹¤í–‰ ì‹œí‚¤ê¸° í’€(Pool)ì•ˆì— Threadê°€ ìˆê¸° ë•Œë¬¸ì— ì´ Contextë¥¼ ì‚¬ìš©í•˜ëŠ” Coroutineì€ ë³‘ë ¬ ì§„í–‰ì´ ì•„ë‹Œ ë™ì‹œ ì§„í–‰ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. ì‘ì—…ì„ Coroutineìœ¼ë¡œ ì§„í–‰ì‹œí‚¬ ë•Œ ì‘ì—…ë“¤ ê°„ì— ìì› ê²½ìŸì— ëŒ€í•´ì„œ ê³ ë ¤í•  ë•Œ ì‚¬ìš© í•©ë‹ˆë‹¤. ì˜ˆì œ ) Single Thread ìƒì„±ì ë§Œë“¤ê¸° ğŸ‘‡ Executors.newSingleThreadExecutor() ì‹¤í–‰ìë¡œ ë¶€í„° CoroutineContext ê°€ì ¸ì˜¤ê¸° ğŸ‘‡ (.asCoroutineDispatcher() í™•ì¥í•¨ìˆ˜ ì‚¬ìš©) Executors.newSingleThreadExecutor().asCoroutineDispatcher().use { context -&gt; runBlocking { // launch ì— contextë¥¼ ì „ë‹¬í•˜ë©´ í•´ë‹¹ ë¸”ëŸ­ì—ì„œ ì‹¤í–‰ë˜ëŠ” Coroutineì€ Single Thread Poolì—ì„œ ë™ì‘í•©ë‹ˆë‹¤. launch(context) { // TODO: Coroutine ì—ì„œ ì‹¤í–‰í•  í•¨ìˆ˜ ë° ë™ì‘ } }} â—ï¸ì£¼ì˜â—ï¸ ì‹¤í–‰ìë¥¼ ë‹«ì§€ ì•Šìœ¼ë©´ í”„ë¡œê·¸ë¨ì´ ì˜ì›íˆ ë©ˆì¶”ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì‹¤í–‰ìì˜ í’€(Pool)ì—ëŠ” Main Thread ì™¸ì—ë„ Active Thraedê°€ ìˆê³ , Active Threadê°€ JVM ì„ ê³„ì† ì‚´ë ¤ë‘ê²Œ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. âœ… í•´ê²° ìœ„ì˜ ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•´ .use{context -&gt; }ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆì œ ğŸ‘‡ ë‹¤ìŒì€ Multi Thread ë¥¼ ê°€ì§€ëŠ” í’€(Pool) ì‚¬ìš© ì½”ë“œ ì…ë‹ˆë‹¤. ì¦‰ ì‹œìŠ¤í…œ ì½”ì–´ì˜ ìˆ«ì ë§Œí¼ Threadë¥¼ ì´ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()) .asCoroutineDispatcher().use { context -&gt; runBlocking { launch(context) { // TODO: Coroutine ì—ì„œ ì‹¤í–‰í•  í•¨ìˆ˜ ë° ë™ì‘ } } } âœ… ì°¸ê³  ğŸ‘‰ ì´ contextë¥¼ ì‚¬ìš©í•˜ëŠ” Coroutineì€ ì½”ë“œê°€ ë™ì‘í•˜ëŠ” ì‹œìŠ¤í…œì˜ ì½”ì–´ ìˆ«ìì™€ ë™ì¼í•œ Thread ìˆ«ìë¥¼ ê°€ì§€ëŠ” ì»¤ìŠ¤í…€ Poolì—ì„œ ì‹¤í–‰ ë©ë‹ˆë‹¤. ğŸ€ Mutex (ìƒí˜¸ë°°ì œ) ìƒí˜¸ ë°°ì œ ğŸ‘‰ í•œë²ˆì— í•˜ë‚˜ ì˜ Coroutineë§Œ ì½”ë“œ ë¸”ëŸ­ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ ì…ë‹ˆë‹¤. âœ… ì¦‰, ëª¨ë“  ê³µìœ ë˜ëŠ” ìƒíƒœì˜ ë³€ê²½ë“¤ì´ ì ˆëŒ€ ë™ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. ë™ì‹œì— ì‹¤í–‰ë˜ë©´ ì•ˆë˜ëŠ” ë¶€ë¶„ ì„ lock()/unlock() ìœ¼ë¡œ ë³´í˜¸í•©ë‹ˆë‹¤. (Listì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ë¶€ë¶„ì— ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.) í•´ë‹¹ ThreadëŠ” Blockì˜ ì‘ì—…ì´ ë‹¤ ì²˜ë¦¬ë  ë•Œ ê¹Œì§€ ë‹¤ë¥¸ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì°¨ë‹¨ ì—­í• ) ì˜ˆì œ ğŸ‘‡ private val mutex = Mutex()private suspend fun test() { mutex.withLock { // TODO: something.. }} ğŸ€ ë§ˆë¬´ë¦¬ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Coroutineì˜ ê¸°ë³¸ ê°œë…ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. Coroutineì„ ì‚¬ìš©í•˜ë©´ ë§¤ìš° ê°„ê²°í•˜ê²Œ ë¹„ë™ê¸° ì²˜ë¦¬ ê°€ ë©ë‹ˆë‹¤.Coroutine ì€ ê²½ëŸ‰ Threadë¡œ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ì„œ ì¤‘ì§€ ìƒíƒœì¼ ë•Œ Threadë¥¼ ë¸”ë¡œí‚¹í•˜ì§€ ì•Šê³  ê·¸ Threadë¥¼ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë”ìš± íš¨ìœ¨ì ì´ê³  ë¹ ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Coroutine Flowì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "Android ConnectivityManagerë¥¼ í†µí•œ Network ê´€ë¦¬", "url": "/posts/Android-Network/", "categories": "Android, Network", "tags": "android, network, connectivity manager", "date": "2022-07-18 09:08:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì˜¤ëŠ˜ì€ Android Network ê´€ë¦¬ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ì‹¤ì „ ì½”ë“œë¥¼ í†µí•˜ì—¬ ì•Œì•„ë³¼ ê²ƒ ì´ê³  AndroidViewModel ë¥¼ ì‚¬ìš©í•˜ë©° activityX ì˜ viewModelsì™€ fragmentX activityViewModelsë¥¼ í†µí•˜ì—¬ Fragmentì˜ ìƒíƒœë¥¼ ê³µìœ í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.Androidì—ì„œëŠ” ConnectivityManagerë¥¼ í†µí•˜ì—¬ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.Androidì—ì„œëŠ” ì…€ë£°ëŸ¬, ì™€ì´íŒŒì´, ì¼ë°˜ ë„¤íŠ¸ì›Œí¬(Default Network)ê°€ ì¡´ì¬í•˜ëŠ”ë° ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  ë„¤íŠ¸ì›Œí¬ëŠ” ì‹œìŠ¤í…œì—ì„œ ê²°ì •í•©ë‹ˆë‹¤.ì•„ë˜ì—ì„œ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.1. AndroidViewModel ì„ ì‚¬ìš©í•œ Network ê´€ë¦¬Hilt + DataStore ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.DataStoreì€ ì…€ë£°ëŸ¬ on/off ìœ ë¬´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ì˜€ìœ¼ë©°, HiltëŠ” DataStoreë¥¼ ViewModelì˜ ìƒì„±ìì— ì£¼ì…ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.DataStoreì— ëŒ€í•˜ì—¬ ì˜ ëª¨ë¥´ì‹œë©´ í•´ë‹¹ ë§í¬ë¥¼ ì°¸ê³ í•˜ì‹œê¸¸ ê¶Œì¥ ë“œë¦½ë‹ˆë‹¤. -&gt; DataStore ì •ë¦¬@HiltViewModel // Hiltë¥¼ ViewModelì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì„ ë‹¬ì•„ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.class NetworkViewModel @Inject constructor( application: Application, private val dataStore: DataStoreModule) : AndroidViewModel(application) { // í•´ë‹¹ Enum Classë¥¼ ë°”íƒ•ìœ¼ë¡œ DataBindingì„ í†µí•´ UI ë¥¼ Controll í•©ë‹ˆë‹¤. enum class NetworkStatus : EnumClassProguard { CONNECT_ERROR, CONNECT_NETWORK, DISCONNECT_NETWORK, CONNECT_NETWORK_BUT_NOT_USE_MOBILE_DATA } private var manager: ConnectivityManager? = null // Networkê°€ ì—°ê²° ë˜ì—ˆëŠ”ì§€ ìœ ë¬´ private var isNetworkConn = false // Wifi ì—°ê²° ìœ ë¬´ private var isWifiConn = false // Cellular ì—°ê²° ìœ ë¬´ private var isCellularConn = false // í˜„ì¬ ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ ë‹´ê³ ìˆëŠ” LiveData, í•´ë‹¹ LiveDataë¥¼ Activity/Fragmentì—ì„œ Observingí•˜ì—¬ Network ë³„ UIë¥¼ Controll í•©ë‹ˆë‹¤. private val _currentNetworkStatus = MutableLiveData&lt;NetworkStatus&gt;() val currentNetworkStatus: LiveData&lt;NetworkStatus&gt; get() = _currentNetworkStatus // DataBindingì—ì„œ ì‚¬ìš©ë  StateFlow ì…ë‹ˆë‹¤. // StateFlowëŠ” ì´ˆê¸°ê°’ì´ í•­ìƒ í•„ìš”í•˜ë©°, StateFlowëŠ” ì¤‘ë³µê°’ì„ ë¬´ì‹œí•˜ê³  .valueë¥¼ í†µí•´ í˜„ì¬ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì–‘ë°©í–¥ Observing) val networkStatus = MutableStateFlow(NetworkStatus.CONNECT_ERROR) // Mobile Data ì¦‰ Cellular ì—°ê²°ì„ ì²´í¬í• ì§€ ìœ ë¬´ì…ë‹ˆë‹¤. private var checkMobileData = false // Network ê°€ ì—°ê²°ë˜ì—ˆì„ ê²½ìš°, ì—°ê²°ë˜ì–´ìˆì§€ ì•Šì„ ê²½ìš°ë¥¼ Booleanìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤. // Coroutine Channel ì€ ì •í™•íˆ í•œ ë²ˆë§Œ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” Eventë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. (ë‹¨ë°©í–¥ Observing) private val _networkAction = Channel&lt;Boolean&gt;(Channel.CONFLATED) val networkAction = _networkAction.receiveAsFlow() // Wifië¥¼ ë‹´ë‹¹í•˜ëŠ” NetworkCallback ì…ë‹ˆë‹¤. private val wifiNetworkCallback = object : ConnectivityManager.NetworkCallback() { // ì—°ê²°ëœ ê²½ìš° override fun onAvailable(network: Network) { super.onAvailable(network) isWifiConn = true changeNetworkStatus() } // ì—°ê²° ëŠê¸´ ê²½ìš° override fun onLost(network: Network) { super.onLost(network) isWifiConn = false changeNetworkStatus() } } // Cellularë¥¼ ë‹´ë‹¹í•˜ëŠ” NetworkCallback ì…ë‹ˆë‹¤. private val cellularNetworkCallback = object : ConnectivityManager.NetworkCallback() { override fun onAvailable(network: Network) { super.onAvailable(network) isCellularConn = true changeNetworkStatus() } override fun onLost(network: Network) { super.onLost(network) isCellularConn = false changeNetworkStatus() } } // Default Networkë¥¼ ë‹´ë‹¹í•˜ëŠ” NetworkCallback ì…ë‹ˆë‹¤. private val defaultNetworkCallback = object : ConnectivityManager.NetworkCallback() { override fun onAvailable(network: Network) { super.onAvailable(network) isNetworkConn = true changeNetworkStatus() } override fun onLost(network: Network) { super.onLost(network) isNetworkConn = false changeNetworkStatus() } } // ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. fun changeNetworkStatus() = viewModelScope.launch { // ëª¨ë°”ì¼ ë°ì´í„° ì‚¬ìš© ìœ ë¬´ë¥¼ DataStoreì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤. val isDataConn = dataStore.getUserMobileData.first() networkStatus.value = when { // ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ëœ ê²½ìš° isNetworkConn &amp;&amp; (isWifiConn || !checkMobileData || (isDataConn &amp;&amp; isCellularConn)) -&gt; { NetworkStatus.CONNECT_NETWORK } // ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì–´ìˆì§€ë§Œ ì…€ë£°ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° isNetworkConn &amp;&amp; !isDataConn &amp;&amp; isCellularConn -&gt; { NetworkStatus.CONNECT_NETWORK_BUT_NOT_USE_MOBILE_DATA } // ë‚˜ë¨¸ì§€ì˜ ê²½ìš° else -&gt; { NetworkStatus.DISCONNECT_NETWORK } } if (networkStatus.value != currentNetworkStatus.value) { _currentNetworkStatus.value = networkStatus.value } } // ë„¤íŠ¸ì›Œí¬ Callbackì„ ë“±ë¡í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. fun register(checkMobileData: Boolean = true, checkNetworkStatus: Boolean = false) { this.checkMobileData = checkMobileData manager = application.applicationContext.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager // Android Versionì´ 24ë³´ë‹¤ í´ ê²½ìš° DefaultNetwork ì‚¬ìš© if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) { registerDefaultNetwork() } else { isNetworkConn = true } // Wifi Network Callback ë“±ë¡ registerWifi() // Cellular Network Callback ë“±ë¡ registerCellular() if (checkNetworkStatus) { // ë²„ì „ ê´€ë¦¬ SDK_INT 23 ì´ìƒë¶€í„°ëŠ” activeNetworkInfo ëŠ” Deprecated ë¨ if (Build.VERSION.SDK_INT &gt;= 23) { checkActiveNetwork() } else { checkActiveNetworkInfo() } changeNetworkStatus() } } // ë„¤íŠ¸ì›Œí¬ Callbackì„ í•´ì œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. fun unRegister() { if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) { unRegisterDefaultNetwork() } unRegisterWifi() unRegisterCellular() manager = null } // í™œì„±í™”ëœ Network ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. SDK_INT 23 ì´ìƒë¶€í„°ëŠ” activeNetwork ë¥¼ í†µí•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤. private fun checkActiveNetwork() { manager?.activeNetwork?.let { isNetworkConn = true isWifiConn = hasTransport(it, NetworkCapabilities.TRANSPORT_WIFI) isCellularConn = hasTransport(it, NetworkCapabilities.TRANSPORT_CELLULAR) } } private fun hasTransport(network: Network, transport: Int): Boolean = manager?.getNetworkCapabilities(network)?.hasTransport(transport) ?: false // í™œì„±í™”ëœ Network ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. SDK_INT 23 ì´í•˜ì—ì„œëŠ” activeNetworkInfo ë¥¼ í†µí•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤. @Suppress(\"DEPRECATION\") private fun checkActiveNetworkInfo() { manager?.activeNetworkInfo?.let { if (it.isConnectedOrConnecting) { isNetworkConn = true isWifiConn = it.type == ConnectivityManager.TYPE_WIFI isCellularConn = it.type == ConnectivityManager.TYPE_MOBILE } } } // WIFI Callbackì„ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun registerWifi() { manager?.registerNetworkCallback( createNetworkRequest(NetworkCapabilities.TRANSPORT_WIFI), wifiNetworkCallback ) } // WIFI Callbackì„ í•´ì œí•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun unRegisterWifi() { manager?.unregisterNetworkCallback(wifiNetworkCallback) } // Cellular Callbackì„ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun registerCellular() { manager?.registerNetworkCallback( createNetworkRequest(NetworkCapabilities.TRANSPORT_CELLULAR), cellularNetworkCallback ) } // Cellular Callbackì„ í•´ì œí•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun unRegisterCellular() { manager?.unregisterNetworkCallback(cellularNetworkCallback) } // Default Network Callbackì„ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun registerDefaultNetwork() { manager?.registerDefaultNetworkCallback(defaultNetworkCallback) } // Default Network Callbackì„ í•´ì œí•˜ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun unRegisterDefaultNetwork() { manager?.unregisterNetworkCallback(defaultNetworkCallback) } // Default Networkë¥¼ ì œì™¸í•œ ì‚¬ìš© ê°€ëŠ¥í•œ ë‹¤ë¥¸ Networkë¥¼ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ (ì—¬ê¸°ì„œëŠ” WIFI, CELLULAR) private fun createNetworkRequest(capability: Int): NetworkRequest { return NetworkRequest.Builder() .addTransportType(capability) .build() } // ëª¨ë°”ì¼ ë°ì´í„° ì°¨ë‹¨ ì‹œ ì°¨ë‹¨ í•´ì œë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜ ì…ë‹ˆë‹¤. private fun changeUseMobileDataState() = viewModelScope.launch { val useMobileData = dataStore.getUserMobileData.first() dataStore.putUseMobileData(!useMobileData) changeNetworkStatus() } // ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­ í•¨ìˆ˜ ì…ë‹ˆë‹¤. fun onReTryClick() = viewModelScope.launch { when (networkStatus.value) { // ë„¤íŠ¸ì›Œí¬ê°€ ëŠê²¼ê±°ë‚˜ Errorì¸ ê²½ìš° NetworkStatus.DISCONNECT_NETWORK, NetworkStatus.CONNECT_ERROR -&gt; { _networkAction.send(false) } // ëª¨ë°”ì¼ ë°ì´í„°ì— ì—°ê²°ì€ ë˜ì—ˆìœ¼ë‚˜ ëª¨ë°”ì¼ ë°ì´í„°ë¥¼ ì°¨ë‹¨í•œ ê²½ìš° NetworkStatus.CONNECT_NETWORK_BUT_NOT_USE_MOBILE_DATA -&gt; { changeUseMobileDataState() } // ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì—ˆì„ ê²½ìš° NetworkStatus.CONNECT_NETWORK -&gt; { _networkAction.send(true) } } }}2. NetworkFragmentì €ëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠê²¼ìœ¼ë©´ NetworkFragmentë¥¼ ë„ì›Œì£¼ëŠ” ì‹ìœ¼ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.@AndroidEntryPointclass NetworkFragment : DialogFragment() { private lateinit var binding: FragmentNetworkBinding // navigation safe args ì‚¬ìš© private val args: NetworkFragmentArgs by navArgs() private val viewModel: NetworkViewModel by activityViewModels() override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { binding = DataBindingUtil.inflate(inflater, layoutResId, container, false) binding.lifecycleOwner = viewLifecycleOwner return binding.root } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) binding.viewModel = viewModel viewModel.networkStatus.value = args.networkState networkViewModelCallback() } private fun networkViewModelCallback() = with(viewModel) { currentNetworkStatus.observe(viewLifecycleOwner) { when(it) { // ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ë©´ NetworFragment ì§€ì›Œì¤Œ NetworkViewModel.NetworkStatus.CONNECT_NETWORK -&gt; { findNavController().popBackStack() } else -&gt; {} } } // \"ìƒˆë¡œê³ ì¹¨\" ëˆŒë €ì„ ê²½ìš° viewLifecycleOwner.lifecycleScope.launchWhenStarted { networkAction.collect { if (it) { // ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì—ˆì„ ê²½ìš° findNavController().popBackStack() } else { // ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ì„ ê²½ìš° showSnackBar(binding.root, getString(R.string.disabled_network)) } } } } override fun onStart() { super.onStart() val d = dialog when (activity) { is IntroActivity -&gt; { if (d != null) { // intro í™”ë©´ì—ì„œ Dialog ë¥¼ Cancel í–ˆì„ ê²½ìš° d.setOnCancelListener { requireActivity().finish() } } else { isCancelable = false } } is MainActivity -&gt; { if (d != null) { } else { isCancelable = false } } } } override fun onResume() { super.onResume() dialog?.window?.let { window -&gt; window.setBackgroundDrawableResource(android.R.color.transparent) window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND) // ê¸°ë³¸ ë°°ê²½ ì œê±° val params = window.attributes params.width = WindowManager.LayoutParams.MATCH_PARENT params.height = WindowManager.LayoutParams.MATCH_PARENT window.attributes = params setTransparentStatusBar(window) } }}3. NetworfFragment Navigation Graph&lt;dialog android:id=\"@+id/networkFragment\" android:name=\"com.example.networtest.view.fragment.network.NetworkFragment\" android:label=\"NetworkFragment\" tools:layout=\"@layout/fragment_network\"&gt; &lt;!-- Safe Args ì‚¬ìš© --&gt; &lt;argument android:name=\"networkState\" android:defaultValue=\"CONNECT_ERROR\" app:argType=\"com.example.networtest.view.fragment.network.NetworkViewModel$NetworkStatus\" /&gt; &lt;/dialog&gt;&lt;!-- ë„¤íŠ¸ì›Œí¬ëŠ” ì–¸ì œ ì–´ë””ì„œë“  ëŠê¸¸ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì „ì—­ì—ì„œ ì‚¬ìš© --&gt;&lt;action android:id=\"@+id/action_global_networkFragment\" app:destination=\"@id/networkFragment\" /&gt;4. NetworkFragment xml ì •ì˜ (R.layout.fragment_network)&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:tools=\"http://schemas.android.com/tools\" xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt; &lt;data&gt; &lt;import type=\"com.example.networtest.view.fragment.network.NetworkViewModel.NetworkStatus\"/&gt; &lt;variable name=\"viewModel\" type=\"com.example.networtest.view.fragment.network.NetworkViewModel\" /&gt; &lt;/data&gt; &lt;FrameLayout android:id=\"@+id/network_fl\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:background=\"#55000000\"&gt; &lt;FrameLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:background=\"@color/colorTranslucentDim\"&gt; &lt;LinearLayout android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:layout_gravity=\"center_horizontal\" android:layout_marginTop=\"200dp\" android:orientation=\"vertical\" android:paddingStart=\"20dp\" android:paddingEnd=\"20dp\"&gt; &lt;ImageView android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_gravity=\"center_horizontal\" android:src=\"@drawable/search_none_w\" /&gt; &lt;!-- ë„¤íŠ¸ì›Œí¬ê°€ ëŠê²¼ì„ ê²½ìš° \"ì—°ê²°ì´ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\në„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ê±°ë‚˜\\në‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.\" ë¥¼ ë³´ì—¬ì¤Œ --&gt; &lt;!-- ë‚˜ë¨¸ì§€ ê²½ìš° ì¦‰, Cellular ì°¨ë‹¨ì˜ ê²½ìš° \"ëª¨ë°”ì¼ë°ì´í„° ì°¨ë‹¨ ìƒíƒœì…ë‹ˆë‹¤.\\nì°¨ë‹¨ì„ í•´ì œí•˜ê±°ë‚˜\\nWi-Fië¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”.\" ë¥¼ ë³´ì—¬ì¤Œ --&gt; &lt;TextView android:id=\"@+id/network_tv\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:layout_marginTop=\"15.8dp\" android:layout_marginBottom=\"17.2dp\" android:gravity=\"center\" android:letterSpacing=\"-0.02\" android:lineHeight=\"20sp\" android:lineSpacingExtra=\"6sp\" android:lineSpacingMultiplier=\"1.2\" android:text=\"@{viewModel.networkStatus == NetworkStatus.DISCONNECT_NETWORK ? @string/retry_disabled_network : @string/use_mobile_data}\" android:textAlignment=\"center\" android:textColor=\"@android:color/white\" android:textSize=\"14sp\" /&gt; &lt;LinearLayout android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_gravity=\"center_horizontal\" android:orientation=\"horizontal\"&gt; &lt;!-- ë„¤íŠ¸ì›Œí¬ê°€ ëŠê²¼ì„ ê²½ìš° \"ìƒˆë¡œê³ ì¹¨\" ë³´ì—¬ì¤Œ --&gt; &lt;!-- ëª¨ë°”ì¼ ë°ì´í„°ê°€ ì°¨ë‹¨ë˜ì—ˆì„ ê²½ìš° \"ì°¨ë‹¨í•´ì œ\" ë³´ì—¬ì¤Œ --&gt; &lt;Button android:id=\"@+id/retry_btn\" style=\"?android:attr/borderlessButtonStyle\" android:layout_width=\"89dp\" android:layout_height=\"40dp\" android:layout_marginStart=\"4dp\" android:layout_marginEnd=\"4dp\" android:background=\"@drawable/positive_bg3\" android:letterSpacing=\"-0.02\" android:lineSpacingExtra=\"-4sp\" android:textColor=\"#ffffff\" android:textSize=\"14sp\" android:text=\"@{viewModel.networkStatus == NetworkStatus.DISCONNECT_NETWORK ? @string/retry : @string/block_off }\" android:onClick=\"@{() -&gt; viewModel.onReTryClick()}\" tools:text=\"@string/retry\"/&gt; &lt;/LinearLayout&gt; &lt;/LinearLayout&gt; &lt;/FrameLayout&gt; &lt;/FrameLayout&gt;&lt;/layout&gt;5. NetworkViewModel ì—°ê²°@AndroidEntryPointclass MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding private val mainViewModel: MainViewModel by viewModels() private val networkViewModel: NetworkViewModel by viewModels() private lateinit var navController: NavController val navHostFragment by lazy { supportFragmentManager.findFragmentById(R.id.navHostFragmentContainer) as NavHostFragment } override fun onCreate(saveInstanceState: Bundle?) { binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this binding.viewModel = mainViewModel navController = navHostFragment.navController // Network Callback ë“±ë¡ networkViewModel.register(checkNetworkStatus = true) initMainViewModelCallback() initNetworkViewModelCallback() } private fun initMainViewModelCallback() = with(mainViewModel) { isMobileDataOk.observe(viewLifecycleOwner) { // isModileDataOk ì˜ ê°’ì´ ë³€ê²°ë  ë•Œ ë§ˆë‹¤ networkViewModel ì˜ changeNetworkStatus() í•¨ìˆ˜ í˜¸ì¶œ networkViewModel.changeNetworkStatus() } } private fun initNetworkViewModelCallback() = with(networkViewModel) { currentNetworkStatus.observe(this@MainActivity) { it: NetworkViewModel.NetworkState! when (it) { NetworkViewModel.NetworkStatus.CONNECT_NETWORK -&gt; { // TODO: ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì—ˆì„ ë•Œ ë™ì‘ ë„£ê¸° } // ë„¤íŠ¸ì›Œí¬ ì°¨ë‹¨ ë° Error, Disconnect ì˜ ê²½ìš° NetworkFragment ë³´ì—¬ì¤Œ(í˜„ì¬ Networkìƒíƒœë¥¼ NetworFragment ì— ë„£ì–´ì¤ë‹ˆë‹¤.) else -&gt; { navController.navigate( NavigationDirections.actionGlobalNetworkFragment(it) ) } } } } // Activityê°€ onDestory() ë  ë•Œ Network Callback í•´ì œ override fun onDestroy() { networkViewModel.unRegister() super.onDestroy() }}5. MainViewModel ì •ì˜ (ëª¨ë°”ì¼ë°ì´í„° ì°¨ë‹¨/í•´ì œ ê¸°ëŠ¥)@HiltViewModelclass MainViewModel @Inject constructor( private val dataStore: DataStoreModule) : ViewModel() { // DataStore ì˜ flow ê°’ì„ LiveDataë¡œ ë³€ê²½ val isMobileDataOk: LiveData&lt;Boolean&gt; = liveData { dataStore.getUserMobileData.collect { emit(it) } } // ëª¨ë°”ì¼ ë°ì´í„° ì°¨ë‹¨/í•´ì œ í´ë¦­ Listener fun onMobileClick() = viewModelScope.launch { // ëˆ„ë¥¼ë•Œë§ˆë‹¤ isMobileDataOk ì˜ ë°˜ëŒ€ê°’ì„ ë„£ì–´ì¤Œ dataStore.putUseMobileData(!isMobileDataOk.value!!) }}6. MainActivity xml ì •ì˜ (R.layout.activity_main)&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" tools:context=\".activity.main.MainActivity\"&gt; &lt;data&gt; &lt;variable name=\"viewModel\" type=\"com.example.networtest.view.activity.main.MainViewModel\" /&gt; &lt;/data&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;androidx.fragment.app.FragmentContainerView android:id=\"@+id/navHostFragmentContainer\" android:name=\"androidx.navigation.fragment.NavHostFragment\" android:layout_width=\"0dp\" android:layout_height=\"0dp\" app:defaultNavHost=\"true\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintEnd_toEndOf=\"parent\" app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\" app:navGraph=\"@navigation/navigation\" /&gt; &lt;!-- isMobileDataOk ê°€ true ì´ë©´ \"ì°¨ë‹¨\", false ì´ë©´ \"ì°¨ë‹¨í•´ì œ\" ë³´ì—¬ì¤Œ --&gt; &lt;Button android:layout_width=\"0dp\" android:layout_height=\"wrap_content\" android:text=\"@{viewModel.isMobileDataOk ? @string/block : @string/block_off}\" android:onClick=\"@{() -&gt; viewModel.onMobileClick()}\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintEnd_toEndOf=\"parent\" app:layout_constraintBottom_toBottomOf=\"parent\" /&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;&lt;/layout&gt;7. ëª¨ë°”ì¼ ë°ì´í„° ì°¨ë‹¨ ìœ ë¬´ë¥¼ ì €ì¥ì„ ìœ„í•œ DataStore ì •ì˜DataStoreì— ëŒ€í•˜ì—¬ ìì„¸íˆ ì•Œê³ ì‹¶ìœ¼ì‹œë©´ í•´ë‹¹ ë§í¬ë¥¼ ì°¸ê³ í•˜ì„¸ìš”. -&gt; DataStore ì •ë¦¬class DataStoreModule( private val context: Context) { // DataStore ì¸ìŠ¤í„´ìŠ¤ ìƒì„± private val Context.dataStore by preferencesDataStore(name = \"test.db\") private val mobileDataKey = booleanPreferencesKey(\"use_mobile_data\") val getUserMobileData: Flow&lt;Boolean&gt; = context.dataStore.data .catch { exception -&gt; if (exception is IOException) { emit(emptyPreferences()) } else { throw exception } } .map { preferences -&gt; preferences[mobileDataKey] ?: false } suspend fun putUseMobileData(use: Boolean) { val getData = getUserMobileData.first() if (getData != use) { context.dataStore.edit { preferences -&gt; preferences[mobileDataKey] = use } } }}8. DataStore Hilt Module ì •ì˜@Module@InstallIn(SingletonComponent::class)object LocalDataModule { @Singleton @Provides fun provideDataStoreModule(@ApplicationContext context: Context): DataStoreModule { return DataStoreModule(context) }}ë§ˆë¬´ë¦¬ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Android ConnectivityManager ë¥¼ í†µí•œ Network ê´€ë¦¬ì— ëŒ€í•˜ì—¬ ì½”ë“œë¥¼ ìœ„ì£¼ë¡œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.í•´ë‹¹ ì½”ë“œì—ì„œëŠ” Default Network, Wifi, Cellular ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©°, Cellular ì°¨ë‹¨ ê¸°ëŠ¥ ë˜í•œ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.Network ì˜ ì—°ê²°ì´ ëŠê²¼ì„ ì‹œ NetworkFragmentë¥¼ ë„ì›Œì£¼ë©° ë„¤íŠ¸ì›Œí¬ ëŠê¹€, CellularëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ë§Œ Cellularë¥¼ ì°¨ë‹¨í•œ ê²½ìš°ì— ë”°ë¼ UIë¥¼ ë¶„ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.ë˜í•œ ë²„íŠ¼ì„ í´ë¦­ ì‹œ ëª¨ë°”ì¼ ë°ì´í„°ë¥¼ ì°¨ë‹¨/í•´ì œ í•˜ëŠ” ì½”ë“œ ë˜í•œ ì¡´ì¬í•©ë‹ˆë‹¤.ë‹¤ìŒ ì‹œê°„ì—ëŠ” ìœ„ì—ì„œ ì‚¬ìš©ì¤‘ì¸ Flow ë° StateFlow, Coroutine Channel ì— ëŒ€í•˜ì—¬ ìì„¸íˆ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "Android DataStore(SharedPreference ëŒ€ì²´)", "url": "/posts/Android-DataStore/", "categories": "Android, DataStore", "tags": "android, datastore", "date": "2022-07-18 09:08:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì˜¤ëŠ˜ì€ Android DataStore ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.DataStore ì´ì „ì—ëŠ” ê°€ë²¼ìš´ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ SharedPreferencesë¥¼ ì‚¬ìš©í•˜ì˜€ëŠ”ë° SharedPreferences ì—ëŠ” ë‹¤ì–‘í•œ í•œê³„ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤.ì²«ì§¸ë¡œ ë¹„ë™ê¸° ì‘ì—…ì„ ì œëŒ€ë¡œ í•´ì£¼ì§€ ì•Šìœ¼ë©´ ANR ì¦‰, Application Not Responding(ì• í”Œë¦¬ì¼€ì´ì…˜ ì‘ë‹µ ì—†ìŒ)ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë‘ë²ˆì§¸ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í™•ì¸ì´ ë¶ˆê°€ëŠ¥ê³ , Runtimeì— Exceptionì´ ë°œìƒ(RuntimeException)í•˜ì–´ ì•±ì´ ê°•ì œ ì¢…ë£Œë  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.ë˜í•œ type safety ê°€ ë³´ì¥ë˜ì§€ ì•Šì•„ ì–´ë–¤ ë°ì´í„°ê°€ ì €ì¥ë˜ê³  ì¶”ì¶œë˜ëŠ”ì§€ ì¼ì¼íˆ type converting ì¦‰, í˜• ë³€í™˜ì„ í•´ì£¼ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.ë°‘ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.SharedPreferenceì˜ í•œê³„ì ìš°ì„  SharedPreference ì˜ ë‹¨ì ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. SharedPrefereence ëŠ” ë™ê¸° APIë¥¼ ì œê³µí•˜ëŠ” ê²ƒê³¼ MainThreadë¡œ ë¶€í„° ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, UI Threadë¥¼ Blocking í•˜ì—¬ ANRì„ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Strong Consistencyê°€ ë³´ì¥ë˜ì§€ ì•Šì•„ Multiple Thread í™˜ê²½ì—ì„œ ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. type safetyê°€ ë³´ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.ì´ëŸ¬í•œ ë¬¸ì œì ì„ ê°œì„ í•˜ê¸° ìœ„í•´ DataStoreê°€ ë“±ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.DataStore í”„ë¡œí† ì½œ ë²„í¼ë¥¼ ì‚¬ìš©í•˜ì—¬ key-value ìŒ ë˜ëŠ” ìœ í˜•ì´ ì €ì¥ëœ ê°ì²´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ì €ì¥ì†Œ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. Coroutine ë° Flow ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸°ì ì´ê³  ì¼ê´€ëœ Transaction ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤. DataStore ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Dispatchers.IO ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— UI Threadì—ì„œ ì‚¬ìš©í•˜ì—¬ë„ ANRì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Runtime Errorë¡œ ë¶€í„° ì•ˆì „í•©ë‹ˆë‹¤. Protocol Bufferë¥¼ ì‚¬ìš©í•˜ì—¬ Type Safetyí•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DataStore 2ê°€ì§€ Preferences DataStore : key ì™€ valueë¡œ êµ¬ì„±ë˜ë©° Type Safety í•˜ì§€ ëª»í•©ë‹ˆë‹¤. Proto DataStore : ì‚¬ìš©ìê°€ ì •ì˜í•œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©° Protocol Bufferë¥¼ ì´ìš©í•˜ì—¬ Schemaë¥¼ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ë°ì´í„°ì˜ íƒ€ì…ì„ ë³´ì¥í•´ ì¤ë‹ˆë‹¤.(Type Safety) ì°¸ê³  -&gt; ë³µì¡í•œ ëŒ€ê·œëª¨ ë°ì´í„° ì €ì¥, ë¶€ë¶„ ì—…ë°ì´íŠ¸, ì°¸ì¡° ë¬´ê²°ì„±ì„ ì§€ì›í•´ì•¼ í•  ê²½ìš°ì—ëŠ” DataStore ëŒ€ì‹  Roomì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. DataStoreëŠ” ì†Œê·œëª¨ ë‹¨ìˆœ ë°ì´í„° ì €ì¥ì— ì í•©í•˜ë©° ë¶€ë¶„ ì—…ë°ì´íŠ¸ë‚˜ ì°¸ì¡° ë¬´ê²°ì„±ì€ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.Preferences DataStore ExamplePreferences DataStore ì— ëŒ€í•˜ì—¬ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.í•´ë‹¹ ì½”ë“œì—ì„œëŠ” Android Dagger-Hiltë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„± ê´€ë¦¬ í•˜ì˜€ìœ¼ë©°, ê°„ë‹¨í•œ Stringê°’ ì €ì¥ ë° Booleanê°’ì„ ì €ì¥í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤. DataStore ì˜ì¡´ì„± ê´€ë ¨ì€ êµ¬ê¸€ ê³µì‹ í™ˆí˜ì´ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ ì£¼ì„¸ìš”. DataStore ì •ì˜ class DataStoreModule( private val context: Context) { // DataStore ì¸ìŠ¤í„´ìŠ¤ ìƒì„± private val Context.dataStore by preferencesDataStore(name = \"test.db\") // String ì €ì¥ Key ê°’ private val stringKey = stringPreferencesKey(\"string_key_name\") // DataStoreë¡œ ë¶€í„° ê°’ ê°€ì ¸ì˜¤ê¸° val getText = context.datastore.data .catch { exception -&gt; if (exception is IOException) { emit(emptyPreferences()) } else { throw exception } } .map { preferences -&gt; preferences[stringKey] ?: \"\" } // DataStoreì— ê°’ ì €ì¥ suspend fun setText(text: String) { // DataStoreì— ì €ì¥ëœ String ê°’ê³¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ì–´ì˜¤ëŠ” Stringê°’ì´ ë‹¤ë¥¼ ê²½ìš°ë§Œ ì €ì¥(ì¤‘ë³µê°’ ì €ì¥ ì•ˆí•¨) val getData = getText.first() if (getData != text) { context.dataStore.edit { preferences -&gt; preferences[stringKey] = userId } } } // Boolean ì €ì¥ Key ê°’ private val booleanKey = booleanPreferencesKey(\"boolean_key_name\") // DataStoreë¡œ ë¶€í„° ê°’ ê°€ì ¸ì˜¤ê¸° val getIsAutoLogin = context.datastore.data .catch { exception -&gt; if (exception is IOException) { emit(emptyPreferences()) } else { throw exception } } .map { preferences -&gt; preferences[booleanKey] ?: false } // DataStoreì— ê°’ ì €ì¥ suspend fun setIsAutoLoing(isAuto: Boolean) { // DataStoreì— ì €ì¥ëœ String ê°’ê³¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ì–´ì˜¤ëŠ” Stringê°’ì´ ë‹¤ë¥¼ ê²½ìš°ë§Œ ì €ì¥(ì¤‘ë³µê°’ ì €ì¥ ì•ˆí•¨) val getData = getIsAutoLogin.first() if (getData != text) { context.dataStore.edit { preferences -&gt; preferences[booleanKey] = userId } } }} Hiltë¥¼ ì´ìš©í•œ ì˜ì¡´ì„± ì£¼ì… @Module@InstallIn(SingletonComponent::class) // Application ì˜ onCreate()ì—ì„œ ìƒì„±, onDestroy()ì—ì„œ íŒŒê´´object LocalDataModule { @Singleton @Provides fun provideDataStoreModule(@ApplicationContext context: Context): DataStoreModule { return DataStoreModule(context) }} ì‚¬ìš© @AndroidEntryPointclass HomeFragment : Fragment() { private lateinit var binding: FragmentHomeBinding // Hiltë¥¼ í†µí•´ ì£¼ì…ë°›ëŠ” ê°ì²´ëŠ” Private í•  ìˆ˜ ì—†ìŒ @Inject lateinit var dataStore: DataStoreModule override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { binding = DataBindingUtil.inflate(inflater, layoutResId, container, false) return binding.root } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) binding.lifecycleOwner = viewLifecycleOwner // DataStore ê°’ ê°€ì ¸ì˜¤ê¸° viewLifecycleOwner.lifecycleScope.launch { dataStore.getText.collect { it: String Timber.e(\"data store getText Value -&gt; $it\") } } // DataStore ê°’ ì €ì¥í•˜ê¸° CoroutineScope.launch(Dispatchers.IO) { dataStore.setText(\"test\") } }} ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” DataStoreì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.Preferences DataStoreì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ëŠ”ë° ì €ëŠ” Proto DataStoreëŠ” ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.êµ¬ê¸€ ê³µì‹ í™ˆí˜ì´ì§€ì— ë‚˜ì™€ìˆë“¯ ë³µì¡í•œ ë°ì´í„°ëŠ” Roomì— ì €ì¥í•˜ëŠ” ê²ƒì´ ì¢‹ê³  í¸í•˜ë¯€ë¡œ ë³µì¡í•œ ë°ì´í„°ë¥¼ ì €ì¥í• ë•ŒëŠ” Roomì„ ì´ìš©í•©ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì€ ì—¬ê¸°ì„œ ë§ˆì¹˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "Android Custom Dialog", "url": "/posts/Android-Custom-Dialog/", "categories": "Android, Custom", "tags": "android, custom, dialog", "date": "2022-07-15 16:38:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì€ ì¡°ê¸ˆ ê°€ë²¼ìš´ ì£¼ì œë¡œ ì‰¬ì–´ê°€ê³ ì í•©ë‹ˆë‹¤.Custom Dialogë¥¼ ë§Œë“¤ì–´ í•„ìš”í•  ë•Œ ë§ˆë‹¤ ê°„ë‹¨íˆ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ìµí˜€ë³´ê³ ì í•©ë‹ˆë‹¤.Custom Dialog Class ìƒì„±class BasicDialog( private context: Context, root: ViewGroup? = null) { private val builder = AlertDialog.Builder(context, R.style.AlertDialogTheme) private val binding: DialogBasicPopupBinding by lazy { val b = DialogBasicPopupBinding.inflate(LayoutInflater.from(context), root, false) // DataBinding ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. b.body = null b.okCallback = null b.cancelCallback = null return@lazy b } // androidx ì˜ AlertDialogë¥¼ import í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤. private var dialog: AlertDialog? = null // Dialog ì˜ Titleì„ ì§€ì •í•´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. // R.string.confirm ì˜ í˜•ì‹ì„ ì¸ìì— ë„£ì–´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. fun setTitle(@StringRes titleId: Int): BasicDialog { return setTitle(context.getText(titleId)) } // ìœ„ì˜ setTitle ì˜ return ì—ì„œ ì‚¬ìš©í•˜ëŠ” Method ì…ë‹ˆë‹¤. // resources.getString() ë¡œ string resourceë¥¼ ê°€ì ¸ì™€ ì¸ìì— ë„£ì–´ì£¼ëŠ” ë°©ì‹ì˜ Method ì…ë‹ˆë‹¤. fun setTitle(title: CharSequence): BasicDialog { // Data Binding ì„ ì‚¬ìš©í•˜ì—¬ xmlì— ë„£ì–´ì¤ë‹ˆë‹¤. binding.subject = title return this } // Dialog ì˜ Messageë¥¼ ì§€ì •í•´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. // R.string.confirm ì˜ í˜•ì‹ì„ ì¸ìì— ë„£ì–´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. fun setMessage(@StringRes messageId: Int): BasicDialog { return setMessage(context.getText(messageId)) } // ìœ„ì˜ setMessage í•¨ìˆ˜ì˜ returnì—ì„œ ì‚¬ìš©í•˜ëŠ” Method ì…ë‹ˆë‹¤. // resource.getString() ë¡œ string resourceë¥¼ ê°€ì ¸ì™€ ì¸ìì— ë„£ì–´ì£¼ëŠ” ë°©ì‹ì˜ Method ì…ë‹ˆë‹¤. fun setMessage(message: CharSequence): BasicDialog { // Data Binding ì„ ì‚¬ìš©í•˜ì—¬ xmlì— ë„£ì–´ì¤ë‹ˆë‹¤. binding.body = message return this } // Dialog ì˜ Messageë¥¼ ì§€ì •í•´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. // R.string.confirm ì˜ í˜•ì‹ì„ ì¸ìì— ë„£ì–´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. fun setMessageStyle1(@StringRes messageId: Int): BasicDialog { return setMessageStyle1(context.getText(messageId)) } // ìœ„ì˜ setMessageStyle1 í•¨ìˆ˜ì˜ returnì—ì„œ ì‚¬ìš©í•˜ëŠ” Method ì…ë‹ˆë‹¤. // resource.getString() ë¡œ string resourceë¥¼ ê°€ì ¸ì™€ ì¸ìì— ë„£ì–´ì£¼ëŠ” ë°©ì‹ì˜ Method ì…ë‹ˆë‹¤. fun setMessageStyle1(message: CharSequence): BasicDialog { // SpannableStringBuilder ë¥¼ ì‚¬ìš©í•˜ë©´ Code ìƒì—ì„œ TextViewì— ë„£ì„ ë¬¸ì ì¼ë¶€ì˜ ìƒ‰, í¬ê¸°, ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. return setMessage(SpannableStringBuilder(message).apply { // ì§€ì •ëœ ê°œì²´ë¡œ ì§€ì •ëœ í…ìŠ¤íŠ¸ ë²”ìœ„ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. // Flag ëŠ” ë²”ìœ„ ë²”ìœ„ì˜ ì‹œì‘ ë˜ëŠ” ëì— í…ìŠ¤íŠ¸ê°€ ì‚½ì…ë  ë•Œ ë²”ìœ„ê°€ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤. // start ë³€ìˆ˜ì—ì„œë¶€í„° end ë³€ìˆ˜ê¹Œì§€ë¥¼ whatì˜ ì„¤ì •ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. setSpan( // í…ìŠ¤íŠ¸ í¬ê¸°ë¥¼ ë¬¼ë¦¬ì  í”½ì…€ í¬ê¸°ë¡œ ì„¤ì •í•˜ê±°ë‚˜ 'dip'ì´ trueì¸ ê²½ìš° ì¥ì¹˜ ë…ë¦½ì  í”½ì…€ í¬ê¸°ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. what = AbsoluteSizeSpan( TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_SP, 17f, // Text í¬ê¸°ë¥¼ 17fë¡œ ê³ ì • binding.root.context.resources.displayMetrics ).toInt(), dip = false ), start = 0, end = length, flags = Spanned.SPAN_EXCLUSIVE_EXCLUSIVE // ê¸¸ì´ê°€ 0ì¼ ìˆ˜ ì—†ìœ¼ë©° í¬í•¨í•˜ëŠ” ëª¨ë“  í…ìŠ¤íŠ¸ê°€ ì œê±°ë˜ë©´ ë²„í¼ì—ì„œ ìë™ìœ¼ë¡œ ì œê±°ë©ë‹ˆë‹¤. ) }) } // Dialogì˜ \"í™•ì¸\" ë²„íŠ¼ Click Listener ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. // R.string.confirm ì˜ í˜•ì‹ì„ ì¸ìì— ë„£ì–´ì£¼ê³  Click Listener Callbackì„ ë°›ëŠ” Method ì…ë‹ˆë‹¤. fun setPositiveButton(@StringRes textId: Int, listener: View.OnClickListener?): BasicDialog { return setPositiveButton(context.getText(textId), listener) } // resource.getString() ë¡œ string resourceë¥¼ ê°€ì ¸ì™€ ì¸ìì— ë„£ì–´ì£¼ê³  Click Listener Callbackì„ ë°›ëŠ” Method ì…ë‹ˆë‹¤. fun setPositiveButton(text: CharSequence, listener: View.OnClickListener?): BasicDialog { // ë²„íŠ¼ ì´ë¦„ì„ Data Binding ì„ í†µí•´ ë„£ì–´ì¤ë‹ˆë‹¤. binding.ok = text if (listener != null) { // Click Listenerë¥¼ Data Bindingì„ í†µí•´ ë„£ì–´ì¤ë‹ˆë‹¤. binding.okCallback = View.OnClickListener { v -&gt; listener.onClick(v) dismiss() } } else { binding.okCallback = listener } return this } // Dialog \"ë¶€ì •\" ë²„íŠ¼ Click Listener ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. // R.string.confirm ì˜ í˜•ì‹ì„ ì¸ìì— ë„£ì–´ì£¼ê³  Click Listener Callbackì„ ë°›ëŠ” Method ì…ë‹ˆë‹¤. fun setNegativeButton(@StringRes textId: Int, listener: View.OnClickListener): BasicDialog { return setNegativeButton(context.getText(textId), listener) } // resource.getString() ë¡œ string resourceë¥¼ ê°€ì ¸ì™€ ì¸ìì— ë„£ì–´ì£¼ê³  Click Listener Callbackì„ ë°›ëŠ” Method ì…ë‹ˆë‹¤. fun setNegativeButton(text: CharSequence, listener: View.OnClickListener?): BasicDialog { // ë¶€ì • ë²„íŠ¼ ì´ë¦„ì„ Data Binding ì„ í†µí•´ ë„£ì–´ì¤ë‹ˆë‹¤. binding.cancel = text if (listener != null) { // Click Listenerë¥¼ Data Bindingì„ í†µí•´ ë„£ì–´ì¤ë‹ˆë‹¤. binding.cancelCallback = View.OnClickListener { v -&gt; listener.onClick(v) dismiss() } } else { binding.cancelCallback = listener } return this } // Dialog ì·¨ì†Œê°€ ë˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. fun setCancelable(cancelable: Boolean): BasicDialog { builder.setCancelable(cancelable) return this } // Dialog ì˜ ì·¨ì†Œ Listener ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. fun setOnCancelListener(onCancelListener: DialogInterface.OnCancelListener): BasicDialog { builder.setOnCancelListener(onCancelListener) return this } // Dialog ê°€ dismiss ë ë•Œ í˜¸ì¶œë˜ëŠ” Listener ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. // Dialog ê°€ dismiss ë ë•Œ í•´ì•¼í•  ì ì—…ì´ ìˆì„ ë•Œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. fun setOnDismissListener(onDismissListener: DialogInterface.OnDismissListener): BasicDialog { builder.setOnDismissListener(onDismissListener) return this } // Dialog ì— Custom Viewë¥¼ ì„¸íŒ…í•´ì£¼ê³  dialogë¥¼ create() í•´ì£¼ëŠ” Method ì…ë‹ˆë‹¤. private fun create(): AlertDialog { builder.setView(binding.root) dialog = builder.create() return dialog!! } // Dialog ë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. Dialog ëŠ” ë§ˆì§€ë§‰ì— show()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. fun show() { create().show() } // Dialog ë¥¼ dismiss í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. fun dismiss() { dialog?.dismiss() }}xml ìª½ ì•Œì•„ë³´ê¸°DialogBasicPopupBinding ë‚´ë¶€ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;!-- Data Binding ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ alt + enter ë¥¼ í†µí•´ layout í…Œê·¸ë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. --&gt;&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\"&gt; &lt;data&gt; &lt;!-- Viewì˜ Visible ì²˜ë¦¬ë¥¼ í•´ì£¼ê¸° ìœ„í•´ import í•©ë‹ˆë‹¤. --&gt; &lt;import type=\"android.view.View\" /&gt; &lt;!-- ì œëª©, ì¦‰ Titleì„ ë‹´ë‹¹í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤. --&gt; &lt;variable name=\"subject\" type=\"CharSequence\" /&gt; &lt;!-- Messageë¥¼ ë‹´ë‹¹í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤. --&gt; &lt;variable name=\"body\" type=\"CharSequence\" /&gt; &lt;!-- ì·¨ì†Œ ë²„íŠ¼ì˜ ì´ë¦„ì„ ë‹´ë‹¹í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤. --&gt; &lt;variable name=\"cancel\" type=\"CharSequence\" /&gt; &lt;!-- í™•ì¸ ë²„íŠ¼ì˜ ì´ë¦„ì„ ë‹´ë‹¹í•˜ëŠ” ë³€ìˆ˜ì…ë‹ˆë‹¤. --&gt; &lt;variable name=\"ok\" type=\"CharSequence\" /&gt; &lt;!-- ì·¨ì†Œ ë²„íŠ¼ì˜ Click Listenr ë¥¼ ë‹´ë‹¹í•´ì¤„ ë³€ìˆ˜ì…ë‹ˆë‹¤. --&gt; &lt;variable name=\"cancelCallback\" type=\"android.view.View.OnClickListener\" /&gt; &lt;!-- í™•ì¸ ë²„íŠ¼ì˜ Click Listenr ë¥¼ ë‹´ë‹¹í•´ì¤„ ë³€ìˆ˜ì…ë‹ˆë‹¤. --&gt; &lt;variable name=\"okCallback\" type=\"android.view.View.OnClickListener\" /&gt; &lt;/data&gt; &lt;LinearLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:gravity=\"center\" android:paddingHorizontal=\"20dp\" tools:background=\"@color/colorSignUpHint\"&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\" android:padding=\"20dp\" android:background=\"@drawable/white_round_frame\"&gt; &lt;LinearLayout android:id=\"@+id/basicDialogTitleLl\" android:layout_width=\"0dp\" android:layout_height=\"wrap_content\" android:gravity=\"center\" android:minHeight=\"120dp\" android:orientation=\"vertical\" app:layout_constraintEnd_toEndOf=\"parent\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toTopOf=\"parent\"&gt; &lt;!-- ì‚¼í•­ì‹ì„ ì‚¬ìš©í•˜ì—¬ titleì´ null ì´ ì•„ë‹ˆë©´ ë³´ì—¬ì£¼ê³  null ì´ë©´ GONE ì²˜ë¦¬í•©ë‹ˆë‹¤. --&gt; &lt;TextView android:id=\"@+id/subjectTv\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:gravity=\"center\" android:letterSpacing=\"-0.02\" android:lineSpacingExtra=\"6sp\" android:paddingBottom=\"7.5dp\" android:lineSpacingMultiplier=\"0.65\" android:maxLines=\"3\" android:paddingTop=\"2.2dp\" android:text=\"@{subject}\" android:textColor=\"#000000\" android:textSize=\"17sp\" android:textStyle=\"bold\" android:visibility=\"@{subject != null ? View.VISIBLE : View.GONE}\" tools:text=\"ì¸ì¦ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.\\në‹¤ì‹œ ì¸ì¦í•´ì£¼ì„¸ìš”.\" /&gt; &lt;!-- ì‚¼í•­ì‹ì„ ì‚¬ìš©í•˜ì—¬ Messageê°€ null ì´ ì•„ë‹ˆë©´ ë³´ì—¬ì£¼ê³  null ì´ë©´ GONE ì²˜ë¦¬í•©ë‹ˆë‹¤. --&gt; &lt;TextView android:id=\"@+id/bodyTv\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_marginBottom=\"24.5dp\" android:gravity=\"center_horizontal\" android:letterSpacing=\"-0.03\" android:lineSpacingExtra=\"6sp\" android:lineSpacingMultiplier=\"0.65\" android:maxLines=\"5\" android:text=\"@{body}\" android:textColor=\"#000000\" android:textSize=\"14sp\" android:visibility=\"@{body != null ? View.VISIBLE : View.GONE}\" tools:text=\"ì¸ì¦ë²ˆí˜¸ë¥¼ ë°›ì§€ ëª»í•œ ê²½ìš° ì¬ìš”ì²­í•˜ì—¬ ì¸ì¦ë²ˆí˜¸ë¥¼ ìˆ˜ì‹  í›„ ì§„í–‰í•˜ì—¬ ì£¼ì‹­ì‹œì˜¤.\" /&gt; &lt;/LinearLayout&gt; &lt;LinearLayout android:layout_width=\"match_parent\" android:layout_height=\"48dp\" android:orientation=\"horizontal\" app:layout_constraintEnd_toEndOf=\"parent\" app:layout_constraintStart_toStartOf=\"parent\" app:layout_constraintTop_toBottomOf=\"@id/basicDialogTitleLl\"&gt; &lt;TextView android:layout_width=\"0dp\" android:layout_height=\"48dp\" android:layout_weight=\"1\" android:background=\"@drawable/common_button_cancel\" android:gravity=\"center\" android:letterSpacing=\"-0.02\" android:lineSpacingExtra=\"-4sp\" android:text=\"@{cancel}\" android:textColor=\"#ffffff\" android:textSize=\"16sp\" android:visibility=\"@{cancelCallback != null ? View.VISIBLE : View.GONE}\" android:onClick=\"@{cancelCallback}\" tools:text=\"@string/str_cancel\" /&gt; &lt;!-- Spaceë¥¼ í†µí•´ ì·¨ì†Œ ë²„íŠ¼ê³¼ í™•ì¸ ë²„íŠ¼ ì‚¬ì´ì— ê³µë°±ì„ ë§Œë“­ë‹ˆë‹¤. --&gt; &lt;!-- ì·¨ì†Œ ë²„íŠ¼ì˜ ClickListener ê°€ Null ì´ ì•„ë‹ˆê³  í™•ì¸ ë²„íŠ¼ì˜ ClickListener ê°€ Null ì´ ì•„ë‹ë•Œë§Œ ë³´ì—¬ì£¼ê³  ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ NUll ì¼ ê²½ìš° Gone ì²˜ë¦¬ ë©ë‹ˆë‹¤. --&gt; &lt;!-- &amp;amp;&amp;amp; = &amp;&amp; ì™€ ê°™ìŠµë‹ˆë‹¤. --&gt; &lt;Space android:id=\"@+id/space\" android:layout_width=\"8dp\" android:layout_height=\"48dp\" android:visibility=\"@{cancelCallback != null &amp;amp;&amp;amp; okCallback != null ? View.VISIBLE : View.GONE}\" /&gt; &lt;TextView android:layout_width=\"0dp\" android:layout_height=\"48dp\" android:layout_weight=\"1\" android:background=\"@drawable/common_button_ok\" android:gravity=\"center\" android:letterSpacing=\"-0.02\" android:lineSpacingExtra=\"-4sp\" android:text=\"@{ok}\" android:textColor=\"#ffffff\" android:textSize=\"16sp\" android:visibility=\"@{okCallback != null ? View.VISIBLE : View.GONE}\" android:onClick=\"@{okCallback}\" tools:text=\"@string/confirm\" /&gt; &lt;/LinearLayout&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; &lt;/LinearLayout&gt;&lt;/layout&gt;ì‹¤ì œë¡œ ì‚¬ìš©í•´ ë³´ê¸°class HomeFragment : Fragment() { private lateinit var binding: FragmentHomeBinding override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { binding = DataBindingUtil.inflate(inflater, layoutResId, container, false) return binding.root } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) binding.lifecycleOwner = viewLifecycleOwner binding.showDialogButton.setOnClickListener { BasicDialog(requireContext(), binding.root as? ViewGroup) .setMessageStylel( getSpannedFromHtml( resources.getString(R.string.str_hello) .format(\"narvis2\") ) ) .setPositiveButton(resources.getString(R.string.str_confirm)) { // TODO: í™•ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘ ì‘ì„± } .setNegativeButton(resources.getString(R.string.str_cancel)) { // TODO: ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘ ì‘ì„± // setNegativeButton í•¨ìˆ˜ ë‚´ë¶€ì— dialog.dismiss()ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë¹ˆì¹¸ìœ¼ë¡œ ë†”ë‘¬ë„ í´ë¦­ ì‹œ ìë™ dismissì²˜ë¦¬ ë©ë‹ˆë‹¤. } .show() // show() í•¨ìˆ˜ ë‚´ë¶€ì— create().show() ë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤. } } // ì œê³µëœ HTML ë¬¸ìì—´ì—ì„œ í‘œì‹œ ê°€ëŠ¥í•œ ìŠ¤íƒ€ì¼ í…ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” Method ì…ë‹ˆë‹¤. private fun getSpannedFromHtml(text: String?): Spanned? { return if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) { Html.fromHtml(text) } else { Html.fromHtml(text, Html.FROM_HTML_MODE_LEGACY) } }}strings íŒŒì¼&lt;!-- ì´ë ‡ê²Œí•˜ë©´ &lt;b&gt; &lt;/b&gt; ì•ˆì˜ ê¸€ìë§Œ Bold ì²˜ë¦¬ ë©ë‹ˆë‹¤. --&gt;&lt;string name=\"str_hello\"&gt;&lt;![CDATA[&lt;b&gt;%1$s&lt;/b&gt; ë‹˜ ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ?]]&gt;&lt;/string&gt;&lt;string name=\"str_confirm\"&gt;í™•ì¸&lt;/string&gt;&lt;string name=\"str_cancel\"&gt;ì·¨ì†Œ&lt;/string&gt;drawable1. common_button_cancel.xml ì…ë‹ˆë‹¤. ì·¨ì†Œ ë²„íŠ¼ ìƒ‰ìƒì´ íšŒìƒ‰ìœ¼ë¡œ ë°”ë€Œë©° ëª¨ì„œë¦¬ê°€ 14dp ë§Œí¼ ë‘¥ê¸€ê²Œ ë©ë‹ˆë‹¤.&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;corners android:radius=\"14dp\" /&gt; &lt;solid android:color=\"#a8a9ae\" /&gt;&lt;/shape&gt;2. common_button_ok.xml ì…ë‹ˆë‹¤. í™•ì¸ ë²„íŠ¼ ìƒ‰ìƒì´ ë‚¨ìƒ‰ìœ¼ë¡œ ë°”ë€Œë©° ëª¨ì„œë¦¬ê°€ 14dp ë§Œí¼ ë‘¥ê¸€ê²Œ ë©ë‹ˆë‹¤.&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;corners android:radius=\"14dp\" /&gt; &lt;solid android:color=\"#152348\" /&gt;&lt;/shape&gt;StyleAlertDialog.Builder(context, R.style.AlertDialogTheme) ì— ì ìš©ë˜ëŠ” Style ì…ë‹ˆë‹¤. ë’· ë°°ê²½ì„ íˆ¬ëª…ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤. dialog ê°€ í™”ë©´ì˜ ìœ„, ì•„ë˜ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ê°„ì— ì˜¤ë„ë¡ í•©ë‹ˆë‹¤. ìƒíƒœë°” ìƒ‰ìƒì„ íˆ¬ëª…ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.&lt;style name=\"AlertDialogTheme\" parent=\"transparent\"&gt; &lt;item name=\"android:windowBackground\"&gt;@android:color/transparent&lt;/item&gt; &lt;item name=\"android:layout_gravity\"&gt;center_vertical&lt;/item&gt; &lt;item name=\"android:statusBarColor\"&gt;@android:color/transparent&lt;/item&gt;&lt;/style&gt;ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Custom Dialogë¥¼ ë§Œë“œëŠ” ì½”ë“œë¥¼ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.í•´ë‹¹ ì½”ë“œëŠ” ì œê°€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.ë‹¤ìŒì—ëŠ” â€œì¤‘ë³µ í´ë¦­ ë°©ì§€â€ ê¸°ëŠ¥ì— ëŒ€í•œ ì½”ë“œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤." }, { "title": "Android RequestMultiplePermissions()ì„ ì‚¬ìš©í•˜ì—¬ ê¶Œí•œ ìš”ì²­", "url": "/posts/Android-Permission/", "categories": "Android, Permission", "tags": "android, permission", "date": "2022-07-15 15:22:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Androidì—ì„œ ìœ„í—˜ ê¶Œí•œì„ ìš”ì²­í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì„¤ëª…í•´ë³¼ê¹Œ í•©ë‹ˆë‹¤.ê¸°ì¡´ì—ëŠ” startActivityForResult()ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¶Œí•œ ìš”ì²­ì„ í•˜ì˜€ìœ¼ë‚˜ í•´ë‹¹ í•¨ìˆ˜ê°€ Deprecatedë¨ì— ë”°ë¼ startActivityForResult()ë¥¼ ëŒ€ì²´í•˜ëŠ” ë°©ë²•ì„ Codeë¥¼ í†µí•´ ê°„ë‹¨íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.RequestMultiplePermissions() ì‚¬ìš©class MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding // í•„ìš”í•œ ê¶Œí•œì„ ë°°ì—´ì— ë‹´ìŠµë‹ˆë‹¤. private val permissions = arrayOf( Manifest.permission.RECORD_AUDIO, Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE ) private val permissionResultLauncher = registerForActivityResult(ActivityResultContracts.RequestMultiplePermissions()) { if(it.all { permissions -&gt; permissions.value == ture}) { // TODO: ê¶Œí•œì´ ìŠ¹ì¸ë˜ì—ˆì„ ê²½ìš° } else { // ê¶Œí•œì´ ê±°ë¶€ ë˜ì—ˆì„ ê²½ìš° } } override fun onCreate(saveInstanceState: Bundle?) { super.onCreate(saveInstanceState) binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this // ê¶Œí•œ ì²´í¬ í›„ ê¶Œí•œì´ í—ˆê°€ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ê¶Œí•œ ìš”ì²­ if (!checkPermission(permissions)) { permissionResultLauncher.launch(permissions) } binding.startSubActivity.setOnClickListener { onStartSubActivity() } } // ê¶Œí•œì„ ì²´í¬í•˜ëŠ” í•¨ìˆ˜ private fun checkPermissions(permissions: Array&lt;String&gt;): Boolean = permissions.all { it: String ContextCompat.checkSelfPermission(this, it) == PackageManager.PERMISSION_GRANTED } private fun onStartSubActivity() { // ê¶Œí•œì´ ê±°ë¶€ëœ ê²½ìš° Dialog ìƒì„± if (!checkPermissions(permissions)) { val alert = AlertDialog.Builder(this) alert.apply { setTitle(\"ê¶Œí•œ ì„¤ì •\") setMessage(\"ê¶Œí•œ ê±°ì ˆë¡œ ì¸í•´ ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\") setPositiveButton(\"ê¶Œí•œ ì„¤ì •í•˜ëŸ¬ ê°€ê¸°\") { _, _ -&gt; try { // ê¶Œí•œì´ ì—†ì„ ë•Œ \"ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´\" í™”ë©´ìœ¼ë¡œ ì´ë™ val intent = Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS) .setData(Uri.fromParts(\"package\", packageName, null)) startActivity(intent) } catch (e: ActivityNotFoundException) { e.printStackTrace() // ë‚˜ì˜ Applicationì„ ëª»ì°¾ì•˜ì„ ë•Œ -&gt; \"ì• í”Œë¦¬ì¼€ì´ì…˜\" ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™ val intent = Intent(Settings.ACTION_MANAGE_APPLICATIONS_SETTINGS) startActivity(intent) } } setNegativeButton(\"ì·¨ì†Œ\") { dialog, _ -&gt; // ê¶Œí•œì´ ê±°ë¶€ ë˜ì—ˆì„ ê²½ìš° dialog.dismiss() } create() show() } return } // ê¶Œí•œì„ ìŠ¹ì¸í•œ ê²½ìš° SubActivityë¡œ ì´ë™ startActivity(Intent(this, SubActivity::class.java)) }}" }, { "title": "Android Intent ì— ê´€í•˜ì—¬", "url": "/posts/Android-Intent/", "categories": "Android, Intent", "tags": "android, intent", "date": "2022-07-15 14:48:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì§€ë‚œë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Android 4ëŒ€ Component ì— ëŒ€í•˜ì—¬ ì­‰ ì•Œì•„ ë³´ì•˜ìŠµë‹ˆë‹¤.ì˜¤ëŠ˜ì€ Android 4ëŒ€ Component ê°„ì— í†µì‹ ì— ì‚¬ìš©ë˜ëŠ” Intentì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.IntentëŠ” Application Component ê°„ì— ì‘ì—… ìˆ˜í–‰ì„ ìœ„í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì¦‰, Component ê°„ì˜ â€œí†µì‹ ìˆ˜ë‹¨â€ì´ë¼ê³  ì´í•´í•˜ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤.Intentì—ëŠ” ëª…ì‹œì  ì¸í…íŠ¸, ì•”ì‹œì  ì¸í…íŠ¸ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.ê°ê° ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Intent ì— ëŒ€í•œ ê°„ë‹¨ ì„¤ëª… Android Component ê°„ í†µì‹ ì— ì´ìš©ë©ë‹ˆë‹¤. Componentì— Action, Data ë“±ì„ ì „ë‹¬í•©ë‹ˆë‹¤. Intentë¥¼ í†µí•˜ì—¬ ë‹¤ë¥¸ Applicationì˜ Componentë¥¼ í™œì„±í™” ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì˜ˆë¡œëŠ” Activityê°„ì˜ í™”ë©´ ì „í™˜ì´ ìˆìŠµë‹ˆë‹¤.Explicit Intent(ëª…ì‹œì  ì¸í…íŠ¸) ëª…ì‹œì  ì¸í…íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ Activity, Serviceê°™ì€ Componentë¥¼ ì‹œì‘í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì°¸ê³  : ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” Activity ë˜ëŠ” Serviceì˜ class nameì„ ì‚¬ìš©í•˜ëŠ” í˜•íƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. private startMainActivity() { val intent = Intent(this@IntroActivity, MainActivity::class.java) startActivity(intent)} Implicit Intent(ì•”ì‹œì  ì¸í…íŠ¸) íŠ¹ì • êµ¬ì„± ìš”ì†Œì˜ class nameì„ ì•Œì•„ì•¼ í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, ìˆ˜í–‰í•  ì‘ì—…ì„ ì„ ì–¸í•˜ì—¬ ë‹¤ë¥¸ ì•±ì˜ êµ¬ì„± ìš”ì†Œê°€ ì´ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Intent ì…ë‹ˆë‹¤. binding.startGoogleWeb.setOnClickListener { // Google ë¸Œë¼ìš°ì €ë¥¼ ë„ì›Œì¤ë‹ˆë‹¤. val intent = Intent(Intent.ACTION_VIEW, Uri.parse(\"http://www.google.com\")) startActivity(intent)} " }, { "title": "Android 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ ContentProvider ì— ëŒ€í•˜ì—¬", "url": "/posts/Android-ContentProvider/", "categories": "Android, 4 Component", "tags": "contentProvider, android, contentResolver", "date": "2022-07-15 10:32:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2ì…ë‹ˆë‹¤.ì§€ë‚œ í¬ìŠ¤íŒ…ì—ì„œëŠ” BroadcastReceiverì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì§€ë‚œ ì‹œê°„ì— ì´ì–´ Android 4ëŒ€ Component ì¤‘ í•˜ë‚˜ì¸ ContentProviderì— ê´€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ContentProviderëŠ” Application ì‚¬ì´ì—ì„œ Dataë¥¼ ê³µìœ í•˜ëŠ” í†µë¡œ ì—­í• ì„ í•©ë‹ˆë‹¤. ì¦‰, Android Systemì˜ ê°ì¢… ì„¤ì •ê°’ì´ë‚˜ DBì— ì ‘ê·¼í•˜ê²Œ í•´ì¤ë‹ˆë‹¤.ì—¬ê¸°ì— ì´ì–´ ContentResolverë¼ëŠ” ë…€ì„ì´ ë‚˜ì˜¤ëŠ”ë° ì´ ë…€ì„ì€ ContentProviderëŠ” ë¯¸ë¦¬ ë§Œë“¤ì–´ì ¸ ìˆëŠ” ContentProviderë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë„êµ¬ ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ë©´ ContentProviderëŠ” Android System ì˜ ê°ì¢… ì„¤ì •ê°’ì´ë‚˜ DBì— ì ‘ê·¼í•˜ê²Œ í•´ì£¼ê³  ContentResolverëŠ” ê·¸ ê²°ê³¼ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ì—­í•  ì…ë‹ˆë‹¤.ContentProvider Applicationì˜ Dataë¥¼ ë‹¤ë¥¸ Applicationê³¼ ê³µìœ í•˜ëŠ” ê²ƒì„ ë„ì™€ì¤ë‹ˆë‹¤. ë‚˜ì˜ Application ì´ ContentProviderë¥¼ êµ¬í˜„í•˜ì—¬ ì œê³µí•˜ë©´, ë‹¤ë¥¸ Applicationë“¤ì€ ContentResolverë¥¼ í†µí•˜ì—¬ ë‚˜ì˜ Application ì— êµ¬í˜„ëœ ContentProviderì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ Applicationë“¤ì€ ContentProviderê°€ ì œê³µí•˜ëŠ” APIë“¤ì„ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì €ì¥, ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë¬¼ë¡  ë‚´ë¶€ì ìœ¼ë¡œ SQLiteì™€ ê°™ì€ Databaseë¥¼ ì‚¬ìš©í•˜ì—¬ Dataë¥¼ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ContentProviderëŠ” ë‹¤ë¥¸ Applicationê³¼ Dataë¥¼ ê³µìœ í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¼ê³  ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ContentResolver ContentProvider ê°€ ì œê³µí•˜ëŠ” Dataë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ContentResolverë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. â€œë¯¸ë¦¬ ë§Œë“¤ì–´ì ¸ ìˆëŠ” ContentProviderë¡œ ë¶€í„° Dataë¥¼ ê°€ì ¸ì˜¤ëŠ” ë„êµ¬â€ë¼ê³  ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤. Applicationì´ ContentProviderì— ì ‘ê·¼í•  ë•ŒëŠ” ContentResolverë¥¼ í†µí•´ ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ CRUD í•¨ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.(ë‹¤ë¥¸ Applicationì˜ Databaseë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.) ì£¼ë¡œ Androidì— ìˆëŠ” ì—°ë½ì²˜, ê°¤ëŸ¬ë¦¬, ìŒì•… íŒŒì¼ê³¼ ê°™ì€ ê¸°ë³¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì°¸ê³  : AndroidëŠ” Media ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì €ì¥ì†Œ ìš©ë„ë¡œ MediaStoreì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ContentProvider, ContentResolver ë¥¼ í†µí•´ Imageë¥¼ ê°€ì ¸ì˜¤ê¸°ContentResolverë¥¼ í†µí•˜ì—¬ ê°¤ëŸ¬ë¦¬ì— ì ‘ê·¼í•˜ì—¬ ì›í•˜ëŠ” Imageë¥¼ ê°€ì ¸ì˜¤ëŠ” ì˜ˆì œë¥¼ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤. MediaStoreì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê¸° private fun onAttachFileClick() { // Android ì˜ 4ëŒ€ Component ì˜ í†µì‹ ì€ Intentë¡œ í•©ë‹ˆë‹¤. val intent = Intent(Intent.ACTION_PICK).apply { this: Intent type = MediaStore.Images.Media.CONTENT_TYPE type = \"image/*\" } startIntentImage.launch(intent) } ContentResolverë¥¼ í†µí•˜ì—¬ Image ê°€ì ¸ì˜¤ê¸° private val startIntentImage: ActivityResultLauncher&lt;Intent&gt; = registerForActivityResult( ActivityResultContracts.StartActivityForResult() ) { result: ActivityResult -&gt; result.data?.extras?.clear() val data = result.data?.data if (data != null &amp;&amp; result.resultCode == AppCompatActivity.RESULT_OK) { val context = binding.imageView.context val bitmap = MediaStore.Images.Media.getBitmap( context.contentResolver, data ) // Bitmap ì˜ ë¹„ìœ¨ì„ ì§€ì •í•©ë‹ˆë‹¤. val ratio = if (max(bitmap.width.toDouble(), bitmap.height.toDouble()) &gt; 1270) { when { bitmap.width &gt; bitmap.height -&gt; { 1270.0 / bitmap.width.toDouble() } else -&gt; { 1270.0 / bitmap.height.toDouble() } } } else { 1.0 } val width = (bitmap.width.toDouble() * ratio).toInt() val height = (bitmap.height.toDouble() * ratio).toInt() Glide.with(context) .asBitmap() .load(bitmap) .override(width, height) .centerCrop() .into(object : CustomTarget&lt;Bitmap&gt;() { override fun onResourceReady( resource: Bitmap, transition: com.bumptech.glide.request.transition.Transition&lt;in Bitmap&gt;?, ) { // í•´ë‹¹ í•¨ìˆ˜ë¥¼ í†µí•´ Custom ëœ Bitmapì„ ImageViewì— ë„£ìŠµë‹ˆë‹¤. BindingAdapters.loadBitmapCorner( view = binding.imageView, bitmap = resource, corner = 5, placeHolder = R.drawable.round_frame_gray_5 ) // bitmap ê³¼ Glide ì˜ loadì— ë„£ì—ˆë˜ bitmapì´ ë‹¤ë¥¸ ê²½ìš° bitmapì„ ì§€ì›ë‹ˆë‹¤. if (bitmap != resource) { bitmap.recycle() } } override fun onLoadCleared(placeholder: Drawable?) {} }) } } loadBitmapCorner() í•¨ìˆ˜ DataBindingì„ ìœ„í•œ BindingAdapterë¥¼ ì‚¬ìš©í•œ í•¨ìˆ˜ì…ë‹ˆë‹¤. @BindingAdapter(value = [\"loadBitmapCorner\", \"corner\", \"placeholder\", \"error\", \"mask\"])fun loadBitmapCorner( view: ImageView, bitmap: Bitmap, corner: Int = 0, @DrawableRes placeholder: Int = 0, @DrawableRes error: Int = 0) { val arrayList = arrayListOf&lt;Transformation&lt;Bitmap&gt;&gt;() arrayList.add(CenterCrop()) // imageì˜ Corners ë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤. if (corner != 0) { arrayList.add(RoundedCorners(corner.pxToDp(view.context))) } val options = RequestOptions() .transform(*(arrayList.toTypedArray())) // ì´ë¯¸ì§€ loadì— ì‹¤íŒ¨í•œ ê²½ìš° errorì— ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. @SuppressLint(\"CheckResult\") if (error != 0) { options.error(error) } Glide.with(view.context) .setDefaultRequestOptions(options) .load(bitmap).apply { // placeHolder -&gt; ìš”ì²­ë°›ì€ ì´ë¯¸ì§€ê°€ ë‚˜íƒ€ë‚˜ê¸° ì „ê¹Œì§€ ì§€ì •í•œ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. // ë„¤íŠ¸ì›Œí¬ë¡œ ì´ë¯¸ì§€ë¥¼ ìš”ì²­í•˜ê±°ë‚˜ í° ì´ë¯¸ì§€ë¥¼ ìš”ì²­í•˜ì—¬ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ë•Œ PlaceHolderë¡œ ì§€ì •í•œ ì´ë¯¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. @SuppressLint(\"CheckResult\") if (placeholder != 0) { apply(options.placeholder(placeholder)) } } .into(view)} ë§ˆì¹˜ë©°ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ContentProvider, ContentResolverì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì´ë²ˆ í¬ìŠ¤íŒ…ì„ ìš”ì•½í•˜ìë©´ ContentProvider ê°€ ì œê³µí•˜ëŠ” Dataë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ContentResolverë¥¼ ì‚¬ìš©í•˜ë©° Applicationì´ ContentProviderì— ì ‘ê·¼í•  ë•ŒëŠ” ContentResolverë¥¼ í†µí•´ ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Android 4ëŒ€ Component ê°„ì— í†µì‹ ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” Intentì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "Android 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ BroadcastReceiver ì— ëŒ€í•˜ì—¬", "url": "/posts/Android-BroadcastReceiver/", "categories": "Android, 4 Component", "tags": "broadcastReceiver, android", "date": "2022-07-15 08:34:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2ì…ë‹ˆë‹¤.ì§€ë‚œë²ˆì— Android4 ëŒ€ Component ì¤‘ í•˜ë‚˜ì¸ Serviceì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì´ë²ˆ ì‹œê°„ì—ëŠ” Android 4ëŒ€ Component(Activity, ContentProvider, BroadcastReceiver, Service) ì¤‘ í•˜ë‚˜ì¸ BroadcastReceiverì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.BroadcastReceiver ëŠ” ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ â€œë°©ì†¡â€ì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´ ì „í™”, ë¬¸ì ë“± ì–´ë–¤ í–‰ìœ„ê°€ ì™”ë‹¤ëŠ” ì•Œë¦¼ì„ ë°›ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°‘ì—ì„œ ë”ìš± ìì„¸í•œ ë‚´ìš©ì„ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.BroadcastReceiver ì „í™”, ë¬¸ì ë“± ì–´ë–¤ í–‰ìœ„ê°€ ì™”ë‹¤ëŠ” ì•Œë¦¼ì„ ë°›ê³  ì´ê²ƒì„ ì•Œë ¤ì£¼ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´ Android Systemì€ System â€œë¶€íŒ…â€, â€œê¸°ê¸° ì¶©ì „â€ ì‹œì‘ê³¼ ê°™ì€ ë‹¤ì–‘í•œ System Eventê°€ ë°œìƒí•  ë•Œ Broadcast ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.ì´ BroadcastëŠ” Intentë¥¼ í†µí•´ ë°œì†¡í•˜ê²Œ ë˜ê³ , ì´ë ‡ê²Œ ë°œì†¡ëœ BroadcastëŠ” BroadcastReceiver ê°ì²´ê°€ ìˆ˜ì‹ í•˜ê²Œ ë©ë‹ˆë‹¤. BroadcastReceiverëŠ” Broadcastê°€ ë°œìƒí•˜ë©´ Intent-Filterë¥¼ í†µí•´ ì›í•˜ëŠ” Intentë§Œ ìˆ˜ì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì°¸ê³  : AndroidManifestì— Receiverë¥¼ ë“±ë¡í•˜ê³  Intent-Filterë¥¼ í†µí•´ ì›í•˜ëŠ” Intentì— ëŒ€í•´ì„œë§Œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ìˆ˜ë§ì€ Broadcast ì¤‘ì—ì„œ ì–´ë–¤ ê²ƒì„ ìˆ˜ì‹ í•  ê²ƒì¸ì§€ ë“±ë¡í•˜ëŠ” ê³¼ì •ì´ë¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. BroadcastReceiverëŠ” ë³µì¡ì„±ì´ ë‚®ê³  Processê°„ì˜ ê°€ì¥ ì‰¬ìš´ í†µì‹  ë°©ë²•ì…ë‹ˆë‹¤. One to All í†µì‹ ìœ¼ë¡œ ëª¨ë“  ìˆ˜ì‹ ìì—ê²Œ ë™ì‹œì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.(Android OS ê¸°ë°˜ ì‘ìš© í”„ë¡œê·¸ë¨ êµ¬ì„± ìš”ì†Œê°„ì˜ í†µì‹ ) ë”°ë¼ì„œ ë³´ì•ˆ ìœ„í˜‘ì´ ë°œìƒ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë¯¼ê°í•œ ë°ì´í„°ëŠ” ë°©ì†¡ë˜ì–´ì„œëŠ” ì•ˆë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì°¸ê³  : Process ê°„ í†µì‹ ì„ ìœ„í•´ BroadcastReceiverë¥¼ ì‚¬ìš©í•˜ë©´ ì´ëŸ¬í•œ ë³´ì•ˆ ìœ„í˜‘ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš° BroadcastReceiverë¥¼ ëŒ€ì‹ í•˜ì—¬ AIDLì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¹„ë™ê¸° í†µì‹ ì…ë‹ˆë‹¤.onReceive() ê°„ë‹¨í•˜ê²Œ â€œë‚´ê°€ ì›í•˜ëŠ” Broadcastë¥¼ ê³ ë¥´ëŠ” ê³³â€ ì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ì¦‰, ì›í•˜ëŠ” Intent.actionì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ê³³ì…ë‹ˆë‹¤. í•­ìƒ Main Thread ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤. Intentë¥¼ í†µí•´ Dataë¥¼ ë³´ë‚¼ ë•Œ Data í¬ê¸°ë¥¼ ëª‡ KBë¡œ ì œí•œ í•˜ë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ì£¼ì˜!! : ë„ˆë¬´ ë§ì€ ë°ì´í„°ë¥¼ ë³´ë‚¼ ê²½ìš° TransactionTooLargeException ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.IntentëŠ” ìµœëŒ€ 500Kb í¬ê¸°ì˜ Dataë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€í‘œì ì¸ Broadcast ì¢…ë¥˜ ACTION_BOOT_COMPLERED : System ë¶€íŒ…ì´ ëë‚¬ì„ ë•Œ(RECEIVE_BOOT_COMPLETED ê¶Œí•œ ë“±ë¡ í•„ìš” ACTION_CAMERA_BUTTON : ì¹´ë©”ë¼ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ACTION_DATE_CHANGED, ACTION_TIME_CHANGED : í•¸ë“œí°ì˜ ë‚ ì§œ, ì‹œê°„ì´ ìˆ˜ë™ìœ¼ë¡œ ë³€í–ˆì„ ë•Œ ì¦‰, ì„¤ì •ì—ì„œ ìˆ˜ì •í–ˆì„ ë•Œ ACTION_SCREEN_OFF, ACTION_SCREEN_ON : í™”ë©´ on, off ACTION_AIRPLANE_MODE_CHANGED : ë¹„í–‰ê¸° ëª¨ë“œ ACTION_BATTERY_CHANGED, ACTION_BATTERY_LOW, ACTION_BATTERY_OKAY : ë² í„°ë¦¬ ìƒíƒœ ë³€í™” ACTION_PACKAGE_ADDED, ACTION_PACKAGE_CHANGED, ACTION_PACKAGE_DATA_CLEARED, ACTION_PACKAGE_INSTALL, ACTION_PACKAGE_REMOVED, ACTION_PACKAGE_REPLACED, ACTION_PACKAGE_RESTARTED : ì–´í”Œ ì„¤ì¹˜ / ì œê±° ACTION_POWER_CONNECTED, ACTION_POWER_DISCONNECTED : ì¶©ì „ ê´€ë ¨ ACTION_REBOOT, ACTION_SHUTDOWN : ì¬ë¶€íŒ… / ì¢…ë£Œ ACTION_TIME_TICK : ë§¤ ë¶„ë§ˆë‹¤ ìˆ˜ì‹  android.provider.Telephony.SMS_RECEIVED : SMS ìˆ˜ì‹  (RECEIVE_SMS ê¶Œí•œ í•„ìš”)BroadcastReceiverì˜ ì¢…ë¥˜ Global Broadcast : ì¼ë°˜ì ìœ¼ë¡œ ì´ì•¼ê¸°í•˜ëŠ” Broadcast ì´ë©°, Process ê°„ì˜ ê²½ê³„ë¥¼ ë¬´ì‹œí•˜ê³  Android System ìƒì— ë“±ë¡ëœ ëª¨ë“  Receiver ë“¤ì—ê²Œ ì „ë‹¬ë©ë‹ˆë‹¤. Local Broadcast : í˜„ì¬ Process ì•ˆì—ë§Œ ìœ íš¨í•œ Broadcast ì…ë‹ˆë‹¤. ì£¼ë¡œ Process ê°„ì˜ í†µì‹ ì— ì‚¬ìš©ë©ë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´ bindServiceë¥¼ í†µí•˜ì—¬ Service -&gt; Activity/Fragment ê°„ì˜ í†µì‹ ì— LocalBroadcastReceiverë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. LocalBroadcastManagerë¥¼ ì´ìš©í•œ Process í†µì‹ ì— ëŒ€í•´ ê°„ë‹¨í•œ ì˜ˆì œë¡œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.1. BroadcastReceiver ë“±ë¡private fun registerLocalBroadcastManager() { LocalBroadcastManager.getInstance(context).registerReceiver(broadcastReceiver, createIntentFilter())}Intent-Filterprivate fun createIntentFilter(): IntentFilter { // Action Typeì„ ì§€ì •í•´ ì¤ë‹ˆë‹¤. ì´ Typeì„ ë°”íƒ•ìœ¼ë¡œ onReceive() ì—ì„œ actionì„ ë¶„ë¥˜í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤. return IntentFilter().apply { addAction(\"Test\") }}2. BroadcastReceiver í•´ì œprivate fun unRegisterLocalBroadcastManager() { LocalBroadcastManager.getInstance(context).unregisterReceiver(broadcastReceiver)}3. BroadcastReceiverì— Intent ì „ë‹¬private fun sendTestBroadcast() { val message = \"test ì…ë‹ˆë‹¤.\" val intent = Intent(\"Test\") intent.putExtra(\"TestData\", message) LocalBroadcastManager.getInstance(context).sendBroadcast(intent)}4. Broadcast ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ìª½ onReceive()Activity/Fragment ì˜ ìƒíƒœ ê³µìœ ë¥¼ ìœ„í•´ AndroidViewModel() ì„ ì‚¬ìš©í•˜ì—¬ AndroidViewModel ì•ˆì— í•´ë‹¹ ì½”ë“œ ì‘ì„±// ê°ì²´ ì§€í–¥ì„ ì§€ì¼œ ë‚´ë¶€ì—ì„œëŠ” ê°’ì„ ë„£ì„ ìˆ˜ ìˆê³ , ì™¸ë¶€ì—ì„œëŠ” ê°’ì„ ëª»ë„£ê³  ê°€ì ¸ì˜¬ìˆ˜ë§Œ ìˆë„ë¡ í•©ë‹ˆë‹¤.private val _testEvent = MutableLiveData&lt;String&gt;()val testEvent: LiveData&lt;String&gt; get() = _testEvent// BroadcastReceiver ìƒì„±private val broadcastReceiver = object : BroadcastReceiver() { override fun onReceive(context: Context?, intent: Intent?) { // intentê°€ null ì´ ì•„ë‹ë•Œë§Œ ë°‘ì— ë¡œì§ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. null ì¼ ê²½ìš° Timberë¥¼ ì´ìš©í•˜ì—¬ Error Logë¥¼ ë‚¨ê¹ë‹ˆë‹¤. intent?.let { it: Intent // intent ë‚´ë¶€ì˜ dataê°€ nullì´ ì•„ë‹ë•Œë§Œ ë°‘ì˜ ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. null ì¼ ê²½ìš° Timberë¥¼ ì´ìš©í•˜ì—¬ Error Logë¥¼ ë‚¨ê¹ë‹ˆë‹¤. it.getStringExtra(\"TestData\")?.let { data: String -&gt; when (it.action) { \"Test\" -&gt; { // TODO : ê°’ì„ StateFlow, LiveDataì— ë„£ê³  ì ì ˆí•œ ê³³ì—ì„œ Observing í˜¹ì€ ì§ì ‘ ì²˜ë¦¬ _testEvent.postValue(data) } } } ?: Timber.e(\"onReceive data is null.\") } ?: Timber.e(\"onReceive intent is null.\") }}5. Activity, Fragment ì—ì„œ í•´ë‹¹ Eventë¥¼ Observing Activityì—ì„œ Observing class MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding // activityX ë¥¼ ì´ìš©í•œ ViewModel ìƒì„± // í•´ë‹¹ by viewModels()ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” build.gradle(app)ì— androidX ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. private mainViewModel: MainViewModel by viewModels() override fun onCreate(saveInstanceState: Bundle?) { binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this mainViewModel.testEvent.observe(this) { it: String Toast.makeText(this, it, Toast.LENGTH_SHORT).show() } }} Fragmentì—ì„œ Observing class HomeFragment : Fragment() { private lateinit var binding: FragmentHomeBinding // fragmentX ë¥¼ ì´ìš©í•œ ViewModel ìƒì„± (Activityì— ìˆëŠ” MainViewModel ê³µìœ ) // í•´ë‹¹ by activityViewModels()ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” build.gradle(app)ì— fragmentX ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ì…”ì•¼ í•©ë‹ˆë‹¤. private mainViewModel: MainViewModel by activityViewModels() override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { binding = DataBindingUtil.inflate(inflater, layoutResId, container, false) return binding.root } override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) binding.lifecycleOwner = viewLifecycleOwner mainViewModel.testEvent.observe(viewLifecycleOwner) { it: String Toast.makeText(requireContext(), it, Toast.LENGTH_SHORT).show() } }} 6. LocalBroadcastManager ê´€ë ¨ ì „ì²´ ì½”ë“œclass MainViewModel(application: Application) : AndroidViewModel(application) { private val context = application // StateFlow, SharedFlow ë¥¼ ì‚¬ìš©í•˜ì…”ë„ ë¬´ë°©í•©ë‹ˆë‹¤. // ì €ëŠ” ìš”ì¦˜ StateFlow, SharedFlow, Coroutine Channel ì„ ì‚¬ìš©í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•œ ì˜ˆë¥¼ ìœ„í•´ LiveDataë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. private val _testEvent = MutableLiveData&lt;String&gt;() val testEvent: LiveData&lt;String&gt; get() = _testEvent // LocalBroadcastManager ë“±ë¡ private fun registerLocalBroadcastManager() { LocalBroadcastManager.getInstance(context.applicationContext).registerReceiver(broadcastReceiver, createIntentFilter()) } // Intent-Filter ìƒì„± // Kotlin Type ì¶”ë¡ ì— ì˜í•˜ì—¬ ë°˜í™˜ê°’ì„ ì ì–´ì£¼ì§€ ì•Šìœ¼ì…”ë„ ë˜ì§€ë§Œ ì´í•´ë¥¼ ë•ê¸°ìœ„í•´ ë°˜í™˜ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ì ì—ˆìŠµë‹ˆë‹¤. private fun createIntentFilter(): IntentFilter = IntentFilter().apply { // ì—¬ê¸°ì„œëŠ” action Type í•˜ë‚˜ ë¿ì´ë¼ í•˜ë“œ ì½”ë”©ì„ í•˜ì˜€ì§€ë§Œ, // typeì´ ì—¬ëŸ¬ê°œì¼ ê²½ìš° enum classë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. addAction(\"Test\") } // LocalBroadcastManager í•´ì œ private fun unRegisterLocalBroadcastManager() { LocalBroadcastManager.getInstance(context.applicationContext).unregisterReceiver(broadcastReceiver) } // BroadcastReceiverì— Intent ì „ë‹¬í•˜ëŠ” í•¨ìˆ˜ private fun sendTestBroadcast() { // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•œ ì˜ˆë¥¼ ë“¤ê¸° ìœ„í•´ String ê°’ì„ ë„£ì—ˆìœ¼ë‚˜ // ì§ë ¬í™”ë¥¼ í†µí•´ ê°ì²´ë¥¼ Stringìœ¼ë¡œ ë°”ê¿”ì„œ ë„˜ê¸°ê³  onReceive() ì—ì„œ ì—­ì§ë ¬í™”ë¥¼ í†µí•´ Stringì„ ê°ì²´ë¡œ ë°”ê¿” ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. val message = \"test ì…ë‹ˆë‹¤.\" val intent = Intent(\"Test\") intent.putExtra(\"TestData\", message) LocalBroadcastManager.getInstance(context.applicationContext).sendBroadcast(intent) } // BroadcastReceiver ìƒì„± private val broadcastReceiver = object : BroadcastReceiver() { override fun onReceive(context: Context?, intent: Intent?) { // intentê°€ null ì´ ì•„ë‹ë•Œë§Œ ë°‘ì— ë¡œì§ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. null ì¼ ê²½ìš° Timberë¥¼ ì´ìš©í•˜ì—¬ Error Logë¥¼ ë‚¨ê¹ë‹ˆë‹¤. intent?.let { it: Intent // intent ë‚´ë¶€ì˜ dataê°€ nullì´ ì•„ë‹ë•Œë§Œ ë°‘ì˜ ë¡œì§ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. null ì¼ ê²½ìš° Timberë¥¼ ì´ìš©í•˜ì—¬ Error Logë¥¼ ë‚¨ê¹ë‹ˆë‹¤. it.getStringExtra(\"TestData\")?.let { data: String -&gt; when (it.action) { \"Test\" -&gt; { // TODO : ê°’ì„ StateFlow, LiveDataì— ë„£ê³  ì ì ˆí•œ ê³³ì—ì„œ Observing í˜¹ì€ ì§ì ‘ ì²˜ë¦¬ _testEvent.postValue(data) } } } ?: Timber.e(\"onReceive data is null.\") } ?: Timber.e(\"onReceive intent is null.\") } }}ë§ˆì¹˜ë©°ì´ë²ˆ ì‚¬ê°„ì—ëŠ” BroadcastReceiverì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.BroadcastReciverëŠ” Android 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ì´ë©° í•¸ë“œí°ì˜ ê°ê°€ì§€ Eventì™€ Processê°„ì˜ í†µì‹ ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤.í•¸ë“œí°ì˜ ê°ê°€ì§€ Eventë¥¼ ìˆ˜ì‹ í•  ë•ŒëŠ” Global BroadcastReceiver ì¦‰, ì¼ë°˜ BroadcastReceiverë¥¼ ì‚¬ìš©í•˜ê³  Processê°„ í†µì‹ ì— ì‚¬ìš©í•  ê²½ìš° LocalBroadcastManagerë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.ì €ëŠ” Service -&gt; Fragment/Activity í†µì‹ ì— ìˆì–´ LocalBroadcastManager ë¥¼ ì‚¬ìš© í•˜ì˜€ìœ¼ë©°, ìš”ì¦˜ì—ëŠ” BroadcastReceiverì˜ í˜¹ì‹œ ëª¨ë¥¼ ë³´ì•ˆìƒ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ AIDL ì„ ì‚¬ìš©í•˜ì—¬ Process í†µì‹ ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.ìµœëŒ€í•œ ì´í•´ë¥¼ ë•ê¸°ìœ„í•´ ì‹¤ë¬´ì ì¸ ì½”ë“œë¥¼ ë³´ì—¬ë“œë¦¬ê³  ì„¤ëª… ë“œë ¸ìŠµë‹ˆë‹¤.ë„ì›€ì´ ë˜ì…¨ê¸¸ ë°”ë¼ë©°, ë‹¤ìŒì—ëŠ” Android 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ì¸ â€œContentProviderâ€ì— ê´€í•œ í¬ìŠ¤íŒ…ìœ¼ë¡œ ëŒì•„ì˜¤ê² ìŠµë‹ˆë‹¤.Android 4ëŒ€ Component Service ì°¸ê³  Activityì˜ Lifecycle ì°¸ê³ " }, { "title": "Android 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ Service ì— ëŒ€í•˜ì—¬", "url": "/posts/Android-Service/", "categories": "Android, 4 Component", "tags": "android, service, bind, foregorund", "date": "2022-07-14 16:56:00 +0900", "snippet": "ì•ˆë…•í•˜ì„¸ìš”. Narvis2 ì…ë‹ˆë‹¤.ì˜¤ëŠ˜ì€ Android 4ëŒ€ Component(Activity, ContentProvider, BroadcastReceiver, Service) ì¤‘ í•˜ë‚˜ì¸ Serviceì— ëŒ€í•˜ì—¬ ì•Œì•„ë³¼ê¹Œ í•©ë‹ˆë‹¤.ì•ˆë“œë¡œì´ë“œ Documentì— ë”°ë¥´ë©´ Serviceì˜ ì£¼ëœ ëª©ì ì€ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬í•˜ë¼ê³  ì í˜€ìˆìŠµë‹ˆë‹¤.ì €ëŠ” í˜„ ì§ì¥ì—ì„œ ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥ì„ ìœ„í•œ Socket í†µì‹ ì— Bind Serviceë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.Serviceì˜ ì¢…ë¥˜ë¡œëŠ” Background, Bound, Foregroundê°€ ìˆìœ¼ë©° Background Serviceë¶€í„° ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.Background Service ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ë³´ì´ì§€ ì•ŠëŠ” ì‘ì—…ì„ ìˆ˜í–‰í• ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¥¼ í˜¸ì¶œìì—ê²Œ ë°˜í™˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Applicationì„ ì¢…ë£Œí•´ë„ Background ServiceëŠ” ê³„ì† ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì••ì¶•ê³¼ ê°™ì€ ì‘ì—…ì„ í• ë•Œ ì‚¬ìš©í•˜ë©° Serviceê°€ Background ì—ì„œ ì¥ì‹œê°„ ì‹¤í–‰ ì¤‘ì´ë©´ ì†Œë©¸ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì£¼ì˜!! API 26 ë¶€í„°ëŠ” Background Serviceì— ëŒ€í•˜ì—¬ ì—¬ëŸ¬ê°€ì§€ ì œì•½ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤. Bound Service (Bind Service) ë°”ì¸ë”©ì„ ìœ„í•œ Service ì…ë‹ˆë‹¤. ServiceëŠ” ëª¨ë“  ë°”ì¸ë”©ì´ í•´ì œë˜ë©´ Systemì— ì˜í•´ ì†Œë©¸ë©ë‹ˆë‹¤. Activity / Fragment ì™€ Service ê°„ì— ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆê³  Processê°„ í†µì‹ ì—ë„ ì‚¬ìš©ë©ë‹ˆë‹¤. Activity / Fragment -&gt; Service ê°„ì˜ í†µì‹ ì— ë³´í†µ ë‹¤ìŒ 3ê°€ì§€ë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. BroadcastReciever Handler AIDL (AIDL ì€ BroadcastReciever ë³´ë‹¤ ë³´ì•ˆìƒ ìš°ìœ„ì— ìˆìŠµë‹ˆë‹¤.)AIDL ì— ê´€í•œ ë‚´ìš©ì€ í–¥í›„ ë”°ë¡œ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. Foreground Service í˜„ì¬ ì„œë¹„ìŠ¤ì˜ ë™ì‘ì´ë‚˜ ìƒí™©ì„ ìœ ì €ì—ê²Œ ê³„ì† ì•Œë ¤ì£¼ì–´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ìœ ìš©í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ì•±ì„ ì‚¬ìš© ì¤‘ì´ë¼ë„ ê³„ì†í•´ì„œ ì‹¤í–‰ ë˜ë„ë¡ í•©ë‹ˆë‹¤. ì†Œë©¸ ê°€ëŠ¥ì„±ì´ í¬ë°•í•˜ë©°, notifictaion ì•Œë¦¼ì„ 10ì´ˆì•ˆì— ë„ì›Œì•¼ í•©ë‹ˆë‹¤. (ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Androidì—ì„œ Serviceë¥¼ ì£½ì…ë‹ˆë‹¤.)Service Lifecycle startService() ì˜ ê²½ìš° -&gt; onCreate() -&gt; onStartCommand() -&gt; Serviceê°€ ìŠ¤ìŠ¤ë¡œ í˜¹ì€ Clientì— ì˜í•´ ì¤‘ë‹¨ë¨ -&gt; onDestory() bindService() ì˜ ê²½ìš° -&gt; onCreate() -&gt; onBind() -&gt; onUnbind() -&gt; onDestory() 1. onCreate() Serviceê°€ ìƒì„±ë ë•Œ ìµœì´ˆë¡œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ì…ë‹ˆë‹¤. í•´ë‹¹ ë©”ì„œë“œì—ì„œ ì´ˆê¸° ì„¤ì •ì„ ìˆ˜í–‰í•˜ì‹œë©´ ë©ë‹ˆë‹¤. Serviceê°€ ì´ë¯¸ ì‹¤í–‰ì¤‘ì´ë©´ onCreate()ëŠ” í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 2. onStartCommand() startService()ë¡œ Serviceê°€ ì‹œì‘ë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. startService()ë¥¼ í†µí•´ ì „ë‹¬í•œ Intentë¥¼ onStartCommand()ì—ì„œ Serviceê°€ ìˆ˜ì‹ í•˜ê²Œ ë©ë‹ˆë‹¤. ì‘ì—…ì´ ì™„ë£Œë˜ë©´ stopSelf()ë¥¼ í˜¸ì¶œí•˜ì—¬ ìŠ¤ìŠ¤ë¡œ ì¤‘ë‹¨ í•˜ê±°ë‚˜, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ stopService()ë¥¼ í˜¸ì¶œí•˜ì—¬ ì¤‘ë‹¨ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Bindingë§Œ ì œê³µí•˜ê³ ì í•˜ëŠ” ê²½ìš°ì—ëŠ” onStartCommand()ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. onStartCommand() í˜¸ì¶œì„ í•œë²ˆì´ë¼ë„ ë°›ì€ ServiceëŠ” Lifecycleì„ ì§ì ‘ ê´€ë¦¬ ë° ì¤‘ë‹¨í•´ì•¼ í•©ë‹ˆë‹¤. onStartCommand() ì˜ Return ê°’ -&gt; Serviceê°€ System ì— ì˜í•´ ì†Œë©¸ëœ ê²½ìš°, Serviceê°€ ë‹¤ì‹œ ì‹œì‘í• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. START_REDELIVER_INTENT : Systemì´ Serviceë¥¼ ì¤‘ë‹¨í•˜ë©´ Serviceë¥¼ ë‹¤ì‹œ ìƒì„±í•©ë‹ˆë‹¤. íŒŒì¼ ë‹¤ìš´ë¡œë“œì™€ ê°™ì€ Serviceì— ì í•©í•©ë‹ˆë‹¤. START_STICKY : ì‹œìŠ¤í…œì´ Serviceë¥¼ ì¤‘ë‹¨í•˜ë©´ Serviceë¥¼ ë‹¤ì‹œ ìƒì„±í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ Intentë¥¼ ì „ë‹¬í•˜ì§€ ì•Šê³ , null Intentë¡œ onStartCommand()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ëª…ë ¹ì„ ì‹¤í–‰í•˜ì§„ ì•Šì§€ë§Œ ì‘ì—…ì„ ê¸°ë‹¤ë¦¬ëŠ” Media Playerì™€ ê°™ì€ Serviceì— ì í•©í•©ë‹ˆë‹¤. START_NOT_STICKY : Systemì´ Serviceë¥¼ ì¤‘ë‹¨í•˜ë©´ Serviceë¥¼ ì¬ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ëŠ” ê²½ìš°ì— ì í•©í•©ë‹ˆë‹¤. 3. onBind() ë‹¤ë¥¸ êµ¬ì„± ìš”ì†Œ(Activity/Fragment)ì™€ Serviceë¥¼ ë°”ì¸ë”© í•˜ë ¤ëŠ” ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, Service ì™€ Activity / Fragment ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. bindService()ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. êµ¬í˜„í• ë•Œ Interfaceë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. reutrnìœ¼ë¡œ IBinderë¥¼ ë°˜í™˜í•˜ë©´ ë©ë‹ˆë‹¤. ë‹¤ë¥¸ êµ¬ì„±ìš”ì†Œê°€ Serviceì— Bind í•˜ê³ ì í•˜ëŠ” ê²½ìš°, Client ê°€ Serviceì™€ í†µì‹ ì„ ì£¼ê³ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. AIDL ì‚¬ìš©ì‹œ Stub() êµ¬í˜„ì²´ë¥¼ Return í•˜ë©´ ëœë‹¤. Handler ì‚¬ìš©ì‹œ Messanger(Handler(mainLopper, this)).binder ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” í•­ìƒ êµ¬í˜„í•´ì•¼ í•˜ë©°, ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•ŒëŠ” return null ì„ í•˜ì‹œë©´ ë©ë‹ˆë‹¤. 4. onUnBind() ëª¨ë“  Client ë“¤ì´ unBindService()ë¥¼ í˜¸ì¶œí•˜ì—¬ bindingì´ í•´ì§€ë˜ì—ˆì„ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. 5. onReBind() unBindService() ê°€ í˜¸ì¶œëœ ì´í›„ì—, Clientê°€ bindService()ë¥¼ í˜¸ì¶œí•˜ì—¬ Serviceì— binding ë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. 6. Destory() Serviceê°€ í•´ì§€ë  ë•Œ í˜¸ì¶œ ë©ë‹ˆë‹¤. Resource í•´ì§€ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë²ˆì™¸ - PendingIntent Notification ìœ¼ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ Intentê°€ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤.(Notification ìœ¼ë¡œ Intent ìˆ˜í–‰ ì‹œ PendingIntent ì‚¬ìš©ì´ í•„ìˆ˜) ì°¸ê³  ëŸ°ì²˜ ë°”íƒ•í™”ë©´ì˜ ìœ„ì ¯ìœ¼ë¡œ Intent ì‘ì—…ì„ ìˆ˜í–‰í• ë•Œ PendingIntentë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Alarm Managerë¥¼ í†µí•´ ì§€ì •ëœ ì‹œê°„ì— Intentê°€ ì‹¤í–‰ë˜ë„ë¡ í• ë•Œ PendingIntentë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ìƒì„± Activityë¥¼ ì‹œì‘í•˜ëŠ” Intent -&gt; PendingIntent.getActivity(context: Context, requestCode: Int, intent: Intent, flags: Int) Serviceë¥¼ ì‹œì‘í•˜ëŠ” Intent -&gt; PendingIntent.getService(context: Context, requestCode: Int, intent: Intent, flags: Int) BroadcastReciverë¥¼ ì‹œì‘í•˜ëŠ” Intent -&gt; PendingIntent.getBroadcast(context: Context, requestCode: Int, intent: Intent, flags: Int) Flag FLAG_UPDATE_CURRENT : PendingIntentê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš°, Extra Dataë¥¼ ìƒˆë¡œìš´ Intentì— ìˆëŠ” ê²ƒìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤. FLAG_CANCEL_CURRENT : PendingIntentê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš°, ê¸°ì¡´ PendingIntentë¥¼ Cancel í•˜ê³  ë‹¤ì‹œ ìƒì„±í•©ë‹ˆë‹¤. FLAG_IMMUTABLE : ê¸°ì¡´ PendingIntentëŠ” ë³€ê²½ë˜ì§€ ì•Šê³ , ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€í•œ PendingIntentë¥¼ ë³´ë‚´ë„ ë¬´ì‹œí•©ë‹ˆë‹¤. FLAG_NO_CREATE : PendingIntentê°€ ê¸°ì¡´ì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ Nullì„ ë°˜í™˜í•©ë‹ˆë‹¤. FLAG_ONE_SHOT : í•œë²ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” PendingIntent fun makePendingIntent(): PendingIntent { // RequestCode, Idë¥¼ ê³ ìœ ê°’ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì•ŒëŒì´ ê°œë³„ í‘œì‹œë˜ë„ë¡ ì„¤ì • val uniId: Int = (System.currentTimeMillis() / 1000).toInt() val intent = Intent(context, MainActivity::class.java) return PendingIntent.getActivity( context, uniId, intent, if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) { PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT } else { PendingIntent.FLAG_UPDATE_CURRENT } ) } ë§ˆë¬´ë¦¬ì´ë²ˆ ì‹œê°„ì—ëŠ” Serviceì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ì €ëŠ” Serviceë¥¼ Socket ì—°ê²°ì„ ìœ„í•´ Bind Serviceë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ì˜€ê³ , AIDL ì„ í†µí•´ Process í†µì‹ ì„ í–ˆìŠµë‹ˆë‹¤.AIDLì— ëŒ€í•œ ì„¤ëª…ì€ ì¶”í›„ ë”°ë¡œ í¬ìŠ¤íŒ…ì„ ì˜¬ë¦¬ê² ìŠµë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ Android 4ëŒ€ ì»´í¬ë„ŒíŠ¸ ì¤‘ í•˜ë‚˜ì¸ BroadcastReceiver ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Android 4ëŒ€ Component BroadcastReceiver ì°¸ê³  Activityì˜ Lifecycle ì°¸ê³ " }, { "title": "Android Process ë° Thread", "url": "/posts/Android-Process-Thread/", "categories": "Android, Process", "tags": "android, process, thread", "date": "2022-07-14 15:20:00 +0900", "snippet": "ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Androidì˜ Processì™€ Threadì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.ì´ë²ˆì—ëŠ” ì„¤ëª…ì´ ë§ì´ í•„ìš”í•˜ì—¬ ì§€ë£¨í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ë¹ ë¥´ê²Œ ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤.Process ì™€ Threadì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œê°€ ì‹œì‘ë˜ê³ , ì•±ì— ì‹¤í–‰ì¤‘ì¸ ë‹¤ë¥¸ êµ¬ì„± ìš”ì†Œê°€ ì—†ìœ¼ë©´ í•˜ë‚˜ì˜ ì‹¤í–‰ Threadë¡œ ì•±ì˜ Linux Processë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.ê¸°ë³¸ì ìœ¼ë¡œ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†ŒëŠ” ê°™ì€ Processì™€ Threadì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ êµ¬ì„± ìš”ì†Œê°€ ê°ì ë³„ë„ì˜ Processì—ì„œ ì‹¤í–‰ ë˜ë„ë¡ í•  ìˆ˜ ìˆê³ , ì–´ëŠ Processë“  ì¶”ê°€ Threadë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.Process (í”„ë¡œì„¸ìŠ¤) ê¸°ë³¸ì ìœ¼ë¡œ ê°™ì€ ì•±ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†ŒëŠ” Processì™€ Threadì—ì„œ ì‹¤í–‰ë˜ê³  ì´ë¥¼ ë°”ê¾¸ë©´ ì•ˆë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì–´ëŠ Processê°€ íŠ¹ì„± êµ¬ì„± ìš”ì†Œì— ì†í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•  ê²½ìš° AndroidManifest íŒŒì¼ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.(android:process ì†ì„±) AndroidManifestì—ì„œ android:process ì†ì„±ì„ ì„¤ì •í•˜ì—¬ êµ¬ì„±ìš”ì†Œê°€ ì‹¤í–‰ë˜ëŠ” Processë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì§€ì›í•˜ëŠ” ìš”ì†Œ : application, activity, service, receiver, provider Android System ì—ì„œëŠ” ì–´ëŠ Processë¥¼ ì‚­ì œí• ì§€ ê²°ì •í• ë•Œ, ì´ë“¤ì˜ ìƒëŒ€ì  ì¤‘ìš”ì„±ì„ ê°€ëŠ í•˜ì—¬ ìš°ì„  ìˆœìœ„ê°€ ë‚®ì€ Processë¶€í„° ì‚­ì œí•©ë‹ˆë‹¤. (ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•  ë•Œ ì¢…ë£Œí•´ì•¼ í•˜ëŠ” Processë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ AndroidëŠ” ì¤‘ìš”ë„ì— ë”°ë¼ Processë“¤ì„ ìœ í˜•ë³„ë¡œ ê³„ì¸µ êµ¬ì¡°ì— ë°°ì¹˜í•©ë‹ˆë‹¤.)Process Lifecycle / ì¤‘ìš”ë„ê°€ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë¦¬ ì•ˆë“œë¡œì´ë“œ ì‹œìŠ¤í…œì€ Processì—ì„œ ì‹¤í–‰ë˜ëŠ” êµ¬ì„±ìš”ì†Œì™€ í•´ë‹¹ êµ¬ì„±ìš”ì†Œì˜ ìƒíƒœì— ê¸°ì´ˆí•˜ì—¬ ê° Processì— â€œì¤‘ìš”ê³„ì¸µâ€ì„ ë³´ì—¬í•©ë‹ˆë‹¤. ì¤‘ìš”ë„ê°€ ë‚®ì€ Processê°€ ë¨¼ì € ì œê±°ë©ë‹ˆë‹¤.1. Foreground Process (í¬ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤) ì‚¬ìš©ìê°€ í˜„ì¬ ì§„í–‰í•˜ëŠ” ì‘ì—…ì— í•„ìš”í•œ Processì…ë‹ˆë‹¤.(Activity ë‚˜ Foreground Service) ì‚¬ìš©ìê°€ ìƒí˜¸ì‘ìš©í•˜ëŠ” Activityë¥¼ í˜¸ìŠ¤íŒ…í•  ê²½ìš° ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” Activityì— Bind ëœ Serviceë¥¼ í˜¸ìŠ¤íŒ…í•  ê²½ìš° (bindService()) Foreground ì—ì„œ ì‹¤í–‰ë˜ëŠ” Serviceë¥¼ í˜¸ìŠ¤íŒ…í•  ê²½ìš° (ForegroundService, startForeground()) Lifecycle Call back ì¤‘ í•˜ë‚˜ë¥¼ ì‹¤í–‰í•˜ëŠ” Serviceë¥¼ ì‹¤í–‰í•  ê²½ìš° (onCreate(), onstart() ë˜ëŠ” onDestory()) ì•„ë˜ì˜ í•˜ë‚˜ë¼ë„ í•´ë‹¹ë˜ë©´ Processê°€ Foreground ì— ìˆëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤. Processê°€ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ê³  ìˆëŠ” í™”ë©´ì—ì„œ Activity ì‹¤í–‰ì¤‘ì¸ ê²½ìš° Processê°€ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ BroadcastReceiverê°€ ìˆëŠ” ê²½ìš° Processì— Call back ì¤‘ í•˜ë‚˜ì—ì„œ í˜„ì¬ ì½”ë“œë¥¼ ì‹¤í–‰ì¤‘ì¸ Service ê°€ ìˆì„ ê²½ìš° 2. Visible Process (ê°€ì‹œì  í”„ë¡œì„¸ìŠ¤) Foreground êµ¬ì„± ìš”ì†ŒëŠ” ì—†ì§€ë§Œ ì‚¬ìš©ìê°€ í™”ë©´ì—ì„œ ë³´ëŠ” ê²ƒì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆëŠ” Process ì…ë‹ˆë‹¤. Processê°€ í™”ë©´ìƒìœ¼ë¡œëŠ” ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ì§€ë§Œ, Foregroundì— ìˆì§€ ì•Šì€ Activityê°€ ì‹¤í–‰ ì¤‘(onPause() ë©”ì„œë“œê°€ í˜¸ì¶œëœ ìƒíƒœ)ì˜ˆë¥¼ ë“¤ì–´ Foreground Activity ëŒ€í™”ìƒìë¡œ í‘œì‹œë˜ê³ , ì´ ëŒ€í™”ìƒìì—ì„œ Forground Activity ë’¤ì— ì´ì „ Activityê°€ ë³´ì´ëŠ” ë•Œ Processì— Service.startForground()ë¥¼ í†µí•´ Foreground Serviceë¡œ ì‹¤í–‰ì¤‘ì¸ Serviceê°€ ìˆëŠ” ê²½ìš° Processê°€ Systemì—ì„œ ë¼ì´ë¸Œ ë°°ê²½í™”ë©´, ì…ë ¥ ë°©ë²• ì„œë¹„ìŠ¤ ë“±ê³¼ ê°™ì´ ì‚¬ìš©ìê°€ ì•Œê³  ìˆëŠ” íŠ¹ì • ê¸°ëŠ¥ì— ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ í˜¸ìŠ¤íŒ…í•  ê²½ìš°3. Service Process (ì„œë¹„ìŠ¤ í”„ë¡œì„¸ìŠ¤) startService() ë©”ì„œë“œë¡œ ì‹œì‘ëœ Serviceë¥¼ ìœ ì§€í•˜ëŠ” Process ì…ë‹ˆë‹¤. ì‚¬ìš©ìì—ê²Œ ì§ì ‘ í‘œì‹œë˜ì§€ëŠ” ì•Šì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ê´€ì‹¬ì„ ê°€ì§„ ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. Systemì€ ëª¨ë“  Foreground Process ë° Visible Processë¥¼ ìœ ì§€í•  ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ì§€ ì•Šë‹¤ë©´ í•­ìƒ ì´ Processì˜ ì‹¤í–‰ ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.4. Cached Process (ë¹ˆ í”„ë¡œì„¸ìŠ¤) í˜„ì¬ í•„ìš”í•˜ì§€ ì•ŠëŠ” Process ì…ë‹ˆë‹¤. Systemì€ ë‹¤ë¥¸ ê³³ì—ì„œ ë©”ëª¨ë¦¬ê°€ í•„ìš”í•  ë•Œ ì–¸ì œë“  ì›í•˜ëŠ” ëŒ€ë¡œ ì´ Processë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤. ì •ìƒì ìœ¼ë¡œ ì‘ìš©í•˜ëŠ” Systemì—ì„œ Chaned ProcessëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ì™€ ê´€ë ¨ëœ ìœ ì¼í•œ Process ì…ë‹ˆë‹¤. í˜„ì¬ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ì§€ ì•ŠëŠ” í•˜ë‚˜ ì´ìƒì˜ Activity ì¸ìŠ¤í„´ìŠ¤ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. Activity Lifecycle ì„ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•˜ë©´ Systemì´ ì´ëŸ° Processë¥¼ ì¢…ë£Œí•´ë„ ì•±ìœ¼ë¡œ ëŒì•„ê°ˆë•Œ ì‚¬ìš©ì í™˜ê²½ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. LRU ëª©ë¡ìœ¼ë¡œ ìœ ì§€ë˜ë©°, ë©”ëª¨ë¦¬ íšŒìˆ˜ ì‹œ ëª©ë¡ì˜ ë§ˆì§€ë§‰ Processê°€ ì œì¼ ì²˜ìŒ ì¢…ë£Œë©ë‹ˆë‹¤.Thread (ì“°ë ˆë“œ) ì•±ì´ ì‹œì‘ë˜ë©´ ì•±ì— ëŒ€í•œ ì‹¤í–‰ì˜ Threadë¥¼ ìƒì„±í•˜ë©°, ì´ë¥¼ Main Thread í˜¹ì€ UI Threadë¼ê³  í•©ë‹ˆë‹¤. ì´ ThreadëŠ” ì´ë²¤íŠ¸ë¥¼ í¬í•¨í•œ UI ìœ„ì ¯ì— ì´ë²¤íŠ¸ë¥¼ ë°œì†¡í•˜ëŠ” ì—­í• ì„ ë§¡ê¸°ë„í•˜ì—¬ UI Threadë¼ê³ ë„ í•©ë‹ˆë‹¤. (UI ì¡°ì‘ ì‘ì—…ì€ UI Threadì—ì„œë§Œ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.) ê°™ì€ Processì—ì„œ ì‹¤í–‰ë˜ëŠ” ëª¨ë“  êµ¬ì„± ìš”ì†ŒëŠ” UI Threadì—ì„œ ì‹œì‘ë˜ê³ , êµ¬ì„± ìš”ì†Œë¥¼ í˜¸ì¶œí•˜ëŠ” Systemì´ í•´ë‹¹ Threadì—ì„œ ë°œì†¡ë©ë‹ˆë‹¤. Network Accessë‚˜ Database Query ë“±ì˜ ê¸´ ì‘ì—…ì„ UI Threadì—ì„œ ìˆ˜í–‰í•  ê²½ìš° ì „ì²´ UI ì´ë²¤íŠ¸ê°€ ì°¨ë‹¨ë˜ì–´ ì‚¬ìš©ìì—ê²ŒëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¤‘ë‹¨ëœ ê²ƒ ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.(í•´ë‹¹ ìƒíƒœë¥¼ ANRì´ë¼ê³  í•©ë‹ˆë‹¤.) Android Systemì€ UI Threadê°€ ëª‡ ì´ˆ ì´ìƒ ì°¨ë‹¨ë˜ë©´(í˜„ì¬ëŠ” ì•½ 5ì´ˆ) ì‚¬ìš©ìì—ê²Œ Application Not Response(ANR) ì´ë¼ëŠ” ëŒ€í™”ìƒìê°€ í‘œì‹œë˜ê³ , Applicationì´ ì¢…ë£Œë˜ê±°ë‚˜ ë¸”ë§Œì¡±ì— ì˜í•´ ì œê±°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Android Ui Tool kitì€ Thread Safe í•˜ì§€ ì•Šê¸° ë–„ë¬¸ì— UIë¥¼ Worker Threadì—ì„œ ì¡°ì‘í•˜ë©´ ì•ˆë©ë‹ˆë‹¤.(IOException ë°œìƒ)Worker Thread UI ë°˜ì‘ì„±ì„ ìœ„í•´ UI Threadë¥¼ ì°¨ë‹¨í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë©°, UI Updateë¥¼ ì œì™¸í•˜ê³  ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ì‘ì—…ì€(Network, Database) ë°˜ë“œì‹œ ë³„ë„ì˜ Thread ì—ì„œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ë³„ë„ì˜ Threadë¥¼ Background Thread ë˜ëŠ” Worker Threadë¼ê³  í•©ë‹ˆë‹¤. ë‹¤ë¥¸ Thread ì—ì„œ UI Threadì— Access í•˜ê¸° ìœ„í•´ ì œê³µí•˜ëŠ” ë°©ì‹ Activity.runOnUiThread(Runnable) View.post(Runnable) View.postDelayed(Runnable, long) ìœ„ì˜ ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸°ì— ë³µì¡í•œ ì‘ì—…ì€ Handlerë¥¼ ì‚¬ìš©í•˜ì—¬ UI Threadì—ì„œ ì „ë‹¬ë°›ì€ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì•ˆì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.Handler, Looper ì •ë¦¬ ì°¸ì¡° Thread-Safe ì–´ë–¤ ê²½ìš°ì—ëŠ” êµ¬í˜„í•˜ëŠ” ë©”ì„œë“œê°€ í•˜ë‚˜ ì´ìƒì˜ Threadì—ì„œ í˜¸ì¶œë˜ëŠ” ì¼ì´ ìˆì–´ ì•ˆì „í•˜ê²Œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì£¼ë¡œ ì›ê²©ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œê°€ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤.(bindService ë“±..) IBinder ì—ì„œ êµ¬í˜„ëœ ë©”ì„œë“œê°€ IBinderê°€ ì‹¤í–‰ë˜ëŠ” Process ì—ì„œ í˜¸ì¶œë  ê²½ìš°, í•´ë‹¹ ë©”ì„œë“œëŠ” í˜¸ì¶œìì˜ Threadì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.ì´ í˜¸ì¶œì´ ë‹¤ë¥¸ Processì—ì„œ ë°œìƒí•˜ë©´, í•´ë‹¹ ë©”ì„œë“œëŠ” Systemì´ IBinderì™€ ê°™ì€ Processì— ìœ ì§€í•˜ëŠ” Thread Poolì—ì„œ ì„ íƒëœ Threadì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.(Processì˜ UI Threadì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.) ì´ ê°™ì€ ì´ìœ ë¡œ Threadë¡œ ë¶€í„° ì•ˆì „í•œ êµ¬í˜„ì´ í•„ìš”í•©ë‹ˆë‹¤." }, { "title": "Android Handler, Looper ì— ê´€í•˜ì—¬", "url": "/posts/Android-handler-looper/", "categories": "Android, Handler", "tags": "android, thread, handler, looper", "date": "2022-07-14 11:44:00 +0900", "snippet": "ì´ë²ˆì—ëŠ” Handler, Looper ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Androidì˜ UI ì²˜ë¦¬ëŠ” Single Thread Modelë¡œ ë™ì‘í•©ë‹ˆë‹¤. ì¦‰, mainThreadê°€ ì•„ë‹Œ ë‹¤ë¥¸ Threadì—ì„œ UI ë¥¼ Updateí•˜ëŠ” ë“±ì˜ í–‰ìœ„ë¥¼ í•˜ë©´ ì•ˆë©ë‹ˆë‹¤. ë”°ë¼ì„œ mainThreadë¥¼ UI Threadë¼ê³  ë¶€ë¥´ê¸°ë„ í•©ë‹ˆë‹¤.ë™ì‘ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ íƒ€ Threadì—ì„œëŠ” UIë¥¼ ê±´ë“œë¦´ ìˆ˜ ì—†ê³ , ì˜¤ë¡œì§€ Main Threadì—ì„œë§Œ UI ê´€ë ¨ ë™ì‘ì„ í•  ìˆ˜ ìˆê²Œë” í•©ë‹ˆë‹¤.(MainThreadë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ Threadì—ì„œ UI Updateì‹œ IOExceptionì´ ë°œìƒí•©ë‹ˆë‹¤.)ì´ë•Œ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì‘ì—…ì„ MainThreadì—ì„œ í•˜ê²Œë˜ë©´ UIê°€ ë©ˆì¶”ê²Œ ë˜ëŠ”ë°(ANR) ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì‘ì—…ì€ ë‹¤ë¥¸ Threadì—ì„œ í•˜ê³ , í•´ë‹¹ ê²°ê³¼ë¥¼ Main Threadì— ë„˜ê²¨ì¤˜ì„œ Main Threadì—ì„œ í•´ë‹¹ ê²°ê³¼ ê°’ì„ ë°”íƒ•ìœ¼ë¡œ UIë¥¼ Updateí•©ë‹ˆë‹¤. Androidì—ì„œëŠ” UI Threadê°€ ëª‡ ì´ˆ ì´ìƒ ì°¨ë‹¨ë˜ë©´(í˜„ì¬ëŠ” ì•½ 5ì´ˆ) ì‚¬ìš©ìì—ê²Œ Application Not Response(ANR) ì´ë¼ëŠ” ëŒ€í™” ìƒìê°€ í‘œì‹œë˜ê³ , ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œ ë˜ê±°ë‚˜ ë¶ˆë§Œì¡±ì— ì˜í•´ ì œê±° ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì—¬ê¸°ì„œ ë‹¤ë¥¸ Thread -&gt; Ui Thread ê°„ì— ê²°ê³¼ê°’ì„ ë„˜ê²¨ì¤„ ë•Œ í†µì‹ ì„ ìœ„í•´ì„œ ì¦‰, Thread ê°„ì˜ í†µì‹ ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Handler ì™€ Looper ì…ë‹ˆë‹¤. UI ë°˜ì‘ì„±ì„ ìœ„í•´ UI Threadë¥¼ ì°¨ë‹¨í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë©°, UI Updateë¥¼ ì œì™¸í•˜ê³  ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ì‘ì—…ì€ ë°˜ë“œì‹œ ë³„ë„ì˜ Threadì—ì„œ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ë° ì´ ë³„ë„ì˜ Threadë¥¼ Background Thread ë˜ëŠ” Worker Threadë¼ê³  í•©ë‹ˆë‹¤.ì´ë²ˆì—ë„ ì‹¤ìš©ì ì¸ ì¸¡ë©´ì— ì´ˆì ì„ ë‘ê³  ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.ê°„ë‹¨í•œ ìš©ì–´ ì„¤ëª… Thread, Main ThreadThreadì— ëŒ€í•´ ê°„ë‹¨íˆ ì„¤ëª…ë“œë¦¬ë©´ â€œí•˜ë‚˜ì˜ ë…ë¦½ëœ ì‹¤í–‰ íë¦„â€ ì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.mainThreadëŠ” í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë ë•Œ ìµœì´ˆë¡œ ì‹¤í–‰ë˜ëŠ” Threadë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ë‹¤ë¥¸ Thread -&gt; UI Threadì— Access í•˜ê¸° ìœ„í•´ ì œê³µí•˜ëŠ” ë°©ì‹ Activity.runOnUiThread(Runnable) View.post(Runnable) View.postDelayed(Runnable, long) ìœ„ì˜ ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸°ì— ë³µì¡í•œ ì‘ì—…ì€ Handlerë¥¼ ì‚¬ìš©í•˜ì—¬ UI Threadì—ì„œ ì „ë‹¬ë°›ì€ Messageë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì•ˆì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.Looper í•˜ë‚˜ì˜ Thread ë‹¹ ë‹¨ í•˜ë‚˜ì˜ Looperë§Œ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Androidì—ì„  ê¸°ë³¸ì ìœ¼ë¡œ MainActivityê°€ ì‹¤í–‰ë¨ê³¼ ë™ì‹œì— ìë™ìœ¼ë¡œ Main Threadì˜ Looperê°€ ëŒê¸° ì‹œì‘í•©ë‹ˆë‹¤. ê° Threadì˜ Looper ë‚´ë¶€ì—ëŠ” MessageQueue ë¼ëŠ” ê²ƒì´ ì¡´ì¬í•˜ëŠ”ë°, ì—¬ê¸°ì—ëŠ” í•´ë‹¹ Threadê°€ ì²˜ë¦¬í•´ì•¼ í•  ë™ì‘ë“¤ì´ â€˜Messageâ€™ ë¼ëŠ” í˜•íƒœë¡œ í•˜ë‚˜ì”© ìŒ“ì´ê²Œ ë©ë‹ˆë‹¤. (í ë¼ëŠ” ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ ë‹¹ì—°íˆ FIFO ë°©ì‹ì´ë©° ì„ ì…ì„ ì¶œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.) Queueì— ëŒ€í•´ ëª¨ë¥´ì‹œë©´ ìë£Œêµ¬ì¡° Stack, Queue ì •ë¦¬ í¬ìŠ¤íŒ…ì„ ì°¸ê³  í•´ì£¼ì„¸ìš”. MessageQueueê°€ ë¹„ì–´ìˆì„ ë•ŒëŠ” ì•„ë¬´ëŸ° ë™ì‘ë„ í•˜ì§€ ì•Šë‹¤ê°€ Messageê°€ ë“¤ì–´ì˜¤ë©´ Messageë¥¼ êº¼ë‚´ ì ì ˆí•œ Handlerë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. Threadì—ì„œ ë¬´í•œíˆ ëŒë©´ì„œ ìì‹ ì´ ì†í•œ Threadì˜ MessageQueueì— Messageë‚˜ Runnableì´ ë“¤ì–´ì˜¤ë©´ ì°¨ë¡€ëŒ€ë¡œ(ì„ ì…ì„ ì¶œ) Handlerì— ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.Message â€œí•˜ë‚˜ì˜ ì‘ì€ ì‘ì—… ë‹¨ìœ„â€, MessageQueueì—ëŠ” ì´ëŸ¬í•œ ì‘ì€ ì‘ì—… ë‹¨ìœ„ë¥¼ í•˜ë‚˜ì”© ì ì¬í•´ë‘ê³ , â€œLooperâ€ê°€ ì´ë¥¼ ì°¨ë¡€ëŒ€ë¡œ ì²˜ë¦¬í•œë‹¤. Threadê°„ í†µì‹  í•  ë‚´ìš©ì„ ë‹´ëŠ” ê°ì²´ì´ì MessageQueueì˜ ì¼ê° ë‹¨ìœ„ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. MessageëŠ” Runnable, â€œMessageâ€ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. Looper ê°ì²´ê°€ MessageQueueì—ì„œ Messageë¥¼ í™•ì¸í–ˆì„ ë•Œ Runnable ê°ì²´ê°€ ë‹´ê²¨ì ¸ ìˆìœ¼ë©´ Handlerì— Messageë¥¼ ì „ë‹¬í•˜ì§€ ì•Šê³  run()í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì—¬ í•´ë‹¹ Runnable ì‘ì—…ì„ ë°”ë¡œ ì‹œì‘í•˜ê³ , Runnable ê°ì²´ê°€ ì—†ì„ ê²½ìš° Message ê°ì²´ ë‚´ë¶€ì— ìˆëŠ” Handlerì˜ handleMessage()ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤. Runnableì€ Threadë¥¼ ìƒì„±í• ë•Œ ìƒê¸°ëŠ” run() ë©”ì„œë“œë¥¼ ë”°ë¡œ ë¶„ë¦¬ì‹œí‚¨ í˜•íƒœë¡œ run() ì¶”ìƒ ë©”ì„œë“œë¥¼ ë°˜ë“œì‹œ êµ¬í˜„í•´ì•¼í•©ë‹ˆë‹¤. run()í•¨ìˆ˜ ì•ˆì— ì‹¤í–‰ë  ë™ì‘ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.Handler Looperë¡œ ë¶€í„° ì „ë‹¬ ë°›ì€ Message ë‚˜ Runnableì„ handleMessage()ë¥¼ í†µí•´ ì²˜ë¦¬í•˜ê±°ë‚˜ ë‹¤ë¥¸ Threadë¡œ ë¶€í„° ë°›ì€ Messageë¥¼ MessageQueueì— ë„£ìŠµë‹ˆë‹¤. Handlerë¥¼ ìƒì„±í•˜ê²Œë˜ë©´ í˜¸ì¶œí•œ Threadì˜ MessageQueueì™€ Looperì— ìë™ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤. Message ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì´ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤. sendMessage() ë©”ì†Œë“œë¥¼ í†µí•´ MessageQueueì— Message ê°ì²´ë¥¼ ì ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. postë¡œ ì‹œì‘í•˜ëŠ” ë©”ì†Œë“œë“¤ì„ í†µí•´ Runnable ê°ì²´ë¥¼ ì§ì ‘ ì ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. UIë¥¼ ê°±ì‹ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì£¼ì˜!! Handlerë¥¼ ìƒì†ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ëª¨ë“  ë¶€ë¶„ì—ì„œ UIê°€ Destory ì¦‰, íŒŒê´´ë ë•Œ handler.removeCallbacksAndMessages(null)ì„ í˜¸ì¶œí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ë™ì‘ ë°©ì‹ Handler ì˜ sendMessage()ë¥¼ í†µí•´ MessageQueueì— Messageë¥¼ ì°¨ë¡€ëŒ€ë¡œ ë„£ìŠµë‹ˆë‹¤. LooperëŠ” ë¬´í•œíˆ ëŒë©´ì„œ ìì‹ ì´ ì†í•œ Threadì˜ MessageQueueì— Messageë‚˜ Runnableì´ ë“¤ì–´ì˜¤ë©´ ì°¨ë¡€ëŒ€ë¡œ í•˜ë‚˜ì”© MessageQueueì—ì„œ Messageë¥¼ êº¼ë‚´ ì ì ˆí•œ Handlerì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤. Looperë¡œ ë¶€í„° Messageë¥¼ ì „ë‹¬ë°›ì€ HandlerëŠ” handleMessage() ë©”ì„œë“œë¥¼ í†µí•´ Messageë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.ì½”ë“œë¥¼ í†µí•´ ì‚´í´ë³´ê¸°ê°„ë‹¤í•œ ì½”ë“œë¥¼ í†µí•´ ì‚´í´ ë³´ê² ìŠµë‹ˆë‹¤. Handler ìƒì„± (Messageë¥¼ ë°›ëŠ” ìª½) ì½”ë“œ ë¶€í„° ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. class HomeHandler(fragment: HomeFragment) : Handler(Looper.getMainLooper()) { private val weekReference: WeakReference(fragment) override fun handleMessage(msg: Message) { val fragment = weakReference.get() as HomeFragment // HomeFragment ì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ apply ì‚¬ìš© (ì—°ì†ì ìœ¼ë¡œ ì ‘ê·¼ í• ë•ŒëŠ” apply, with ë“±ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.) fragment.apply { this: HomeFragment when (msg.what) { FINISH_MAIN_ACTIVITY -&gt; { // this ëŠ” ìƒëµ ê°€ëŠ¥ ì—¬ê¸°ì„œëŠ” ì•Œì•„ë³´ê¸° ì‰½ê²Œ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•˜ê²Œ ë¶€ëª¨ Activityë¥¼ ì¢…ë£Œ ì‹œí‚¤ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. this.finishActivity() } SHOW_SIMPLE_TOAST -&gt; { // this ëŠ” ìƒëµ ê°€ëŠ¥ ì—¬ê¸°ì„œëŠ” ì•Œì•„ë³´ê¸° ì‰½ê²Œ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ this.showToast(msg.obj?.toString()) } // ë“±ë“±.. } } } companion object { // í•´ë‹¹ ë³€ìˆ˜ë¡œ Messageë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤. const val FINISH_MAIN_ACTIVITY = 0 const val SHOW_SIMPLE_TOAST = 1 // ë“±ë“±.. }} GC(Garbage Collector)ëŠ” â€œë‚´ê°€ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆëƒ, ì—†ëƒë¥¼ ë³´ê³  ì—†ìœ¼ë©´ ì“°ë ˆê¸°í†µì— ë²„ë¦°ë‹¤â€ ë¼ê³  ìƒê°í•˜ì‹œë©´ í¸í•©ë‹ˆë‹¤. WeakReference : GC(Garbage Collector)ê°€ ë°œìƒë˜ê¸° ì „ê¹Œì§€ëŠ” ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ê³  GCê°€ ë°œìƒë˜ë©´ ë¬´ì¡°ê±´ íšŒìˆ˜ (ì§§ì€ ì‹œê°„, ìì£¼ ì“°ì¼ ìˆ˜ ìˆëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í• ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ.) Messageë¥¼ ë³´ë‚´ëŠ” ìª½ ì½”ë“œ (sendMessage()ë¥¼ í†µí•´ Message ë„£ê¸°) private val homeHandler = HomeHandler(this)// í•¨ìˆ˜ ì´ë¦„ì€ ëŒ€ì¶© ì§€ì—ˆìŠµë‹ˆë‹¤.fun sendMainActivityFinish() { homeHandler.obtainMessage().apply { this: Message what = HomeHandler.FINISH_MAIN_ACTIVITY obj = \"ë©”ì¸ ì—‘í‹°ë¹„í‹° ì¢…ë£Œ\" // ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ê°ì²´ ë„£ê¸° (ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•˜ê²Œ Stringì„ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤.) homeHandler.sendMessage(this) }}fun sendShowToast() { homeHandler.obtainMessage().apply { this: Message what = HomeHandler.SHOW_SIMPLE_TOAST obj = \"ì•ˆë…•í•˜ì„¸ìš©\" // ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ê°ì²´ ë„£ê¸° (ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•˜ê²Œ Stringì„ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤.) homeHandler.sendMessage(this) }} sendMessage()ë¥¼ í†µí•´ Messageë¥¼ MessageQueueì— ë„£ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ HandlerëŠ” Looper ë¡œ Messageë¥¼ ì „ë‹¬í•˜ê³  LooperëŠ” MessageQueueë¡œ ë¶€í„° í•´ë‹¹ Messageë¥¼ êº¼ëƒ…ë‹ˆë‹¤. ì´ë•Œ ìœ„ì˜ ì½”ë“œì—ì„œëŠ” Runnableì´ ì—†ê¸° ë•Œë¬¸ì— HomeHandlerì—ê²Œ Messageë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. Looperë¡œ ë¶€í„° Messageë¥¼ ì „ë‹¬ë°›ì€ HomeHandlerëŠ” handleMessage()ë¥¼ í†µí•´ Messageë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.ì°¸ê³  obtainMessage() : obtainMessage()ëŠ” Message ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‹¤ë§Œ ì •ì ìœ¼ë¡œ ìƒì„±ëœ ì¬ì‚¬ìš© ê°ì²´ë¡œ ê´€ë¦¬ë˜ê¸° ë•Œë¬¸ì— new Message()ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒ ë³´ë‹¤ íš¨ìœ¨ì  ì…ë‹ˆë‹¤. HomeFragment ì˜ handleMessage() í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ëŠ” HomeFragmentì˜ í•¨ìˆ˜ // HomeHandler ì˜ handleMessage() ì—ì„œ FINISH_MAIN_ACTIVITY ì¼ë•Œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ fun activityFinish() { activity.finish() } // HomeHandler ì˜ handleMessage() ì—ì„œ SHOW_SIMPLE_TOAST ì¼ë•Œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ fun showToast(msg: String) { Toast.makeText(requireContext(), msg, Toast.LENGTH_SHORT).show() } UI ê°€ Destory ë  ë•Œ handler ì œê±°í•˜ëŠ” ì½”ë“œ override fun onDestoryView() { castHandler.removeCallbacksAndMessages(null) super.onDestoryView() } Activityì˜ ê²½ìš° onDestory() ì—ì„œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ì£¼ì˜!! UI ê°€ Destory ë  ë•Œ remove í•´ì£¼ì§€ ì•Šìœ¼ë©´ IllegalStateExceptionì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Handlerê°€ í•´ë‹¹ Messageë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì¡´ì¬í•˜ë©´ ì œê±°í•˜ëŠ” ì½”ë“œ private fun removeCheckShowToast() { if (castHandler.hasMessages(HomeHandler.SHOW_SIMPLE_TOAST)) { castHandler.removeMessages(HomeHandler.SHOW_SIMPLE_TOAST) } } Handler ì— Messageë¥¼ ë³´ë‚´ëŠ” Method ì•Œì•„ë³´ê¸° boolean sendEmptyMessage(int what) : What ë©¤ë²„ë§Œ ì±„ì›Œì§„ Message ê°ì²´ ì „ë‹¬ boolean sendEmptyMessageAtTime(int what, long upTimeMillies) : upTimeMilliesì— ì§€ì •ëœ ì‹œê°„ì— what ë©¤ë¨¸ë°˜ ì±„ì›Œì§„ Messageë¥¼ ë³´ëƒ„ boolean sendEmptyMessageDelayed(int what, long delayMillies) : í˜„ì¬ ì‹œê°„ì—ì„œ delayMillies ë§Œí¼ì˜ ì‹œê°„ í›„ì— what ë©¤ë²„ë§Œ ì±„ì›Œì§„ Message ì „ë‹¬ boolean sendMessage(Message msg) : Messageê°ì²´ ì „ë‹¬, MessageQueueì˜ ê°€ì¥ ë§ˆì§€ë§‰ì— Message ì¶”ê°€(Queue í˜•ì‹) boolean sendMessageAtFrontOfQueue(Message msg) : Message ê°ì²´ ì „ë‹¬, MessageQueueì˜ ê°€ì¥ ì²˜ìŒ ìœ„ì¹˜ì— Message ì¶”ê°€ boolean sendMessageAtTime(Message msg, long upTimeMillies) : upTimeMilliesì— ì§€ì •ëœ ì‹œê°„ì— Message ê°ì²´ ì „ë‹¬ boolean sendMessageDelayed(Message msg, long delayMillis) : í˜„ì¬ ì‹œì‘ì—ì„œ delayMillies ë§Œí¼ì˜ ì‹œê°„ í›„ì— Message ê°ì²´ ì „ë‹¬ë§ˆì¹˜ë©°..ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Looperì™€ Handlerì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´ Threadê°„ í†µì‹ ì„ ìœ„í•´ Looperì™€ Handlerë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì´í•´í•˜ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.ë‹¤ìŒì—ëŠ” Android Process ë° Thread ì— ëŒ€í•˜ì—¬ ì•Œë³´ëŠ” ì‹œê°„ì„ ê°–ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." }, { "title": "ìë£Œêµ¬ì¡° ìŠ¤íƒ Stack, í Queue ì— ëŒ€í•˜ì—¬", "url": "/posts/Data-Structure-Stack-Queue/", "categories": "DataStructure", "tags": "stack, queue, data structure", "date": "2022-07-14 10:02:00 +0900", "snippet": "ì €ëŠ” ë¹„ì „ê³µ ê°œë°œìì…ë‹ˆë‹¤.ë‹¤ë¥¸ ì§ì¢…ì˜ íšŒì‚¬ì—ì„œ ê·¼ë¬´í•˜ë©´ì„œ í‡´ê·¼ í›„ ë…í•™ìœ¼ë¡œ Android ê°œë°œì„ ì‹œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.ë…í•™ 9ê°œì›”ì°¨ì— í•œ ê¸°ì—…ì— ì…ì‚¬ì§€ì›ì„ í•˜ê²Œ ë˜ì—ˆê³  ê·¸ ê¸°ì—…ì˜ ë©´ì ‘ì—ì„œ ë‚˜ì™”ë˜ ì§ˆë¬¸ì´ Stackê³¼ Queueì˜€ìŠµë‹ˆë‹¤.ê¸°ì´ˆê°€ ë¶€ì¡±í–ˆë˜ ì €ëŠ” í•´ë‹¹ ì§ˆë¬¸ì— ë‹µì„ í•˜ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ¼ì—ë„ ê²°êµ­ ì·¨ì—…ì€ í•˜ì˜€ì§€ë§Œ..ì €ì™€ ê°™ì€ ê¸¸ì„ ê±·ëŠ” ë¶„ë“¤ê»˜ ì‘ì€ ë„ì›€ì´ ë˜ê³  ì‹¶ì–´ í•´ë‹¹ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•©ë‹ˆë‹¤.ë³¸ í¬ìŠ¤íŒ…ì€ Java ì˜ Stackê³¼ Queueë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.ë§¤ìš° ê¸°ì´ˆì ì¸ ë¶€ë¶„ì„ ì„¤ëª…ë“œë¦´ ê²ƒ ì´ë¯€ë¡œ ë”ìš± ìì„¸í•œ ì •ë³´ë¥¼ ì›í•˜ì‹œë©´ êµ¬ê¸€ë§ì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.ê·¸ëŸ¼ ìë£Œêµ¬ì¡° Stackê³¼ Queueì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.Stack (Last In First Out) Stackì˜ ì…ì¶œë ¥ ìˆœì„œëŠ” LIFO(Last In First Out) ì¦‰, â€œí›„ì…ì„ ì¶œâ€ ë°©ì‹ì…ë‹ˆë‹¤. ìœ„ì˜ ê·¸ë¦¼ì„ ë³´ì‹œë©´ ì´í•´ê°€ í¸í•˜ì‹¤ ê²ë‹ˆë‹¤. PushëŠ” â€œì‚½ì…â€ Popì€ â€œì‚­ì œâ€ë¼ê³  ë³´ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ â€œì²˜ìŒ ë“¤ì–´ì˜¨ ê²ƒì´ ë§ˆì§€ë§‰ìœ¼ë¡œ ë‚˜ê°„ë‹¤.â€ ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì„ì‹œ ì €ì¥í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.Stack ì˜ Method push(E item) [ì‚½ì…] : íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì†Œë¥¼ í•´ë‹¹ Stackì˜ ì œì¼ ìƒë‹¨ì— â€œì‚½ì…â€í•©ë‹ˆë‹¤. Object pop() [ì¶”ì¶œ, ì œê±°] : í•´ë‹¹ Stackì˜ ì œì¼ ìƒë‹¨ì— ìˆëŠ”(ì œì¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì €ì¥ëœ) ìš”ì†Œë¥¼ ë°˜í™˜í•˜ê³ , í•´ë‹¹ ìš”ì†Œë¥¼ Stackì—ì„œ â€œì œê±°â€í•©ë‹ˆë‹¤. boolean empty() : í•´ë‹¹ Stackì´ ë¹„ì–´ìˆìœ¼ë©´ true, ë¹„ì–´ìˆì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì¦‰, Stackì´ ë¹„ì–´ìˆëŠ”ì§€ ìœ ë¬´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. Object peek() [ì¶”ì¶œ] : í•´ë‹¹ Stackì˜ ì œì¼ ìƒë‹¨ì— ìˆëŠ”(ì œì¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì €ì¥ëœ) ìš”ì†Œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.(Pop() ì²˜ëŸ¼ ë°˜í™˜ í›„ ì œê±°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.) int search(Object o) [ì°¾ê¸°] : í•´ë‹¹ Stackì—ì„œ íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¤ëŠ” ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ìœ„ì¹˜ì˜ Indexë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë•Œ, IndexëŠ” ì œì¼ ìƒë‹¨ì— ìˆëŠ”(ì œì¼ ë§ˆì§€ë§‰ìœ¼ë¡œ ì €ì¥ëœ) ìš”ì†Œì˜ ìœ„ì¹˜ë¶€í„° 0ì´ ì•„ë‹Œ 1ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤. ì‚¬ìš© ì‚¬ë¡€ -&gt; ì›¹ ë¸Œë¼ìš°ì € ë°©ë¬¸ ê¸°ë¡(ë’¤ë¡œê°€ê¸°), ì‹¤í–‰ ì·¨ì†Œ, í›„ìœ„ í‘œê¸°ë²• ê³„ì‚°íŠ¹íˆ ë’¤ë¡œê°€ê¸°ë¥¼ ìƒê°í•˜ì‹œë©´ ì´í•´ê°€ ì‰½ìŠµë‹ˆë‹¤. ë’¤ë¡œê°€ê¸° ì‹œ ì œì¼ ë§ˆì§€ë§‰ì— ë„ì› ë˜ ë¸Œë¼ìš°ì €ë¶€í„° ìˆœì„œëŒ€ë¡œ ë‚˜ì˜¤ê²Œ ë©ë‹ˆë‹¤. Queue (First In First Out) Queueì˜ ì…ì¶œë ¥ ìˆœì„œëŠ” FIFO(First In First Out) ì¦‰, â€œì„ ì…ì„ ì¶œâ€ ë°©ì‹ì…ë‹ˆë‹¤. ìœ„ì˜ ê·¸ë¦¼ì„ ë³´ì‹œë©´ ì´í•´ê°€ í¸í•©ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ â€œì²˜ìŒ ë“¤ì–´ì˜¨ ê²ƒì´ ì²˜ìŒ ë‚˜ê°„ë‹¤.â€ ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. Stackê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„°ë¥¼ ì„ì‹œ ì €ì¥í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ê°€ì¥ ì²« ë²ˆì§¸ ìš”ì†Œì™€ ì œì¼ ë ì›ì†Œë¡œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.Queue ì˜ Method boolean add(E e) : í•´ë‹¹ Queueì˜ ë§¨ ë’¤ì— ìš”ì†Œë¥¼ ì‚½ì…í•©ë‹ˆë‹¤. ì‚½ì…ì´ ì„±ê³µí•˜ë©´ â€œtureâ€, Queueì— ì—¬ìœ ê³µê°„ì´ ì—†ì–´ ì‚½ì…ì— ì‹¤íŒ¨í•˜ë©´ â€œIllegalStateExceptionâ€ ì„ ë°œìƒ ì‹œí‚µë‹ˆë‹¤. E element() : í•´ë‹¹ Queueì˜ ë§¨ ì•ì— ìˆëŠ”(ì œì¼ ë¨¼ì € ì €ì¥ëœ) ìš”ì†Œë¥¼ ë°˜í™˜í•˜ê³ , í•´ë‹¹ ìš”ì†Œë¥¼ â€œì œê±°â€í•©ë‹ˆë‹¤. boolean offer(E e) : ê·¸ë¦¼ì˜ enqueueì˜ ì—­í• ê³¼ ê°™ìœ¼ë©°, í•´ë‹¹ Queueì˜ ë§¨ ë’¤ì— ìš”ì†Œë¥¼ ì‚½ì…í•©ë‹ˆë‹¤. ì‚½ì…ì´ ì„±ê³µí•˜ë©´ â€œtrueâ€, Queueì— ì—¬ìœ ê³µê°„ì´ ì—†ì–´ ì‚½ì…ì— ì‹¤íŒ¨í•˜ë©´ IllegalStateExceptionì´ ì•„ë‹Œ â€œfalseâ€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. E peek() : í•´ë‹¹ Queueì˜ ë§¨ ì•ì— ìˆëŠ”(ì œì¼ ë¨¼ì € ì €ì¥ëœ) ìš”ì†Œë¥¼ ë°˜í™˜í•˜ê³ , Queueê°€ ë¹„ì–´ìˆëŠ” ê²½ìš° Nullì„ ë°˜í™˜í•©ë‹ˆë‹¤. (í•´ë‹¹ ìš”ì†Œë¥¼ Queueì—ì„œ ì œê±°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.) E poll() : í•´ë‹¹ Queueì˜ ë§¨ ì•ì— ìˆëŠ”(ì œì¼ ë¨¼ì € ì €ì¥ëœ) ìš”ì†Œë¥¼ ë°˜í™˜í•˜ê³ , Queueê°€ ë¹„ì–´ìˆëŠ” ê²½ìš° Nullì„ ë°˜í™˜í•˜ë©° â€œí•´ë‹¹ ìš”ì†Œë¥¼ Queueì—ì„œ ì œê±°â€í•©ë‹ˆë‹¤. E remove() : í•´ë‹¹ Queueì˜ ë§¨ ì•ì— ìˆëŠ”(ì œì¼ ë¨¼ì € ì €ì¥ëœ) ìš”ì†Œë¥¼ ì œê±°í•©ë‹ˆë‹¤. ì‚¬ìš© ì‚¬ë¡€ -&gt; ìµœê·¼ ì‚¬ìš© ë¬¸ì„œ, ì€í–‰ ì—…ë¬´, ì½œì„¼í„° ëŒ€ê¸° ì‹œê°„, Buffer, Cacheì¦‰, ì‹œê°„ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•  í•„ìš”ê°€ ìˆì„ ë•Œ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. ë§ˆì¹˜ë©°..ì§€ê¸ˆê¹Œì§€ ìë£Œêµ¬ì¡° Stackê³¼ Queueì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.ë„ì›€ì´ ë˜ì…¨ê¸¸ ë°”ë¼ë©° ë” ìœ ìš©í•œ ì •ë³´ë¡œ ë‹¤ì‹œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤." }, { "title": "Android Fragment Lifecycle ìƒëª…ì£¼ê¸° ì •ë¦¬", "url": "/posts/Android-Fragment-Lifecycle/", "categories": "Android, Lifecycle", "tags": "android, fragment, lifecycle", "date": "2022-07-13 09:28:00 +0900", "snippet": "ì´ì „ Activity Lifecycle ì •ë¦¬ í¬ìŠ¤íŒ…ì— ì´ì–´ ì´ë²ˆì—ëŠ” Fragment ì˜ Lifecycleì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.ğŸš© Android Fragment Lifecycle ë™ì‘ ìˆœì„œì´ë²ˆì—ë„ êµ¬ê¸€ ê³µì‹ í™ˆí˜ì´ì§€ì— ë‚˜ì™€ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ Fragment Lifecycle ì˜ ìˆœì„œë¥¼ ë³´ë©´ Fragment ìƒì„±ì‹œ onAttach() -&gt; onCreate() -&gt; onCreateView() -&gt; onViewCreate() -&gt; onViewStateRestored() -&gt; onStart() -&gt; onResume() ìˆœìœ¼ë¡œ Callbakì´ í˜¸ì¶œë˜ë©°, Fragmentì˜ êµ¬ì„±ìš”ì†Œ ë³€ê²½ í˜¹ì€ ì¼ë¶€ê°€ ì‚¬ë¼ì§€ë©´ onPause() -&gt; onStop() -&gt;onSaveInstanceState() -&gt; onDestroyView() -&gt; onDestroy() -&gt; onDetach() ìˆœìœ¼ë¡œ Callbackì´ í˜¸ì¶œë˜ì–´ onDetach() ì´í›„ë¡œ Fragmentê°€ ì™„ì „ì´ ì†Œë©¸ë˜ê³  Activityì™€ì˜ ì—°ê²°ì´ ëŠì–´ì§‘ë‹ˆë‹¤.ğŸš© Fragment Lifecycle Callback Method ì—­í• ê° Callback Method ì˜ ì—­í• ì— ê´€í•˜ì—¬ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.1. onAttach() Fragmentê°€ Activityì— Attach ë ë•Œ í˜¸ì¶œëœë‹¤. onAttach() í•¨ìˆ˜ ì¸ìë¡œ contextê°€ ì£¼ì–´ì§€ê¸° ë•Œë¬¸ì— ë¶€ëª¨ Activityì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.2. onCreate() Fragment ì—ì„œ í•„ìš”í•œ Resourceë¥¼ ì´ˆê¸°í™” í•˜ëŠ” ê³³ (Ui ê´€ë ¨ ì´ˆê¸°í™”ëŠ” í•  ìˆ˜ ì—†ë‹¤.) Fragmentê°€ ìƒì„±ë˜ëŠ” ì‹œì ì´ë‹¤. Viewë¥¼ ì œì™¸í•˜ê³  Activityì—ì„œ ì „ë‹¬ëœ ê°’ë“¤ì„ ë°›ëŠ” ë“± ë³€ìˆ˜ë“¤ì„ ì´ˆê¸°í™”í• ë•Œ ì‚¬ìš©í•œë‹¤.ì¦‰, Fragmentë¥¼ ìƒì„±í•˜ë©´ì„œ ë„˜ê²¨ì¤€ ê°’ë“¤ì´ ìˆë‹¤ë©´ ì—¬ê¸°ì„œ ë³€ìˆ˜ì— ë„£ì–´ì£¼ë©´ëœë‹¤. Bundle íƒ€ì…ìœ¼ë¡œ saveInstanceState íŒŒë¼ë¯¸í„°ê°€ í•¨ê»˜ ì œê³µ ëœë‹¤.í•´ë‹¹ íŒŒë¼ë¯¸í„°ëŠ” Fragmentê°€ ì²˜ìŒ ìƒì„±ëì„ë•Œë§Œ nullë¡œ ë„˜ì–´ì˜¤ë©°, onSaveInstanceState() í•¨ìˆ˜ë¥¼ ì¬ì •ì˜ í•˜ì§€ ì•Šì•˜ë”ë¼ë„ ê·¸ ì´í›„ ì¬ìƒì„±ë¶€í„°ëŠ” non-null ê°’ìœ¼ë¡œ ë„˜ì–´ì˜¨ë‹¤.3. onCreateView() Fragmentì™€ xmlì„ ì—°ê²°í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. onCreate() ì´í›„ì—ëŠ” onCreateView() ì™€ onViewCreated() Callbak í•¨ìˆ˜ê°€ ì´ì–´ì„œ í˜¸ì¶œëœë‹¤. onCreateView() ì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì •ìƒì ì¸ Fragment View ê°ì²´ë¥¼ ì œê³µí–ˆì„ ë•Œë§Œ Fragment View ì˜ Lifecycle ì´ ìƒì„±ëœë‹¤. Fragment ì™€ xml ì„ ì—°ê²°í•˜ëŠ” ì‘ì—…ë§Œí•˜ê³  View ì˜ Controllì€ onViewCreated()ì—ì„œ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.ê·¸ ì´ìœ ëŠ” onCreateView()ì˜ ë°˜í™˜ëœ View ê°ì²´ëŠ” onViewCreated() ì˜ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ê³  ì´ ì‹œì  ë¶€í„°ëŠ” Fragment View ì˜ Lifecycle ì´ INITIALIZED ìƒíƒœë¡œ ì—…ê·¸ë°ì´íŠ¸ ëê¸° ë•Œë¬¸ì´ë‹¤. class HomeFragment : Fragment() { private lateinit var binding: FragmentHomeBinding override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View? { binding = DataBindingUtil.inflate(inflater, layoutResId, container, false) return binding.root }} 4. onViewCreated() View ê°€ ìƒì„±ë˜ë©´ í˜¸ì¶œëœë‹¤. Fragment View ì˜ Lifecycle ì´ INITIALIZED ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ ëœë‹¤. Ui ê´€ë ¨ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê³³ìœ¼ë¡œ View ì˜ ì´ˆê¸°ê°’ì„ ì„¤ì •í•´ì£¼ê±°ë‚˜ LiveData ì˜µì €ë¹™, StateFlow ì˜µì €ë¹™, Databinding, RecyclerView ë˜ëŠ” ViewPager2ì— ì‚¬ìš©ë  Adapter ì„¸íŒ… ë“±ì„ í•  ìˆ˜ ìˆë‹¤. override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState) binding.lifecycleOwner = viewLifecycleOwner // todo: Ui Update or LiveData Observing...} 5. onViewStateRestored() ì €ì¥í•´ë‘” ëª¨ë“  state ê°’ì´ Fragment ì˜ View ê³„ì¸µêµ¬ì¡°ì— ë³µì› ëì„ ë•Œ í˜¸ì¶œëœë‹¤. ì´ ì‹œì ì˜ Fragment Viewì˜ Lifecycleì€ INITIALIZED ì—ì„œ **CREATEDâ€â€ ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆìŒì„ ì•Œë¦°ë‹¤.6. onStart() Fragmentê°€ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ê¸° ì§ì „ì— í˜¸ì¶œëœë‹¤. (ì‚¬ìš©ìì—ê²Œ Fragmentê°€ ë³´ì´ë„ë¡ í•´ì¤Œ) ì´ ì‹œì ë¶€í„°ëŠ” Fragmentì˜ child FragmentManagerë¥¼ í†µí•´ FragmentTransactionì„ ì•ˆì „í•˜ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.7. onResume() Fragmentê°€ ë¹„ë¡œì„œ ë³´ì—¬ì§€ëŠ” ë‹¨ê³„ì´ë‹¤. Fragmentê°€ ë³´ì´ëŠ” ìƒíƒœì—ì„œ ëª¨ë“  Animatorì™€ Transition íš¨ê³¼ê°€ ì¢…ë£Œë˜ê³ , Fragmentê°€ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš© í•  ìˆ˜ ìˆì„ ë•Œ onResume()ì´ í˜¸ì¶œëœë‹¤. Fragmentê°€ ë‹¤ì‹œ ë³´ì—¬ì§ˆ ë•Œ ì‹¤í–‰í•´ì•¼ í•  ì½”ë“œë¥¼ ë„£ìœ¼ë©´ ëœë‹¤. ex) RecyclerView notifyDataSetChanged ë“±ë“± ì£¼ì˜!! FragmentTransaction ì„ í†µí•´ add í•˜ëŠ” ê²½ìš°ì—ëŠ” ì•„ë˜ì— ê¹”ë¦° FirstFragment ì˜ Lifecycle ì€ ì—¬ì „íˆ RESUME ìƒíƒœì´ë‹¤. 8. onPause() ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©ì„ ì¤‘ì§€í•œ ìƒíƒœì´ë‹¤. Fragmentì˜ ì¼ë¶€ê°€ ì‚¬ë¼ì§€ë©´ í˜¸ì¶œëœë‹¤. ë¶€ëª¨ Activityê°€ ì•„ë‹Œ ë‹¤ë¥¸ Activityê°€ ìœ„ë¡œ ì˜¬ë¼ì˜¤ê±°ë‚˜, ë‹¤ë¥¸ Fragmentê°€ Addë˜ëŠ” ê²½ìš° onPause() ì¦‰, ì¼ì‹œì •ì§€ ìƒíƒœë¡œ ë“¤ì–´ê°„ë‹¤. UI ê´€ë ¨ ì½”ë“œë¥¼ ì •ì§€í•˜ê³ , ì¤‘ìš”í•œ ë°ì´í„°ë¥¼ ì €ì¥ ì£¼ì˜!! Fragment ì™€ Viewì˜ Lifecycle ì´ PAUSED ê°€ ì•„ë‹Œ STARTED ê°€ ëœë‹¤. 9. onStop() Fragmentê°€ ì™„ì „íˆ ì‚¬ë¼ì§€ë©´ í˜¸ì¶œëœë‹¤. (ì™„ì „í•œ ì •ì§€) Fragmentê°€ ë” ì´ìƒ í™”ë©´ì— ë³´ì—¬ì§€ì§€ ì•Šê²Œë˜ë©´ Fragmentì™€ Viewì˜ Lifecycleì€ CREATED ìƒíƒœê°€ ë˜ê³ , onStop() Callback í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤.10. onDestroyView() Fragmentì™€ ê´€ë ¨ëœ Viewê°€ ì œê±°ë ë•Œ í˜¸ì¶œëœë‹¤. ëª¨ë“  exit animation ê³¼ transitionì´ ì™„ë£Œë˜ê³ , Fragmentê°€ í™”ë©´ìœ¼ë¡œë¶€í„° ë²—ì–´ë‚¬ì„ ê²½ìš° Fragment View ì˜ Lifecycle ì€ DESTROYEDê°€ ëœë‹¤. ì´ ì‹œì ë¶€í„°ëŠ” getViewLifecycleOwnerLiveData() ì˜ ë¦¬í„´ê°’ìœ¼ë¡œ null ì´ ë°˜í™˜ëœë‹¤. Activityì—ì„œ Fragmentë¥¼ ìƒì„±í–ˆì„ ë‹¹ì‹œ addToBackStack()ì„ ìš”ì²­í–ˆì„ ê²½ìš° onDestroy()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³ , ì¸ìŠ¤í„´ìŠ¤ê°€ ì €ì¥ë˜ì–´ ìˆë‹¤ê°€ Fragmentë¥¼ ë‹¤ì‹œ ë¶€ë¥¼ ë•Œ onCreateView()ë¥¼ ì‹¤í–‰í•˜ì—¬ ë‹¤ì‹œ í™”ë©´ì— ë³´ì—¬ì§€ê²Œ í•œë‹¤. ì£¼ì˜!! í•´ë‹¹ ì‹œì ì—ì„œëŠ” Garbage collectionì— ì˜í•´ ìˆ˜ê±°ë  ìˆ˜ ìˆë„ë¡ Fragment Viewì— ëŒ€í•œ ëª¨ë“  ì°¸ì¡°ê°€ ì œê±°ë˜ì–´ì•¼ í•œë‹¤. 11. onDestroy() Fragment ê°€ ì œê±°ë˜ê±°ë‚˜ FragmentManagerê°€ destory ëì„ ê²½ìš°, Fragmentì˜ Lifecycleì€ DESTROYED ìƒíƒœê°€ ë˜ê³ , onDestroy() ì½œë°± í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤. Viewê°€ ì œê±°ëœ í›„ Fragment ê°€ ì™„ì „íˆ ì†Œë©¸ë˜ê¸° ì „ì— í˜¸ì¶œëœë‹¤.12. onDetach() Fragmentê°€ ì™„ì „íˆ ì†Œë©¸ë˜ê³  Activityì™€ì˜ ì—°ê²°ë„ ëŠì–´ì§ˆ ë•Œ í˜¸ì¶œëœë‹¤.ğŸš© onResume() ì´í›„ì— í™ˆ ë²„íŠ¼ì„ ëˆ„ë¥¼ ê²½ìš° onResume() ì´í›„ë¶€í„° í™ˆ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ Fragmentì˜ Lifecycle ì€ onPause() -&gt; onStop() -&gt; onSaveInstanceState() ê¹Œì§€ë§Œ í˜¸ì¶œë˜ê³ , onDestroyView()ë¶€í„° ê·¸ ì´í›„ì˜ Lifecycle Callbackì€ í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ í™ˆì—ì„œ ë‹¤ì‹œ í•´ë‹¹ Fragmentë¡œ ëŒì•„ì˜¤ëŠ” ê²½ìš° onResume()ì´ í˜¸ì¶œë©ë‹ˆë‹¤. ì¦‰, onResume() -&gt; í™ˆ ë²„íŠ¼ í´ë¦­ -&gt; onPause() -&gt; onStop() -&gt; onSaveInstanceState() -&gt; ë‹¤ì‹œ í•´ë‹¹ Fragmentë¡œ ë„˜ì–´ì˜´ -&gt; onResume() ğŸš© Jetpack Navigation Jetpack Navigationì˜ ê²½ìš° Replace í˜•ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. â€˜Aâ€™Fragment ìœ„ì— â€˜Bâ€™Fragmentê°€ ì˜¬ë¼ì˜¤ëŠ” ê²½ìš° Lifecycle ğŸ‘‡ â€˜Aâ€™ FragmentëŠ” onDestroyView()ê¹Œì§€ë§Œ í˜¸ì¶œë˜ê³  onDestroy(), onDetach()ëŠ” í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. â€˜Bâ€™ Fragmentê°€ ì¢…ë£Œë˜ë©´ â€˜Aâ€™ FragmentëŠ” onCreateView() -&gt; onViewCreated() -&gt; onViewStateRestored() -&gt; onStart() -&gt; onResume() ìˆœìœ¼ë¡œ í˜¸ì¶œë©ë‹ˆë‹¤. ì¦‰, â€˜Aâ€™Fragmentì˜ onAttach() ì™€ onCreate() ëŠ” í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§ˆì§€ë©°..FragmentëŠ” Add ì™€ replace ë°©ì‹ì´ ìˆëŠ”ë° ë™ì‘í•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤. ì €ëŠ” ìš”ì¦˜ ê°œë°œí• ë•Œ androidx jetpack navigation componentë¥¼ ì‚¬ìš©í•˜ì—¬ Single Activityë¡œ ê°œë°œí•©ë‹ˆë‹¤. í˜„ì¬ ì¬ì§ì¤‘ì¸ íšŒì‚¬ ë˜í•œ Single Activityë¥¼ ì‚¬ìš©ì¤‘ì´ë©°, navigation componentë¥¼ ì‚¬ìš©í•˜ë©´ fragment ê°„ ì „í™˜ì´ ë§¤ìš° í¸ë¦¬í•´ì§‘ë‹ˆë‹¤. ë¬¼ë¡  navigationì˜ ë‹¨ì  ë˜í•œ ì¡´ì¬í•©ë‹ˆë‹¤. navigation componentì— ê´€í•´ì„œëŠ” ì¶”í›„ í¬ìŠ¤íŒ…ì„ ë”°ë¡œ ì˜¬ë ¤ ë‹¤ë¤„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.Activity Lifecycle ì •ë¦¬" }, { "title": "Android Activity Lifecycle ìƒëª…ì£¼ê¸° ì •ë¦¬", "url": "/posts/Android-Activity-Lifecycle/", "categories": "Android, Lifecycle", "tags": "android, activity, lifecycle", "date": "2022-07-13 09:28:00 +0900", "snippet": "Android Activity Lifecycle ë™ì‘ ìˆœì„œêµ¬ê¸€ ê³µì‹ í™ˆí˜ì´ì§€ì— ë‚˜ì™€ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì´í•´ê°€ ì‰½ìŠµë‹ˆë‹¤.í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ Activity Lifecycle ì˜ ìˆœì„œë¥¼ ë³´ë©´ Activity ìƒì„± ì‹œ onCreate() -&gt; onStart() -&gt; onResume() ì˜ ìˆœì„œë¡œ ì½œë°±ì´ ì‹¤í–‰ ë˜ë©° Activityì˜ êµ¬ì„±ìš”ì†Œ í˜¹ì€ ì¼ë¶€ê°€ ì‚¬ë¼ì§€ë©´ onPause() -&gt; onStop() -&gt; onDestory() ìˆœìœ¼ë¡œ ì½œë°±ì´ ì‹¤í–‰ë˜ë©° onDestory() ì´í›„ì— Activityê°€ ì¢…ë£Œë©ë‹ˆë‹¤. ì°¸ê³  ğŸ‘‰ Activityê°€ ì¤‘ì§€(onStop())ìƒíƒœì—ì„œ ë‹¤ì‹œ í™”ë©´ì— ë³´ì—¬ì§€ë©´ Lifecycycleì€ ì–´ë–»ê²Œ ë ê¹Œìš”?? âœ… onRestart() -&gt; onStart() -&gt; onResume() -&gt; ActivityRunning ìˆœìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. Activityê°€ onDestory()ë¥¼ íƒ€ì§€ì•Šê³  onStop()ì—ì„œ ë‹¤ì‹œ ë³´ì—¬ì§„ë‹¤ë©´ onCreate()ê°€ í˜¸ì¶œë˜ì§€ ì•Šê³  onRestart()ê°€ í˜¸ì¶œ ëœë‹¤ëŠ” ì  ê¼­ ê¸°ì–µí•´ì£¼ì„¸ìš”!! ğŸ€ Activity Lifecycle Callback Method ì—­í• ê° Callback Method ì˜ ì—­í• ì— ê´€í•˜ì—¬ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.â˜˜ï¸ 1. onCreate() Activityê°€ ì‹¤í–‰ë˜ë©´ ì œì¼ ì²˜ìŒ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤. View ê´€ë ¨ ì²˜ë¦¬ëŠ” í•´ë‹¹ ë©”ì„œë“œì—ì„œ ì§„í–‰í•©ë‹ˆë‹¤. (click Listenr, data binding ë“±ë“±..) onCreate ì—ëŠ” saveInstanceState ì¦‰ bundleë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ í”„ë¡œí¼í‹°ëŠ” ì²˜ìŒ ìƒì„±ëœ ê²½ìš° nullì„ ë‹´ê³ ìˆê³ , onSaveInstanceState() í•¨ìˆ˜ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœë¥¼ ì €ì¥í•œ ê²½ìš° saveInstanceStateë¥¼ í†µí•´ ìƒíƒœê°’ì„ ë°›ì•„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.class MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding override fun onCreate(saveInstanceState: Bundle?) { binding = DataBindingUtil.setContentView(this, R.layout.activity_main) binding.lifecycleOwner = this // todo View ì„¸íŒ… (Adapter ì„¸íŒ…, ClickListener ì—°ê²° ë“±ë“±..) }}â˜˜ï¸ 2. onStart() Activity ê°€ onCreate()ë¥¼ í˜¸ì¶œí•œ ë’¤ Activityê°€ â€˜STARTEDâ€™ ìƒíƒœì— ì§„ì…í•˜ê²Œ ë˜ë©´ì¦‰, Activityê°€ í™”ë©´ì— ë³´ì´ê¸° ë°”ë¡œ ì§ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤. ì´ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ Activityê°€ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆë„ë¡ ì¤€ë¹„í•©ë‹ˆë‹¤.â˜˜ï¸ 3. onResume() Activityê°€ onStart()ë¥¼ í˜¸ì¶œí•œ ë’¤ Activityê°€ â€˜RESUMEâ€™ ìƒíƒœì— ì§„ì…í•˜ê²Œ ë˜ë©´ í˜¸ì¶œë©ë‹ˆë‹¤. ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©ì„ í•  ìˆ˜ ìˆëŠ” ìƒíƒœê°€ ë©ë‹ˆë‹¤. âš ï¸ì£¼ì˜âš ï¸ ì „í™”ê°€ ì˜¤ê±°ë‚˜, í™”ë©´ì„ ìŠ¬ë¦½í•˜ë©´ Activityì˜ lifecycleì€ onPause()ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.ì´ë•Œ ë‹¤ì‹œ í•´ë‹¹ Activityë¡œ ëŒì•„ì˜¤ë©´ onCreate()ê°€ í˜¸ì¶œë˜ì§€ ì•Šê³  onResume()ì´ ë‹¤ì‹œ í•œë²ˆ í˜¸ì¶œë©ë‹ˆë‹¤.ì´ëŸ° ê²½ìš° Activityê°€ ë‹¤ì‹œ ë³´ì—¬ì§ˆë•Œë§ˆë‹¤ í•„ìš”í•œ ì½”ë“œë¥¼ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤. â˜˜ï¸ 4. onPause() ì‚¬ìš©ìê°€ ì ì‹œ Activityë¥¼ ë– ë‚¬ì„ ë•Œ ì¦‰, ë˜ ë‹¤ë¥¸ Activityì— Focusë¥¼ ë’€ì„ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. âœ… ì „í™”ê°€ ì˜¤ëŠ” ê²½ìš°, ë©€í‹° ìœˆë„ìš° ìƒ ë‹¤ë¥¸ ì•±ì— Focusë¥¼ ë‘ëŠ” ê²½ìš° í˜¸ì¶œ ì´ ë©”ì„œë“œê°€ Return í•˜ê¸° ì „ì—ëŠ” ë‹¤ìŒ Activityê°€ ì‹œì‘ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ì‘ì—…ì€ ë§¤ìš° ë¹¨ë¦¬ ìˆ˜í–‰ëœ í›„ return ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. Activityê°€ onPause() ìƒíƒœì— ë“¤ì–´ê°€ë©´ Systemì€ Activityë¥¼ ê°•ì œ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Activityê°€ ë‹¤ì‹œ ì‹œì‘ë˜ê±°ë‚˜, ì‚¬ìš©ìì—ê²Œ ì™„ì „íˆ ë³´ì—¬ì§€ì§€ ì•ŠëŠ” ì´ìƒ ActivityëŠ” â€˜PAUSEDâ€™ ìƒíƒœì— ë¨¸ë¬´ë¥´ê²Œ ëœë‹¤. âœ… onPause() ìƒíƒœì—ì„œ ë‹¤ì‹œ Activityê°€ ë³´ì—¬ì§€ë©´ onCreate()ë¥¼ íƒ€ì§€ì•Šê³  onRestart()ë¥¼ í˜¸ì¶œ í•©ë‹ˆë‹¤. âš ï¸ì£¼ì˜âš ï¸ onPause()ëŠ” ì•„ì£¼ ì ê¹ ì‹¤í–‰ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì‚¬ìš©ì ë°ì´í„° ì €ì¥, ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ, DB Transaction ë“± ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. â˜˜ï¸ 5. onStop() Activityê°€ ì‚¬ìš©ìì—ê²Œ ë” ì´ìƒ ë³´ì´ì§€ ì•Šì„ ë•Œ ActivityëŠ” â€˜STOPPEDâ€™ ìƒíƒœì— ì§„ì…í•˜ê³  onStop()ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. âœ… Activityê°€ ì†Œë©¸í•˜ê±°ë‚˜ ë‹¤ë¥¸ Activityê°€ í™”ë©´ì„ ê°€ë¦´ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. ì´ ë©”ì„œë“œì—ì„œëŠ” í•„ìš”í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œí•´ì•¼ í•˜ê³ (ì• ë‹ˆë©”ì´ì…˜ ì¼ì‹œì¤‘ì§€ ë“±ë“±..), ì‚¬ìš©ìì˜ ë°ì´í„° ì €ì¥, ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ, DB Transaction ë“± ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì‘ì—… ë˜í•œ ê°€ëŠ¥ í•©ë‹ˆë‹¤. Activityê°€ onStop() ìƒíƒœì— ë“¤ì–´ê°€ë©´ Systemì€ Activityë¥¼ ê°•ì œ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. âš ï¸ì£¼ì˜âš ï¸ ë§Œì•½ onStop() ìƒíƒœì—ì„œ Activityê°€ ë‹¤ì‹œ ë³´ì—¬ì§„ë‹¤ë©´ onCreate()ëŠ” í˜¸ì¶œë˜ì§€ ì•Šê³  onRestart() -&gt; onStart() -&gt; onResume() ìˆœìœ¼ë¡œ í˜¸ì¶œë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í™”ë©´ì„ ì ê·¸ë©´ ActivityëŠ” onResume() ìƒíƒœì—ì„œ onPause() -&gt; onStop()ì„ í˜¸ì¶œí•˜ê³  ì ê¸ˆì„ í•´ì œí•˜ë©´ onRestart() -&gt; onStart() -&gt; onResume() ìˆœìœ¼ë¡œ í˜¸ì¶œë©ë‹ˆë‹¤. â˜˜ï¸ 6. onDestory() Activityê°€ ì™„ì „íˆ ì†Œë©¸ë˜ê¸° ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” Activityê°€ ë°›ëŠ” ë§ˆì§€ë§‰ ë©”ì„œë“œ ì…ë‹ˆë‹¤. Activityê°€ ì•±ì— ì˜í•´ ì¢…ë£Œë˜ê±°ë‚˜(finish ë©”ì„œë“œ í˜¸ì¶œ), í™”ë©´ êµ¬ì„±ìš”ì†Œ ë³€ê²½(ê¸°ê¸° íšŒì „ ë“±..), Systemì´ ê°•ì œë¡œ ì¢…ë£Œë¥¼ ì‹œí‚¤ëŠ” ê²½ìš° í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Activityê°€ onDestory() ìƒíƒœì— ë“¤ì–´ê°€ë©´ System ì€ Activityë¥¼ ê°•ì œë¡œ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. âš ï¸ì£¼ì˜âš ï¸ ë§Œì•½ onDestory()ê°€ í˜¸ì¶œë˜ê¸°ê¹Œì§€ í•´ì œë˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ê°€ ìˆë‹¤ë©´, ëª¨ë‘ ì—¬ê¸°ì„œ í•´ì œí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ Memory Leak ì¦‰, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì˜ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ğŸ€ ë²ˆì™¸â˜˜ï¸ êµ¬ì„±ìš”ì†Œ ë³€ê²½ì‹œ(í™”ë©´ íšŒì „ ë“±..) Activity ì˜ ìƒëª…ì£¼ê¸°ëŠ”?? í™”ë©´ íšŒì „ ë“± êµ¬ì„±ìš”ì†Œê°€ ë³€ê²½ë˜ë©´ ActivityëŠ” ë‹¤ìŒ ìˆœì„œë¡œ lifecycle Callback Methodë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ğŸ‘‡ onPause() -&gt; onStop() -&gt; onDestory() -&gt; onCreate() -&gt; onStart() -&gt; onResumse() ğŸ›  ì¦‰, í˜„ì¬ Activityë¥¼ Destory í•˜ê³  ìƒˆë¡œ ìƒì„± í•˜ê¸° ë•Œë¬¸ì— ê¸°ì¡´ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” onSaveInstanceState()ì—ì„œ Bundleì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤.ì´ëŸ¬í•œ ì  ë•Œë¬¸ì— ìš”ì¦˜ Android ê°œë°œì—ì„œëŠ” AAC ViewModel ì¦‰, Android Architecture Components ViewModel ì„ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ìš”ì†Œ ë³€ê²½ì‹œì—ë„ ë°ì´í„°ê°€ ì‚´ì•„ìˆë„ë¡ í•©ë‹ˆë‹¤. AAC ViewModelì— ëŒ€í•œ ê°œë…ì€ ë‹¤ìŒì— ë”°ë¡œ ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤. â˜˜ï¸ â€˜Aâ€™ Activity ì—ì„œ â€˜Bâ€™ Activityë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš° Activityì˜ ìƒëª…ì£¼ê¸°ëŠ”?? A -&gt; B Activityë¥¼ ì‹¤í–‰í•  ê²½ìš° Activityì˜ ìƒëª…ì£¼ê¸°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ğŸ‘‡ 'A' onPause() -&gt; 'B' onCreate() -&gt; 'B' onStart() -&gt; 'B' onResume() -&gt; 'A' onStop() -&gt; 'B'ëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§. ìœ„ì˜ ìƒíƒœì—ì„œ B Activityë¥¼ ì¢…ë£Œ ì¦‰, finish() í•¨ìˆ˜ë¥¼ í†µí•´ ì¢…ë£Œí•˜ë©´ ìƒëª…ì£¼ê¸°ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?? ğŸ‘‡ 'B' onPause() -&gt; 'A' onRestart() -&gt; 'A' onStart() -&gt; 'A' onResume() -&gt; 'B' onStop() -&gt; 'B' onDestroy() -&gt; 'A'ëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§. ğŸ€ ë§ˆì¹˜ë©°..Activity Lifecycle í¬ìŠ¤íŒ…ì€ ì“¸ë°ì—†ëŠ” ì„¤ëª…ì€ ìµœëŒ€í•œ ìì œí•˜ë©° ì‹¤ìš©ì ì¸ ì˜ë¯¸ì˜ ë‚´ìš©ë§Œ ë‹´ì„ë ¤ ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬ë“œë¦¬ê³  ì—¬ëŸ¬ë¶„ê»˜ ê¼­ ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ í•©ë‹ˆë‹¤.ë‹¤ìŒ í¬ìŠ¤íŒ…ì€ Fragment ì˜ Lifecycle ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³  ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°€ì§€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤." } ]
