---
title: iOS SwiftUi Combine ê¸°ì´ˆ
author: Narvis2
date: 2022-12-01 17:20:00 +0900
categories: [Swift, Combine]
tags: [iOS, Combine, SwiftUi]
---

ì•ˆë…•í•˜ì„¸ìš”. narvis2 ì…ë‹ˆë‹¤.  
ì´ë²ˆì‹œê°„ì—ëŠ” `iOS`ì—ì„œ ë¹„ë™ê¸°ë¥¼ ì²˜ë¦¬í• ë•Œ ì‚¬ìš©ë˜ëŠ” `Combine`ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.

## ğŸ€ Combine

---

- `Event` ì²˜ë¦¬ë¥¼ ìœ„í•œ ì„ ì–¸ì  ì ‘ê·¼ì„ í•©ë‹ˆë‹¤.
- `Delegate`ë‚˜ `Completion Handler` êµ¬í˜„ ëŒ€ì‹  `Event` ì†ŒìŠ¤ì— ëŒ€í•œ `Single processing chain`ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `Apple` ë²„ì „ì˜ `RxSwift`
- ì‹œê°„ì˜ íë¦„ì— ë”°ë¼ ê°’ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ `Declarative Swift API`ë¥¼ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬
- âœ… `Combine`ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ì‘ì—…
  - 1ï¸âƒ£ í•„ë“œì— ì…ë ¥í•œ ê°’ì´ ìœ ìš”í•œ ê²½ìš°ì—ë§Œ `Submit`ë²„íŠ¼ì´ í™œì„±í™”ë˜ë„ë¡ ì„¤ì •
  - 2ï¸âƒ£ ë¹„ë™ê¸°ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ë°˜í™˜ëœ ê°’ì„ ì‚¬ìš©í•˜ì—¬ `View`ë¥¼ `Update`í•  ë°©ë²•ê³¼ ëŒ€ìƒì„ ì„ íƒí•  ìˆ˜ ìˆìŒ
  - 3ï¸âƒ£ ì‚¬ìš©ìê°€ í…ìŠ¤íŠ¸í•„ë“œì— ë™ì ìœ¼ë¡œ ì…ë ¥í•˜ê³  ì…ë ¥í•œ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ `View`ë¥¼ `Update`í•¨
- âœ… ì¥ì 
  - 1ï¸âƒ£ `System Level`ì— í†µí•©ë˜ì–´ ìˆìŒ.
  - 2ï¸âƒ£ `delegate`, `closure`ë¥¼ ë§Œë“¤ í•„ìš” ì—†ìŒ.
  - 3ï¸âƒ£ ë™ì¼í•œ `interface`ë¥¼ ì“°ê¸° ë•Œë¬¸ì— ì¬ì‚¬ìš©ì„±ì´ ì¢‹ìŒ.
  - 4ï¸âƒ£ `operator`ë¥¼ ì¡°í•©í•˜ê¸° ì¢‹ìŒ.
  - 5ï¸âƒ£ ë¹„ë™ê¸° ì½”ë“œì—ì„œë„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŒ.
- âœ… `Combine`ì˜ 3ê°€ì§€ ì£¼ìš” ë¶€ë¶„
  - `Publisher`
  - `Operator`
  - `Subscriber`
- âœ… `Key points`
  - `Combine`ì€ ë¹„ë™ê¸° `Event`ë¥¼ ìœ„í•œ ì„ ì–¸ì , ë°˜ì‘í˜• í”„ë ˆì„ì›Œí¬
  - ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ ê¸°ì¡´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ ëª©í‘œ
  - ì£¼ìš” 3 íƒ€ì… íë¦„ : `publisher`(`Event` ë°œí–‰) ğŸ‘‰ `operator`(`Event`ì²˜ë¦¬, ì¡°ì‘) ğŸ‘‰ `subscriber`(ê²°ê³¼ë¬¼ ì†Œë¹„)

### â˜˜ï¸ Publisher

- **_`value`ë“¤ì„ ë‚´ë³´ë‚´ëŠ”(`emit`) ì—­í• _**
- `Publisher`ê°€ `emit`í•  ìˆ˜ ìˆëŠ” `Event` ì¢…ë¥˜
  - 1ï¸âƒ£ `Output`
  - 2ï¸âƒ£ `Completion` : `successful completion`
  - 3ï¸âƒ£ `Failure` : `completion with an error`
- âœ… **_ì°¸ê³ _**

  > - `Publisher`ëŠ” `Output`ì„ ì•ˆë³´ë‚´ê³  ìˆê±°ë‚˜ ì—¬ëŸ¬ë²ˆ ë³´ë‚¼ ìˆ˜ ìˆìœ¼ë©°, `Completion`ì´ë‚˜ `Failure`ë¥¼ í•œë²ˆ ë³´ë‚´ê³  ë‚˜ë©´ ë” ì´ìƒì˜ `Event`ë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ìŒ
  > - êµ¬ë…ì´ ì—†ëŠ” ê²½ìš° `Publisher`ëŠ” ë°ì´í„°ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŒ

- âœ… **_íŠ¹ì§•_**
  - 1ï¸âƒ£ **_3ê°€ì§€ `Event`ë¡œ_** ëª¨ë“  ì¢…ë¥˜ì˜ ë™ì  ë°ì´í„°ë¥¼ í‘œí˜„ ê°€ëŠ¥
  - 2ï¸âƒ£ `delegate`ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ `completion callback` ì£¼ì…ì´ í•„ìš” ì—†ìŒ
  - 3ï¸âƒ£ `Publisher`ëŠ” `error handling`ì´ ë‚´ì¥
  - 4ï¸âƒ£ `Publisher`ëŠ” 2ê°œì˜ `Generic`ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±
    > - `Generic` ì²« ë²ˆì§¸ `Publisher.Ouput` ğŸ‘‰ `output value`
    > - `Generic` ë‘ ë²ˆì§¸ `Publisher.Failure` ğŸ‘‰ `Error`ì „ë‹¬, `Error`ê°€ ë°œìƒí•  ì¼ì´ ì—†ìœ¼ë©´, `Never`ë¼ëŠ” `type`ìœ¼ë¡œ ì •ì˜í•˜ë©´ ë¨

### â˜˜ï¸ Operator

- **_`Event`ë¥¼ ì²˜ë¦¬í•˜ê³ , ì¡°ì‘í•˜ëŠ” ì—­í• _**
- `Publisher` `Protocol`ì— ì„ ì–¸ë˜ì–´ ìˆìŒ
- **_ê°™ê±°ë‚˜ ìƒˆë¡œìš´ `Publisher`ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œ_**
- `Operator`ë¥¼ ì²´ì´ë‹í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ìš©í•¨
- âœ… **_ì¥ì _**
  - 1ï¸âƒ£ **_`Operator`ë“¤ì€ ë…ë¦½ì ì´ê³  ì¡°í•©ê°€ëŠ¥_** í•˜ê¸° ë•Œë¬¸ì—, ë³µì¡í•œ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ”ë° ì¡°í•©(`Combine`) ê°€ëŠ¥.
  - 2ï¸âƒ£ í•­ìƒ `Input & Output(Upstream & DownStream)`ì„ ê°€ì§€ê¸° ë•Œë¬¸ì— `shared state`ë¥¼ í”¼í•  ìˆ˜ ìˆìŒ.
    > ì¦‰, ë™ì‹œì„± ì´ìŠˆë¡œ ì¸í•´ **_ë¹„ë™ê¸° ì½”ë“œê°€ ë¼ì–´ë“¤ì–´ ë°ì´í„°ë¥¼ ì¤‘ê°„ì— ë³€ê²½í•  ì¼ì´ ì—†ìŒ_**

### â˜˜ï¸ Subscribers

- **_ê²°ê³¼ë¬¼ì„ ì†Œë¹„í•˜ëŠ” ì—­í• _**
- **_ì „ë‹¬ë°›ì€ `value`ë‚˜ `completion event`ë¡œ ì‘ì—…ì„ ìˆ˜í–‰_**
- ëª¨ë“  êµ¬ë…ì€ `subscriber`ë¡œ ëë‚¨
- âœ… 2ê°œì˜ ë‚´ì¥ëœ `subscriber`
  - 1ï¸âƒ£ `sink` ğŸ‘‰ `output value`ì™€ `completion`ì„ ë°›ì„ ìˆ˜ ìˆëŠ” `í´ë¡œì €`ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŒ.
  - 2ï¸âƒ£ `assign` ğŸ‘‰ `output`ì„ `key path`ë¥¼ í†µí•´ `data model`ì˜ `property`ë‚˜ `UI control`ì— ë°”ë¡œ `binding`í•  ìˆ˜ ìˆìŒ.

### â˜˜ï¸ Subscriptions

- **_`publisher`, `operator`, `subcriber`ì˜ ì „ì²´ `chain`_**
- âœ… ì¤‘ìš”
  - `subscription`ì˜ ëì— `subscriber`ë¥¼ ì¶”ê°€ ğŸ‘‰ `chainning`ì˜ ë§¨ ì•ì— ìˆëŠ” `publisher`ë¥¼ í™œì„±í™”
  - **_`output`ì„ ìˆ˜ì‹ í•´ì¤„ `subscriber`ê°€ ì—†ìœ¼ë©´ `publisher`ëŠ” ì–´ë–¤ `value`ë„ ì „ë‹¬í•˜ì§€ ì•ŠìŒ_**
- âœ… ì¥ì 
  - 1ï¸âƒ£ `Subscription`ì€ ë¹„ë™ê¸° `Event`ë“¤ì˜ `Chain`ì„ `Custom` ì½”ë“œì™€ `Error handling`ê³¼ í•¨ê»˜ í•œë²ˆì— ì„ ì–¸ ê°€ëŠ¥
  - 2ï¸âƒ£ `Full-Combine`ì´ë©´, ì•± ì „ì²´ì˜ ë¡œì§ì„ `subscription`ë“¤ë¡œ í‘œí˜„ ê°€ëŠ¥
  - 3ï¸âƒ£ `Subscription`ì´ í•œë²ˆ ì„ ì–¸ë˜ê³  ë‚˜ë©´ `Callback`ì„ í˜¸ì¶œí•  í•„ìš” ì—†ì´ `System`ì´ ë‹¤ ì•Œì•„ì„œ í•´ì¤Œ

### â˜˜ï¸ ë©”ëª¨ë¦¬ ê´€ë¦¬

- **_`Cancellable` `Protocol`ì„ ì‚¬ìš©í•´ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬_**
- `Subscriber`ë“¤ì€ `Cancellable`ì„ ì¤€ìˆ˜í•˜ê³  ìˆìŒ
- `Object`ë¥¼ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œ ğŸ‘‰ ëª¨ë“  `subscription`ì€ ì·¨ì†Œ ğŸ‘‰ ë¦¬ì†ŒìŠ¤ë¥¼ ë©”ëª¨ë¦¬ë¡œë¶€í„° í•´ì œ
- âœ… `subscirber`ê°€ ë” ì´ìƒ ê°’ì„ ë°›ì„ í•„ìš” ì—†ì„ ë•Œ `cancel()` ì‚¬ìš©
  > â—ï¸ `cancel()`ì„ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´, `deinit`ë  ë•Œê¹Œì§€ êµ¬ë…ë¨
- âœ… ì¥ì 
  - 1ï¸âƒ£ `Subscription`ì˜ ìˆ˜ëª…ì„ `View Controller`ê°™ì€ `Object`ì— `binding` ê¸°ëŠ¥
  - 2ï¸âƒ£ ìœ ì €ê°€ `View Controller`ë¥¼ `View Stack`ì—ì„œ `dismiss ğŸ‘‰ subscription` ì·¨ì†Œ í•´ì¤Œ
