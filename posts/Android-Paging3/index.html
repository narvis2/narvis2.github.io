<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Android Paging3 에 대하여" /><meta name="author" content="Narvis2" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="안녕하세요. Narvis2 입니다. 이번 포스팅에서는 Paging3 에 대하여 알아보도록 하겠습니다. 페이징이란 대량의 데이터를 한 번에 불러오는 것이 아니라 필요한 만큼 ““일부분을 나눠서 가져오는 것&quot;”을 말합니다. API에 따라 limit(한 번에 보여줄 데이터의 개수 제한), offset(데이터의 인덱스)등으로 페이징이 처리 되어 있습니다. 해당 포스팅에서는 Naver Open API 를 기준으로 설명 드리겠습니다." /><meta property="og:description" content="안녕하세요. Narvis2 입니다. 이번 포스팅에서는 Paging3 에 대하여 알아보도록 하겠습니다. 페이징이란 대량의 데이터를 한 번에 불러오는 것이 아니라 필요한 만큼 ““일부분을 나눠서 가져오는 것&quot;”을 말합니다. API에 따라 limit(한 번에 보여줄 데이터의 개수 제한), offset(데이터의 인덱스)등으로 페이징이 처리 되어 있습니다. 해당 포스팅에서는 Naver Open API 를 기준으로 설명 드리겠습니다." /><link rel="canonical" href="https://narvis2.github.io/posts/Android-Paging3/" /><meta property="og:url" content="https://narvis2.github.io/posts/Android-Paging3/" /><meta property="og:site_name" content="Narvis2" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-21T17:06:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Android Paging3 에 대하여" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Narvis2"},"dateModified":"2022-07-28T16:39:44+09:00","datePublished":"2022-07-21T17:06:00+09:00","description":"안녕하세요. Narvis2 입니다. 이번 포스팅에서는 Paging3 에 대하여 알아보도록 하겠습니다. 페이징이란 대량의 데이터를 한 번에 불러오는 것이 아니라 필요한 만큼 ““일부분을 나눠서 가져오는 것&quot;”을 말합니다. API에 따라 limit(한 번에 보여줄 데이터의 개수 제한), offset(데이터의 인덱스)등으로 페이징이 처리 되어 있습니다. 해당 포스팅에서는 Naver Open API 를 기준으로 설명 드리겠습니다.","headline":"Android Paging3 에 대하여","mainEntityOfPage":{"@type":"WebPage","@id":"https://narvis2.github.io/posts/Android-Paging3/"},"url":"https://narvis2.github.io/posts/Android-Paging3/"}</script><title>Android Paging3 에 대하여 | Narvis2</title><link rel="android-chrome-192x192" sizes="192x192" href="/assets/img/favicons/android-chrome-192x192.png"><link rel="android-chrome-512x512" sizes="512x512" href="/assets/img/favicons/android-chrome-512x512.png"><link rel="mstile-150x150" sizes="150x150" href="/assets/img/favicons/mstile-150x150.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Narvis2"><meta name="application-name" content="Narvis2"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/main.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Narvis2</a></div><div class="site-subtitle font-italic">개발 일지</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>정보</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/narvis2" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['narvis2','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>Android Paging3 에 대하여</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Android Paging3 에 대하여</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1658390760" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-07-21 </em> </span> <span> 업데이트 <em class="" data-ts="1658993984" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2022-07-28 </em> </span><div class="d-flex justify-content-between"> <span> By <em> narvis2 </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3143 단어"> <em>17 분</em>읽는 시간</span></div></div></div><div class="post-content"><p>안녕하세요. Narvis2 입니다.<br /> 이번 포스팅에서는 Paging3 에 대하여 알아보도록 하겠습니다.<br /> 페이징이란 대량의 데이터를 한 번에 불러오는 것이 아니라 필요한 만큼 ““<em>일부분을 나눠서 가져오는 것</em>"”을 말합니다. API에 따라 limit(한 번에 보여줄 데이터의 개수 제한), offset(데이터의 인덱스)등으로 페이징이 처리 되어 있습니다.<br /> 해당 포스팅에서는 Naver Open API 를 기준으로 설명 드리겠습니다.</p><p>해당 프로젝트의 전체 코드입니다. 👉🏿 <a href="https://github.com/narvis2/MovieSearchApp">영화검색앱</a></p><h2 id="paging-3-사용-이유"><span class="mr-2">Paging 3 사용 이유</span><a href="#paging-3-사용-이유" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>페이징 된 데이터의 메모리 캐싱으로 시스템 리소스를 효율적으로 사용할 수 있습니다.<li>요청 중복 제거 기능을 지원합니다.<li>RecyclerView 를 스크롤 할 때 밑으로 스크롤 시 nextKey에 따라 자동으로 data를 load 합니다.<li>Refresh(새로고침), Retry(재시도), 오류 처리를 지원합니다.</ul><h2 id="paging3-의-구조"><span class="mr-2">Paging3 의 구조</span><a href="#paging3-의-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>페이징 라이브러리는 <strong><a href="https://developer.android.com/topic/architecture#recommended-app-arch">안드로이드 권장 아키텍쳐</a></strong>에 맞게 설계 되어있으며, 총 3개의 Layer로 구성 됩니다. <img data-src="/assets/img/architecture/paging-structure.png" alt="Desktop View" width="100%" data-proofer-ignore><li>위의 그림을 참고하여 설명하겠습니다.<h3 id="1-repository-layer"><span class="mr-2">1. Repository Layer</span><a href="#1-repository-layer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><li>PagingSource : 각 페이지에서 데이터를 얻는 방법을 정의합니다. (Local DB에서 데이터를 저장하거나 서버에서 받아오도록 설정이 가능합니다.) 즉, 데이터를 가져오는 방법을 정의합니다.<li>RemoteMediaor : 로컬 데이터베이스를 이용해 네트워크 데이터를 캐싱하기 위해 사용됩니다.</ul><h3 id="2-viewmodel-layer"><span class="mr-2">2. ViewModel Layer</span><a href="#2-viewmodel-layer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>PagingConfig를 바탕으로 PagingSource에서 데이터를 얻어 PagingData를 만들고 Flow형으로 UI에 넘겨줍니다.<li>Pager : PagingSource를 리턴타입으로 하는 람다와 PagingConfig를 생성자로 받으며 PagingData 를 반응형 스트림으로 생성할 수 있습니다.<blockquote><p><strong><em>참고</em></strong> PagingConfig</p><ul><li>페이징 구성 클래스로 PagingSource를 구성하는 방법을 정의합니다.<li>pageSize 파라미터로 각 페이지에 얼마나 많은 데이터가 있어야 하는지 정의합니다. 즉 각 페이지에 보여줄 데이터의 갯수를 정의합니다.</ul></blockquote><li>PagingData : 페이징된 데이터를 담아두는 컨테이너 입니다. Paging Source에서 load한 결과를 저장하며 UI Layer의 PagingDataAdapter로 넘겨 줍니다. (ViewModel Layer를 UI Layer에 연결하는 구성요소 입니다.)<br /> 페이지로 나눈 데이터의 SnapShot을 보유하는 컨테이너 입니다.</ul><h3 id="3-ui-layer"><span class="mr-2">3. UI Layer</span><a href="#3-ui-layer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>PagingDataAdapter<blockquote><ul><li>PagingData 를 입력 유형으로 사용하고 내부 로드 이벤트를 수신합니다.<li>RecyclerViwe 의 Adapter 와 연결하여 사용합니다.<li>BackGround Thread에서 DiffUtil 을 사용하여 미세 조정한 후 데이터를 load 하므로 UI Thread에 새 항목을 추가하는 동안 문제가 발생하지 않습니다.</ul></blockquote></ul><h2 id="코드를-통해-알아보기-깃허브"><span class="mr-2">코드를 통해 알아보기 <a href="https://github.com/narvis2/MovieSearchApp"><span class="mr-2">깃허브</a></span><a href="#코드를-통해-알아보기-깃허브" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>해당 프로젝트는 Naver Open API 를 이용하였으며 Clean Archtecture MVVM 구조 입니다.<h3 id="1-pagingsource-정의"><span class="mr-2">1. PagingSource 정의</span><a href="#1-pagingsource-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><li>suspend fun load(params: LoadParams<Int>) : 각 페이지에서 데이터를 load 하는 방법을 정의합니다.</Int><li>nextKey : 스크롤을 밑으로 내렸을 때 더 많은 데이터를 로드할 수 있는 경우 다음 페이지에 대한 Key 입니다. 이 key를 기점으로 다음 Page의 데이터를 Load합니다. 다음 Page가 없을 경우 Null 입니다.<li>prevKey : 스크롤을 위로 올렸을 때 더 많은 데이터를 로드할 수 있는 경우 이전 페이지에 대한 Key입니다. 이 key를 기점으로 이전 Page의 데이터를 Load 합니다. 이전 Page에 load할 데이터가 없을 경우 Null 입니다.<li>params.key 는 현재 페이지의 Key로 Naver API 의 경우 처음 Index 가 1이기 때문에 null 일 경우 1을 반환합니다.(params.key는 처음 load할 경우 null입니다.)<li>getRefreshKey(state: PagingState&lt;Int, MovieInfoModel&gt;) 함수는 Adapter Refresh를 할 경우 해당 메서드가 호춛되는데 여기서는 Refresh 할 경우 처음 부터 전부 데이터를 가져오기 위해 Null을 반환합니다.<div class="language-kotlin highlighter-rouge"><div class="code-header"> <span data-label-text="Kotlin"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MovieInfoListPagingDataSource</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">remoteDataSource</span><span class="p">:</span> <span class="nc">RemoteDataSource</span><span class="p">,</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">searchQuery</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;,</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">limit</span><span class="p">:</span> <span class="nc">Int</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">PagingSource</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">,</span> <span class="nc">MovieInfoModel</span><span class="p">&gt;()</span> <span class="p">{</span>

  <span class="k">override</span> <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">load</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="nc">LoadParams</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">&gt;):</span> <span class="nc">LoadResult</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">,</span> <span class="nc">MovieInfoModel</span><span class="p">&gt;</span> <span class="p">{</span>
      <span class="kd">val</span> <span class="py">pageNumber</span> <span class="p">=</span> <span class="n">params</span><span class="p">.</span><span class="n">key</span> <span class="o">?:</span> <span class="mi">1</span>

      <span class="k">try</span> <span class="p">{</span>
          <span class="kd">val</span> <span class="py">response</span> <span class="p">=</span> <span class="nf">withContext</span><span class="p">(</span><span class="nc">Dispatchers</span><span class="p">.</span><span class="nc">IO</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">remoteDataSource</span><span class="p">.</span><span class="nf">requestSearchMovie</span><span class="p">(</span>
                  <span class="n">query</span> <span class="p">=</span> <span class="n">searchQuery</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
                  <span class="n">start</span> <span class="p">=</span> <span class="n">pageNumber</span><span class="p">,</span>
                  <span class="n">display</span> <span class="p">=</span> <span class="n">limit</span>
              <span class="p">)</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">isSuccessful</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">()</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span>
                  <span class="kd">val</span> <span class="py">movieList</span> <span class="p">=</span> <span class="n">it</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="nf">toMovieInfoListModel</span><span class="p">()</span>

                  <span class="cm">/**
                   * nextKey -&gt; naver Api의 start 는 index 이고, 현재 display(limit) 가 10 이므로
                   * 10 이후에 start 값은 11 이 되어야함
                   * 스크롤되어 페이지가 추가될때 마다 10개씩 가져온다.
                   */</span>
                  <span class="k">return</span> <span class="nc">LoadResult</span><span class="p">.</span><span class="nc">Page</span><span class="p">(</span>
                      <span class="n">data</span> <span class="p">=</span> <span class="n">movieList</span><span class="p">,</span>
                      <span class="n">prevKey</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span>
                      <span class="n">nextKey</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">size</span> <span class="p">&gt;=</span> <span class="n">limit</span><span class="p">)</span> <span class="p">{</span>
                          <span class="n">pageNumber</span> <span class="p">+</span> <span class="n">limit</span>
                      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                          <span class="k">null</span>
                      <span class="p">}</span>
                  <span class="p">)</span>
              <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="nc">LoadResult</span><span class="p">.</span><span class="nc">Error</span><span class="p">(</span>
              <span class="nc">LoadException</span><span class="p">(</span><span class="s">"영화 정보를 가져오는데 실패하였습니다."</span><span class="p">)</span>
          <span class="p">)</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
          <span class="nc">Timber</span><span class="p">.</span><span class="nf">e</span><span class="p">(</span><span class="s">"paging catch Error -&gt; ${e.message}"</span><span class="p">)</span>
          <span class="k">return</span> <span class="nc">LoadResult</span><span class="p">.</span><span class="nc">Error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">getRefreshKey</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nc">PagingState</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">,</span> <span class="nc">MovieInfoModel</span><span class="p">&gt;):</span> <span class="nc">Int</span><span class="p">?</span> <span class="p">{</span>
      <span class="c1">// 새로고침 될때 항상 전부 새로고침 되도록 null 을 return</span>
      <span class="k">return</span> <span class="k">null</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="2-repositoryimpl-레파지토리-구현"><span class="mr-2">2. RepositoryImpl (레파지토리 구현)</span><a href="#2-repositoryimpl-레파지토리-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><li>Flow&lt;PagingData<T>&gt; 객체를 Return 합니다.</T><li>pageSize 는 한 페이지당 몇 개의 Data를 보여줄지 설정합니다.<div class="language-kotlin highlighter-rouge"><div class="code-header"> <span data-label-text="Kotlin"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">NaverRepositoryImpl</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">remoteDataSource</span><span class="p">:</span> <span class="nc">RemoteDataSource</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">NaverRepository</span> <span class="p">{</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">getMovieList</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Flow</span><span class="p">&lt;</span><span class="nc">PagingData</span><span class="p">&lt;</span><span class="nc">MovieInfoModel</span><span class="p">&gt;&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nc">Pager</span><span class="p">(</span>
          <span class="n">config</span> <span class="p">=</span> <span class="nc">PagingConfig</span><span class="p">(</span><span class="n">pageSize</span> <span class="p">=</span> <span class="mi">10</span><span class="p">),</span>
          <span class="n">pagingSourceFactory</span> <span class="p">=</span> <span class="p">{</span>
              <span class="nc">MovieInfoListPagingDataSource</span><span class="p">(</span>
                  <span class="n">remoteDataSource</span> <span class="p">=</span> <span class="n">remoteDataSource</span><span class="p">,</span>
                  <span class="n">searchQuery</span> <span class="p">=</span> <span class="n">query</span><span class="p">,</span>
                  <span class="n">limit</span> <span class="p">=</span> <span class="mi">10</span>
              <span class="p">)</span>
          <span class="p">}</span>
      <span class="p">).</span><span class="n">flow</span><span class="p">.</span><span class="nf">distinctUntilChanged</span><span class="p">().</span><span class="nf">flowOn</span><span class="p">(</span><span class="nc">Dispatchers</span><span class="p">.</span><span class="nc">IO</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="3-usecase에서-받기"><span class="mr-2">3. UseCase에서 받기</span><a href="#3-usecase에서-받기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><li>해당 UseCase에서 NaverRepository를 받아 처리합니다.<li>이렇게 처리된 UseCase는 ViewModel 에서 Hilt를 통해 생성자에 주입받아 사용합니다.<div class="language-kotlin highlighter-rouge"><div class="code-header"> <span data-label-text="Kotlin"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">GetMovieListPagingDataUseCase</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">naverRepository</span><span class="p">:</span> <span class="nc">NaverRepository</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="k">operator</span> <span class="k">fun</span> <span class="nf">invoke</span><span class="p">(</span>
      <span class="n">query</span><span class="p">:</span> <span class="nc">StateFlow</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;</span>
  <span class="p">):</span> <span class="nc">Flow</span><span class="p">&lt;</span><span class="nc">PagingData</span><span class="p">&lt;</span><span class="nc">MovieInfoModel</span><span class="p">&gt;&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">naverRepository</span><span class="p">.</span><span class="nf">getMovieList</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="4-viewmodel-에서-사용"><span class="mr-2">4. ViewModel 에서 사용</span><a href="#4-viewmodel-에서-사용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><li>ViewModel 에서 GetMovieListPagingDataUseCase를 Hilt를 통해 생성자에서 받아 처리합니다.<li>해당 LoadingType 은 PagingData 의 loadState에 따라 DataBinding을 통해 UI를 업데이트 해주기 위해 사용합니다.<li>cachedIn(viewModelScope)를 사용하여 캐싱에 사용될 Coroutine Scope를 지정합니다.<div class="language-kotlin highlighter-rouge"><div class="code-header"> <span data-label-text="Kotlin"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="nd">@HiltViewModel</span>
<span class="kd">class</span> <span class="nc">HomeViewModel</span> <span class="nd">@Inject</span> <span class="k">constructor</span><span class="p">(</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">getMovieListPagingDataUseCase</span><span class="p">:</span> <span class="nc">GetMovieListPagingDataUseCase</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">BaseViewModel</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">val</span> <span class="py">loadingType</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">(</span><span class="nc">MovieLoadingType</span><span class="p">.</span><span class="nc">LOADING</span><span class="p">)</span>

  <span class="kd">val</span> <span class="py">getMovieList</span><span class="p">:</span> <span class="nc">Flow</span><span class="p">&lt;</span><span class="nc">PagingData</span><span class="p">&lt;</span><span class="nc">MovieInfoModel</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
      <span class="nf">getMovieListPagingDataUseCase</span><span class="p">(</span><span class="n">searchQuery</span><span class="p">).</span><span class="nf">cachedIn</span><span class="p">(</span><span class="n">viewModelScope</span><span class="p">)</span>
    
  <span class="k">enum</span> <span class="kd">class</span> <span class="nc">MovieLoadingType</span> <span class="p">{</span>
      <span class="nc">LOADING</span><span class="p">,</span>
      <span class="nc">EMPTY</span><span class="p">,</span>
      <span class="nc">ERROR</span><span class="p">,</span>
      <span class="nc">VIEW</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="pagingadapter-구현"><span class="mr-2">PagingAdapter 구현</span><a href="#pagingadapter-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><li>RecyclerView 의 Adapter 에 사용될 PagingAdapter를 구현합니다.<li>DiffUtil을 사용하고 있으며, 클릭 리스너를 가지고 있습니다. 또한 DataBinding으로 처리합니다.<li>DiffUtil 은 areItemsTheSame()이 ture를 반환하면, areContentsTheSame()를 호출하고 areContentsTheSame()또한 true를 반환하면 같은 객체라고 판단합니다.<div class="language-kotlin highlighter-rouge"><div class="code-header"> <span data-label-text="Kotlin"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MovieInfoAdapter</span> <span class="p">:</span> <span class="nc">PagingDataAdapter</span><span class="p">&lt;</span><span class="nc">MovieInfoModel</span><span class="p">,</span> <span class="nc">MovieInfoAdapter</span><span class="p">.</span><span class="nc">MovieInfoViewHolder</span><span class="p">&gt;(</span>
  <span class="n">diffUtil</span>
<span class="p">)</span> <span class="p">{</span>

  <span class="kd">interface</span> <span class="nc">OnItemClickListener</span> <span class="p">{</span>
      <span class="k">fun</span> <span class="nf">onClick</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nc">MovieInfoModel</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">interface</span> <span class="nc">MovieRankingPresenter</span> <span class="p">{</span>
      <span class="k">fun</span> <span class="nf">onRootClick</span><span class="p">(</span><span class="n">view</span><span class="p">:</span> <span class="nc">View</span><span class="p">?)</span>
  <span class="p">}</span>

  <span class="k">private</span> <span class="kd">var</span> <span class="py">listener</span><span class="p">:</span> <span class="nc">OnItemClickListener</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

  <span class="k">fun</span> <span class="nf">setOnItemClickListener</span><span class="p">(</span><span class="n">listener</span><span class="p">:</span> <span class="nc">OnItemClickListener</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="n">listener</span> <span class="p">=</span> <span class="n">listener</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreateViewHolder</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="nc">ViewGroup</span><span class="p">,</span> <span class="n">viewType</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">MovieInfoViewHolder</span> <span class="p">{</span>
      <span class="kd">val</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">MovieInfoItemBinding</span> <span class="p">=</span> <span class="nc">DataBindingUtil</span><span class="p">.</span><span class="nf">inflate</span><span class="p">(</span>
          <span class="nc">LayoutInflater</span><span class="p">.</span><span class="nf">from</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">context</span><span class="p">),</span>
          <span class="nc">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">movie_info_item</span><span class="p">,</span>
          <span class="n">parent</span><span class="p">,</span>
          <span class="k">false</span>
      <span class="p">)</span>

      <span class="k">return</span> <span class="nc">MovieInfoViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onBindViewHolder</span><span class="p">(</span><span class="n">holder</span><span class="p">:</span> <span class="nc">MovieInfoViewHolder</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>
      <span class="nf">getItem</span><span class="p">(</span><span class="n">position</span><span class="p">)</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span>
          <span class="n">holder</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">listener</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">inner</span> <span class="kd">class</span> <span class="nc">MovieInfoViewHolder</span><span class="p">(</span>
      <span class="k">private</span> <span class="kd">val</span> <span class="py">binding</span><span class="p">:</span> <span class="nc">MovieInfoItemBinding</span>
  <span class="p">)</span> <span class="p">:</span> <span class="nc">RecyclerView</span><span class="p">.</span><span class="nc">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">),</span> <span class="nc">MovieRankingPresenter</span> <span class="p">{</span>

      <span class="k">private</span> <span class="kd">var</span> <span class="py">listener</span><span class="p">:</span> <span class="nc">OnItemClickListener</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

      <span class="k">fun</span> <span class="nf">bind</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="nc">MovieInfoModel</span><span class="p">,</span> <span class="n">listener</span><span class="p">:</span> <span class="nc">OnItemClickListener</span><span class="p">?)</span> <span class="p">{</span>
          <span class="n">binding</span><span class="p">.</span><span class="n">info</span> <span class="p">=</span> <span class="n">info</span>
          <span class="n">binding</span><span class="p">.</span><span class="n">presenter</span> <span class="p">=</span> <span class="k">this</span>
          <span class="k">this</span><span class="p">.</span><span class="n">listener</span> <span class="p">=</span> <span class="n">listener</span>
          <span class="n">binding</span><span class="p">.</span><span class="nf">executePendingBindings</span><span class="p">()</span>
      <span class="p">}</span>

      <span class="k">override</span> <span class="k">fun</span> <span class="nf">onRootClick</span><span class="p">(</span><span class="n">view</span><span class="p">:</span> <span class="nc">View</span><span class="p">?)</span> <span class="p">{</span>
          <span class="n">binding</span><span class="p">.</span><span class="n">info</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span>
              <span class="n">listener</span><span class="o">?.</span><span class="nf">onClick</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">bindingAdapterPosition</span><span class="p">)</span>
          <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">companion</span> <span class="k">object</span> <span class="p">{</span>
      <span class="k">private</span> <span class="kd">val</span> <span class="py">diffUtil</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">DiffUtil</span><span class="p">.</span><span class="nc">ItemCallback</span><span class="p">&lt;</span><span class="nc">MovieInfoModel</span><span class="p">&gt;()</span> <span class="p">{</span>
          <span class="k">override</span> <span class="k">fun</span> <span class="nf">areItemsTheSame</span><span class="p">(</span>
              <span class="n">oldItem</span><span class="p">:</span> <span class="nc">MovieInfoModel</span><span class="p">,</span>
              <span class="n">newItem</span><span class="p">:</span> <span class="nc">MovieInfoModel</span>
          <span class="p">):</span> <span class="nc">Boolean</span> <span class="p">{</span>
              <span class="k">return</span> <span class="n">oldItem</span><span class="p">.</span><span class="n">title</span> <span class="p">==</span> <span class="n">newItem</span><span class="p">.</span><span class="n">title</span>
          <span class="p">}</span>

          <span class="k">override</span> <span class="k">fun</span> <span class="nf">areContentsTheSame</span><span class="p">(</span>
              <span class="n">oldItem</span><span class="p">:</span> <span class="nc">MovieInfoModel</span><span class="p">,</span>
              <span class="n">newItem</span><span class="p">:</span> <span class="nc">MovieInfoModel</span>
          <span class="p">):</span> <span class="nc">Boolean</span> <span class="p">{</span>
              <span class="k">return</span> <span class="n">oldItem</span> <span class="p">==</span> <span class="n">newItem</span>
          <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div></ul><h3 id="fragment-구현"><span class="mr-2">Fragment 구현</span><a href="#fragment-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>ViewModel로 부터 Flow&lt;PagingData<MovieInfoModel>&gt;를 받아 PagingDataAdapter에 넘겨줍니다.</MovieInfoModel><li>PagingAdapter의 loadState를 받아와 상황별로 UI를 컨트롤 합니다.<blockquote><p><strong><em>참고</em></strong> 🚩 loadState 상태 설명</p><ul><li>LoadState.NotLoading : 로딩이 끝나고 Error 없이 데이터를 보여주는 상태입니다.<li>LoadState.Loading : 데이터가 load 되고 있으며, 사용자에게 진행 상황을 보여줄 수 있습니다.<li>LoadState.Error : 데이터 load 중 error 발생한 상태입니다.<li>CombinedLoadStates.refresh : PagingData 의 Load 가 끝난 상태입니다.<li>CombinedLoadStates.append : PagingData 의 Load 가 끝난 상태입니다.<li>endOfPaginationReached : Load 가능 여부, true 면 더 이상 Load 를 하지 못합니다.</ul></blockquote></ul><div class="language-kotlin highlighter-rouge"><div class="code-header"> <span data-label-text="Kotlin"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
</pre><td class="rouge-code"><pre><span class="nd">@AndroidEntryPoint</span>
<span class="kd">class</span> <span class="nc">HomeFragment</span> <span class="p">:</span> <span class="nc">BaseFragment</span><span class="p">&lt;</span><span class="nc">FragmentHomeBinding</span><span class="p">,</span> <span class="nc">HomeViewModel</span><span class="p">&gt;(</span>
    <span class="nc">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">fragment_home</span>
<span class="p">),</span> <span class="nc">View</span><span class="p">.</span><span class="nc">OnFocusChangeListener</span><span class="p">,</span> <span class="nc">TextWatcher</span> <span class="p">{</span>
    <span class="k">override</span> <span class="kd">val</span> <span class="py">viewModel</span><span class="p">:</span> <span class="nc">HomeViewModel</span> <span class="k">by</span> <span class="nf">viewModels</span><span class="p">()</span>

    <span class="k">private</span> <span class="kd">val</span> <span class="py">movieInfoAdapter</span> <span class="k">by</span> <span class="nf">lazy</span> <span class="p">{</span>
        <span class="nc">MovieInfoAdapter</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">scrollLayoutManager</span><span class="p">:</span> <span class="nc">LinearLayoutManager</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">scrollReset</span> <span class="p">=</span> <span class="k">false</span>

    <span class="k">private</span> <span class="kd">val</span> <span class="py">scrollListener</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">RecyclerView</span><span class="p">.</span><span class="nc">OnScrollListener</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">onScrolled</span><span class="p">(</span><span class="n">recyclerView</span><span class="p">:</span> <span class="nc">RecyclerView</span><span class="p">,</span> <span class="n">dx</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">dy</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">super</span><span class="p">.</span><span class="nf">onScrolled</span><span class="p">(</span><span class="n">recyclerView</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
            <span class="kd">val</span> <span class="py">lastVisibleItemPosition</span> <span class="p">=</span> <span class="n">scrollLayoutManager</span><span class="p">.</span><span class="nf">findFirstVisibleItemPosition</span><span class="p">()</span>

            <span class="c1">// 스크롤 시 Scroll Top Button 을 보여줍니다.</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">lastVisibleItemPosition</span> <span class="p">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">binding</span><span class="p">.</span><span class="n">topButton</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">binding</span><span class="p">.</span><span class="n">topButton</span><span class="p">.</span><span class="nf">hide</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kd">val</span> <span class="py">keyboardObserver</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">KeyboardUtils</span><span class="p">.</span><span class="nc">SoftKeyboardToggleListener</span> <span class="p">{</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">onToggleSoftKeyboard</span><span class="p">(</span><span class="n">isVisible</span><span class="p">:</span> <span class="nc">Boolean</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// keyboard 가 보이지 않을 때 searchEt 포커스를 해제합니다.</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">isVisible</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">binding</span><span class="p">.</span><span class="n">searchEt</span><span class="p">.</span><span class="nf">let</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">isFocusable</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">it</span><span class="p">.</span><span class="nf">clearFocus</span><span class="p">()</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onAttach</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nc">Context</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onAttach</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="nc">KeyboardUtils</span><span class="p">.</span><span class="nf">addKeyboardToggleListener</span><span class="p">(</span><span class="nf">requireActivity</span><span class="p">(),</span> <span class="n">keyboardObserver</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onViewCreated</span><span class="p">(</span><span class="n">view</span><span class="p">:</span> <span class="nc">View</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onViewCreated</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">viewModel</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">viewModel</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">focusListener</span> <span class="p">=</span> <span class="k">this</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">textListener</span> <span class="p">=</span> <span class="k">this</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">noResultLayout</span><span class="p">.</span><span class="n">noResultText</span> <span class="p">=</span> <span class="n">resources</span><span class="p">.</span><span class="nf">getString</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">str_no_search</span><span class="p">)</span>

        <span class="n">binding</span><span class="p">.</span><span class="n">listView</span><span class="p">.</span><span class="nf">apply</span> <span class="p">{</span>
            <span class="n">scrollLayoutManager</span> <span class="p">=</span> <span class="n">layoutManager</span> <span class="k">as</span> <span class="nc">LinearLayoutManager</span>

            <span class="n">adapter</span> <span class="p">=</span> <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="nf">withLoadStateHeaderAndFooter</span><span class="p">(</span>
                <span class="n">header</span> <span class="p">=</span> <span class="nc">MyLoadStateAdapter</span> <span class="p">{</span> <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="nf">retry</span><span class="p">()</span> <span class="p">},</span>
                <span class="n">footer</span> <span class="p">=</span> <span class="nc">MyLoadStateAdapter</span> <span class="p">{</span> <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="nf">retry</span><span class="p">()</span> <span class="p">}</span>
            <span class="p">)</span>

            <span class="nf">addOnScrollListener</span><span class="p">(</span><span class="n">scrollListener</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1">// ViewModel로 부터 받아온 PagingData 를 PagingDataAdapter 에 넣어줍니다.</span>
        <span class="n">viewModel</span><span class="p">.</span><span class="n">getMovieList</span><span class="p">.</span><span class="nf">observeOnLifecycleStop</span><span class="p">(</span><span class="n">viewLifecycleOwner</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="nf">submitData</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1">// PagingDataAdapter 의 loadState 에 따라 UI를 컨트롤 합니다.</span>
        <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="n">loadStateFlow</span><span class="p">.</span><span class="nf">observeOnLifecycleStop</span><span class="p">(</span><span class="n">viewLifecycleOwner</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="n">loadingType</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="k">when</span> <span class="p">{</span>
                <span class="c1">// 초기 load 또는 새로고침이 실패하면 -&gt; ERROR</span>
                <span class="n">it</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">refresh</span> <span class="k">is</span> <span class="nc">LoadState</span><span class="p">.</span><span class="nc">Error</span> <span class="p">&amp;&amp;</span> <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="n">itemCount</span> <span class="p">==</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">refreshView</span><span class="p">.</span><span class="n">isRefreshing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">binding</span><span class="p">.</span><span class="n">refreshView</span><span class="p">.</span><span class="n">isRefreshing</span> <span class="p">=</span> <span class="k">false</span>
                    <span class="p">}</span>

                    <span class="nc">MovieLoadingType</span><span class="p">.</span><span class="nc">ERROR</span>
                <span class="p">}</span>

                <span class="c1">// List 가 비어있는 경우 -&gt; EMPTY</span>
                <span class="n">it</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">refresh</span> <span class="k">is</span> <span class="nc">LoadState</span><span class="p">.</span><span class="nc">NotLoading</span> <span class="p">&amp;&amp;</span> <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="n">itemCount</span> <span class="p">==</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">refreshView</span><span class="p">.</span><span class="n">isRefreshing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">binding</span><span class="p">.</span><span class="n">refreshView</span><span class="p">.</span><span class="n">isRefreshing</span> <span class="p">=</span> <span class="k">false</span>
                    <span class="p">}</span>

                    <span class="nc">MovieLoadingType</span><span class="p">.</span><span class="nc">EMPTY</span>
                <span class="p">}</span>

                <span class="c1">// Local Db 또는 Remote 에서 새로 고침이 성공한 경우 -&gt; VIEW</span>
                <span class="n">it</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">refresh</span> <span class="k">is</span> <span class="nc">LoadState</span><span class="p">.</span><span class="nc">NotLoading</span> <span class="p">-&gt;</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">listRefreshView</span><span class="p">.</span><span class="n">isRefreshing</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">binding</span><span class="p">.</span><span class="n">listRefreshView</span><span class="p">.</span><span class="n">isRefreshing</span> <span class="p">=</span> <span class="k">false</span>
                    <span class="p">}</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">scrollReset</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">scrollReset</span> <span class="p">=</span> <span class="k">false</span>
                        <span class="n">binding</span><span class="p">.</span><span class="n">listView</span><span class="p">.</span><span class="nf">stopScroll</span><span class="p">()</span>
                        <span class="n">scrollLayoutManager</span><span class="p">.</span><span class="nf">scrollToPositionWithOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">}</span>

                    <span class="nc">MovieLoadingType</span><span class="p">.</span><span class="nc">VIEW</span>
                <span class="p">}</span>

                <span class="k">else</span> <span class="p">-&gt;</span> <span class="nc">MovieLoadingType</span><span class="p">.</span><span class="nc">LOADING</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// PagingDataAdapter 의 Click Listener 입니다.</span>
        <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="nf">setOnItemClickListener</span><span class="p">(</span><span class="kd">object</span> <span class="err">: </span><span class="nc">MovieInfoAdapter</span><span class="p">.</span><span class="nc">OnItemClickListener</span> <span class="p">{</span>
            <span class="k">override</span> <span class="k">fun</span> <span class="nf">onClick</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nc">MovieInfoModel</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>
                <span class="nf">startActivity</span><span class="p">(</span>
                    <span class="nc">WebViewActivity</span><span class="p">.</span><span class="nf">getInAppBrowserIntent</span><span class="p">(</span>
                        <span class="n">activity</span> <span class="p">=</span> <span class="nf">requireActivity</span><span class="p">(),</span>
                        <span class="n">url</span> <span class="p">=</span> <span class="n">item</span><span class="p">.</span><span class="n">link</span><span class="p">,</span>
                        <span class="n">pageTitle</span> <span class="p">=</span> <span class="s">"영화 상세 정보"</span><span class="p">,</span>
                        <span class="n">showTitle</span> <span class="p">=</span> <span class="k">true</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">}</span>
        <span class="p">})</span>

        <span class="c1">// IME_ACTION_SEARCH : 키보드 search 모양 클릭 시 Listener 등록</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">searchEt</span><span class="p">.</span><span class="nf">setOnEditorActionListener</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">actionId</span><span class="p">,</span> <span class="n">_</span> <span class="p">-&gt;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">actionId</span> <span class="p">==</span> <span class="nc">EditorInfo</span><span class="p">.</span><span class="nc">IME_ACTION_SEARCH</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">viewModel</span><span class="p">.</span><span class="nf">onSearchClick</span><span class="p">()</span>
                <span class="k">true</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">false</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nf">initViewModelCallback</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">fun</span> <span class="nf">initViewModelCallback</span><span class="p">()</span> <span class="p">=</span> <span class="nf">with</span> <span class="p">(</span><span class="n">viewModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 스크롤 Top 버튼 클릭 시 해당 Callback이 실행됩니다.</span>
        <span class="n">scrollTop</span><span class="p">.</span><span class="nf">onEach</span> <span class="p">{</span>
            <span class="n">binding</span><span class="p">.</span><span class="n">listView</span><span class="p">.</span><span class="nf">stopScroll</span><span class="p">()</span>
            <span class="n">scrollLayoutManager</span><span class="p">.</span><span class="nf">scrollToPositionWithOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">}.</span><span class="nf">observeInLifecycleStop</span><span class="p">(</span><span class="n">viewLifecycleOwner</span><span class="p">)</span>

        <span class="c1">// Refresh Layout 으로 Refresh 할 경우 해당 Callback이 실행됩니다.</span>
        <span class="n">refresh</span><span class="p">.</span><span class="nf">onEach</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">refreshView</span><span class="p">.</span><span class="n">isRefreshing</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">binding</span><span class="p">.</span><span class="n">refreshView</span><span class="p">.</span><span class="n">isRefreshing</span> <span class="p">=</span> <span class="k">false</span>
            <span class="p">}</span>

            <span class="n">scrollReset</span> <span class="p">=</span> <span class="k">true</span>
            <span class="n">movieInfoAdapter</span><span class="p">.</span><span class="nf">refresh</span><span class="p">()</span>
            <span class="nf">onScrollTop</span><span class="p">()</span>
        <span class="p">}.</span><span class="nf">observeInLifecycleStop</span><span class="p">(</span><span class="n">viewLifecycleOwner</span><span class="p">)</span>
        
        <span class="c1">// 검색 버튼 클릭 시 해당 Callback이 실행됩니다.</span>
        <span class="n">search</span><span class="p">.</span><span class="nf">onEach</span> <span class="p">{</span>
            <span class="nf">onRefreshList</span><span class="p">()</span>
        <span class="p">}.</span><span class="nf">observeInLifecycleStop</span><span class="p">(</span><span class="n">viewLifecycleOwner</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// Edit Text의 OnFocusChangeListener를 정의합니다.</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onFocusChange</span><span class="p">(</span><span class="n">view</span><span class="p">:</span> <span class="nc">View</span><span class="p">?,</span> <span class="n">hasFocus</span><span class="p">:</span> <span class="nc">Boolean</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">view</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">when</span> <span class="p">(</span><span class="n">view</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="nc">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">searchEt</span> <span class="p">-&gt;</span> <span class="p">{</span>
                    <span class="n">viewModel</span><span class="p">.</span><span class="n">searchFocusView</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="n">hasFocus</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Edit Text의 TextWatcher를 정의합니다. </span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">beforeTextChanged</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">CharSequence</span><span class="p">?,</span> <span class="n">start</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">after</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onTextChanged</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">CharSequence</span><span class="p">?,</span> <span class="n">start</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">before</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">afterTextChanged</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">Editable</span><span class="p">?)</span> <span class="p">{</span>
        <span class="n">viewModel</span><span class="p">.</span><span class="n">notBlankContents</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="k">if</span> <span class="p">(!</span><span class="n">s</span><span class="p">.</span><span class="nf">isNullOrEmpty</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="p">.</span><span class="n">searchFocusView</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="k">true</span>
            <span class="k">true</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">false</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onDetach</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">KeyboardUtils</span><span class="p">.</span><span class="nf">removeKeyboardToggleListener</span><span class="p">(</span><span class="n">keyboardObserver</span><span class="p">)</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onDetach</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="마치며"><span class="mr-2">마치며</span><a href="#마치며" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>이번 포스팅에서는 Paging3를 사용하는 이유와 Clean Architecture에서 Paging3를 사용하는 방법에 대하여 알아보았습니다.<br /> 페이징이란 대량의 데이터를 한 번에 불러오는 것이 아니라 필요한 만큼 ““<em>일부분을 나눠서 가져오는 것</em>”” 이라는 점을 기억하시면 되겠습니다.<br /> 해당 프로젝트의 전체 코드는 <a href="https://github.com/narvis2/MovieSearchApp">Naver Open API 영화 검색</a>에서 확인하실수 있습니다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/android/'>Android</a>, <a href='/categories/paging3/'>Paging3</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/android/" class="post-tag no-text-decoration" >android</a> <a href="/tags/paging3/" class="post-tag no-text-decoration" >paging3</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Android+Paging3+%EC%97%90+%EB%8C%80%ED%95%98%EC%97%AC+-+Narvis2&url=https%3A%2F%2Fnarvis2.github.io%2Fposts%2FAndroid-Paging3%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Android+Paging3+%EC%97%90+%EB%8C%80%ED%95%98%EC%97%AC+-+Narvis2&u=https%3A%2F%2Fnarvis2.github.io%2Fposts%2FAndroid-Paging3%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fnarvis2.github.io%2Fposts%2FAndroid-Paging3%2F&text=Android+Paging3+%EC%97%90+%EB%8C%80%ED%95%98%EC%97%AC+-+Narvis2" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/iOS-SwiftUi-ViewModel/">iOS SwiftUi ViewModel</a><li><a href="/posts/Android-Activity-Lifecycle/">Android Activity Lifecycle 생명주기 정리</a><li><a href="/posts/Javascript-Promise-Async-Await/">JavaScript 비동기 작업 Promise, async, await 알아보기</a><li><a href="/posts/iOS-Swift-Alamofire/">iOS SwiftUi Alamofire 기초</a><li><a href="/posts/iOS-Swift-Combine-Basic/">iOS SwiftUi Combine 기초</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/react-native/">react-native</a> <a class="post-tag" href="/tags/compose/">compose</a> <a class="post-tag" href="/tags/jetpack/">jetpack</a> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/redux/">redux</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/uikit/">UIKit</a> <a class="post-tag" href="/tags/coroutine/">coroutine</a> <a class="post-tag" href="/tags/class/">class</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Android-Activity-Lifecycle/"><div class="card-body"> <em class="small" data-ts="1657672080" data-df="YYYY-MM-DD" > 2022-07-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android Activity Lifecycle 생명주기 정리</h3><div class="text-muted small"><p> Android Activity Lifecycle 동작 순서 구글 공식 홈페이지에 나와있는 이미지를 참고하시면 이해가 쉽습니다. 해당 이미지를 참고하여 Activity Lifecycle 의 순서를 보면 Activity 생성 시 onCreate() -&amp;gt; onStart() -&amp;gt; onResume() 의 순서로 콜백이 실행 되며 Activity...</p></div></div></a></div><div class="card"> <a href="/posts/Android-Fragment-Lifecycle/"><div class="card-body"> <em class="small" data-ts="1657672080" data-df="YYYY-MM-DD" > 2022-07-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android Fragment Lifecycle 생명주기 정리</h3><div class="text-muted small"><p> 이전 Activity Lifecycle 정리 포스팅에 이어 이번에는 Fragment 의 Lifecycle에 대해 알아보겠습니다. 🚩 Android Fragment Lifecycle 동작 순서 이번에도 구글 공식 홈페이지에 나와있는 이미지를 바탕으로 살펴보겠습니다. 해당 이미지를 참고하여 Fragment Lifecycle 의 순서를 보면 Fragme...</p></div></div></a></div><div class="card"> <a href="/posts/Android-handler-looper/"><div class="card-body"> <em class="small" data-ts="1657766640" data-df="YYYY-MM-DD" > 2022-07-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Android Handler, Looper 에 관하여</h3><div class="text-muted small"><p> 이번에는 Handler, Looper 에 대해서 알아보도록 하겠습니다. Android의 UI 처리는 Single Thread Model로 동작합니다. 즉, mainThread가 아닌 다른 Thread에서 UI 를 Update하는 등의 행위를 하면 안됩니다. 따라서 mainThread를 UI Thread라고 부르기도 합니다. 동작의 무결성을 보장하기 위...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Android-StateFlow/" class="btn btn-outline-primary" prompt="이전 글"><p>Android StateFlow, SharedFlow, Coroutine Channel 에 대하여</p></a> <a href="/posts/Android-Glide/" class="btn btn-outline-primary" prompt="다음 글"><p>Android Glide를 이용한 Image Load</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/narvis2">narvis2</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/react-native/">react-native</a> <a class="post-tag" href="/tags/compose/">compose</a> <a class="post-tag" href="/tags/jetpack/">jetpack</a> <a class="post-tag" href="/tags/ios/">iOS</a> <a class="post-tag" href="/tags/redux/">redux</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/uikit/">UIKit</a> <a class="post-tag" href="/tags/coroutine/">coroutine</a> <a class="post-tag" href="/tags/class/">class</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">새 버전의 콘텐츠를 사용할 수 있습니다.</p><button type="button" class="btn btn-primary" aria-label="Update"> 업데이트 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
